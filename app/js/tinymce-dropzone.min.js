/*! elabftw https://www.elabftw.net */

"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __guard__(value,transform){return void 0!==value&&null!==value?transform(value):void 0}function __guardMethod__(obj,methodName,transform){return void 0!==obj&&null!==obj&&"function"==typeof obj[methodName]?transform(obj,methodName):void 0}!function(){function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf$1.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push$2.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf$1.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document$1&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push$2.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function BookmarkManager(selection){return{getBookmark:$_djct026jcq8h2xw.curry($_5o3jsi29jcq8h3pn.getBookmark,selection),moveToBookmark:$_djct026jcq8h2xw.curry($_5o3jsi29jcq8h3pn.moveToBookmark,selection)}}function RangeUtils(dom){return{walk:function(rng,callback){return $_d9iprm5gjcq8h4ai.walk(dom,rng,callback)},split:$_269mfz3ijcq8h3x1.split,normalize:function(rng){return $_5auu293sjcq8h429.normalize(dom,rng).fold($_djct026jcq8h2xw.constant(!1),function(normalizedRng){return rng.setStart(normalizedRng.startContainer,normalizedRng.startOffset),rng.setEnd(normalizedRng.endContainer,normalizedRng.endOffset),!0})}}}var webkit,ie,ie11,ie12,gecko,mac,iDevice,android,fileApi,phone,tablet,windowsPhone,constant=function(value){return function(){return value}},$_djct026jcq8h2xw={noop:function(){},noarg:function(f){return function(){return f()}},compose:function(fa,fb){return function(){return fa(fb.apply(null,arguments))}},constant:constant,identity:function(x){return x},tripleEquals:function(a,b){return a===b},curry:function(f){for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not:function(f){return function(){return!f.apply(null,arguments)}},die:function(msg){return function(){throw new Error(msg)}},apply:function(f){return f()},call:function(f){f()},never:constant(!1),always:constant(!0)},never=$_djct026jcq8h2xw.never,always=$_djct026jcq8h2xw.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},me={fold:function(n,s){return n()},is:never,isSome:never,isNone:always,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:function(){},bind:none,flatten:none,exists:never,forall:always,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_djct026jcq8h2xw.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},$_doqc1o5jcq8h2xq={some:some,none:none,from:function(value){return null===value||void 0===value?NONE:some(value)}},rawIndexOf=function(){var pIndexOf=Array.prototype.indexOf;return void 0===pIndexOf?function(xs,x){return slowIndexOf(xs,x)}:function(xs,x){return pIndexOf.call(xs,x)}}(),contains=function(xs,x){return rawIndexOf(xs,x)>-1},map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r},each$1=function(xs,f){for(var i=0,len=xs.length;i<len;i++)f(xs[i],i,xs)},eachr=function(xs,f){for(var i=xs.length-1;i>=0;i--)f(xs[i],i,xs)},filter=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i,xs)&&r.push(x)}return r},findIndex=function(xs,pred){for(var i=0,len=xs.length;i<len;i++)if(pred(xs[i],i,xs))return $_doqc1o5jcq8h2xq.some(i);return $_doqc1o5jcq8h2xq.none()},slowIndexOf=function(xs,x){for(var i=0,len=xs.length;i<len;++i)if(xs[i]===x)return i;return-1},push=Array.prototype.push,flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!Array.prototype.isPrototypeOf(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);push.apply(r,xs[i])}return r},forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i)if(!0!==pred(xs[i],i,xs))return!1;return!0},slice=Array.prototype.slice,$_de5suq4jcq8h2x0={map:map,each:each$1,eachr:eachr,partition:function(xs,pred){for(var pass=[],fail=[],i=0,len=xs.length;i<len;i++){var x=xs[i];(pred(x,i,xs)?pass:fail).push(x)}return{pass:pass,fail:fail}},filter:filter,groupBy:function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r},indexOf:function(xs,x){var r=rawIndexOf(xs,x);return-1===r?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(r)},foldr:function(xs,f,acc){return eachr(xs,function(x){acc=f(acc,x)}),acc},foldl:function(xs,f,acc){return each$1(xs,function(x){acc=f(acc,x)}),acc},find:function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i,xs))return $_doqc1o5jcq8h2xq.some(x)}return $_doqc1o5jcq8h2xq.none()},findIndex:findIndex,flatten:flatten,bind:function(xs,f){var output=map(xs,f);return flatten(output)},forall:forall,exists:function(xs,pred){return findIndex(xs,pred).isSome()},contains:contains,equal:function(a1,a2){return a1.length===a2.length&&forall(a1,function(x,i){return x===a2[i]})},reverse:function(xs){var r=slice.call(xs,0);return r.reverse(),r},chunk:function(array,size){for(var r=[],i=0;i<array.length;i+=size){var s=array.slice(i,i+size);r.push(s)}return r},difference:function(a1,a2){return filter(a1,function(x){return!contains(a2,x)})},mapToObject:function(xs,f){for(var r={},i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i)}return r},pure:function(x){return[x]},sort:function(xs,comparator){var copy=slice.call(xs,0);return copy.sort(comparator),copy},range:function(num,f){for(var r=[],i=0;i<num;i++)r.push(f(i));return r},head:function(xs){return 0===xs.length?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(xs[0])},last:function(xs){return 0===xs.length?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(xs[xs.length-1])}},global="undefined"!=typeof window?window:Function("return this;")(),path=function(parts,scope){for(var o=void 0!==scope&&null!==scope?scope:global,i=0;i<parts.length&&void 0!==o&&null!==o;++i)o=o[parts[i]];return o},step=function(o,part){return void 0!==o[part]&&null!==o[part]||(o[part]={}),o[part]},forge=function(parts,target){for(var o=void 0!==target?target:global,i=0;i<parts.length;++i)o=step(o,parts[i]);return o},$_btztqdcjcq8h337={path:path,resolve:function(p,scope){var parts=p.split(".");return path(parts,scope)},forge:forge,namespace:function(name,target){var parts=name.split(".");return forge(parts,target)}},unsafe=function(name,scope){return $_btztqdcjcq8h337.resolve(name,scope)},$_d2wzeabjcq8h32x={getOrDie:function(name,scope){var actual=unsafe(name,scope);if(void 0===actual||null===actual)throw name+" not available on this browser";return actual}},url=function(){return $_d2wzeabjcq8h32x.getOrDie("URL")},$_tvwfrajcq8h32s={createObjectURL:function(blob){return url().createObjectURL(blob)},revokeObjectURL:function(u){url().revokeObjectURL(u)}},nav=navigator,userAgent=nav.userAgent,matchMediaQuery=function(query){return"matchMedia"in window&&matchMedia(query).matches};android=/Android/.test(userAgent),ie=(ie=!(webkit=/WebKit/.test(userAgent))&&!0&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName))&&/MSIE (\w+)\./.exec(userAgent)[1],ie11=-1!==userAgent.indexOf("Trident/")&&(-1!==userAgent.indexOf("rv:")||-1!==nav.appName.indexOf("Netscape"))&&11,ie12=-1!==userAgent.indexOf("Edge/")&&!ie&&!ie11&&12,ie=ie||ie11||ie12,gecko=!webkit&&!ie11&&/Gecko/.test(userAgent),mac=-1!==userAgent.indexOf("Mac"),iDevice=/(iPad|iPhone)/.test(userAgent),fileApi="FormData"in window&&"FileReader"in window&&"URL"in window&&!!$_tvwfrajcq8h32s.createObjectURL,phone=matchMediaQuery("only screen and (max-device-width: 480px)")&&(android||iDevice),tablet=matchMediaQuery("only screen and (min-width: 800px)")&&(android||iDevice),windowsPhone=-1!==userAgent.indexOf("Windows Phone"),ie12&&(webkit=!1);var requestAnimationFramePromise,$_1surm29jcq8h31g={opera:!1,webkit:webkit,ie:ie,gecko:gecko,mac:mac,iOS:iDevice,android:android,contentEditable:!iDevice||fileApi||parseInt(userAgent.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ie,range:window.getSelection&&"Range"in window,documentMode:ie&&!ie12?document.documentMode||7:10,fileApi:fileApi,ceFalse:!1===ie||ie>8,cacheSuffix:"",container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===ie||ie>11,desktop:!phone&&!tablet,windowsPhone:windowsPhone},promiseObj=window.Promise?window.Promise:function(){function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function handle(deferred){var me=this;null!==this._state?asap(function(){var cb=me._state?deferred.onFulfilled:deferred.onRejected;if(null!==cb){var ret;try{ret=cb(me._value)}catch(e){return void deferred.reject(e)}deferred.resolve(ret)}else(me._state?deferred.resolve:deferred.reject)(me._value)}):this._deferreds.push(deferred)}function resolve(newValue){try{if(newValue===this)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if("function"==typeof then)return void doResolve(bind(then,newValue),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=newValue,finale.call(this)}catch(e){reject.call(this,e)}}function reject(newValue){this._state=!1,this._value=newValue,finale.call(this)}function finale(){for(var i=0,len=this._deferreds.length;i<len;i++)handle.call(this,this._deferreds[i]);this._deferreds=null}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.resolve=resolve,this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=!1;try{fn(function(value){done||(done=!0,onFulfilled(value))},function(reason){done||(done=!0,onRejected(reason))})}catch(ex){if(done)return;done=!0,onRejected(ex)}}var isArray=Array.isArray||function(value){return"[object Array]"===Object.prototype.toString.call(value)},Promise=function(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(fn,bind(resolve,this),bind(reject,this))},asap=Promise.immediateFn||"function"==typeof setImmediate&&setImmediate||function(fn){setTimeout(fn,1)};return Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var me=this;return new Promise(function(resolve,reject){handle.call(me,new Handler(onFulfilled,onRejected,resolve,reject))})},Promise.all=function(){var args=Array.prototype.slice.call(1===arguments.length&&isArray(arguments[0])?arguments[0]:arguments);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise}(),requestAnimationFrame=function(callback,element){var i,requestAnimationFrameFunc=window.requestAnimationFrame,vendors=["ms","moz","webkit"];for(i=0;i<vendors.length&&!requestAnimationFrameFunc;i++)requestAnimationFrameFunc=window[vendors[i]+"RequestAnimationFrame"];requestAnimationFrameFunc||(requestAnimationFrameFunc=function(callback){window.setTimeout(callback,0)}),requestAnimationFrameFunc(callback,element)},wrappedSetTimeout=function(callback,time){return"number"!=typeof time&&(time=0),setTimeout(callback,time)},wrappedSetInterval=function(callback,time){return"number"!=typeof time&&(time=1),setInterval(callback,time)},debounce=function(callback,time){var timer,func;return func=function(){var args=arguments;clearTimeout(timer),timer=wrappedSetTimeout(function(){callback.apply(this,args)},time)},func.stop=function(){clearTimeout(timer)},func},$_51uzcpgjcq8h3db={requestAnimationFrame:function(callback,element){requestAnimationFramePromise?requestAnimationFramePromise.then(callback):requestAnimationFramePromise=new promiseObj(function(resolve){element||(element=document.body),requestAnimationFrame(resolve,element)}).then(callback)},setTimeout:wrappedSetTimeout,setInterval:wrappedSetInterval,setEditorTimeout:function(editor,callback,time){return wrappedSetTimeout(function(){editor.removed||callback()},time)},setEditorInterval:function(editor,callback,time){var timer;return timer=wrappedSetInterval(function(){editor.removed?clearInterval(timer):callback()},time)},debounce:debounce,throttle:debounce,clearInterval:function(id){return clearInterval(id)},clearTimeout:function(id){return clearTimeout(id)}},mouseEventRe=/^(?:mouse|contextmenu)|click/,deprecated={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},hasIsDefaultPrevented=function(event){return event.isDefaultPrevented===returnTrue||event.isDefaultPrevented===returnFalse},returnFalse=function(){return!1},returnTrue=function(){return!0},addEvent=function(target,name,callback,capture){target.addEventListener?target.addEventListener(name,callback,capture||!1):target.attachEvent&&target.attachEvent("on"+name,callback)},removeEvent=function(target,name,callback,capture){target.removeEventListener?target.removeEventListener(name,callback,capture||!1):target.detachEvent&&target.detachEvent("on"+name,callback)},getTargetFromShadowDom=function(event,defaultTarget){var path,target=defaultTarget;return(path=event.path)&&path.length>0&&(target=path[0]),event.deepPath&&(path=event.deepPath())&&path.length>0&&(target=path[0]),target},fix=function(originalEvent,data){var name,event=data||{};for(name in originalEvent)deprecated[name]||(event[name]=originalEvent[name]);if(event.target||(event.target=event.srcElement||document),$_1surm29jcq8h31g.experimentalShadowDom&&(event.target=getTargetFromShadowDom(originalEvent,event.target)),originalEvent&&mouseEventRe.test(originalEvent.type)&&void 0===originalEvent.pageX&&void 0!==originalEvent.clientX){var eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body;event.pageX=originalEvent.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=originalEvent.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}return event.preventDefault=function(){event.isDefaultPrevented=returnTrue,originalEvent&&(originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1)},event.stopPropagation=function(){event.isPropagationStopped=returnTrue,originalEvent&&(originalEvent.stopPropagation?originalEvent.stopPropagation():originalEvent.cancelBubble=!0)},event.stopImmediatePropagation=function(){event.isImmediatePropagationStopped=returnTrue,event.stopPropagation()},!1===hasIsDefaultPrevented(event)&&(event.isDefaultPrevented=returnFalse,event.isPropagationStopped=returnFalse,event.isImmediatePropagationStopped=returnFalse),void 0===event.metaKey&&(event.metaKey=!1),event},bindOnReady=function(win,callback,eventUtils){var doc=win.document,event={type:"ready"};if(eventUtils.domLoaded)callback(event);else{var isDocReady=function(){return"complete"===doc.readyState||"interactive"===doc.readyState&&doc.body},readyHandler=function(){eventUtils.domLoaded||(eventUtils.domLoaded=!0,callback(event))},waitForDomLoaded=function(){isDocReady()&&(removeEvent(doc,"readystatechange",waitForDomLoaded),readyHandler())},tryScroll=function(){try{doc.documentElement.doScroll("left")}catch(ex){return void $_51uzcpgjcq8h3db.setTimeout(tryScroll)}readyHandler()};!doc.addEventListener||$_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<11?(addEvent(doc,"readystatechange",waitForDomLoaded),doc.documentElement.doScroll&&win.self===win.top&&tryScroll()):isDocReady()?readyHandler():addEvent(win,"DOMContentLoaded",readyHandler),addEvent(win,"load",readyHandler)}},EventUtils=function(){var count,expando,hasFocusIn,hasMouseEnterLeave,mouseEnterLeave,self=this,events={};expando="mce-data-"+(+new Date).toString(32),hasMouseEnterLeave="onmouseenter"in document.documentElement,hasFocusIn="onfocusin"in document.documentElement,mouseEnterLeave={mouseenter:"mouseover",mouseleave:"mouseout"},count=1,self.domLoaded=!1,self.events=events;var executeHandlers=function(evt,id){var callbackList,i,l,callback,container=events[id];if(callbackList=container&&container[evt.type])for(i=0,l=callbackList.length;i<l;i++)if((callback=callbackList[i])&&!1===callback.func.call(callback.scope,evt)&&evt.preventDefault(),evt.isImmediatePropagationStopped())return};self.bind=function(target,names,callback,scope){var id,callbackList,i,name,fakeName,nativeHandler,capture,win=window;if(target&&3!==target.nodeType&&8!==target.nodeType){for(target[expando]?id=target[expando]:(id=count++,target[expando]=id,events[id]={}),scope=scope||target,i=(names=names.split(" ")).length;i--;)nativeHandler=function(evt){executeHandlers(fix(evt||win.event),id)},fakeName=capture=!1,"DOMContentLoaded"===(name=names[i])&&(name="ready"),self.domLoaded&&"ready"===name&&"complete"===target.readyState?callback.call(scope,fix({type:name})):(hasMouseEnterLeave||(fakeName=mouseEnterLeave[name])&&(nativeHandler=function(evt){var current,related;if(current=evt.currentTarget,(related=evt.relatedTarget)&&current.contains)related=current.contains(related);else for(;related&&related!==current;)related=related.parentNode;related||((evt=fix(evt||win.event)).type="mouseout"===evt.type?"mouseleave":"mouseenter",evt.target=current,executeHandlers(evt,id))}),hasFocusIn||"focusin"!==name&&"focusout"!==name||(capture=!0,fakeName="focusin"===name?"focus":"blur",nativeHandler=function(evt){(evt=fix(evt||win.event)).type="focus"===evt.type?"focusin":"focusout",executeHandlers(evt,id)}),(callbackList=events[id][name])?"ready"===name&&self.domLoaded?callback({type:name}):callbackList.push({func:callback,scope:scope}):(events[id][name]=callbackList=[{func:callback,scope:scope}],callbackList.fakeName=fakeName,callbackList.capture=capture,callbackList.nativeHandler=nativeHandler,"ready"===name?bindOnReady(target,nativeHandler,self):addEvent(target,fakeName||name,nativeHandler,capture)));return target=callbackList=0,callback}},self.unbind=function(target,names,callback){var id,callbackList,i,ci,name,eventMap;if(!target||3===target.nodeType||8===target.nodeType)return self;if(id=target[expando]){if(eventMap=events[id],names){for(i=(names=names.split(" ")).length;i--;)if(name=names[i],callbackList=eventMap[name]){if(callback)for(ci=callbackList.length;ci--;)if(callbackList[ci].func===callback){var nativeHandler=callbackList.nativeHandler,fakeName=callbackList.fakeName,capture=callbackList.capture;(callbackList=callbackList.slice(0,ci).concat(callbackList.slice(ci+1))).nativeHandler=nativeHandler,callbackList.fakeName=fakeName,callbackList.capture=capture,eventMap[name]=callbackList}callback&&0!==callbackList.length||(delete eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture))}}else{for(name in eventMap)callbackList=eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);eventMap={}}for(name in eventMap)return self;delete events[id];try{delete target[expando]}catch(ex){target[expando]=null}}return self},self.fire=function(target,name,args){var id;if(!target||3===target.nodeType||8===target.nodeType)return self;(args=fix(null,args)).type=name,args.target=target;do{(id=target[expando])&&executeHandlers(args,id),target=target.parentNode||target.ownerDocument||target.defaultView||target.parentWindow}while(target&&!args.isPropagationStopped());return self},self.clean=function(target){var i,children,unbind=self.unbind;if(!target||3===target.nodeType||8===target.nodeType)return self;if(target[expando]&&unbind(target),target.getElementsByTagName||(target=target.document),target&&target.getElementsByTagName)for(unbind(target),i=(children=target.getElementsByTagName("*")).length;i--;)(target=children[i])[expando]&&unbind(target);return self},self.destroy=function(){events={}},self.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};(EventUtils.Event=new EventUtils).bind(window,"ready",function(){});var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document$1,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,contains$1,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},strundefined="undefined",MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push$2=arr.push,slice$2=arr.slice,indexOf$1=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr$1=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push$2.apply(arr=slice$2.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push$2={apply:arr.length?function(target,els){push_native.apply(target,slice$2.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}var Sizzle=function(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document$1&&setDocument(context),context=context||document$1,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr$1.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains$1(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push$2.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push$2.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push$2.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)};support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document$1&&9===doc.nodeType&&doc.documentElement?(document$1=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent!==function(win){try{return win.top}catch(ex){}return null}(parent)&&(parent.addEventListener?parent.addEventListener("unload",function(){setDocument()},!1):parent.attachEvent&&parent.attachEvent("onunload",function(){setDocument()})),support.attributes=!0,support.getElementsByTagName=!0,support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=!0,Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],support.disconnectedMatch=!0,rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains$1=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains$1(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains$1(preferredDoc,b)?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document$1},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document$1&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=(void 0).call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document$1,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document$1&&setDocument(context),contains$1(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document$1&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf$1.call(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document$1.activeElement&&(!document$1.hasFocus||document$1.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);(cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if((tokens=match[0]=match[0].slice(0)).length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push$2.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=!0;var isArray=Array.isArray||function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},each$5=function(o,cb,s){var n,l;if(!o)return 0;if(s=s||o,void 0!==o.length){for(n=0,l=o.length;n<l;n++)if(!1===cb.call(s,o[n],n,o))return 0}else for(n in o)if(o.hasOwnProperty(n)&&!1===cb.call(s,o[n],n,o))return 0;return 1},findIndex$1=function(array,predicate,thisArg){var i,l;for(i=0,l=array.length;i<l;i++)if(predicate.call(thisArg,array[i],i,array))return i;return-1},$_292trzkjcq8h3fz={isArray:isArray,toArray:function(obj){var i,l,array=obj;if(!isArray(obj))for(array=[],i=0,l=obj.length;i<l;i++)array[i]=obj[i];return array},each:each$5,map:function(array,callback){var out=[];return each$5(array,function(item,index){out.push(callback(item,index,array))}),out},filter:function(a,f){var o=[];return each$5(a,function(v,index){f&&!f(v,index,a)||o.push(v)}),o},indexOf:function(a,v){var i,l;if(a)for(i=0,l=a.length;i<l;i++)if(a[i]===v)return i;return-1},reduce:function(collection,iteratee,accumulator,thisArg){var i=0;for(arguments.length<3&&(accumulator=collection[0]);i<collection.length;i++)accumulator=iteratee.call(thisArg,accumulator,collection[i],i);return accumulator},findIndex:findIndex$1,find:function(array,predicate,thisArg){var idx=findIndex$1(array,predicate,thisArg);if(-1!==idx)return array[idx]},last:function(collection){return collection[collection.length-1]}},whiteSpaceRegExp$2=/^\s*|\s*$/g,trim$1=function(str){return null===str||void 0===str?"":(""+str).replace(whiteSpaceRegExp$2,"")},is$1=function(obj,type){return type?!("array"!==type||!$_292trzkjcq8h3fz.isArray(obj))||typeof obj===type:void 0!==obj},walk=function(o,f,n,s){s=s||this,o&&(n&&(o=o[n]),$_292trzkjcq8h3fz.each(o,function(o,i){if(!1===f.call(s,o,i,n))return!1;walk(o,f,n,s)}))},$_topwtjjcq8h3fq={trim:trim$1,isArray:$_292trzkjcq8h3fz.isArray,is:is$1,toArray:$_292trzkjcq8h3fz.toArray,makeMap:function(items,delim,map){var i;for(items=items||[],delim=delim||",","string"==typeof items&&(items=items.split(delim)),map=map||{},i=items.length;i--;)map[items[i]]={};return map},each:$_292trzkjcq8h3fz.each,map:$_292trzkjcq8h3fz.map,grep:$_292trzkjcq8h3fz.filter,inArray:$_292trzkjcq8h3fz.indexOf,hasOwn:function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},extend:function(obj,ext){for(var x=[],_i=2;_i<arguments.length;_i++)x[_i-2]=arguments[_i];var i,l,name,value,args=arguments;for(i=1,l=args.length;i<l;i++){ext=args[i];for(name in ext)ext.hasOwnProperty(name)&&void 0!==(value=ext[name])&&(obj[name]=value)}return obj},create:function(s,p,root){var sp,ns,cn,scn,c,self=this,de=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),cn=s[3].match(/(^|\.)(\w+)$/i)[2],!(ns=self.createNS(s[3].replace(/\.\w+$/,""),root))[cn]){if("static"===s[2])return ns[cn]=p,void(this.onCreate&&this.onCreate(s[2],s[3],ns[cn]));p[cn]||(p[cn]=function(){},de=1),ns[cn]=p[cn],self.extend(ns[cn].prototype,p),s[5]&&(sp=self.resolve(s[5]).prototype,scn=s[5].match(/\.(\w+)$/i)[1],c=ns[cn],ns[cn]=de?function(){return sp[scn].apply(this,arguments)}:function(){return this.parent=sp[scn],c.apply(this,arguments)},ns[cn].prototype[cn]=ns[cn],self.each(sp,function(f,n){ns[cn].prototype[n]=sp[n]}),self.each(p,function(f,n){sp[n]?ns[cn].prototype[n]=function(){return this.parent=sp[n],f.apply(this,arguments)}:n!==cn&&(ns[cn].prototype[n]=f)})),self.each(p.static,function(f,n){ns[cn][n]=f})}},walk:walk,createNS:function(n,o){var i,v;for(o=o||window,n=n.split("."),i=0;i<n.length;i++)o[v=n[i]]||(o[v]={}),o=o[v];return o},resolve:function(n,o){var i,l;for(o=o||window,i=0,l=(n=n.split(".")).length;i<l&&(o=o[n[i]]);i++);return o},explode:function(s,d){return!s||is$1(s,"array")?s:$_292trzkjcq8h3fz.map(s.split(d||","),trim$1)},_addCacheSuffix:function(url){var cacheSuffix=$_1surm29jcq8h31g.cacheSuffix;return cacheSuffix&&(url+=(-1===url.indexOf("?")?"?":"&")+cacheSuffix),url}},doc=document,push$1=Array.prototype.push,slice$1=Array.prototype.slice,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Event=EventUtils.Event,skipUniques=$_topwtjjcq8h3fq.makeMap("children,contents,next,prev"),isDefined=function(obj){return void 0!==obj},isString=function(obj){return"string"==typeof obj},isWindow=function(obj){return obj&&obj===obj.window},createFragment=function(html,fragDoc){var frag,node,container;for(container=(fragDoc=fragDoc||doc).createElement("div"),frag=fragDoc.createDocumentFragment(),container.innerHTML=html;node=container.firstChild;)frag.appendChild(node);return frag},domManipulate=function(targetNodes,sourceItem,callback,reverse){var i;if(isString(sourceItem))sourceItem=createFragment(sourceItem,getElementDocument(targetNodes[0]));else if(sourceItem.length&&!sourceItem.nodeType){if(sourceItem=DomQuery.makeArray(sourceItem),reverse)for(i=sourceItem.length-1;i>=0;i--)domManipulate(targetNodes,sourceItem[i],callback,reverse);else for(i=0;i<sourceItem.length;i++)domManipulate(targetNodes,sourceItem[i],callback,reverse);return targetNodes}if(sourceItem.nodeType)for(i=targetNodes.length;i--;)callback.call(targetNodes[i],sourceItem);return targetNodes},hasClass=function(node,className){return node&&className&&-1!==(" "+node.className+" ").indexOf(" "+className+" ")},wrap=function(elements,wrapper,all){var lastParent,newWrapper;return wrapper=DomQuery(wrapper)[0],elements.each(function(){var self=this;all&&lastParent===self.parentNode?newWrapper.appendChild(self):(lastParent=self.parentNode,newWrapper=wrapper.cloneNode(!1),self.parentNode.insertBefore(newWrapper,self),newWrapper.appendChild(self))}),elements},numericCssMap=$_topwtjjcq8h3fq.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),booleanMap=$_topwtjjcq8h3fq.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),propFix={for:"htmlFor",class:"className",readonly:"readOnly"},cssFix={float:"cssFloat"},attrHooks={},cssHooks={},DomQuery=function(selector,context){return new DomQuery.fn.init(selector,context)},whiteSpaceRegExp$1=/^\s*|\s*$/g,trim=function(str){return null===str||void 0===str?"":(""+str).replace(whiteSpaceRegExp$1,"")},each$4=function(obj,callback){var length,key,i,value;if(obj)if(void 0===(length=obj.length)){for(key in obj)if(obj.hasOwnProperty(key)&&(value=obj[key],!1===callback.call(value,key,value)))break}else for(i=0;i<length&&(value=obj[i],!1!==callback.call(value,i,value));i++);return obj},grep$2=function(array,callback){var out=[];return each$4(array,function(i,item){callback(item,i)&&out.push(item)}),out},getElementDocument=function(element){return element?9===element.nodeType?element:element.ownerDocument:doc};DomQuery.fn=DomQuery.prototype={constructor:DomQuery,selector:"",context:null,length:0,init:function(selector,context){var match,node,self=this;if(!selector)return self;if(selector.nodeType)return self.context=self[0]=selector,self.length=1,self;if(context&&context.nodeType)self.context=context;else{if(context)return DomQuery(selector).attr(context);self.context=context=document}if(isString(selector)){if(self.selector=selector,!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector)))return DomQuery(context).find(selector);if(match[1])for(node=createFragment(selector,getElementDocument(context)).firstChild;node;)push$1.call(self,node),node=node.nextSibling;else{if(!(node=getElementDocument(context).getElementById(match[2])))return self;if(node.id!==match[2])return self.find(selector);self.length=1,self[0]=node}}else this.add(selector,!1);return self},toArray:function(){return $_topwtjjcq8h3fq.toArray(this)},add:function(items,sort){var nodes,i,self=this;if(isString(items))return self.add(DomQuery(items));if(!1!==sort)for(nodes=DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items))),self.length=nodes.length,i=0;i<nodes.length;i++)self[i]=nodes[i];else push$1.apply(self,DomQuery.makeArray(items));return self},attr:function(name,value){var hook,self=this;if("object"==typeof name)each$4(name,function(name,value){self.attr(name,value)});else{if(!isDefined(value)){if(self[0]&&1===self[0].nodeType){if((hook=attrHooks[name])&&hook.get)return hook.get(self[0],name);if(booleanMap[name])return self.prop(name)?name:void 0;null===(value=self[0].getAttribute(name,2))&&(value=void 0)}return value}this.each(function(){var hook;if(1===this.nodeType){if((hook=attrHooks[name])&&hook.set)return void hook.set(this,value);null===value?this.removeAttribute(name,2):this.setAttribute(name,value,2)}})}return self},removeAttr:function(name){return this.attr(name,null)},prop:function(name,value){var self=this;if("object"==typeof(name=propFix[name]||name))each$4(name,function(name,value){self.prop(name,value)});else{if(!isDefined(value))return self[0]&&self[0].nodeType&&name in self[0]?self[0][name]:value;this.each(function(){1===this.nodeType&&(this[name]=value)})}return self},css:function(name,value){var elm,hook,self=this,camel=function(name){return name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},dashed=function(name){return name.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof name)each$4(name,function(name,value){self.css(name,value)});else if(isDefined(value))name=camel(name),"number"!=typeof value||numericCssMap[name]||(value=value.toString()+"px"),self.each(function(){var style=this.style;if((hook=cssHooks[name])&&hook.set)hook.set(this,value);else{try{this.style[cssFix[name]||name]=value}catch(ex){}null!==value&&""!==value||(style.removeProperty?style.removeProperty(dashed(name)):style.removeAttribute(name))}});else{if(elm=self[0],(hook=cssHooks[name])&&hook.get)return hook.get(elm);if(elm.ownerDocument.defaultView)try{return elm.ownerDocument.defaultView.getComputedStyle(elm,null).getPropertyValue(dashed(name))}catch(ex){return}else if(elm.currentStyle)return elm.currentStyle[camel(name)]}return self},remove:function(){for(var node,self=this,i=this.length;i--;)node=self[i],Event.clean(node),node.parentNode&&node.parentNode.removeChild(node);return this},empty:function(){for(var node,self=this,i=this.length;i--;)for(node=self[i];node.firstChild;)node.removeChild(node.firstChild);return this},html:function(value){var i,self=this;if(isDefined(value)){i=self.length;try{for(;i--;)self[i].innerHTML=value}catch(ex){DomQuery(self[i]).empty().append(value)}return self}return self[0]?self[0].innerHTML:""},text:function(value){var i,self=this;if(isDefined(value)){for(i=self.length;i--;)"innerText"in self[i]?self[i].innerText=value:self[0].textContent=value;return self}return self[0]?self[0].innerText||self[0].textContent:""},append:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(node)})},prepend:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(node,this.firstChild)},!0)},before:function(){var self=this;return self[0]&&self[0].parentNode?domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this)}):self},after:function(){var self=this;return self[0]&&self[0].parentNode?domManipulate(self,arguments,function(node){this.parentNode.insertBefore(node,this.nextSibling)},!0):self},appendTo:function(val){return DomQuery(val).append(this),this},prependTo:function(val){return DomQuery(val).prepend(this),this},replaceWith:function(content){return this.before(content).remove()},wrap:function(content){return wrap(this,content)},wrapAll:function(content){return wrap(this,content,!0)},wrapInner:function(content){return this.each(function(){DomQuery(this).contents().wrapAll(content)}),this},unwrap:function(){return this.parent().each(function(){DomQuery(this).replaceWith(this.childNodes)})},clone:function(){var result=[];return this.each(function(){result.push(this.cloneNode(!0))}),DomQuery(result)},addClass:function(className){return this.toggleClass(className,!0)},removeClass:function(className){return this.toggleClass(className,!1)},toggleClass:function(className,state){var self=this;return"string"!=typeof className?self:(-1!==className.indexOf(" ")?each$4(className.split(" "),function(){self.toggleClass(this,state)}):self.each(function(index,node){var existingClassName,classState;(classState=hasClass(node,className))!==state&&(existingClassName=node.className,classState?node.className=trim((" "+existingClassName+" ").replace(" "+className+" "," ")):node.className+=existingClassName?" "+className:className)}),self)},hasClass:function(className){return hasClass(this[0],className)},each:function(callback){return each$4(this,callback)},on:function(name,callback){return this.each(function(){Event.bind(this,name,callback)})},off:function(name,callback){return this.each(function(){Event.unbind(this,name,callback)})},trigger:function(name){return this.each(function(){"object"==typeof name?Event.fire(this,name.type,name):Event.fire(this,name)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new DomQuery(slice$1.apply(this,arguments))},eq:function(index){return-1===index?this.slice(index):this.slice(index,+index+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(selector){var i,l,ret=[];for(i=0,l=this.length;i<l;i++)DomQuery.find(selector,this[i],ret);return DomQuery(ret)},filter:function(selector){return DomQuery("function"==typeof selector?grep$2(this.toArray(),function(item,i){return selector(i,item)}):DomQuery.filter(selector,this.toArray()))},closest:function(selector){var result=[];return selector instanceof DomQuery&&(selector=selector[0]),this.each(function(i,node){for(;node;){if("string"==typeof selector&&DomQuery(node).is(selector)){result.push(node);break}if(node===selector){result.push(node);break}node=node.parentNode}}),DomQuery(result)},offset:function(offset){var elm,doc,docElm,pos,x=0,y=0;return offset?this.css(offset):((elm=this[0])&&(docElm=(doc=elm.ownerDocument).documentElement,elm.getBoundingClientRect&&(x=(pos=elm.getBoundingClientRect()).left+(docElm.scrollLeft||doc.body.scrollLeft)-docElm.clientLeft,y=pos.top+(docElm.scrollTop||doc.body.scrollTop)-docElm.clientTop)),{left:x,top:y})},push:push$1,sort:[].sort,splice:[].splice},$_topwtjjcq8h3fq.extend(DomQuery,{extend:$_topwtjjcq8h3fq.extend,makeArray:function(object){return isWindow(object)||object.nodeType?[object]:$_topwtjjcq8h3fq.toArray(object)},inArray:function(item,array){var i;if(array.indexOf)return array.indexOf(item);for(i=array.length;i--;)if(array[i]===item)return i;return-1},isArray:$_topwtjjcq8h3fq.isArray,each:each$4,trim:trim,grep:grep$2,find:Sizzle,expr:Sizzle.selectors,unique:Sizzle.uniqueSort,text:Sizzle.getText,contains:Sizzle.contains,filter:function(expr,elems,not){var i=elems.length;for(not&&(expr=":not("+expr+")");i--;)1!==elems[i].nodeType&&elems.splice(i,1);return elems=1===elems.length?DomQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:DomQuery.find.matches(expr,elems)}});var dir=function(el,prop,until){var matched=[],cur=el[prop];for("string"!=typeof until&&until instanceof DomQuery&&(until=until[0]);cur&&9!==cur.nodeType;){if(void 0!==until){if(cur===until)break;if("string"==typeof until&&DomQuery(cur).is(until))break}1===cur.nodeType&&matched.push(cur),cur=cur[prop]}return matched},sibling=function(node,siblingName,nodeType,until){var result=[];for(until instanceof DomQuery&&(until=until[0]);node;node=node[siblingName])if(!nodeType||node.nodeType===nodeType){if(void 0!==until){if(node===until)break;if("string"==typeof until&&DomQuery(node).is(until))break}result.push(node)}return result},firstSibling=function(node,siblingName,nodeType){for(node=node[siblingName];node;node=node[siblingName])if(node.nodeType===nodeType)return node;return null};each$4({parent:function(node){var parent=node.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(node){return dir(node,"parentNode")},next:function(node){return firstSibling(node,"nextSibling",1)},prev:function(node){return firstSibling(node,"previousSibling",1)},children:function(node){return sibling(node.firstChild,"nextSibling",1)},contents:function(node){return $_topwtjjcq8h3fq.toArray(("iframe"===node.nodeName?node.contentDocument||node.contentWindow.document:node).childNodes)}},function(name,fn){DomQuery.fn[name]=function(selector){var result=[];return this.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),this.length>1&&(skipUniques[name]||(result=DomQuery.unique(result)),0===name.indexOf("parents")&&(result=result.reverse())),result=DomQuery(result),selector?result.filter(selector):result}}),each$4({parentsUntil:function(node,until){return dir(node,"parentNode",until)},nextUntil:function(node,until){return sibling(node,"nextSibling",1,until).slice(1)},prevUntil:function(node,until){return sibling(node,"previousSibling",1,until).slice(1)}},function(name,fn){DomQuery.fn[name]=function(selector,filter){var result=[];return this.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),this.length>1&&(result=DomQuery.unique(result),0!==name.indexOf("parents")&&"prevUntil"!==name||(result=result.reverse())),result=DomQuery(result),filter?result.filter(filter):result}}),DomQuery.fn.is=function(selector){return!!selector&&this.filter(selector).length>0},DomQuery.fn.init.prototype=DomQuery.fn,DomQuery.overrideDefaults=function(callback){var defaults,sub=function(selector,context){return defaults=defaults||callback(),0===arguments.length&&(selector=defaults.element),context||(context=defaults.context),new sub.fn.init(selector,context)};return DomQuery.extend(sub,this),sub};var appendHooks=function(targetHooks,prop,hooks){each$4(hooks,function(name,func){targetHooks[name]=targetHooks[name]||{},targetHooks[name][prop]=func})};$_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<8&&(appendHooks(attrHooks,"get",{maxlength:function(elm){var value=elm.maxLength;if(2147483647!==value)return value},size:function(elm){var value=elm.size;if(20!==value)return value},class:function(elm){return elm.className},style:function(elm){var value=elm.style.cssText;if(0!==value.length)return value}}),appendHooks(attrHooks,"set",{class:function(elm,value){elm.className=value},style:function(elm,value){elm.style.cssText=value}})),$_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<9&&(cssFix.float="styleFloat",appendHooks(cssHooks,"set",{opacity:function(elm,value){var style=elm.style;null===value||""===value?style.removeAttribute("filter"):(style.zoom=1,style.filter="alpha(opacity="+100*value+")")}})),DomQuery.attrHooks=attrHooks,DomQuery.cssHooks=cssHooks;var namedEntities,baseEntities,reverseEntities,$_6ztiwanjcq8h3ge={cached:function(f){var r,called=!1;return function(){return called||(called=!0,r=f.apply(null,arguments)),r}}},firstMatch=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}},find$2=function(regexes,agent){var r=firstMatch(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu$1(group(1),group(2))},unknown$1=function(){return nu$1(0,0)},nu$1=function(major,minor){return{major:major,minor:minor}},$_c23cq1qjcq8h3gk={nu:nu$1,detect:function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown$1():find$2(versionRegexes,cleanedAgent)},unknown:unknown$1},isBrowser=function(name,current){return function(){return current===name}},nu=function(info){var current=info.current;return{current:current,version:info.version,isEdge:isBrowser("Edge",current),isChrome:isBrowser("Chrome",current),isIE:isBrowser("IE",current),isOpera:isBrowser("Opera",current),isFirefox:isBrowser("Firefox",current),isSafari:isBrowser("Safari",current)}},$_2740anpjcq8h3gh={unknown:function(){return nu({current:void 0,version:$_c23cq1qjcq8h3gk.unknown()})},nu:nu,edge:$_djct026jcq8h2xw.constant("Edge"),chrome:$_djct026jcq8h2xw.constant("Chrome"),ie:$_djct026jcq8h2xw.constant("IE"),opera:$_djct026jcq8h2xw.constant("Opera"),firefox:$_djct026jcq8h2xw.constant("Firefox"),safari:$_djct026jcq8h2xw.constant("Safari")},isOS=function(name,current){return function(){return current===name}},nu$2=function(info){var current=info.current;return{current:current,version:info.version,isWindows:isOS("Windows",current),isiOS:isOS("iOS",current),isAndroid:isOS("Android",current),isOSX:isOS("OSX",current),isLinux:isOS("Linux",current),isSolaris:isOS("Solaris",current),isFreeBSD:isOS("FreeBSD",current)}},$_5beqx1rjcq8h3gm={unknown:function(){return nu$2({current:void 0,version:$_c23cq1qjcq8h3gk.unknown()})},nu:nu$2,windows:$_djct026jcq8h2xw.constant("Windows"),ios:$_djct026jcq8h2xw.constant("iOS"),android:$_djct026jcq8h2xw.constant("Android"),linux:$_djct026jcq8h2xw.constant("Linux"),osx:$_djct026jcq8h2xw.constant("OSX"),solaris:$_djct026jcq8h2xw.constant("Solaris"),freebsd:$_djct026jcq8h2xw.constant("FreeBSD")},DeviceType=function(os,browser,userAgent){var isiPad=os.isiOS()&&!0===/ipad/i.test(userAgent),isiPhone=os.isiOS()&&!isiPad,isAndroid3=os.isAndroid()&&3===os.version.major,isAndroid4=os.isAndroid()&&4===os.version.major,isTablet=isiPad||isAndroid3||isAndroid4&&!0===/mobile/i.test(userAgent),isTouch=os.isiOS()||os.isAndroid(),isPhone=isTouch&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&!1===/safari/i.test(userAgent);return{isiPad:$_djct026jcq8h2xw.constant(isiPad),isiPhone:$_djct026jcq8h2xw.constant(isiPhone),isTablet:$_djct026jcq8h2xw.constant(isTablet),isPhone:$_djct026jcq8h2xw.constant(isPhone),isTouch:$_djct026jcq8h2xw.constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:$_djct026jcq8h2xw.constant(iOSwebview)}},detect$3=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return $_de5suq4jcq8h2x0.find(candidates,function(candidate){return candidate.search(agent)})},$_g1ebfgtjcq8h3gt={detectBrowser:function(browsers,userAgent){return detect$3(browsers,userAgent).map(function(browser){var version=$_c23cq1qjcq8h3gk.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}})},detectOs:function(oses,userAgent){return detect$3(oses,userAgent).map(function(os){var version=$_c23cq1qjcq8h3gk.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}})}},$_64ssrowjcq8h3hk={addToStart:function(str,prefix){return prefix+str},addToEnd:function(str,suffix){return str+suffix},removeFromStart:function(str,numChars){return str.substring(numChars)},removeFromEnd:function(str,numChars){return str.substring(0,str.length-numChars)}},$_fagk2fxjcq8h3hn={first:function(str,count){return str.substr(0,count)},last:function(str,count){return str.substr(str.length-count,str.length)},head:function(str){return""===str?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(str.substr(0,1))},tail:function(str){return""===str?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(str.substring(1))}},checkRange=function(str,substr,start){return""===substr||!(str.length<substr.length)&&str.substr(start,start+substr.length)===substr},startsWith=function(str,prefix){return checkRange(str,prefix,0)},endsWith=function(str,suffix){return checkRange(str,suffix,str.length-suffix.length)},$_cwgwqavjcq8h3h4={supplant:function(str,obj){var isStringOrNumber=function(a){var t=typeof a;return"string"===t||"number"===t};return str.replace(/\${([^{}]*)}/g,function(a,b){var value=obj[b];return isStringOrNumber(value)?value:a})},startsWith:startsWith,removeLeading:function(str,prefix){return startsWith(str,prefix)?$_64ssrowjcq8h3hk.removeFromStart(str,prefix.length):str},removeTrailing:function(str,prefix){return endsWith(str,prefix)?$_64ssrowjcq8h3hk.removeFromEnd(str,prefix.length):str},ensureLeading:function(str,prefix){return startsWith(str,prefix)?str:$_64ssrowjcq8h3hk.addToStart(str,prefix)},ensureTrailing:function(str,prefix){return endsWith(str,prefix)?str:$_64ssrowjcq8h3hk.addToEnd(str,prefix)},endsWith:endsWith,contains:function(str,substr){return-1!==str.indexOf(substr)},trim:function(str){return str.replace(/^\s+|\s+$/g,"")},lTrim:function(str){return str.replace(/^\s+/g,"")},rTrim:function(str){return str.replace(/\s+$/g,"")},capitalize:function(str){return $_fagk2fxjcq8h3hn.head(str).bind(function(head){return $_fagk2fxjcq8h3hn.tail(str).map(function(tail){return head.toUpperCase()+tail})}).getOr(str)}},normalVersionRegex=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(target){return function(uastring){return $_cwgwqavjcq8h3h4.contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return $_cwgwqavjcq8h3h4.contains(uastring,"edge/")&&$_cwgwqavjcq8h3h4.contains(uastring,"chrome")&&$_cwgwqavjcq8h3h4.contains(uastring,"safari")&&$_cwgwqavjcq8h3h4.contains(uastring,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return $_cwgwqavjcq8h3h4.contains(uastring,"chrome")&&!$_cwgwqavjcq8h3h4.contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_cwgwqavjcq8h3h4.contains(uastring,"msie")||$_cwgwqavjcq8h3h4.contains(uastring,"trident")}},{name:"Opera",versionRegexes:[normalVersionRegex,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return($_cwgwqavjcq8h3h4.contains(uastring,"safari")||$_cwgwqavjcq8h3h4.contains(uastring,"mobile/"))&&$_cwgwqavjcq8h3h4.contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return $_cwgwqavjcq8h3h4.contains(uastring,"iphone")||$_cwgwqavjcq8h3h4.contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]}],$_5slycdujcq8h3gy={browsers:$_djct026jcq8h2xw.constant(browsers),oses:$_djct026jcq8h2xw.constant(oses)},$_9k7f21ojcq8h3gf={detect:function(userAgent){var browsers=$_5slycdujcq8h3gy.browsers(),oses=$_5slycdujcq8h3gy.oses(),browser=$_g1ebfgtjcq8h3gt.detectBrowser(browsers,userAgent).fold($_2740anpjcq8h3gh.unknown,$_2740anpjcq8h3gh.nu),os=$_g1ebfgtjcq8h3gt.detectOs(oses,userAgent).fold($_5beqx1rjcq8h3gm.unknown,$_5beqx1rjcq8h3gm.nu);return{browser:browser,os:os,deviceType:DeviceType(os,browser,userAgent)}}},$_cfduydmjcq8h3gc={detect:$_6ztiwanjcq8h3ge.cached(function(){var userAgent=navigator.userAgent;return $_9k7f21ojcq8h3gf.detect(userAgent)})},fromDom=function(node){if(null===node||void 0===node)throw new Error("Node cannot be null or undefined");return{dom:$_djct026jcq8h2xw.constant(node)}},$_etvcvfyjcq8h3hp={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(doc,x,y){return $_doqc1o5jcq8h2xq.from(doc.dom().elementFromPoint(x,y)).map(fromDom)}},$_83f75a10jcq8h3hv={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},name=function(element){return element.dom().nodeName.toLowerCase()},type=function(element){return element.dom().nodeType},isType=function(t){return function(element){return type(element)===t}},isElement=isType($_83f75a10jcq8h3hv.ELEMENT),isText=isType($_83f75a10jcq8h3hv.TEXT),isDocument=isType($_83f75a10jcq8h3hv.DOCUMENT),$_d9btx8zjcq8h3hu={name:name,type:type,value:function(element){return element.dom().nodeValue},isElement:isElement,isText:isText,isDocument:isDocument,isComment:function(element){return type(element)===$_83f75a10jcq8h3hv.COMMENT||"#comment"===name(element)}},typeOf=function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t},isType$1=function(type){return function(value){return typeOf(value)===type}},$_1i3etu12jcq8h3i8={isString:isType$1("string"),isObject:isType$1("object"),isArray:isType$1("array"),isNull:isType$1("null"),isBoolean:isType$1("boolean"),isUndefined:isType$1("undefined"),isFunction:isType$1("function"),isNumber:isType$1("number")},keys=function(){var fastKeys=Object.keys;return void 0===fastKeys?function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(i);return r}:fastKeys}(),each$6=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i,obj)}},tupleMap=function(obj,f){var r={};return each$6(obj,function(x,i){var tuple=f(x,i,obj);r[tuple.k]=tuple.v}),r},mapToArray=function(obj,f){var r=[];return each$6(obj,function(value,name){r.push(f(value,name))}),r},values=function(obj){return mapToArray(obj,function(v){return v})},$_mhbuv13jcq8h3ic={bifilter:function(obj,pred){var t={},f={};return each$6(obj,function(x,i){(pred(x,i)?t:f)[i]=x}),{t:t,f:f}},each:each$6,map:function(obj,f){return tupleMap(obj,function(x,i,obj){return{k:i,v:f(x,i,obj)}})},mapToArray:mapToArray,tupleMap:tupleMap,find:function(obj,pred){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k],x=obj[i];if(pred(x,i,obj))return $_doqc1o5jcq8h2xq.some(x)}return $_doqc1o5jcq8h2xq.none()},keys:keys,values:values,size:function(obj){return values(obj).length}},rawSet=function(dom,key,value){if(!($_1i3etu12jcq8h3i8.isString(value)||$_1i3etu12jcq8h3i8.isBoolean(value)||$_1i3etu12jcq8h3i8.isNumber(value)))throw console.error("Invalid call to Attr.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")},set$1=function(element,key,value){rawSet(element.dom(),key,value)},get$1=function(element,key){var v=element.dom().getAttribute(key);return null===v?void 0:v},has=function(element,key){var dom=element.dom();return!(!dom||!dom.hasAttribute)&&dom.hasAttribute(key)},transferOne$1=function(source,destination,attr){has(source,attr)&&!has(destination,attr)&&set$1(destination,attr,get$1(source,attr))},$_7np04f14jcq8h3ig={clone:function(element){return $_de5suq4jcq8h2x0.foldl(element.dom().attributes,function(acc,attr){return acc[attr.name]=attr.value,acc},{})},set:set$1,setAll:function(element,attrs){var dom=element.dom();$_mhbuv13jcq8h3ic.each(attrs,function(v,k){rawSet(dom,k,v)})},get:get$1,has:has,remove:function(element,key){element.dom().removeAttribute(key)},hasNone:function(element){var attrs=element.dom().attributes;return void 0===attrs||null===attrs||0===attrs.length},transfer:function(source,destination,attrs){$_d9btx8zjcq8h3hu.isElement(source)&&$_d9btx8zjcq8h3hu.isElement(destination)&&$_de5suq4jcq8h2x0.each(attrs,function(attr){transferOne$1(source,destination,attr)})}},body=$_6ztiwanjcq8h3ge.cached(function(){return getBody($_etvcvfyjcq8h3hp.fromDom(document))}),getBody=function(doc){var body=doc.dom().body;if(null===body||void 0===body)throw"Body is not available yet";return $_etvcvfyjcq8h3hp.fromDom(body)},$_nqdtr15jcq8h3im={body:body,getBody:getBody,inBody:function(element){var dom=$_d9btx8zjcq8h3hu.isText(element)?element.dom().parentNode:element.dom();return void 0!==dom&&null!==dom&&dom.ownerDocument.body.contains(dom)}},$_8xm5kn16jcq8h3ip={isSupported:function(dom){return void 0!==dom.style}},internalSet=function(dom,property,value){if(!$_1i3etu12jcq8h3i8.isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);$_8xm5kn16jcq8h3ip.isSupported(dom)&&dom.style.setProperty(property,value)},internalRemove=function(dom,property){$_8xm5kn16jcq8h3ip.isSupported(dom)&&dom.style.removeProperty(property)},set=function(element,property,value){var dom=element.dom();internalSet(dom,property,value)},getUnsafeProperty=function(dom,property){return $_8xm5kn16jcq8h3ip.isSupported(dom)?dom.style.getPropertyValue(property):""},getRaw=function(element,property){var dom=element.dom(),raw=getUnsafeProperty(dom,property);return $_doqc1o5jcq8h2xq.from(raw).filter(function(r){return r.length>0})},transferOne=function(source,destination,style){getRaw(source,style).each(function(value){getRaw(destination,style).isNone()&&set(destination,style,value)})},$_a83gpl11jcq8h3hy={copy:function(source,target){var sourceDom=source.dom(),targetDom=target.dom();$_8xm5kn16jcq8h3ip.isSupported(sourceDom)&&$_8xm5kn16jcq8h3ip.isSupported(targetDom)&&(targetDom.style.cssText=sourceDom.style.cssText)},set:set,preserve:function(element,f){var oldStyles=$_7np04f14jcq8h3ig.get(element,"style"),result=f(element);return(void 0===oldStyles?$_7np04f14jcq8h3ig.remove:$_7np04f14jcq8h3ig.set)(element,"style",oldStyles),result},setAll:function(element,css){var dom=element.dom();$_mhbuv13jcq8h3ic.each(css,function(v,k){internalSet(dom,k,v)})},setOptions:function(element,css){var dom=element.dom();$_mhbuv13jcq8h3ic.each(css,function(v,k){v.fold(function(){internalRemove(dom,k)},function(value){internalSet(dom,k,value)})})},remove:function(element,property){var dom=element.dom();internalRemove(dom,property),$_7np04f14jcq8h3ig.has(element,"style")&&""===$_cwgwqavjcq8h3h4.trim($_7np04f14jcq8h3ig.get(element,"style"))&&$_7np04f14jcq8h3ig.remove(element,"style")},get:function(element,property){var dom=element.dom(),r=window.getComputedStyle(dom).getPropertyValue(property),v=""!==r||$_nqdtr15jcq8h3im.inBody(element)?r:getUnsafeProperty(dom,property);return null===v?void 0:v},getRaw:getRaw,getAllRaw:function(element){var css={},dom=element.dom();if($_8xm5kn16jcq8h3ip.isSupported(dom))for(var i=0;i<dom.style.length;i++){var ruleName=dom.style.item(i);css[ruleName]=dom.style[ruleName]}return css},isValidValue:function(tag,property,value){var element=$_etvcvfyjcq8h3hp.fromTag(tag);return set(element,property,value),getRaw(element,property).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(source,destination,styles){$_d9btx8zjcq8h3hu.isElement(source)&&$_d9btx8zjcq8h3hu.isElement(destination)&&$_de5suq4jcq8h2x0.each(styles,function(style){transferOne(source,destination,style)})}},sort$1=function(arr){return arr.slice(0).sort()},$_hnw6d1bjcq8h3jd={sort:sort$1,reqMessage:function(required,keys){throw new Error("All required keys ("+sort$1(required).join(", ")+") were not specified. Specified keys were: "+sort$1(keys).join(", ")+".")},unsuppMessage:function(unsupported){throw new Error("Unsupported keys for object: "+sort$1(unsupported).join(", "))},validateStrArr:function(label,array){if(!$_1i3etu12jcq8h3i8.isArray(array))throw new Error("The "+label+" fields must be an array. Was: "+array+".");$_de5suq4jcq8h2x0.each(array,function(a){if(!$_1i3etu12jcq8h3i8.isString(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},invalidTypeMessage:function(incorrect,type){throw new Error("All values need to be of type: "+type+". Keys ("+sort$1(incorrect).join(", ")+") were not.")},checkDupes:function(everything){var sorted=sort$1(everything);$_de5suq4jcq8h2x0.find(sorted,function(s,i){return i<sorted.length-1&&s===sorted[i+1]}).each(function(d){throw new Error("The field: "+d+" occurs more than once in the combined fields: ["+sorted.join(", ")+"].")})}},$_1928vz18jcq8h3j2={immutable:function(){var fields=arguments;return function(){for(var values=new Array(arguments.length),i=0;i<values.length;i++)values[i]=arguments[i];if(fields.length!==values.length)throw new Error('Wrong number of arguments to struct. Expected "['+fields.length+']", got '+values.length+" arguments");var struct={};return $_de5suq4jcq8h2x0.each(fields,function(name,i){struct[name]=$_djct026jcq8h2xw.constant(values[i])}),struct}},immutableBag:function(required,optional){var everything=required.concat(optional);if(0===everything.length)throw new Error("You must specify at least one required or optional field.");return $_hnw6d1bjcq8h3jd.validateStrArr("required",required),$_hnw6d1bjcq8h3jd.validateStrArr("optional",optional),$_hnw6d1bjcq8h3jd.checkDupes(everything),function(obj){var keys=$_mhbuv13jcq8h3ic.keys(obj);$_de5suq4jcq8h2x0.forall(required,function(req){return $_de5suq4jcq8h2x0.contains(keys,req)})||$_hnw6d1bjcq8h3jd.reqMessage(required,keys);var unsupported=$_de5suq4jcq8h2x0.filter(keys,function(key){return!$_de5suq4jcq8h2x0.contains(everything,key)});unsupported.length>0&&$_hnw6d1bjcq8h3jd.unsuppMessage(unsupported);var r={};return $_de5suq4jcq8h2x0.each(required,function(req){r[req]=$_djct026jcq8h2xw.constant(obj[req])}),$_de5suq4jcq8h2x0.each(optional,function(opt){r[opt]=$_djct026jcq8h2xw.constant(Object.prototype.hasOwnProperty.call(obj,opt)?$_doqc1o5jcq8h2xq.some(obj[opt]):$_doqc1o5jcq8h2xq.none())}),r}}},$_1qh01p1cjcq8h3jg={toArray:function(target,f){var r=[],cur=f(target);do{cur=cur.bind(function(e){return r.push(e),f(e)})}while(cur.isSome());return r}},node=function(){return $_d2wzeabjcq8h32x.getOrDie("Node")},compareDocumentPosition=function(a,b,match){return 0!=(a.compareDocumentPosition(b)&match)},$_a0xoh51ejcq8h3jn={documentPositionPreceding:function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_CONTAINED_BY)}},ELEMENT=$_83f75a10jcq8h3hv.ELEMENT,DOCUMENT=$_83f75a10jcq8h3hv.DOCUMENT,bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT||0===dom.childElementCount},$_ds01nx1fjcq8h3jy={all:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?[]:$_de5suq4jcq8h2x0.map(base.querySelectorAll(selector),$_etvcvfyjcq8h3hp.fromDom)},is:function(element,selector){var elem=element.dom();if(elem.nodeType!==ELEMENT)return!1;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},one:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.from(base.querySelector(selector)).map($_etvcvfyjcq8h3hp.fromDom)}},eq=function(e1,e2){return e1.dom()===e2.dom()},contains$3=$_cfduydmjcq8h3gc.detect().browser.isIE()?function(e1,e2){return $_a0xoh51ejcq8h3jn.documentPositionContainedBy(e1.dom(),e2.dom())}:function(e1,e2){var d1=e1.dom(),d2=e2.dom();return d1!==d2&&d1.contains(d2)},$_x06e31djcq8h3jh={eq:eq,isEqualNode:function(e1,e2){return e1.dom().isEqualNode(e2.dom())},member:function(element,elements){return $_de5suq4jcq8h2x0.exists(elements,$_djct026jcq8h2xw.curry(eq,element))},contains:contains$3,is:$_ds01nx1fjcq8h3jy.is},owner=function(element){return $_etvcvfyjcq8h3hp.fromDom(element.dom().ownerDocument)},parent=function(element){var dom=element.dom();return $_doqc1o5jcq8h2xq.from(dom.parentNode).map($_etvcvfyjcq8h3hp.fromDom)},prevSibling=function(element){var dom=element.dom();return $_doqc1o5jcq8h2xq.from(dom.previousSibling).map($_etvcvfyjcq8h3hp.fromDom)},nextSibling=function(element){var dom=element.dom();return $_doqc1o5jcq8h2xq.from(dom.nextSibling).map($_etvcvfyjcq8h3hp.fromDom)},children=function(element){var dom=element.dom();return $_de5suq4jcq8h2x0.map(dom.childNodes,$_etvcvfyjcq8h3hp.fromDom)},child=function(element,index){var children=element.dom().childNodes;return $_doqc1o5jcq8h2xq.from(children[index]).map($_etvcvfyjcq8h3hp.fromDom)},spot=$_1928vz18jcq8h3j2.immutable("element","offset"),$_gah0mz17jcq8h3ir={owner:owner,defaultView:function(element){var defaultView=element.dom().ownerDocument.defaultView;return $_etvcvfyjcq8h3hp.fromDom(defaultView)},documentElement:function(element){var doc=owner(element);return $_etvcvfyjcq8h3hp.fromDom(doc.dom().documentElement)},parent:parent,findIndex:function(element){return parent(element).bind(function(p){var kin=children(p);return $_de5suq4jcq8h2x0.findIndex(kin,function(elem){return $_x06e31djcq8h3jh.eq(element,elem)})})},parents:function(element,isRoot){for(var stop=$_1i3etu12jcq8h3i8.isFunction(isRoot)?isRoot:$_djct026jcq8h2xw.constant(!1),dom=element.dom(),ret=[];null!==dom.parentNode&&void 0!==dom.parentNode;){var rawParent=dom.parentNode,parent=$_etvcvfyjcq8h3hp.fromDom(rawParent);if(ret.push(parent),!0===stop(parent))break;dom=rawParent}return ret},siblings:function(element){return parent(element).map(children).map(function(elements){return $_de5suq4jcq8h2x0.filter(elements,function(x){return!$_x06e31djcq8h3jh.eq(element,x)})}).getOr([])},prevSibling:prevSibling,offsetParent:function(element){var dom=element.dom();return $_doqc1o5jcq8h2xq.from(dom.offsetParent).map($_etvcvfyjcq8h3hp.fromDom)},prevSiblings:function(element){return $_de5suq4jcq8h2x0.reverse($_1qh01p1cjcq8h3jg.toArray(element,prevSibling))},nextSibling:nextSibling,nextSiblings:function(element){return $_1qh01p1cjcq8h3jg.toArray(element,nextSibling)},children:children,child:child,firstChild:function(element){return child(element,0)},lastChild:function(element){return child(element,element.dom().childNodes.length-1)},childNodesCount:function(element){return element.dom().childNodes.length},hasChildNodes:function(element){return element.dom().hasChildNodes()},leaf:function(element,offset){var cs=children(element);return cs.length>0&&offset<cs.length?spot(cs[offset],0):spot(element,offset)}},browser=$_cfduydmjcq8h3gc.detect().browser,firstElement=function(nodes){return $_de5suq4jcq8h2x0.find(nodes,$_d9btx8zjcq8h3hu.isElement)},getTableCaptionDeltaY=function(elm){return browser.isFirefox()&&"table"===$_d9btx8zjcq8h3hu.name(elm)?firstElement($_gah0mz17jcq8h3ir.children(elm)).filter(function(elm){return"caption"===$_d9btx8zjcq8h3hu.name(elm)}).bind(function(caption){return firstElement($_gah0mz17jcq8h3ir.nextSiblings(caption)).map(function(body){var bodyTop=body.dom().offsetTop,captionTop=caption.dom().offsetTop,captionHeight=caption.dom().offsetHeight;return bodyTop<=captionTop?-captionHeight:0})}).getOr(0):0},$_6offnsljcq8h3g3={getPos:function(body,elm,rootElm){var offsetParent,pos,x=0,y=0,doc=body.ownerDocument;if(rootElm=rootElm||body,elm){if(rootElm===body&&elm.getBoundingClientRect&&"static"===$_a83gpl11jcq8h3hy.get($_etvcvfyjcq8h3hp.fromDom(body),"position"))return pos=elm.getBoundingClientRect(),x=pos.left+(doc.documentElement.scrollLeft||body.scrollLeft)-doc.documentElement.clientLeft,y=pos.top+(doc.documentElement.scrollTop||body.scrollTop)-doc.documentElement.clientTop,{x:x,y:y};for(offsetParent=elm;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;for(offsetParent=elm.parentNode;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x-=offsetParent.scrollLeft||0,y-=offsetParent.scrollTop||0,offsetParent=offsetParent.parentNode;y+=getTableCaptionDeltaY($_etvcvfyjcq8h3hp.fromDom(elm))}return{x:x,y:y}}},nu$4=function(baseFn){var data=$_doqc1o5jcq8h2xq.none(),callbacks=[],get=function(nCallback){isReady()?call(nCallback):callbacks.push(nCallback)},isReady=function(){return data.isSome()},run=function(cbs){$_de5suq4jcq8h2x0.each(cbs,call)},call=function(cb){data.each(function(x){setTimeout(function(){cb(x)},0)})};return baseFn(function(x){data=$_doqc1o5jcq8h2xq.some(x),run(callbacks),callbacks=[]}),{get:get,map:function(f){return nu$4(function(nCallback){get(function(data){nCallback(f(data))})})},isReady:isReady}},$_g4wq7h1ijcq8h3kf={nu:nu$4,pure:function(a){return nu$4(function(callback){callback(a)})}},$_7bc62c1jjcq8h3kh={bounce:function(f){return function(){var args=Array.prototype.slice.call(arguments),me=this;setTimeout(function(){f.apply(me,args)},0)}}},nu$3=function(baseFn){var get=function(callback){baseFn($_7bc62c1jjcq8h3kh.bounce(callback))};return{map:function(fab){return nu$3(function(callback){get(function(a){var value=fab(a);callback(value)})})},bind:function(aFutureB){return nu$3(function(callback){get(function(a){aFutureB(a).get(callback)})})},anonBind:function(futureB){return nu$3(function(callback){get(function(a){futureB.get(callback)})})},toLazy:function(){return $_g4wq7h1ijcq8h3kf.nu(get)},get:get}},$_7effb31hjcq8h3kd={nu:nu$3,pure:function(a){return nu$3(function(callback){callback(a)})}},$_41zniw1ljcq8h3kk={par:function(asyncValues,nu){return nu(function(callback){var r=[],count=0,cb=function(i){return function(value){r[i]=value,++count>=asyncValues.length&&callback(r)}};0===asyncValues.length?callback([]):$_de5suq4jcq8h2x0.each(asyncValues,function(asyncValue,i){asyncValue.get(cb(i))})})}},par=function(futures){return $_41zniw1ljcq8h3kk.par(futures,$_7effb31hjcq8h3kd.nu)},$_883bnz1kjcq8h3ki={par:par,mapM:function(array,fn){var futures=$_de5suq4jcq8h2x0.map(array,fn);return par(futures)},compose:function(f,g){return function(a){return g(a).bind(f)}}},value$1=function(o){return{is:function(v){return o===v},isValue:$_djct026jcq8h2xw.constant(!0),isError:$_djct026jcq8h2xw.constant(!1),getOr:$_djct026jcq8h2xw.constant(o),getOrThunk:$_djct026jcq8h2xw.constant(o),getOrDie:$_djct026jcq8h2xw.constant(o),or:function(opt){return value$1(o)},orThunk:function(f){return value$1(o)},fold:function(_,onValue){return onValue(o)},map:function(f){return value$1(f(o))},each:function(f){f(o)},bind:function(f){return f(o)},exists:function(f){return f(o)},forall:function(f){return f(o)},toOption:function(){return $_doqc1o5jcq8h2xq.some(o)}}},error=function(message){return{is:$_djct026jcq8h2xw.constant(!1),isValue:$_djct026jcq8h2xw.constant(!1),isError:$_djct026jcq8h2xw.constant(!0),getOr:$_djct026jcq8h2xw.identity,getOrThunk:function(f){return f()},getOrDie:function(){return $_djct026jcq8h2xw.die(message)()},or:function(opt){return opt},orThunk:function(f){return f()},fold:function(onError,_){return onError(message)},map:function(f){return error(message)},each:$_djct026jcq8h2xw.noop,bind:function(f){return error(message)},exists:$_djct026jcq8h2xw.constant(!1),forall:$_djct026jcq8h2xw.constant(!0),toOption:$_doqc1o5jcq8h2xq.none}},$_24zma51mjcq8h3km={value:value$1,error:error},StyleSheetLoader=function(document,settings){var maxLoadTime,idCount=0,loadedStates={};maxLoadTime=(settings=settings||{}).maxLoadTime||5e3;var appendToHead=function(node){document.getElementsByTagName("head")[0].appendChild(node)},load=function(url,loadedCallback,errorCallback){var link,style,startTime,state,passed=function(){for(var callbacks=state.passed,i=callbacks.length;i--;)callbacks[i]();state.status=2,state.passed=[],state.failed=[]},failed=function(){for(var callbacks=state.failed,i=callbacks.length;i--;)callbacks[i]();state.status=3,state.passed=[],state.failed=[]},wait=function(testCallback,waitCallback){testCallback()||((new Date).getTime()-startTime<maxLoadTime?$_51uzcpgjcq8h3db.setTimeout(waitCallback):failed())},waitForWebKitLinkLoaded=function(){wait(function(){for(var styleSheet,owner,styleSheets=document.styleSheets,i=styleSheets.length;i--;)if(styleSheet=styleSheets[i],(owner=styleSheet.ownerNode?styleSheet.ownerNode:styleSheet.owningElement)&&owner.id===link.id)return passed(),!0},waitForWebKitLinkLoaded)},waitForGeckoLinkLoaded=function(){wait(function(){try{var cssRules=style.sheet.cssRules;return passed(),!!cssRules}catch(ex){}},waitForGeckoLinkLoaded)};if(url=$_topwtjjcq8h3fq._addCacheSuffix(url),loadedStates[url]?state=loadedStates[url]:(state={passed:[],failed:[]},loadedStates[url]=state),loadedCallback&&state.passed.push(loadedCallback),errorCallback&&state.failed.push(errorCallback),1!==state.status)if(2!==state.status)if(3!==state.status){if(state.status=1,link=document.createElement("link"),link.rel="stylesheet",link.type="text/css",link.id="u"+idCount++,link.async=!1,link.defer=!1,startTime=(new Date).getTime(),"onload"in link&&!function(){var webKitChunks=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(webKitChunks&&parseInt(webKitChunks[1],10)<536)}())link.onload=waitForWebKitLinkLoaded,link.onerror=failed;else{if(navigator.userAgent.indexOf("Firefox")>0)return style=document.createElement("style"),style.textContent='@import "'+url+'"',waitForGeckoLinkLoaded(),void appendToHead(style);waitForWebKitLinkLoaded()}appendToHead(link),link.href=url}else failed();else passed()},loadF=function(url){return $_7effb31hjcq8h3kd.nu(function(resolve){load(url,$_djct026jcq8h2xw.compose(resolve,$_djct026jcq8h2xw.constant($_24zma51mjcq8h3km.value(url))),$_djct026jcq8h2xw.compose(resolve,$_djct026jcq8h2xw.constant($_24zma51mjcq8h3km.error(url))))})},unbox=function(result){return result.fold($_djct026jcq8h2xw.identity,$_djct026jcq8h2xw.identity)};return{load:load,loadAll:function(urls,success,failure){$_883bnz1kjcq8h3ki.par($_de5suq4jcq8h2x0.map(urls,loadF)).get(function(result){var parts=$_de5suq4jcq8h2x0.partition(result,function(r){return r.isValue()});parts.fail.length>0?failure(parts.fail.map(unbox)):success(parts.pass.map(unbox))})}}},TreeWalker=function(startNode,rootNode){var node=startNode,findSibling=function(node,startName,siblingName,shallow){var sibling,parent;if(node){if(!shallow&&node[startName])return node[startName];if(node!==rootNode){if(sibling=node[siblingName])return sibling;for(parent=node.parentNode;parent&&parent!==rootNode;parent=parent.parentNode)if(sibling=parent[siblingName])return sibling}}},findPreviousNode=function(node,startName,siblingName,shallow){var sibling,parent,child;if(node){if(sibling=node[siblingName],rootNode&&sibling===rootNode)return;if(sibling){if(!shallow)for(child=sibling[startName];child;child=child[startName])if(!child[startName])return child;return sibling}if((parent=node.parentNode)&&parent!==rootNode)return parent}};this.current=function(){return node},this.next=function(shallow){return node=findSibling(node,"firstChild","nextSibling",shallow)},this.prev=function(shallow){return node=findSibling(node,"lastChild","previousSibling",shallow)},this.prev2=function(shallow){return node=findPreviousNode(node,"lastChild","previousSibling",shallow)}},blocks=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],voids=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],tableCells=["td","th"],tableSections=["thead","tbody","tfoot"],textBlocks=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],listItems=["li","dd","dt"],lists=["ul","ol","dl"],lazyLookup=function(items){var lookup;return function(node){return(lookup=lookup||$_de5suq4jcq8h2x0.mapToObject(items,$_djct026jcq8h2xw.constant(!0))).hasOwnProperty($_d9btx8zjcq8h3hu.name(node))}},isHeading=lazyLookup(["h1","h2","h3","h4","h5","h6"]),isBlock=lazyLookup(blocks),$_2bhgbq1pjcq8h3ku={isBlock:isBlock,isInline:function(node){return $_d9btx8zjcq8h3hu.isElement(node)&&!isBlock(node)},isHeading:isHeading,isTextBlock:lazyLookup(textBlocks),isList:lazyLookup(lists),isListItem:lazyLookup(listItems),isVoid:lazyLookup(voids),isTableSection:lazyLookup(tableSections),isTableCell:lazyLookup(tableCells),isBr:function(node){return $_d9btx8zjcq8h3hu.isElement(node)&&"br"===$_d9btx8zjcq8h3hu.name(node)}},isNodeType=function(type){return function(node){return!!node&&node.nodeType===type}},isElement$1=isNodeType(1),matchNodeNames=function(names){var items=names.toLowerCase().split(" ");return function(node){var i,name;if(node&&node.nodeType)for(name=node.nodeName.toLowerCase(),i=0;i<items.length;i++)if(name===items[i])return!0;return!1}},hasContentEditableState=function(value){return function(node){if(isElement$1(node)){if(node.contentEditable===value)return!0;if(node.getAttribute("data-mce-contenteditable")===value)return!0}return!1}},isText$1=isNodeType(3),isComment$1=isNodeType(8),isDocument$1=isNodeType(9),isBr$1=matchNodeNames("br"),isContentEditableTrue=hasContentEditableState("true"),isContentEditableFalse=hasContentEditableState("false"),$_bpl7e51qjcq8h3kz={isText:isText$1,isElement:isElement$1,isComment:isComment$1,isDocument:isDocument$1,isBr:isBr$1,isContentEditableTrue:isContentEditableTrue,isContentEditableFalse:isContentEditableFalse,matchNodeNames:matchNodeNames,hasPropValue:function(propName,propValue){return function(node){return isElement$1(node)&&node[propName]===propValue}},hasAttribute:function(attrName,attrValue){return function(node){return isElement$1(node)&&node.hasAttribute(attrName)}},hasAttributeValue:function(attrName,attrValue){return function(node){return isElement$1(node)&&node.getAttribute(attrName)===attrValue}},matchStyleValues:function(name,values){var items=values.toLowerCase().split(" ");return function(node){var i;if(isElement$1(node))for(i=0;i<items.length;i++)if(node.ownerDocument.defaultView.getComputedStyle(node,null).getPropertyValue(name)===items[i])return!0;return!1}},isBogus:function(node){return isElement$1(node)&&node.hasAttribute("data-mce-bogus")}},surroundedBySpans=function(node){var previousIsSpan=node.previousSibling&&"SPAN"===node.previousSibling.nodeName,nextIsSpan=node.nextSibling&&"SPAN"===node.nextSibling.nodeName;return previousIsSpan&&nextIsSpan},isBookmarkNode=function(node){return node&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},trimNode=function(dom,node){var i,children=node.childNodes;if(!$_bpl7e51qjcq8h3kz.isElement(node)||!isBookmarkNode(node)){for(i=children.length-1;i>=0;i--)trimNode(dom,children[i]);if(!1===$_bpl7e51qjcq8h3kz.isDocument(node)){if($_bpl7e51qjcq8h3kz.isText(node)&&node.nodeValue.length>0){var trimmedLength=$_topwtjjcq8h3fq.trim(node.nodeValue).length;if(dom.isBlock(node.parentNode)||trimmedLength>0)return;if(0===trimmedLength&&surroundedBySpans(node))return}else if($_bpl7e51qjcq8h3kz.isElement(node)&&(1===(children=node.childNodes).length&&isBookmarkNode(children[0])&&node.parentNode.insertBefore(children[0],node),children.length||$_2bhgbq1pjcq8h3ku.isVoid($_etvcvfyjcq8h3hp.fromDom(node))))return;dom.remove(node)}return node}},$_14u1d41ojcq8h3kr={trimNode:trimNode},makeMap$1=$_topwtjjcq8h3fq.makeMap,attrsCharsRegExp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,textCharsRegExp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rawCharsRegExp=/[<>&\"\']/g,entityRegExp=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,asciiMap={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};baseEntities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},reverseEntities={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var nativeDecode=function(text){var elm;return elm=$_etvcvfyjcq8h3hp.fromTag("div").dom(),elm.innerHTML=text,elm.textContent||elm.innerText||text},buildEntitiesLookup=function(items,radix){var i,chr,entity,lookup={};if(items){for(items=items.split(","),radix=radix||10,i=0;i<items.length;i+=2)chr=String.fromCharCode(parseInt(items[i],radix)),baseEntities[chr]||(entity="&"+items[i+1]+";",lookup[chr]=entity,lookup[entity]=chr);return lookup}};namedEntities=buildEntitiesLookup("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Entities={encodeRaw:function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeAllRaw:function(text){return(""+text).replace(rawCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeNumeric:function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":baseEntities[chr]||"&#"+chr.charCodeAt(0)+";"})},encodeNamed:function(text,attr,entities){return entities=entities||namedEntities,text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||chr})},getEncodeFunc:function(name,entities){entities=buildEntitiesLookup(entities)||namedEntities;return(name=makeMap$1(name.replace(/\+/g,","))).named&&name.numeric?function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return void 0!==baseEntities[chr]?baseEntities[chr]:void 0!==entities[chr]?entities[chr]:chr.length>1?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":"&#"+chr.charCodeAt(0)+";"})}:name.named?entities?function(text,attr){return Entities.encodeNamed(text,attr,entities)}:Entities.encodeNamed:name.numeric?Entities.encodeNumeric:Entities.encodeRaw},decode:function(text){return text.replace(entityRegExp,function(all,numeric){return numeric?(numeric="x"===numeric.charAt(0).toLowerCase()?parseInt(numeric.substr(1),16):parseInt(numeric,10))>65535?(numeric-=65536,String.fromCharCode(55296+(numeric>>10),56320+(1023&numeric))):asciiMap[numeric]||String.fromCharCode(numeric):reverseEntities[all]||namedEntities[all]||nativeDecode(all)})}},mapCache={},dummyObj={},makeMap$2=$_topwtjjcq8h3fq.makeMap,each$7=$_topwtjjcq8h3fq.each,extend$1=$_topwtjjcq8h3fq.extend,explode$1=$_topwtjjcq8h3fq.explode,inArray$1=$_topwtjjcq8h3fq.inArray,split=function(items,delim){return(items=$_topwtjjcq8h3fq.trim(items))?items.split(delim||" "):[]},compileSchema=function(type){var globalAttributes,blockContent,phrasingContent,flowContent,html4BlockContent,html4PhrasingContent,schema={},add=function(name,attributes,children){var ni,attributesOrder,element,arrayToMap=function(array,obj){var i,l,map={};for(i=0,l=array.length;i<l;i++)map[array[i]]=obj||{};return map};for(children=children||[],attributes=attributes||"","string"==typeof children&&(children=split(children)),ni=(name=split(name)).length;ni--;)element={attributes:arrayToMap(attributesOrder=split([globalAttributes,attributes].join(" "))),attributesOrder:attributesOrder,children:arrayToMap(children,dummyObj)},schema[name[ni]]=element},addAttrs=function(name,attributes){var ni,schemaItem,i,l;for(ni=(name=split(name)).length,attributes=split(attributes);ni--;)for(schemaItem=schema[name[ni]],i=0,l=attributes.length;i<l;i++)schemaItem.attributes[attributes[i]]={},schemaItem.attributesOrder.push(attributes[i])};return mapCache[type]?mapCache[type]:(globalAttributes="id accesskey class dir lang style tabindex title role",blockContent="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",phrasingContent="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==type&&(globalAttributes+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",blockContent+=" article aside details dialog figure header footer hgroup section nav",phrasingContent+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==type&&(globalAttributes+=" xml:lang",phrasingContent=[phrasingContent,html4PhrasingContent="acronym applet basefont big font strike tt"].join(" "),each$7(split(html4PhrasingContent),function(name){add(name,"",phrasingContent)}),blockContent=[blockContent,html4BlockContent="center dir isindex noframes"].join(" "),flowContent=[blockContent,phrasingContent].join(" "),each$7(split(html4BlockContent),function(name){add(name,"",flowContent)})),flowContent=flowContent||[blockContent,phrasingContent].join(" "),add("html","manifest","head body"),add("head","","base command link meta noscript script style title"),add("title hr noscript br"),add("base","href target"),add("link","href rel media hreflang type sizes hreflang"),add("meta","name http-equiv content charset"),add("style","media type scoped"),add("script","src async defer type charset"),add("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",flowContent),add("address dt dd div caption","",flowContent),add("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",phrasingContent),add("blockquote","cite",flowContent),add("ol","reversed start type","li"),add("ul","","li"),add("li","value",flowContent),add("dl","","dt dd"),add("a","href target rel media hreflang type",phrasingContent),add("q","cite",phrasingContent),add("ins del","cite datetime",flowContent),add("img","src sizes srcset alt usemap ismap width height"),add("iframe","src name width height",flowContent),add("embed","src type width height"),add("object","data type typemustmatch name usemap form width height",[flowContent,"param"].join(" ")),add("param","name value"),add("map","name",[flowContent,"area"].join(" ")),add("area","alt coords shape href target rel media hreflang type"),add("table","border","caption colgroup thead tfoot tbody tr"+("html4"===type?" col":"")),add("colgroup","span","col"),add("col","span"),add("tbody thead tfoot","","tr"),add("tr","","td th"),add("td","colspan rowspan headers",flowContent),add("th","colspan rowspan headers scope abbr",flowContent),add("form","accept-charset action autocomplete enctype method name novalidate target",flowContent),add("fieldset","disabled form name",[flowContent,"legend"].join(" ")),add("label","form for",phrasingContent),add("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),add("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===type?flowContent:phrasingContent),add("select","disabled form multiple name required size","option optgroup"),add("optgroup","disabled label","option"),add("option","disabled label selected value"),add("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),add("menu","type label",[flowContent,"li"].join(" ")),add("noscript","",flowContent),"html4"!==type&&(add("wbr"),add("ruby","",[phrasingContent,"rt rp"].join(" ")),add("figcaption","",flowContent),add("mark rt rp summary bdi","",phrasingContent),add("canvas","width height",flowContent),add("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[flowContent,"track source"].join(" ")),add("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[flowContent,"track source"].join(" ")),add("picture","","img source"),add("source","src srcset type media sizes"),add("track","kind src srclang label default"),add("datalist","",[phrasingContent,"option"].join(" ")),add("article section nav aside header footer","",flowContent),add("hgroup","","h1 h2 h3 h4 h5 h6"),add("figure","",[flowContent,"figcaption"].join(" ")),add("time","datetime",phrasingContent),add("dialog","open",flowContent),add("command","type label icon disabled checked radiogroup command"),add("output","for form name",phrasingContent),add("progress","value max",phrasingContent),add("meter","value min max low high optimum",phrasingContent),add("details","open",[flowContent,"summary"].join(" ")),add("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==type&&(addAttrs("script","language xml:space"),addAttrs("style","xml:space"),addAttrs("object","declare classid code codebase codetype archive standby align border hspace vspace"),addAttrs("embed","align name hspace vspace"),addAttrs("param","valuetype type"),addAttrs("a","charset name rev shape coords"),addAttrs("br","clear"),addAttrs("applet","codebase archive code object alt name width height align hspace vspace"),addAttrs("img","name longdesc align border hspace vspace"),addAttrs("iframe","longdesc frameborder marginwidth marginheight scrolling align"),addAttrs("font basefont","size color face"),addAttrs("input","usemap align"),addAttrs("select","onchange"),addAttrs("textarea"),addAttrs("h1 h2 h3 h4 h5 h6 div p legend caption","align"),addAttrs("ul","type compact"),addAttrs("li","type"),addAttrs("ol dl menu dir","compact"),addAttrs("pre","width xml:space"),addAttrs("hr","align noshade size width"),addAttrs("isindex","prompt"),addAttrs("table","summary width frame rules cellspacing cellpadding align bgcolor"),addAttrs("col","width align char charoff valign"),addAttrs("colgroup","width align char charoff valign"),addAttrs("thead","align char charoff valign"),addAttrs("tr","align char charoff valign bgcolor"),addAttrs("th","axis align char charoff valign nowrap bgcolor width height"),addAttrs("form","accept"),addAttrs("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),addAttrs("tfoot","align char charoff valign"),addAttrs("tbody","align char charoff valign"),addAttrs("area","nohref"),addAttrs("body","background bgcolor text link vlink alink")),"html4"!==type&&(addAttrs("input button select textarea","autofocus"),addAttrs("input textarea","placeholder"),addAttrs("a","download"),addAttrs("link script img","crossorigin"),addAttrs("iframe","sandbox seamless allowfullscreen")),each$7(split("a form meter progress dfn"),function(name){schema[name]&&delete schema[name].children[name]}),delete schema.caption.children.table,delete schema.script,mapCache[type]=schema,schema)},compileElementMap=function(value,mode){var styles;return value&&(styles={},"string"==typeof value&&(value={"*":value}),each$7(value,function(value,key){styles[key]=styles[key.toUpperCase()]="map"===mode?makeMap$2(value,/[, ]/):explode$1(value,/[, ]/)})),styles},Schema=function(settings){var validStyles,invalidStyles,schemaItems,whiteSpaceElementsMap,selfClosingElementsMap,shortEndedElementsMap,boolAttrMap,validClasses,blockElementsMap,nonEmptyElementsMap,moveCaretBeforeOnEnterElementsMap,textBlockElementsMap,textInlineElementsMap,self={},elements={},children={},patternElements=[],customElementsMap={},specialElements={},createLookupTable=function(option,defaultValue,extendWith){var value=settings[option];return value?value=makeMap$2(value,/[, ]/,makeMap$2(value.toUpperCase(),/[, ]/)):(value=mapCache[option])||(value=makeMap$2(defaultValue," ",makeMap$2(defaultValue.toUpperCase()," ")),value=extend$1(value,extendWith),mapCache[option]=value),value};schemaItems=compileSchema((settings=settings||{}).schema),!1===settings.verify_html&&(settings.valid_elements="*[*]"),validStyles=compileElementMap(settings.valid_styles),invalidStyles=compileElementMap(settings.invalid_styles,"map"),validClasses=compileElementMap(settings.valid_classes,"map"),whiteSpaceElementsMap=createLookupTable("whitespace_elements","pre script noscript style textarea video audio iframe object code"),selfClosingElementsMap=createLookupTable("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),shortEndedElementsMap=createLookupTable("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),boolAttrMap=createLookupTable("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),nonEmptyElementsMap=createLookupTable("non_empty_elements","td th iframe video audio object script pre code",shortEndedElementsMap),moveCaretBeforeOnEnterElementsMap=createLookupTable("move_caret_before_on_enter_elements","table",nonEmptyElementsMap),textBlockElementsMap=createLookupTable("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),blockElementsMap=createLookupTable("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",textBlockElementsMap),textInlineElementsMap=createLookupTable("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),each$7((settings.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(name){specialElements[name]=new RegExp("</"+name+"[^>]*>","gi")});var patternToRegExp=function(str){return new RegExp("^"+str.replace(/([?+*])/g,".$1")+"$")},addValidElements=function(validElements){var ei,el,ai,al,matches,element,attr,attrData,elementName,attrName,attrType,attributes,attributesOrder,prefix,outputName,globalAttributes,globalAttributesOrder,key,value,elementRuleRegExp=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,attrRuleRegExp=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,hasPatternsRegExp=/[*?+]/;if(validElements)for(validElements=split(validElements,","),elements["@"]&&(globalAttributes=elements["@"].attributes,globalAttributesOrder=elements["@"].attributesOrder),ei=0,el=validElements.length;ei<el;ei++)if(matches=elementRuleRegExp.exec(validElements[ei])){if(prefix=matches[1],elementName=matches[2],outputName=matches[3],attrData=matches[5],attributes={},attributesOrder=[],element={attributes:attributes,attributesOrder:attributesOrder},"#"===prefix&&(element.paddEmpty=!0),"-"===prefix&&(element.removeEmpty=!0),"!"===matches[4]&&(element.removeEmptyAttrs=!0),globalAttributes){for(key in globalAttributes)attributes[key]=globalAttributes[key];attributesOrder.push.apply(attributesOrder,globalAttributesOrder)}if(attrData)for(ai=0,al=(attrData=split(attrData,"|")).length;ai<al;ai++)if(matches=attrRuleRegExp.exec(attrData[ai])){if(attr={},attrType=matches[1],attrName=matches[2].replace(/[\\:]:/g,":"),prefix=matches[3],value=matches[4],"!"===attrType&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(attrName),attr.required=!0),"-"===attrType){delete attributes[attrName],attributesOrder.splice(inArray$1(attributesOrder,attrName),1);continue}prefix&&("="===prefix&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:attrName,value:value}),attr.defaultValue=value),":"===prefix&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:attrName,value:value}),attr.forcedValue=value),"<"===prefix&&(attr.validValues=makeMap$2(value,"?"))),hasPatternsRegExp.test(attrName)?(element.attributePatterns=element.attributePatterns||[],attr.pattern=patternToRegExp(attrName),element.attributePatterns.push(attr)):(attributes[attrName]||attributesOrder.push(attrName),attributes[attrName]=attr)}globalAttributes||"@"!==elementName||(globalAttributes=attributes,globalAttributesOrder=attributesOrder),outputName&&(element.outputName=elementName,elements[outputName]=element),hasPatternsRegExp.test(elementName)?(element.pattern=patternToRegExp(elementName),patternElements.push(element)):elements[elementName]=element}},setValidElements=function(validElements){elements={},patternElements=[],addValidElements(validElements),each$7(schemaItems,function(element,name){children[name]=element.children})},addCustomElements=function(customElements){var customElementRegExp=/^(~)?(.+)$/;customElements&&(mapCache.text_block_elements=mapCache.block_elements=null,each$7(split(customElements,","),function(rule){var matches=customElementRegExp.exec(rule),inline="~"===matches[1],cloneName=inline?"span":"div",name=matches[2];if(children[name]=children[cloneName],customElementsMap[name]=cloneName,inline||(blockElementsMap[name.toUpperCase()]={},blockElementsMap[name]={}),!elements[name]){var customRule=elements[cloneName];delete(customRule=extend$1({},customRule)).removeEmptyAttrs,delete customRule.removeEmpty,elements[name]=customRule}each$7(children,function(element,elmName){element[cloneName]&&(children[elmName]=element=extend$1({},children[elmName]),element[name]=element[cloneName])})}))},addValidChildren=function(validChildren){var childRuleRegExp=/^([+\-]?)(\w+)\[([^\]]+)\]$/;mapCache[settings.schema]=null,validChildren&&each$7(split(validChildren,","),function(rule){var parent,prefix,matches=childRuleRegExp.exec(rule);matches&&(prefix=matches[1],parent=prefix?children[matches[2]]:children[matches[2]]={"#comment":{}},parent=children[matches[2]],each$7(split(matches[3],"|"),function(child){"-"===prefix?delete parent[child]:parent[child]={}}))})},getElementRule=function(name){var i,element=elements[name];if(element)return element;for(i=patternElements.length;i--;)if((element=patternElements[i]).pattern.test(name))return element};return settings.valid_elements?setValidElements(settings.valid_elements):(each$7(schemaItems,function(element,name){elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder},children[name]=element.children}),"html5"!==settings.schema&&each$7(split("strong/b em/i"),function(item){item=split(item,"/"),elements[item[1]].outputName=item[0]}),each$7(split("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(name){elements[name]&&(elements[name].removeEmpty=!0)}),each$7(split("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(name){elements[name].paddEmpty=!0}),each$7(split("span"),function(name){elements[name].removeEmptyAttrs=!0})),addCustomElements(settings.custom_elements),addValidChildren(settings.valid_children),addValidElements(settings.extended_valid_elements),addValidChildren("+ol[ul|ol],+ul[ul|ol]"),each$7({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(parents,item){elements[item]&&(elements[item].parentsRequired=split(parents))}),settings.invalid_elements&&each$7(explode$1(settings.invalid_elements),function(item){elements[item]&&delete elements[item]}),getElementRule("span")||addValidElements("span[!data-mce-type|*]"),self.children=children,self.getValidStyles=function(){return validStyles},self.getInvalidStyles=function(){return invalidStyles},self.getValidClasses=function(){return validClasses},self.getBoolAttrs=function(){return boolAttrMap},self.getBlockElements=function(){return blockElementsMap},self.getTextBlockElements=function(){return textBlockElementsMap},self.getTextInlineElements=function(){return textInlineElementsMap},self.getShortEndedElements=function(){return shortEndedElementsMap},self.getSelfClosingElements=function(){return selfClosingElementsMap},self.getNonEmptyElements=function(){return nonEmptyElementsMap},self.getMoveCaretBeforeOnEnterElements=function(){return moveCaretBeforeOnEnterElementsMap},self.getWhiteSpaceElements=function(){return whiteSpaceElementsMap},self.getSpecialElements=function(){return specialElements},self.isValidChild=function(name,child){var parent=children[name.toLowerCase()];return!(!parent||!parent[child.toLowerCase()])},self.isValid=function(name,attr){var attrPatterns,i,rule=getElementRule(name);if(rule){if(!attr)return!0;if(rule.attributes[attr])return!0;if(attrPatterns=rule.attributePatterns)for(i=attrPatterns.length;i--;)if(attrPatterns[i].pattern.test(name))return!0}return!1},self.getElementRule=getElementRule,self.getCustomElements=function(){return customElementsMap},self.addValidElements=addValidElements,self.setValidElements=setValidElements,self.addCustomElements=addCustomElements,self.addValidChildren=addValidChildren,self.elements=elements,self},Styles=function(settings,schema){var i,encodingItems,validStyles,invalidStyles,rgbRegExp=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,urlOrStrRegExp=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,styleRegExp=/\s*([^:]+):\s*([^;]+);?/g,trimRightRegExp=/\s+$/,encodingLookup={};for(settings=settings||{},schema&&(validStyles=schema.getValidStyles(),invalidStyles=schema.getInvalidStyles()),encodingItems="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<encodingItems.length;i++)encodingLookup[encodingItems[i]]="\ufeff"+i,encodingLookup["\ufeff"+i]=encodingItems[i];var toHex=function(match,r,g,b){var hex=function(val){return(val=parseInt(val,10).toString(16)).length>1?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)};return{toHex:function(color){return color.replace(rgbRegExp,toHex)},parse:function(css){var matches,name,value,isEncoded,styles={},urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope||this,compress=function(prefix,suffix,noJoin){var top,right,bottom,left;if((top=styles[prefix+"-top"+suffix])&&(right=styles[prefix+"-right"+suffix])&&(bottom=styles[prefix+"-bottom"+suffix])&&(left=styles[prefix+"-left"+suffix])){var box=[top,right,bottom,left];for(i=box.length-1;i--&&box[i]===box[i+1];);i>-1&&noJoin||(styles[prefix+suffix]=-1===i?box[0]:box.join(" "),delete styles[prefix+"-top"+suffix],delete styles[prefix+"-right"+suffix],delete styles[prefix+"-bottom"+suffix],delete styles[prefix+"-left"+suffix])}},canCompress=function(key){var i,value=styles[key];if(value){for(i=(value=value.split(" ")).length;i--;)if(value[i]!==value[0])return!1;return styles[key]=value[0],!0}},encode=function(str){return isEncoded=!0,encodingLookup[str]},decode=function(str,keepSlashes){return isEncoded&&(str=str.replace(/\uFEFF[0-9]/g,function(str){return encodingLookup[str]})),keepSlashes||(str=str.replace(/\\([\'\";:])/g,"$1")),str},decodeSingleHexSequence=function(escSeq){return String.fromCharCode(parseInt(escSeq.slice(1),16))},decodeHexSequences=function(value){return value.replace(/\\[0-9a-f]+/gi,decodeSingleHexSequence)};if(css){for(css=(css=css.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(str){return str.replace(/[;:]/g,encode)});matches=styleRegExp.exec(css);)if(styleRegExp.lastIndex=matches.index+matches[0].length,name=matches[1].replace(trimRightRegExp,"").toLowerCase(),value=matches[2].replace(trimRightRegExp,""),name&&value){if(name=decodeHexSequences(name),value=decodeHexSequences(value),-1!==name.indexOf("\ufeff")||-1!==name.indexOf('"'))continue;if(!settings.allow_script_urls&&("behavior"===name||/expression\s*\(|\/\*|\*\//.test(value)))continue;"font-weight"===name&&"700"===value?value="bold":"color"!==name&&"background-color"!==name||(value=value.toLowerCase()),value=(value=value.replace(rgbRegExp,toHex)).replace(urlOrStrRegExp,function(match,url,url2,url3,str,str2){if(str=str||str2)return"'"+(str=decode(str)).replace(/\'/g,"\\'")+"'";if(url=decode(url||url2||url3),!settings.allow_script_urls){var scriptUrl=url.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(scriptUrl))return"";if(!settings.allow_svg_data_urls&&/^data:image\/svg/i.test(scriptUrl))return""}return urlConverter&&(url=urlConverter.call(urlConverterScope,url,"style")),"url('"+url.replace(/\'/g,"\\'")+"')"}),styles[name]=isEncoded?decode(value,!0):value}compress("border","",!0),compress("border","-width"),compress("border","-color"),compress("border","-style"),compress("padding",""),compress("margin",""),function(target,a,b,c){canCompress(a)&&canCompress(b)&&canCompress(c)&&(styles[target]=styles[a]+" "+styles[b]+" "+styles[c],delete styles[a],delete styles[b],delete styles[c])}("border","border-width","border-style","border-color"),"medium none"===styles.border&&delete styles.border,"none"===styles["border-image"]&&delete styles["border-image"]}return styles},serialize:function(styles,elementName){var name,value,css="",serializeStyles=function(name){var styleList,i,l,value;if(styleList=validStyles[name])for(i=0,l=styleList.length;i<l;i++)name=styleList[i],(value=styles[name])&&(css+=(css.length>0?" ":"")+name+": "+value+";")};if(elementName&&validStyles)serializeStyles("*"),serializeStyles(elementName);else for(name in styles)!(value=styles[name])||invalidStyles&&!function(name,elementName){var styleMap;return!((styleMap=invalidStyles["*"])&&styleMap[name]||(styleMap=invalidStyles[elementName])&&styleMap[name])}(name,elementName)||(css+=(css.length>0?" ":"")+name+": "+value+";");return css}}},each$3=$_topwtjjcq8h3fq.each,is=$_topwtjjcq8h3fq.is,grep$1=$_topwtjjcq8h3fq.grep,isIE=$_1surm29jcq8h31g.ie,simpleSelectorRe=/^([a-z0-9],?)+$/i,whiteSpaceRegExp=/^[ \t\r\n]*$/,setupAttrHooks=function(domUtils,settings){var keepUrlHook,attrHooks={},keepValues=settings.keep_values;return keepUrlHook={set:function($elm,value,name){settings.url_converter&&(value=settings.url_converter.call(settings.url_converter_scope||domUtils,value,name,$elm[0])),$elm.attr("data-mce-"+name,value).attr(name,value)},get:function($elm,name){return $elm.attr("data-mce-"+name)||$elm.attr(name)}},attrHooks={style:{set:function($elm,value){null===value||"object"!=typeof value?(keepValues&&$elm.attr("data-mce-style",value),$elm.attr("style",value)):$elm.css(value)},get:function($elm){var value=$elm.attr("data-mce-style")||$elm.attr("style");return value=domUtils.serializeStyle(domUtils.parseStyle(value),$elm[0].nodeName)}}},keepValues&&(attrHooks.href=attrHooks.src=keepUrlHook),attrHooks},updateInternalStyleAttr=function(domUtils,$elm){var value=$elm.attr("style");(value=domUtils.serializeStyle(domUtils.parseStyle(value),$elm[0].nodeName))||(value=null),$elm.attr("data-mce-style",value)},nodeIndex=function(node,normalized){var lastNodeType,nodeType,idx=0;if(node)for(lastNodeType=node.nodeType,node=node.previousSibling;node;node=node.previousSibling)nodeType=node.nodeType,(!normalized||3!==nodeType||nodeType!==lastNodeType&&node.nodeValue.length)&&(idx++,lastNodeType=nodeType);return idx},DOMUtils=function(doc,settings){var blockElementsMap,self=this;self.doc=doc,self.win=window,self.files={},self.counter=0,self.stdMode=!isIE||doc.documentMode>=8,self.boxModel=!isIE||"CSS1Compat"===doc.compatMode||self.stdMode,self.styleSheetLoader=StyleSheetLoader(doc),self.boundEvents=[],self.settings=settings=settings||{},self.schema=settings.schema?settings.schema:Schema({}),self.styles=Styles({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope},settings.schema),self.fixDoc(doc),self.events=settings.ownEvents?new EventUtils(settings.proxy):EventUtils.Event,self.attrHooks=setupAttrHooks(self,settings),blockElementsMap=self.schema.getBlockElements(),self.$=DomQuery.overrideDefaults(function(){return{context:doc,element:self.getRoot()}}),self.isBlock=function(node){if(!node)return!1;var type=node.nodeType;return type?!(1!==type||!blockElementsMap[node.nodeName]):!!blockElementsMap[node]}};DOMUtils.prototype={$$:function(elm){return"string"==typeof elm&&(elm=this.get(elm)),this.$(elm)},root:null,fixDoc:function(doc){},clone:function(node,deep){var clone,doc,self=this;return!isIE||1!==node.nodeType||deep?node.cloneNode(deep):(doc=self.doc,deep?clone.firstChild:(clone=doc.createElement(node.nodeName),each$3(self.getAttribs(node),function(attr){self.setAttrib(clone,attr.nodeName,self.getAttrib(node,attr.nodeName))}),clone))},getRoot:function(){var self=this;return self.settings.root_element||self.doc.body},getViewPort:function(win){var doc,rootElm;return win=win||this.win,doc=win.document,rootElm=this.boxModel?doc.documentElement:doc.body,{x:win.pageXOffset||rootElm.scrollLeft,y:win.pageYOffset||rootElm.scrollTop,w:win.innerWidth||rootElm.clientWidth,h:win.innerHeight||rootElm.clientHeight}},getRect:function(elm){var pos,size,self=this;return elm=self.get(elm),pos=self.getPos(elm),size=self.getSize(elm),{x:pos.x,y:pos.y,w:size.w,h:size.h}},getSize:function(elm){var w,h,self=this;return elm=self.get(elm),w=self.getStyle(elm,"width"),h=self.getStyle(elm,"height"),-1===w.indexOf("px")&&(w=0),-1===h.indexOf("px")&&(h=0),{w:parseInt(w,10)||elm.offsetWidth||elm.clientWidth,h:parseInt(h,10)||elm.offsetHeight||elm.clientHeight}},getParent:function(node,selector,root){return this.getParents(node,selector,root,!1)},getParents:function(node,selector,root,collect){var selectorVal,self=this,result=[];for(node=self.get(node),collect=void 0===collect,root=root||("BODY"!==self.getRoot().nodeName?self.getRoot().parentNode:null),is(selector,"string")&&(selectorVal=selector,selector="*"===selector?function(node){return 1===node.nodeType}:function(node){return self.is(node,selectorVal)});node&&node!==root&&node.nodeType&&9!==node.nodeType;){if(!selector||selector(node)){if(!collect)return node;result.push(node)}node=node.parentNode}return collect?result:null},get:function(elm){var name;return elm&&this.doc&&"string"==typeof elm&&(name=elm,(elm=this.doc.getElementById(elm))&&elm.id!==name)?this.doc.getElementsByName(name)[1]:elm},getNext:function(node,selector){return this._findSib(node,selector,"nextSibling")},getPrev:function(node,selector){return this._findSib(node,selector,"previousSibling")},select:function(selector,scope){var self=this;return Sizzle(selector,self.get(scope)||self.settings.root_element||self.doc,[])},is:function(elm,selector){var i;if(!elm)return!1;if(void 0===elm.length){if("*"===selector)return 1===elm.nodeType;if(simpleSelectorRe.test(selector)){for(selector=selector.toLowerCase().split(/,/),elm=elm.nodeName.toLowerCase(),i=selector.length-1;i>=0;i--)if(selector[i]===elm)return!0;return!1}}if(elm.nodeType&&1!==elm.nodeType)return!1;var elms=elm.nodeType?[elm]:elm;return Sizzle(selector,elms[0].ownerDocument||elms[0],null,elms).length>0},add:function(parentElm,name,attrs,html,create){var self=this;return this.run(parentElm,function(parentElm){var newElm;return newElm=is(name,"string")?self.doc.createElement(name):name,self.setAttribs(newElm,attrs),html&&(html.nodeType?newElm.appendChild(html):self.setHTML(newElm,html)),create?newElm:parentElm.appendChild(newElm)})},create:function(name,attrs,html){return this.add(this.doc.createElement(name),name,attrs,html,1)},createHTML:function(name,attrs,html){var key,outHtml="";outHtml+="<"+name;for(key in attrs)attrs.hasOwnProperty(key)&&null!==attrs[key]&&void 0!==attrs[key]&&(outHtml+=" "+key+'="'+this.encode(attrs[key])+'"');return void 0!==html?outHtml+">"+html+"</"+name+">":outHtml+" />"},createFragment:function(html){var frag,node,container,doc=this.doc;for(container=doc.createElement("div"),frag=doc.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},remove:function(node,keepChildren){return node=this.$$(node),keepChildren?node.each(function(){for(var child;child=this.firstChild;)3===child.nodeType&&0===child.data.length?this.removeChild(child):this.parentNode.insertBefore(child,this)}).remove():node.remove(),node.length>1?node.toArray():node[0]},setStyle:function(elm,name,value){elm=this.$$(elm).css(name,value),this.settings.update_styles&&updateInternalStyleAttr(this,elm)},getStyle:function(elm,name,computed){return elm=this.$$(elm),computed?elm.css(name):("float"===(name=name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}))&&(name=$_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<12?"styleFloat":"cssFloat"),elm[0]&&elm[0].style?elm[0].style[name]:void 0)},setStyles:function(elm,styles){elm=this.$$(elm).css(styles),this.settings.update_styles&&updateInternalStyleAttr(this,elm)},removeAllAttribs:function(e){return this.run(e,function(e){var i,attrs=e.attributes;for(i=attrs.length-1;i>=0;i--)e.removeAttributeNode(attrs.item(i))})},setAttrib:function(elm,name,value){var originalValue,hook,self=this,settings=self.settings;""===value&&(value=null),originalValue=(elm=self.$$(elm)).attr(name),elm.length&&((hook=self.attrHooks[name])&&hook.set?hook.set(elm,value,name):elm.attr(name,value),originalValue!==value&&settings.onSetAttrib&&settings.onSetAttrib({attrElm:elm,attrName:name,attrValue:value}))},setAttribs:function(elm,attrs){var self=this;self.$$(elm).each(function(i,node){each$3(attrs,function(value,name){self.setAttrib(node,name,value)})})},getAttrib:function(elm,name,defaultVal){var hook,value,self=this;return(elm=self.$$(elm)).length&&(value=(hook=self.attrHooks[name])&&hook.get?hook.get(elm,name):elm.attr(name)),void 0===value&&(value=defaultVal||""),value},getPos:function(elm,rootElm){return $_6offnsljcq8h3g3.getPos(this.doc.body,this.get(elm),rootElm)},parseStyle:function(cssText){return this.styles.parse(cssText)},serializeStyle:function(styles,name){return this.styles.serialize(styles,name)},addStyle:function(cssText){var head,styleElm,self=this,doc=self.doc;if(self!==DOMUtils.DOM&&doc===document){var addedStyles=DOMUtils.DOM.addedStyles;if((addedStyles=addedStyles||[])[cssText])return;addedStyles[cssText]=!0,DOMUtils.DOM.addedStyles=addedStyles}(styleElm=doc.getElementById("mceDefaultStyles"))||((styleElm=doc.createElement("style")).id="mceDefaultStyles",styleElm.type="text/css",(head=doc.getElementsByTagName("head")[0]).firstChild?head.insertBefore(styleElm,head.firstChild):head.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=cssText:styleElm.appendChild(doc.createTextNode(cssText))},loadCSS:function(url){var head,self=this,doc=self.doc;self===DOMUtils.DOM||doc!==document?(url||(url=""),head=doc.getElementsByTagName("head")[0],each$3(url.split(","),function(url){var link;url=$_topwtjjcq8h3fq._addCacheSuffix(url),self.files[url]||(self.files[url]=!0,link=self.create("link",{rel:"stylesheet",href:url}),isIE&&doc.documentMode&&doc.recalc&&(link.onload=function(){doc.recalc&&doc.recalc(),link.onload=null}),head.appendChild(link))})):DOMUtils.DOM.loadCSS(url)},addClass:function(elm,cls){this.$$(elm).addClass(cls)},removeClass:function(elm,cls){this.toggleClass(elm,cls,!1)},hasClass:function(elm,cls){return this.$$(elm).hasClass(cls)},toggleClass:function(elm,cls,state){this.$$(elm).toggleClass(cls,state).each(function(){""===this.className&&DomQuery(this).attr("class",null)})},show:function(elm){this.$$(elm).show()},hide:function(elm){this.$$(elm).hide()},isHidden:function(elm){return"none"===this.$$(elm).css("display")},uniqueId:function(prefix){return(prefix||"mce_")+this.counter++},setHTML:function(elm,html){elm=this.$$(elm),isIE?elm.each(function(i,target){if(!1!==target.canHaveHTML){for(;target.firstChild;)target.removeChild(target.firstChild);try{target.innerHTML="<br>"+html,target.removeChild(target.firstChild)}catch(ex){DomQuery("<div></div>").html("<br>"+html).contents().slice(1).appendTo(target)}return html}}):elm.html(html)},getOuterHTML:function(elm){return 1===(elm=this.get(elm)).nodeType&&"outerHTML"in elm?elm.outerHTML:DomQuery("<div></div>").append(DomQuery(elm).clone()).html()},setOuterHTML:function(elm,html){var self=this;self.$$(elm).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=html)}catch(ex){}self.remove(DomQuery(this).html(html),!0)})},decode:Entities.decode,encode:Entities.encodeAllRaw,insertAfter:function(node,referenceNode){return referenceNode=this.get(referenceNode),this.run(node,function(node){var parent,nextSibling;return parent=referenceNode.parentNode,(nextSibling=referenceNode.nextSibling)?parent.insertBefore(node,nextSibling):parent.appendChild(node),node})},replace:function(newElm,oldElm,keepChildren){return this.run(oldElm,function(oldElm){return is(oldElm,"array")&&(newElm=newElm.cloneNode(!0)),keepChildren&&each$3(grep$1(oldElm.childNodes),function(node){newElm.appendChild(node)}),oldElm.parentNode.replaceChild(newElm,oldElm)})},rename:function(elm,name){var newElm,self=this;return elm.nodeName!==name.toUpperCase()&&(newElm=self.create(name),each$3(self.getAttribs(elm),function(attrNode){self.setAttrib(newElm,attrNode.nodeName,self.getAttrib(elm,attrNode.nodeName))}),self.replace(newElm,elm,1)),newElm||elm},findCommonAncestor:function(a,b){for(var pe,ps=a;ps;){for(pe=b;pe&&ps!==pe;)pe=pe.parentNode;if(ps===pe)break;ps=ps.parentNode}return!ps&&a.ownerDocument?a.ownerDocument.documentElement:ps},toHex:function(rgbVal){return this.styles.toHex($_topwtjjcq8h3fq.trim(rgbVal))},run:function(elm,func,scope){var result,self=this;return"string"==typeof elm&&(elm=self.get(elm)),!!elm&&(scope=scope||this,elm.nodeType||!elm.length&&0!==elm.length?func.call(scope,elm):(result=[],each$3(elm,function(elm,i){elm&&("string"==typeof elm&&(elm=self.get(elm)),result.push(func.call(scope,elm,i)))}),result))},getAttribs:function(elm){var attrs;if(!(elm=this.get(elm)))return[];if(isIE){if(attrs=[],"OBJECT"===elm.nodeName)return elm.attributes;"OPTION"===elm.nodeName&&this.getAttrib(elm,"selected")&&attrs.push({specified:1,nodeName:"selected"});var attrRegExp=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return elm.cloneNode(!1).outerHTML.replace(attrRegExp,"").replace(/[\w:\-]+/gi,function(a){attrs.push({specified:1,nodeName:a})}),attrs}return elm.attributes},isEmpty:function(node,elements){var i,attributes,type,whitespace,walker,name,self=this,brCount=0;if(node=node.firstChild){walker=new TreeWalker(node,node.parentNode),elements=elements||(self.schema?self.schema.getNonEmptyElements():null),whitespace=self.schema?self.schema.getWhiteSpaceElements():{};do{if(1===(type=node.nodeType)){var bogusVal=node.getAttribute("data-mce-bogus");if(bogusVal){node=walker.next("all"===bogusVal);continue}if(name=node.nodeName.toLowerCase(),elements&&elements[name]){if("br"===name){brCount++,node=walker.next();continue}return!1}for(i=(attributes=self.getAttribs(node)).length;i--;)if("name"===(name=attributes[i].nodeName)||"data-mce-bookmark"===name)return!1}if(8===type)return!1;if(3===type&&!whiteSpaceRegExp.test(node.nodeValue))return!1;if(3===type&&node.parentNode&&whitespace[node.parentNode.nodeName]&&whiteSpaceRegExp.test(node.nodeValue))return!1;node=walker.next()}while(node)}return brCount<=1},createRng:function(){return this.doc.createRange()},nodeIndex:nodeIndex,split:function(parentElm,splitElm,replacementElm){var bef,aft,pa,self=this,r=self.createRng();if(parentElm&&splitElm)return r.setStart(parentElm.parentNode,self.nodeIndex(parentElm)),r.setEnd(splitElm.parentNode,self.nodeIndex(splitElm)),bef=r.extractContents(),(r=self.createRng()).setStart(splitElm.parentNode,self.nodeIndex(splitElm)+1),r.setEnd(parentElm.parentNode,self.nodeIndex(parentElm)+1),aft=r.extractContents(),(pa=parentElm.parentNode).insertBefore($_14u1d41ojcq8h3kr.trimNode(self,bef),parentElm),replacementElm?pa.insertBefore(replacementElm,parentElm):pa.insertBefore(splitElm,parentElm),pa.insertBefore($_14u1d41ojcq8h3kr.trimNode(self,aft),parentElm),self.remove(parentElm),replacementElm||splitElm},bind:function(target,name,func,scope){var self=this;if($_topwtjjcq8h3fq.isArray(target)){for(var i=target.length;i--;)target[i]=self.bind(target[i],name,func,scope);return target}return!self.settings.collect||target!==self.doc&&target!==self.win||self.boundEvents.push([target,name,func,scope]),self.events.bind(target,name,func,scope||self)},unbind:function(target,name,func){var i,self=this;if($_topwtjjcq8h3fq.isArray(target)){for(i=target.length;i--;)target[i]=self.unbind(target[i],name,func);return target}if(self.boundEvents&&(target===self.doc||target===self.win))for(i=self.boundEvents.length;i--;){var item=self.boundEvents[i];target!==item[0]||name&&name!==item[1]||func&&func!==item[2]||this.events.unbind(item[0],item[1],item[2])}return this.events.unbind(target,name,func)},fire:function(target,name,evt){return this.events.fire(target,name,evt)},getContentEditable:function(node){var contentEditable;return node&&1===node.nodeType?(contentEditable=node.getAttribute("data-mce-contenteditable"))&&"inherit"!==contentEditable?contentEditable:"inherit"!==node.contentEditable?node.contentEditable:null:null},getContentEditableParent:function(node){for(var root=this.getRoot(),state=null;node&&node!==root&&null===(state=this.getContentEditable(node));node=node.parentNode);return state},destroy:function(){var self=this;if(self.boundEvents){for(var i=self.boundEvents.length;i--;){var item=self.boundEvents[i];this.events.unbind(item[0],item[1],item[2])}self.boundEvents=null}Sizzle.setDocument&&Sizzle.setDocument(),self.win=self.doc=self.root=self.events=self.frag=null},isChildOf:function(node,parent){for(;node;){if(parent===node)return!0;node=node.parentNode}return!1},dumpRng:function(r){return"startContainer: "+r.startContainer.nodeName+", startOffset: "+r.startOffset+", endContainer: "+r.endContainer.nodeName+", endOffset: "+r.endOffset},_findSib:function(node,selector,name){var self=this,func=selector;if(node)for("string"==typeof func&&(func=function(node){return self.is(node,selector)}),node=node[name];node;node=node[name])if(func(node))return node;return null}},DOMUtils.DOM=new DOMUtils(document),DOMUtils.nodeIndex=nodeIndex;var DOM=DOMUtils.DOM,each$2=$_topwtjjcq8h3fq.each,grep=$_topwtjjcq8h3fq.grep,isFunction=function(f){return"function"==typeof f},ScriptLoader=function(){var states={},queue=[],scriptLoadedCallbacks={},queueLoadedCallbacks=[],loading=0,loadScript=function(url,success,failure){var elm,id,dom=DOM,done=function(){dom.remove(id),elm&&(elm.onreadystatechange=elm.onload=elm=null),success()};id=dom.uniqueId(),(elm=document.createElement("script")).id=id,elm.type="text/javascript",elm.src=$_topwtjjcq8h3fq._addCacheSuffix(url),"onreadystatechange"in elm?elm.onreadystatechange=function(){/loaded|complete/.test(elm.readyState)&&done()}:elm.onload=done,elm.onerror=function(){isFunction(failure)?failure():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+url)},(document.getElementsByTagName("head")[0]||document.body).appendChild(elm)};this.isDone=function(url){return 2===states[url]},this.markDone=function(url){states[url]=2},this.add=this.load=function(url,success,scope,failure){void 0===states[url]&&(queue.push(url),states[url]=0),success&&(scriptLoadedCallbacks[url]||(scriptLoadedCallbacks[url]=[]),scriptLoadedCallbacks[url].push({success:success,failure:failure,scope:scope||this}))},this.remove=function(url){delete states[url],delete scriptLoadedCallbacks[url]},this.loadQueue=function(success,scope,failure){this.loadScripts(queue,success,scope,failure)},this.loadScripts=function(scripts,success,scope,failure){var loadScripts,failures=[],execCallbacks=function(name,url){each$2(scriptLoadedCallbacks[url],function(callback){isFunction(callback[name])&&callback[name].call(callback.scope)}),scriptLoadedCallbacks[url]=void 0};queueLoadedCallbacks.push({success:success,failure:failure,scope:scope||this}),(loadScripts=function(){var loadingScripts=grep(scripts);if(scripts.length=0,each$2(loadingScripts,function(url){2!==states[url]?3!==states[url]?1!==states[url]&&(states[url]=1,loading++,loadScript(url,function(){states[url]=2,loading--,execCallbacks("success",url),loadScripts()},function(){states[url]=3,loading--,failures.push(url),execCallbacks("failure",url),loadScripts()})):execCallbacks("failure",url):execCallbacks("success",url)}),!loading){var notifyCallbacks=queueLoadedCallbacks.slice(0);queueLoadedCallbacks.length=0,each$2(notifyCallbacks,function(callback){0===failures.length?isFunction(callback.success)&&callback.success.call(callback.scope):isFunction(callback.failure)&&callback.failure.call(callback.scope,failures)})}})()}};ScriptLoader.ScriptLoader=new ScriptLoader;var each=$_topwtjjcq8h3fq.each,AddOnManager=function(){var self=this;self.items=[],self.urls={},self.lookup={},self._listeners=[]};AddOnManager.prototype={get:function(name){if(this.lookup[name])return this.lookup[name].instance},dependencies:function(name){var result;return this.lookup[name]&&(result=this.lookup[name].dependencies),result||[]},requireLangPack:function(name,languages){var language=AddOnManager.language;if(language&&!1!==AddOnManager.languageLoad){if(languages)if(-1!==(languages=","+languages+",").indexOf(","+language.substr(0,2)+","))language=language.substr(0,2);else if(-1===languages.indexOf(","+language+","))return;ScriptLoader.ScriptLoader.add(this.urls[name]+"/langs/"+language+".js")}},add:function(id,addOn,dependencies){this.items.push(addOn),this.lookup[id]={instance:addOn,dependencies:dependencies};var result=$_de5suq4jcq8h2x0.partition(this._listeners,function(listener){return listener.name===id});return this._listeners=result.fail,each(result.pass,function(listener){listener.callback()}),addOn},remove:function(name){delete this.urls[name],delete this.lookup[name]},createUrl:function(baseUrl,dep){return"object"==typeof dep?dep:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix}},addComponents:function(pluginName,scripts){var pluginUrl=this.urls[pluginName];each(scripts,function(script){ScriptLoader.ScriptLoader.add(pluginUrl+"/"+script)})},load:function(name,addOnUrl,success,scope,failure){var self=this,url=addOnUrl,loadDependencies=function(){var dependencies=self.dependencies(name);each(dependencies,function(dep){var newUrl=self.createUrl(addOnUrl,dep);self.load(newUrl.resource,newUrl,void 0,void 0)}),success&&(scope?success.call(scope):success.call(ScriptLoader))};self.urls[name]||("object"==typeof addOnUrl&&(url=addOnUrl.prefix+addOnUrl.resource+addOnUrl.suffix),0!==url.indexOf("/")&&-1===url.indexOf("://")&&(url=AddOnManager.baseURL+"/"+url),self.urls[name]=url.substring(0,url.lastIndexOf("/")),self.lookup[name]?loadDependencies():ScriptLoader.ScriptLoader.add(url,loadDependencies,scope,failure))},waitFor:function(name,callback){this.lookup.hasOwnProperty(name)?callback():this._listeners.push({name:name,callback:callback})}},AddOnManager.PluginManager=new AddOnManager,AddOnManager.ThemeManager=new AddOnManager;var $_fz4vwq21jcq8h3ow={isZwsp:function(chr){return"\ufeff"===chr},ZWSP:"\ufeff",trim:function(text){return text.replace(new RegExp("\ufeff","g"),"")}},isElement$3=$_bpl7e51qjcq8h3kz.isElement,isText$4=$_bpl7e51qjcq8h3kz.isText,isCaretContainerBlock=function(node){return isText$4(node)&&(node=node.parentNode),isElement$3(node)&&node.hasAttribute("data-mce-caret")},isCaretContainerInline=function(node){return isText$4(node)&&$_fz4vwq21jcq8h3ow.isZwsp(node.data)},isCaretContainer$1=function(node){return isCaretContainerBlock(node)||isCaretContainerInline(node)},createBogusBr=function(){var br=document.createElement("br");return br.setAttribute("data-mce-bogus","1"),br},startsWithCaretContainer=function(node){return isText$4(node)&&node.data[0]===$_fz4vwq21jcq8h3ow.ZWSP},endsWithCaretContainer=function(node){return isText$4(node)&&node.data[node.data.length-1]===$_fz4vwq21jcq8h3ow.ZWSP},trimBogusBr=function(elm){var brs=elm.getElementsByTagName("br"),lastBr=brs[brs.length-1];$_bpl7e51qjcq8h3kz.isBogus(lastBr)&&lastBr.parentNode.removeChild(lastBr)},$_cyutcs20jcq8h3or={isCaretContainer:isCaretContainer$1,isCaretContainerBlock:isCaretContainerBlock,isCaretContainerInline:isCaretContainerInline,showCaretContainerBlock:function(caretContainer){return caretContainer&&caretContainer.hasAttribute("data-mce-caret")?(trimBogusBr(caretContainer),caretContainer.removeAttribute("data-mce-caret"),caretContainer.removeAttribute("data-mce-bogus"),caretContainer.removeAttribute("style"),caretContainer.removeAttribute("_moz_abspos"),caretContainer):null},insertInline:function(node,before){var doc,sibling,textNode,parentNode;if(doc=node.ownerDocument,textNode=doc.createTextNode($_fz4vwq21jcq8h3ow.ZWSP),parentNode=node.parentNode,before){if(sibling=node.previousSibling,isText$4(sibling)){if(isCaretContainer$1(sibling))return sibling;if(endsWithCaretContainer(sibling))return sibling.splitText(sibling.data.length-1)}parentNode.insertBefore(textNode,node)}else{if(sibling=node.nextSibling,isText$4(sibling)){if(isCaretContainer$1(sibling))return sibling;if(startsWithCaretContainer(sibling))return sibling.splitText(1),sibling}node.nextSibling?parentNode.insertBefore(textNode,node.nextSibling):parentNode.appendChild(textNode)}return textNode},prependInline:function(node){if($_bpl7e51qjcq8h3kz.isText(node)){var data=node.data;return data.length>0&&data.charAt(0)!==$_fz4vwq21jcq8h3ow.ZWSP&&node.insertData(0,$_fz4vwq21jcq8h3ow.ZWSP),node}return null},appendInline:function(node){if($_bpl7e51qjcq8h3kz.isText(node)){var data=node.data;return data.length>0&&data.charAt(data.length-1)!==$_fz4vwq21jcq8h3ow.ZWSP&&node.insertData(data.length,$_fz4vwq21jcq8h3ow.ZWSP),node}return null},isBeforeInline:function(pos){return pos&&$_bpl7e51qjcq8h3kz.isText(pos.container())&&pos.container().data.charAt(pos.offset())===$_fz4vwq21jcq8h3ow.ZWSP},isAfterInline:function(pos){return pos&&$_bpl7e51qjcq8h3kz.isText(pos.container())&&pos.container().data.charAt(pos.offset()-1)===$_fz4vwq21jcq8h3ow.ZWSP},insertBlock:function(blockName,node,before){var doc,blockNode,parentNode;return doc=node.ownerDocument,(blockNode=doc.createElement(blockName)).setAttribute("data-mce-caret",before?"before":"after"),blockNode.setAttribute("data-mce-bogus","all"),blockNode.appendChild(createBogusBr()),parentNode=node.parentNode,before?parentNode.insertBefore(blockNode,node):node.nextSibling?parentNode.insertBefore(blockNode,node.nextSibling):parentNode.appendChild(blockNode),blockNode},hasContent:function(node){return node.firstChild!==node.lastChild||!$_bpl7e51qjcq8h3kz.isBr(node.firstChild)},startsWithCaretContainer:startsWithCaretContainer,endsWithCaretContainer:endsWithCaretContainer},isContentEditableTrue$1=$_bpl7e51qjcq8h3kz.isContentEditableTrue,isContentEditableFalse$1=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isBr$3=$_bpl7e51qjcq8h3kz.isBr,isText$3=$_bpl7e51qjcq8h3kz.isText,isInvalidTextElement=$_bpl7e51qjcq8h3kz.matchNodeNames("script style textarea"),isAtomicInline=$_bpl7e51qjcq8h3kz.matchNodeNames("img input textarea hr iframe video audio object"),isTable=$_bpl7e51qjcq8h3kz.matchNodeNames("table"),isCaretContainer=$_cyutcs20jcq8h3or.isCaretContainer,isCaretCandidate$1=function(node){return!isCaretContainer(node)&&(isText$3(node)?!isInvalidTextElement(node.parentNode):isAtomicInline(node)||isBr$3(node)||isTable(node)||isContentEditableFalse$1(node))},isInEditable=function(node,rootNode){for(node=node.parentNode;node&&node!==rootNode;node=node.parentNode){if(isContentEditableFalse$1(node))return!1;if(isContentEditableTrue$1(node))return!0}return!0},isAtomicContentEditableFalse=function(node){return!!isContentEditableFalse$1(node)&&!0!==$_292trzkjcq8h3fz.reduce(node.getElementsByTagName("*"),function(result,elm){return result||isContentEditableTrue$1(elm)},!1)},$_dlol411zjcq8h3om={isCaretCandidate:isCaretCandidate$1,isInEditable:isInEditable,isAtomic:function(node){return isAtomicInline(node)||isAtomicContentEditableFalse(node)},isEditableCaretCandidate:function(node,rootNode){return isCaretCandidate$1(node)&&isInEditable(node,rootNode)}},round=Math.round,clone$1=function(rect){return rect?{left:round(rect.left),top:round(rect.top),bottom:round(rect.bottom),right:round(rect.right),width:round(rect.width),height:round(rect.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},isValidOverflow=function(overflowY,clientRect1,clientRect2){return overflowY>=0&&overflowY<=Math.min(clientRect1.height,clientRect2.height)/2},isAbove=function(clientRect1,clientRect2){return clientRect1.bottom-clientRect1.height/2<clientRect2.top||!(clientRect1.top>clientRect2.bottom)&&isValidOverflow(clientRect2.top-clientRect1.bottom,clientRect1,clientRect2)},isBelow=function(clientRect1,clientRect2){return clientRect1.top>clientRect2.bottom||!(clientRect1.bottom<clientRect2.top)&&isValidOverflow(clientRect2.bottom-clientRect1.top,clientRect1,clientRect2)},isLeft=function(clientRect1,clientRect2){return clientRect1.left<clientRect2.left},isRight=function(clientRect1,clientRect2){return clientRect1.right>clientRect2.right},$_99qwt122jcq8h3oy={clone:clone$1,collapse:function(clientRect,toStart){return clientRect=clone$1(clientRect),toStart?clientRect.right=clientRect.left:(clientRect.left=clientRect.left+clientRect.width,clientRect.right=clientRect.left),clientRect.width=0,clientRect},isEqual:function(rect1,rect2){return rect1.left===rect2.left&&rect1.top===rect2.top&&rect1.bottom===rect2.bottom&&rect1.right===rect2.right},isAbove:isAbove,isBelow:isBelow,isLeft:isLeft,isRight:isRight,compare:function(clientRect1,clientRect2){return isAbove(clientRect1,clientRect2)?-1:isBelow(clientRect1,clientRect2)?1:isLeft(clientRect1,clientRect2)?-1:isRight(clientRect1,clientRect2)?1:0},containsXY:function(clientRect,clientX,clientY){return clientX>=clientRect.left&&clientX<=clientRect.right&&clientY>=clientRect.top&&clientY<=clientRect.bottom}},$_1nmjnx23jcq8h3p1={getSelectedNode:function(range){var startContainer=range.startContainer,startOffset=range.startOffset;return startContainer.hasChildNodes()&&range.endOffset===startOffset+1?startContainer.childNodes[startOffset]:null},getNode:function(container,offset){return 1===container.nodeType&&container.hasChildNodes()&&(offset>=container.childNodes.length&&(offset=container.childNodes.length-1),container=container.childNodes[offset]),container}},extendingChars=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),$_gfjjw924jcq8h3p3={isExtendingChar:function(ch){return"string"==typeof ch&&ch.charCodeAt(0)>=768&&extendingChars.test(ch)}},slice$3=[].slice,curry$1=function(fn){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=slice$3.call(arguments);return args.length-1>=fn.length?fn.apply(this,args.slice(1)):function(){var tempArgs=args.concat([].slice.call(arguments));return curry$1.apply(this,tempArgs)}},$_ghxtsv25jcq8h3p5={constant:function(value){return function(){return value}},negate:function(predicate){return function(x){return!predicate(x)}},and:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(!args[i](x))return!1;return!0}},or:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(args[i](x))return!0;return!1}},curry:curry$1,compose:function(f,g){return function(x){return f(g(x))}},noop:function(){}},isElement$2=$_bpl7e51qjcq8h3kz.isElement,isCaretCandidate=$_dlol411zjcq8h3om.isCaretCandidate,isBlock$1=$_bpl7e51qjcq8h3kz.matchStyleValues("display","block table"),isFloated=$_bpl7e51qjcq8h3kz.matchStyleValues("float","left right"),isValidElementCaretCandidate=$_ghxtsv25jcq8h3p5.and(isElement$2,isCaretCandidate,$_ghxtsv25jcq8h3p5.negate(isFloated)),isNotPre=$_ghxtsv25jcq8h3p5.negate($_bpl7e51qjcq8h3kz.matchStyleValues("white-space","pre pre-line pre-wrap")),isText$2=$_bpl7e51qjcq8h3kz.isText,isBr$2=$_bpl7e51qjcq8h3kz.isBr,nodeIndex$1=DOMUtils.nodeIndex,resolveIndex=$_1nmjnx23jcq8h3p1.getNode,createRange=function(doc){return"createRange"in doc?doc.createRange():DOMUtils.DOM.createRng()},isWhiteSpace=function(chr){return chr&&/[\r\n\t ]/.test(chr)},isHiddenWhiteSpaceRange=function(range){var text,container=range.startContainer,offset=range.startOffset;return!!(isWhiteSpace(range.toString())&&isNotPre(container.parentNode)&&(text=container.data,isWhiteSpace(text[offset-1])||isWhiteSpace(text[offset+1])))},getCaretPositionClientRects=function(caretPosition){var beforeNode,node,clientRects=[],getBrClientRect=function(brNode){var clientRect,doc=brNode.ownerDocument,rng=createRange(doc),nbsp=doc.createTextNode(""),parentNode=brNode.parentNode;return parentNode.insertBefore(nbsp,brNode),rng.setStart(nbsp,0),rng.setEnd(nbsp,1),clientRect=$_99qwt122jcq8h3oy.clone(rng.getBoundingClientRect()),parentNode.removeChild(nbsp),clientRect},getBoundingClientRect=function(item){var clientRect,clientRects;return clientRects=item.getClientRects(),clientRect=clientRects.length>0?$_99qwt122jcq8h3oy.clone(clientRects[0]):$_99qwt122jcq8h3oy.clone(item.getBoundingClientRect()),isBr$2(item)&&0===clientRect.left?getBrClientRect(item):clientRect},collapseAndInflateWidth=function(clientRect,toStart){return clientRect=$_99qwt122jcq8h3oy.collapse(clientRect,toStart),clientRect.width=1,clientRect.right=clientRect.left+1,clientRect},addUniqueAndValidRect=function(clientRect){0!==clientRect.height&&(clientRects.length>0&&$_99qwt122jcq8h3oy.isEqual(clientRect,clientRects[clientRects.length-1])||clientRects.push(clientRect))},addCharacterOffset=function(container,offset){var range=createRange(container.ownerDocument);if(offset<container.data.length){if($_gfjjw924jcq8h3p3.isExtendingChar(container.data[offset]))return clientRects;if($_gfjjw924jcq8h3p3.isExtendingChar(container.data[offset-1])&&(range.setStart(container,offset),range.setEnd(container,offset+1),!isHiddenWhiteSpaceRange(range)))return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1)),clientRects}offset>0&&(range.setStart(container,offset-1),range.setEnd(container,offset),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1))),offset<container.data.length&&(range.setStart(container,offset),range.setEnd(container,offset+1),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!0)))};if(isText$2(caretPosition.container()))return addCharacterOffset(caretPosition.container(),caretPosition.offset()),clientRects;if(isElement$2(caretPosition.container()))if(caretPosition.isAtEnd())node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$2(node)&&addCharacterOffset(node,node.data.length),isValidElementCaretCandidate(node)&&!isBr$2(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1));else{if(node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$2(node)&&addCharacterOffset(node,0),isValidElementCaretCandidate(node)&&caretPosition.isAtEnd())return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1)),clientRects;beforeNode=resolveIndex(caretPosition.container(),caretPosition.offset()-1),isValidElementCaretCandidate(beforeNode)&&!isBr$2(beforeNode)&&(isBlock$1(beforeNode)||isBlock$1(node)||!isValidElementCaretCandidate(node))&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode),!1)),isValidElementCaretCandidate(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!0))}return clientRects},CaretPosition=function(container,offset,clientRects){var getClientRects=function(){return clientRects||(clientRects=getCaretPositionClientRects(new CaretPosition(container,offset))),clientRects};return{container:$_ghxtsv25jcq8h3p5.constant(container),offset:$_ghxtsv25jcq8h3p5.constant(offset),toRange:function(){var range;return(range=createRange(container.ownerDocument)).setStart(container,offset),range.setEnd(container,offset),range},getClientRects:getClientRects,isVisible:function(){return getClientRects().length>0},isAtStart:function(){return isText$2(container),0===offset},isAtEnd:function(){return isText$2(container)?offset>=container.data.length:offset>=container.childNodes.length},isEqual:function(caretPosition){return caretPosition&&container===caretPosition.container()&&offset===caretPosition.offset()},getNode:function(before){return resolveIndex(container,before?offset-1:offset)}}};CaretPosition.fromRangeStart=function(range){return new CaretPosition(range.startContainer,range.startOffset)},CaretPosition.fromRangeEnd=function(range){return new CaretPosition(range.endContainer,range.endOffset)},CaretPosition.after=function(node){return new CaretPosition(node.parentNode,nodeIndex$1(node)+1)},CaretPosition.before=function(node){return new CaretPosition(node.parentNode,nodeIndex$1(node))},CaretPosition.isAtStart=function(pos){return!!pos&&pos.isAtStart()},CaretPosition.isAtEnd=function(pos){return!!pos&&pos.isAtEnd()},CaretPosition.isTextPosition=function(pos){return!!pos&&$_bpl7e51qjcq8h3kz.isText(pos.container())};var isContentEditableTrue$2=$_bpl7e51qjcq8h3kz.isContentEditableTrue,isContentEditableFalse$3=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isBlockLike=$_bpl7e51qjcq8h3kz.matchStyleValues("display","block table table-cell table-caption list-item"),isCaretContainer$2=$_cyutcs20jcq8h3or.isCaretContainer,isCaretContainerBlock$1=$_cyutcs20jcq8h3or.isCaretContainerBlock,curry$2=$_ghxtsv25jcq8h3p5.curry,isElement$5=$_bpl7e51qjcq8h3kz.isElement,isCaretCandidate$3=$_dlol411zjcq8h3om.isCaretCandidate,isForwards$1=function(direction){return direction>0},isBackwards$1=function(direction){return direction<0},skipCaretContainers=function(walk,shallow){for(var node;node=walk(shallow);)if(!isCaretContainerBlock$1(node))return node;return null},getEditingHost=function(node,rootNode){for(node=node.parentNode;node&&node!==rootNode;node=node.parentNode)if(isContentEditableTrue$2(node))return node;return rootNode},getParentBlock=function(node,rootNode){for(;node&&node!==rootNode;){if(isBlockLike(node))return node;node=node.parentNode}return null},getChildNodeAtRelativeOffset=function(relativeOffset,caretPosition){var container,offset;return caretPosition?(container=caretPosition.container(),offset=caretPosition.offset(),isElement$5(container)?container.childNodes[offset+relativeOffset]:null):null},beforeAfter=function(before,node){var range=node.ownerDocument.createRange();return before?(range.setStartBefore(node),range.setEndBefore(node)):(range.setStartAfter(node),range.setEndAfter(node)),range},isNodesInSameBlock=function(rootNode,node1,node2){return getParentBlock(node1,rootNode)===getParentBlock(node2,rootNode)},lean=function(left,rootNode,node){var sibling,siblingName;for(siblingName=left?"previousSibling":"nextSibling";node&&node!==rootNode;){if(sibling=node[siblingName],isCaretContainer$2(sibling)&&(sibling=sibling[siblingName]),isContentEditableFalse$3(sibling)){if(isNodesInSameBlock(rootNode,sibling,node))return sibling;break}if(isCaretCandidate$3(sibling))break;node=node.parentNode}return null},before=curry$2(beforeAfter,!0),after=curry$2(beforeAfter,!1),isNextToContentEditableFalse=function(relativeOffset,caretPosition){return isContentEditableFalse$3(getChildNodeAtRelativeOffset(relativeOffset,caretPosition))},$_ctfd6a27jcq8h3pe={isForwards:isForwards$1,isBackwards:isBackwards$1,findNode:function(node,direction,predicateFn,rootNode,shallow){var walker=new TreeWalker(node,rootNode);if(isBackwards$1(direction)){if((isContentEditableFalse$3(node)||isCaretContainerBlock$1(node))&&(node=skipCaretContainers(walker.prev,!0),predicateFn(node)))return node;for(;node=skipCaretContainers(walker.prev,shallow);)if(predicateFn(node))return node}if(isForwards$1(direction)){if((isContentEditableFalse$3(node)||isCaretContainerBlock$1(node))&&(node=skipCaretContainers(walker.next,!0),predicateFn(node)))return node;for(;node=skipCaretContainers(walker.next,shallow);)if(predicateFn(node))return node}return null},getEditingHost:getEditingHost,getParentBlock:getParentBlock,isInSameBlock:function(caretPosition1,caretPosition2,rootNode){return getParentBlock(caretPosition1.container(),rootNode)===getParentBlock(caretPosition2.container(),rootNode)},isInSameEditingHost:function(caretPosition1,caretPosition2,rootNode){return getEditingHost(caretPosition1.container(),rootNode)===getEditingHost(caretPosition2.container(),rootNode)},isBeforeContentEditableFalse:curry$2(isNextToContentEditableFalse,0),isAfterContentEditableFalse:curry$2(isNextToContentEditableFalse,-1),normalizeRange:function(direction,rootNode,range){var node,container,offset,location,leanLeft=curry$2(lean,!0,rootNode),leanRight=curry$2(lean,!1,rootNode);if(container=range.startContainer,offset=range.startOffset,$_cyutcs20jcq8h3or.isCaretContainerBlock(container)){if(isElement$5(container)||(container=container.parentNode),"before"===(location=container.getAttribute("data-mce-caret"))&&(node=container.nextSibling,isContentEditableFalse$3(node)))return before(node);if("after"===location&&(node=container.previousSibling,isContentEditableFalse$3(node)))return after(node)}if(!range.collapsed)return range;if($_bpl7e51qjcq8h3kz.isText(container)){if(isCaretContainer$2(container)){if(1===direction){if(node=leanRight(container))return before(node);if(node=leanLeft(container))return after(node)}if(-1===direction){if(node=leanLeft(container))return after(node);if(node=leanRight(container))return before(node)}return range}if($_cyutcs20jcq8h3or.endsWithCaretContainer(container)&&offset>=container.data.length-1)return 1===direction&&(node=leanRight(container))?before(node):range;if($_cyutcs20jcq8h3or.startsWithCaretContainer(container)&&offset<=1)return-1===direction&&(node=leanLeft(container))?after(node):range;if(offset===container.data.length)return(node=leanRight(container))?before(node):range;if(0===offset)return(node=leanLeft(container))?after(node):range}return range}},isContentEditableFalse$2=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isText$5=$_bpl7e51qjcq8h3kz.isText,isElement$4=$_bpl7e51qjcq8h3kz.isElement,isBr$4=$_bpl7e51qjcq8h3kz.isBr,isForwards=$_ctfd6a27jcq8h3pe.isForwards,isBackwards=$_ctfd6a27jcq8h3pe.isBackwards,isCaretCandidate$2=$_dlol411zjcq8h3om.isCaretCandidate,isAtomic$1=$_dlol411zjcq8h3om.isAtomic,isEditableCaretCandidate$1=$_dlol411zjcq8h3om.isEditableCaretCandidate,getParents=function(node,rootNode){for(var parents=[];node&&node!==rootNode;)parents.push(node),node=node.parentNode;return parents},nodeAtIndex=function(container,offset){return container.hasChildNodes()&&offset<container.childNodes.length?container.childNodes[offset]:null},getCaretCandidatePosition=function(direction,node){if(isForwards(direction)){if(isCaretCandidate$2(node.previousSibling)&&!isText$5(node.previousSibling))return CaretPosition.before(node);if(isText$5(node))return CaretPosition(node,0)}if(isBackwards(direction)){if(isCaretCandidate$2(node.nextSibling)&&!isText$5(node.nextSibling))return CaretPosition.after(node);if(isText$5(node))return CaretPosition(node,node.data.length)}return isBackwards(direction)?isBr$4(node)?CaretPosition.before(node):CaretPosition.after(node):CaretPosition.before(node)},isBrBeforeBlock=function(node,rootNode){var next;return!!$_bpl7e51qjcq8h3kz.isBr(node)&&(!!(next=findCaretPosition(1,CaretPosition.after(node),rootNode))&&!$_ctfd6a27jcq8h3pe.isInSameBlock(CaretPosition.before(node),CaretPosition.before(next),rootNode))},findCaretPosition=function(direction,startCaretPosition,rootNode){var container,offset,node,nextNode,innerNode,rootContentEditableFalseElm,caretPosition;if(!isElement$4(rootNode)||!startCaretPosition)return null;if(startCaretPosition.isEqual(CaretPosition.after(rootNode))&&rootNode.lastChild){if(caretPosition=CaretPosition.after(rootNode.lastChild),isBackwards(direction)&&isCaretCandidate$2(rootNode.lastChild)&&isElement$4(rootNode.lastChild))return isBr$4(rootNode.lastChild)?CaretPosition.before(rootNode.lastChild):caretPosition}else caretPosition=startCaretPosition;if(container=caretPosition.container(),offset=caretPosition.offset(),isText$5(container)){if(isBackwards(direction)&&offset>0)return CaretPosition(container,--offset);if(isForwards(direction)&&offset<container.length)return CaretPosition(container,++offset);node=container}else{if(isBackwards(direction)&&offset>0&&(nextNode=nodeAtIndex(container,offset-1),isCaretCandidate$2(nextNode)))return!isAtomic$1(nextNode)&&(innerNode=$_ctfd6a27jcq8h3pe.findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$5(innerNode)?CaretPosition(innerNode,innerNode.data.length):CaretPosition.after(innerNode):isText$5(nextNode)?CaretPosition(nextNode,nextNode.data.length):CaretPosition.before(nextNode);if(isForwards(direction)&&offset<container.childNodes.length&&(nextNode=nodeAtIndex(container,offset),isCaretCandidate$2(nextNode)))return isBrBeforeBlock(nextNode,rootNode)?findCaretPosition(direction,CaretPosition.after(nextNode),rootNode):!isAtomic$1(nextNode)&&(innerNode=$_ctfd6a27jcq8h3pe.findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$5(innerNode)?CaretPosition(innerNode,0):CaretPosition.before(innerNode):isText$5(nextNode)?CaretPosition(nextNode,0):CaretPosition.after(nextNode);node=caretPosition.getNode()}return(isForwards(direction)&&caretPosition.isAtEnd()||isBackwards(direction)&&caretPosition.isAtStart())&&(node=$_ctfd6a27jcq8h3pe.findNode(node,direction,$_ghxtsv25jcq8h3p5.constant(!0),rootNode,!0),isEditableCaretCandidate$1(node,rootNode))?getCaretCandidatePosition(direction,node):(nextNode=$_ctfd6a27jcq8h3pe.findNode(node,direction,isEditableCaretCandidate$1,rootNode),!(rootContentEditableFalseElm=$_292trzkjcq8h3fz.last($_292trzkjcq8h3fz.filter(getParents(container,rootNode),isContentEditableFalse$2)))||nextNode&&rootContentEditableFalseElm.contains(nextNode)?nextNode?getCaretCandidatePosition(direction,nextNode):null:caretPosition=isForwards(direction)?CaretPosition.after(rootContentEditableFalseElm):CaretPosition.before(rootContentEditableFalseElm))},CaretWalker=function(rootNode){return{next:function(caretPosition){return findCaretPosition(1,caretPosition,rootNode)},prev:function(caretPosition){return findCaretPosition(-1,caretPosition,rootNode)}}},hasOnlyOneChild=function(node){return node.firstChild&&node.firstChild===node.lastChild},isPaddingNode=function(node){return"br"===node.name||""===node.value},isPaddedEmptyBlock=function(schema,node){return schema.getBlockElements()[node.name]&&hasOnlyOneChild(node)&&isPaddingNode(node.firstChild)},isEmptyFragmentElement=function(schema,node){var nonEmptyElements=schema.getNonEmptyElements();return node&&(node.isEmpty(nonEmptyElements)||isPaddedEmptyBlock(schema,node))},cleanupDomFragment=function(domFragment){var firstChild=domFragment.firstChild,lastChild=domFragment.lastChild;return firstChild&&"META"===firstChild.nodeName&&firstChild.parentNode.removeChild(firstChild),lastChild&&"mce_marker"===lastChild.id&&lastChild.parentNode.removeChild(lastChild),domFragment},toDomFragment=function(dom,serializer,fragment){var html=serializer.serialize(fragment),domFragment=dom.createFragment(html);return cleanupDomFragment(domFragment)},listItems$1=function(elm){return $_topwtjjcq8h3fq.grep(elm.childNodes,function(child){return"LI"===child.nodeName})},isPadding=function(node){return""===node.data||$_bpl7e51qjcq8h3kz.isBr(node)},isListItemPadded=function(node){return node&&node.firstChild&&node.firstChild===node.lastChild&&isPadding(node.firstChild)},isEmptyOrPadded=function(elm){return!elm.firstChild||isListItemPadded(elm)},trimListItems=function(elms){return elms.length>0&&isEmptyOrPadded(elms[elms.length-1])?elms.slice(0,-1):elms},getParentLi=function(dom,node){var parentBlock=dom.getParent(node,dom.isBlock);return parentBlock&&"LI"===parentBlock.nodeName?parentBlock:null},getSplit=function(parentNode,rng){var beforeRng=rng.cloneRange(),afterRng=rng.cloneRange();return beforeRng.setStartBefore(parentNode),afterRng.setEndAfter(parentNode),[beforeRng.cloneContents(),afterRng.cloneContents()]},findFirstIn=function(node,rootNode){var caretPos=CaretPosition.before(node),newCaretPos=CaretWalker(rootNode).next(caretPos);return newCaretPos?newCaretPos.toRange():null},findLastOf=function(node,rootNode){var caretPos=CaretPosition.after(node),newCaretPos=CaretWalker(rootNode).prev(caretPos);return newCaretPos?newCaretPos.toRange():null},insertMiddle=function(target,elms,rootNode,rng){var parts=getSplit(target,rng),parentElm=target.parentNode;return parentElm.insertBefore(parts[0],target),$_topwtjjcq8h3fq.each(elms,function(li){parentElm.insertBefore(li,target)}),parentElm.insertBefore(parts[1],target),parentElm.removeChild(target),findLastOf(elms[elms.length-1],rootNode)},insertBefore=function(target,elms,rootNode){var parentElm=target.parentNode;return $_topwtjjcq8h3fq.each(elms,function(elm){parentElm.insertBefore(elm,target)}),findFirstIn(target,rootNode)},insertAfter=function(target,elms,rootNode,dom){return dom.insertAfter(elms.reverse(),target),findLastOf(elms[0],rootNode)},$_7fgunj1xjcq8h3oa={isListFragment:function(schema,fragment){var firstChild=fragment.firstChild,lastChild=fragment.lastChild;return firstChild&&"meta"===firstChild.name&&(firstChild=firstChild.next),lastChild&&"mce_marker"===lastChild.attr("id")&&(lastChild=lastChild.prev),isEmptyFragmentElement(schema,lastChild)&&(lastChild=lastChild.prev),!(!firstChild||firstChild!==lastChild||"ul"!==firstChild.name&&"ol"!==firstChild.name)},insertAtCaret:function(serializer,dom,rng,fragment){var domFragment=toDomFragment(dom,serializer,fragment),liTarget=getParentLi(dom,rng.startContainer),liElms=trimListItems(listItems$1(domFragment.firstChild)),rootNode=dom.getRoot(),isAt=function(location){var caretPos=CaretPosition.fromRangeStart(rng),caretWalker=CaretWalker(dom.getRoot()),newPos=1===location?caretWalker.prev(caretPos):caretWalker.next(caretPos);return!newPos||getParentLi(dom,newPos.getNode())!==liTarget};return isAt(1)?insertBefore(liTarget,liElms,rootNode):isAt(2)?insertAfter(liTarget,liElms,rootNode,dom):insertMiddle(liTarget,liElms,rootNode,rng)},isParentBlockLi:function(dom,node){return!!getParentLi(dom,node)},trimListItems:trimListItems,listItems:listItems$1},isText$6=$_bpl7e51qjcq8h3kz.isText,isBogus$1=$_bpl7e51qjcq8h3kz.isBogus,nodeIndex$2=DOMUtils.nodeIndex,normalizedParent=function(node){var parentNode=node.parentNode;return isBogus$1(parentNode)?normalizedParent(parentNode):parentNode},getChildNodes=function(node){return node?$_292trzkjcq8h3fz.reduce(node.childNodes,function(result,node){return isBogus$1(node)&&"BR"!==node.nodeName?result=result.concat(getChildNodes(node)):result.push(node),result},[]):[]},normalizedTextOffset=function(textNode,offset){for(;(textNode=textNode.previousSibling)&&isText$6(textNode);)offset+=textNode.data.length;return offset},equal$1=function(targetValue){return function(value){return targetValue===value}},normalizedNodeIndex=function(node){var nodes,index,numTextFragments;return nodes=getChildNodes(normalizedParent(node)),index=$_292trzkjcq8h3fz.findIndex(nodes,equal$1(node),node),nodes=nodes.slice(0,index+1),numTextFragments=$_292trzkjcq8h3fz.reduce(nodes,function(result,node,i){return isText$6(node)&&isText$6(nodes[i-1])&&result++,result},0),nodes=$_292trzkjcq8h3fz.filter(nodes,$_bpl7e51qjcq8h3kz.matchNodeNames(node.nodeName)),(index=$_292trzkjcq8h3fz.findIndex(nodes,equal$1(node),node))-numTextFragments},createPathItem=function(node){return(isText$6(node)?"text()":node.nodeName.toLowerCase())+"["+normalizedNodeIndex(node)+"]"},parentsUntil=function(rootNode,node,predicate){var parents=[];for(node=node.parentNode;node!==rootNode&&(!predicate||!predicate(node));node=node.parentNode)parents.push(node);return parents},resolvePathItem=function(node,name,index){var nodes=getChildNodes(node);return nodes=$_292trzkjcq8h3fz.filter(nodes,function(node,index){return!isText$6(node)||!isText$6(nodes[index-1])}),(nodes=$_292trzkjcq8h3fz.filter(nodes,$_bpl7e51qjcq8h3kz.matchNodeNames(name)))[index]},findTextPosition=function(container,offset){for(var dataLen,node=container,targetOffset=0;isText$6(node);){if(dataLen=node.data.length,offset>=targetOffset&&offset<=targetOffset+dataLen){container=node,offset-=targetOffset;break}if(!isText$6(node.nextSibling)){container=node,offset=dataLen;break}targetOffset+=dataLen,node=node.nextSibling}return offset>container.data.length&&(offset=container.data.length),new CaretPosition(container,offset)},$_d3qju42bjcq8h3qa={create:function(rootNode,caretPosition){var container,offset,outputOffset,childNodes,parents,path=[];return container=caretPosition.container(),offset=caretPosition.offset(),isText$6(container)?outputOffset=normalizedTextOffset(container,offset):(offset>=(childNodes=container.childNodes).length?(outputOffset="after",offset=childNodes.length-1):outputOffset="before",container=childNodes[offset]),path.push(createPathItem(container)),parents=parentsUntil(rootNode,container),parents=$_292trzkjcq8h3fz.filter(parents,$_ghxtsv25jcq8h3p5.negate($_bpl7e51qjcq8h3kz.isBogus)),(path=path.concat($_292trzkjcq8h3fz.map(parents,function(node){return createPathItem(node)}))).reverse().join("/")+","+outputOffset},resolve:function(rootNode,path){var parts,container,offset;return path?(parts=path.split(","),path=parts[0].split("/"),offset=parts.length>1?parts[1]:"before",(container=$_292trzkjcq8h3fz.reduce(path,function(result,value){return(value=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(value))?("text()"===value[1]&&(value[1]="#text"),resolvePathItem(result,value[1],parseInt(value[2],10))):null},rootNode))?isText$6(container)?findTextPosition(container,parseInt(offset,10)):(offset="after"===offset?nodeIndex$2(container)+1:nodeIndex$2(container),new CaretPosition(container.parentNode,offset)):null):null}},isContentEditableFalse$4=$_bpl7e51qjcq8h3kz.isContentEditableFalse,getNormalizedTextOffset=function(trim,container,offset){var node,trimmedOffset;for(trimmedOffset=trim(container.data.slice(0,offset)).length,node=container.previousSibling;node&&$_bpl7e51qjcq8h3kz.isText(node);node=node.previousSibling)trimmedOffset+=trim(node.data).length;return trimmedOffset},getPoint=function(dom,trim,normalized,rng,start){var childNodes,container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],point=[],after=0,root=dom.getRoot();for($_bpl7e51qjcq8h3kz.isText(container)?point.push(normalized?getNormalizedTextOffset(trim,container,offset):offset):(offset>=(childNodes=container.childNodes).length&&childNodes.length&&(after=1,offset=Math.max(0,childNodes.length-1)),point.push(dom.nodeIndex(childNodes[offset],normalized)+after));container&&container!==root;container=container.parentNode)point.push(dom.nodeIndex(container,normalized));return point},getLocation=function(trim,selection,normalized,rng){var dom=selection.dom,bookmark={};return bookmark.start=getPoint(dom,trim,normalized,rng,!0),selection.isCollapsed()||(bookmark.end=getPoint(dom,trim,normalized,rng,!1)),bookmark},trimEmptyTextNode=function(node){$_bpl7e51qjcq8h3kz.isText(node)&&0===node.data.length&&node.parentNode.removeChild(node)},findIndex$3=function(dom,name,element){var count=0;return $_topwtjjcq8h3fq.each(dom.select(name),function(node){if("all"!==node.getAttribute("data-mce-bogus"))return node!==element&&void count++}),count},moveEndPoint=function(rng,start){var container,offset,childNodes,prefix=start?"start":"end";container=rng[prefix+"Container"],offset=rng[prefix+"Offset"],$_bpl7e51qjcq8h3kz.isElement(container)&&"TR"===container.nodeName&&(container=(childNodes=container.childNodes)[Math.min(start?offset:offset-1,childNodes.length-1)])&&(offset=start?0:container.childNodes.length,rng["set"+(start?"Start":"End")](container,offset))},normalizeTableCellSelection=function(rng){return moveEndPoint(rng,!0),moveEndPoint(rng,!1),rng},findSibling=function(node,offset){var sibling;if($_bpl7e51qjcq8h3kz.isElement(node)&&(node=$_1nmjnx23jcq8h3p1.getNode(node,offset),isContentEditableFalse$4(node)))return node;if($_cyutcs20jcq8h3or.isCaretContainer(node)){if($_bpl7e51qjcq8h3kz.isText(node)&&$_cyutcs20jcq8h3or.isCaretContainerBlock(node)&&(node=node.parentNode),sibling=node.previousSibling,isContentEditableFalse$4(sibling))return sibling;if(sibling=node.nextSibling,isContentEditableFalse$4(sibling))return sibling}},findAdjacentContentEditableFalseElm=function(rng){return findSibling(rng.startContainer,rng.startOffset)||findSibling(rng.endContainer,rng.endOffset)},getOffsetBookmark=function(trim,normalized,selection){var element=selection.getNode(),name=element?element.nodeName:null,rng=selection.getRng();return isContentEditableFalse$4(element)||"IMG"===name?{name:name,index:findIndex$3(selection.dom,name,element)}:(element=findAdjacentContentEditableFalseElm(rng))?(name=element.tagName,{name:name,index:findIndex$3(selection.dom,name,element)}):getLocation(trim,selection,normalized,rng)},getCaretBookmark=function(selection){var rng=selection.getRng();return{start:$_d3qju42bjcq8h3qa.create(selection.dom.getRoot(),CaretPosition.fromRangeStart(rng)),end:$_d3qju42bjcq8h3qa.create(selection.dom.getRoot(),CaretPosition.fromRangeEnd(rng))}},getRangeBookmark=function(selection){return{rng:selection.getRng()}},getPersistentBookmark=function(selection){var dom=selection.dom,rng=selection.getRng(),id=dom.uniqueId(),collapsed=selection.isCollapsed(),styles="overflow:hidden;line-height:0px",element=selection.getNode(),name=element.nodeName;if("IMG"===name)return{name:name,index:findIndex$3(dom,name,element)};var rng2=normalizeTableCellSelection(rng.cloneRange());if(!collapsed){rng2.collapse(!1);var endBookmarkNode=dom.create("span",{"data-mce-type":"bookmark",id:id+"_end",style:styles},"&#xFEFF;");rng2.insertNode(endBookmarkNode),trimEmptyTextNode(endBookmarkNode.nextSibling)}(rng=normalizeTableCellSelection(rng)).collapse(!0);var startBookmarkNode=dom.create("span",{"data-mce-type":"bookmark",id:id+"_start",style:styles},"&#xFEFF;");return rng.insertNode(startBookmarkNode),trimEmptyTextNode(startBookmarkNode.previousSibling),selection.moveToBookmark({id:id,keep:1}),{id:id}},$_4iu6be2ajcq8h3pp={getBookmark:function(selection,type,normalized){return 2===type?getOffsetBookmark($_fz4vwq21jcq8h3ow.trim,normalized,selection):3===type?getCaretBookmark(selection):type?getRangeBookmark(selection):getPersistentBookmark(selection)},getUndoBookmark:$_djct026jcq8h2xw.curry(getOffsetBookmark,$_djct026jcq8h2xw.identity,!0)},$_7re31t2djcq8h3qn={cat:function(arr){for(var r=[],i=0;i<arr.length;i++)arr[i].each(function(x){r.push(x)});return r},findMap:function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return $_doqc1o5jcq8h2xq.none()},liftN:function(arr,f){for(var r=[],i=0;i<arr.length;i++){var x=arr[i];if(!x.isSome())return $_doqc1o5jcq8h2xq.none();r.push(x.getOrDie())}return $_doqc1o5jcq8h2xq.some(f.apply(null,r))}},addBogus=function(dom,node){return!dom.isBlock(node)||node.innerHTML||$_1surm29jcq8h31g.ie||(node.innerHTML='<br data-mce-bogus="1" />'),node},resolveCaretPositionBookmark=function(dom,bookmark){var rng,pos;return rng=dom.createRng(),pos=$_d3qju42bjcq8h3qa.resolve(dom.getRoot(),bookmark.start),rng.setStart(pos.container(),pos.offset()),pos=$_d3qju42bjcq8h3qa.resolve(dom.getRoot(),bookmark.end),rng.setEnd(pos.container(),pos.offset()),rng},setEndPoint=function(dom,start,bookmark,rng){var i,node,offset,children,point=bookmark[start?"start":"end"],root=dom.getRoot();if(point){for(offset=point[0],node=root,i=point.length-1;i>=1;i--){if(children=node.childNodes,point[i]>children.length-1)return;node=children[point[i]]}3===node.nodeType&&(offset=Math.min(point[0],node.nodeValue.length)),1===node.nodeType&&(offset=Math.min(point[0],node.childNodes.length)),start?rng.setStart(node,offset):rng.setEnd(node,offset)}return!0},restoreEndPoint=function(dom,suffix,bookmark){var node,idx,next,prev,container,offset,marker=dom.get(bookmark.id+"_"+suffix),keep=bookmark.keep;if(marker){if(node=marker.parentNode,keep?(node=marker.firstChild,idx=1):idx=dom.nodeIndex(marker),container=node,offset=idx,!keep){for(prev=marker.previousSibling,next=marker.nextSibling,$_topwtjjcq8h3fq.each($_topwtjjcq8h3fq.grep(marker.childNodes),function(node){$_bpl7e51qjcq8h3kz.isText(node)&&(node.nodeValue=node.nodeValue.replace(/\uFEFF/g,""))});marker=dom.get(bookmark.id+"_"+suffix);)dom.remove(marker,1);prev&&next&&prev.nodeType===next.nodeType&&$_bpl7e51qjcq8h3kz.isText(prev)&&!$_1surm29jcq8h31g.opera&&(idx=prev.nodeValue.length,prev.appendData(next.nodeValue),dom.remove(next),container=prev,offset=idx)}return $_doqc1o5jcq8h2xq.some(CaretPosition(container,offset))}return $_doqc1o5jcq8h2xq.none()},alt=function(o1,o2){return o1.isSome()?o1:o2},resolvePaths=function(dom,bookmark){var rng=dom.createRng();return setEndPoint(dom,!0,bookmark,rng)&&setEndPoint(dom,!1,bookmark,rng)?$_doqc1o5jcq8h2xq.some(rng):$_doqc1o5jcq8h2xq.none()},resolveId=function(dom,bookmark){var startPos=restoreEndPoint(dom,"start",bookmark),endPos=restoreEndPoint(dom,"end",bookmark);return $_7re31t2djcq8h3qn.liftN([startPos,alt(endPos,startPos)],function(spos,epos){var rng=dom.createRng();return rng.setStart(addBogus(dom,spos.container()),spos.offset()),rng.setEnd(addBogus(dom,epos.container()),epos.offset()),rng})},resolveIndex$1=function(dom,bookmark){return $_doqc1o5jcq8h2xq.from(dom.select(bookmark.name)[bookmark.index]).map(function(elm){var rng=dom.createRng();return rng.selectNode(elm),rng})},$_8xf2kf2cjcq8h3qg={resolve:function(selection,bookmark){var dom=selection.dom;if(bookmark){if($_topwtjjcq8h3fq.isArray(bookmark.start))return resolvePaths(dom,bookmark);if("string"==typeof bookmark.start)return $_doqc1o5jcq8h2xq.some(resolveCaretPositionBookmark(dom,bookmark));if(bookmark.id)return resolveId(dom,bookmark);if(bookmark.name)return resolveIndex$1(dom,bookmark);if(bookmark.rng)return $_doqc1o5jcq8h2xq.some(bookmark.rng)}return $_doqc1o5jcq8h2xq.none()}},$_5o3jsi29jcq8h3pn={getBookmark:function(selection,type,normalized){return $_4iu6be2ajcq8h3pp.getBookmark(selection,type,normalized)},moveToBookmark:function(selection,bookmark){$_8xf2kf2cjcq8h3qg.resolve(selection,bookmark).each(function(rng){selection.setRng(rng)})},isBookmarkNode:function(node){return $_bpl7e51qjcq8h3kz.isElement(node)&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")}},each$10=$_topwtjjcq8h3fq.each,ElementUtils=function(dom){this.compare=function(node1,node2){if(node1.nodeName!==node2.nodeName)return!1;var getAttribs=function(node){var attribs={};return each$10(dom.getAttribs(node),function(attr){var name=attr.nodeName.toLowerCase();0!==name.indexOf("_")&&"style"!==name&&0!==name.indexOf("data-")&&(attribs[name]=dom.getAttrib(node,name))}),attribs},compareObjects=function(obj1,obj2){var value,name;for(name in obj1)if(obj1.hasOwnProperty(name)){if(void 0===(value=obj2[name]))return!1;if(obj1[name]!==value)return!1;delete obj2[name]}for(name in obj2)if(obj2.hasOwnProperty(name))return!1;return!0};return!!compareObjects(getAttribs(node1),getAttribs(node2))&&(!!compareObjects(dom.parseStyle(dom.getAttrib(node1,"style")),dom.parseStyle(dom.getAttrib(node2,"style")))&&(!$_5o3jsi29jcq8h3pn.isBookmarkNode(node1)&&!$_5o3jsi29jcq8h3pn.isBookmarkNode(node2)))}},before$1=function(marker,element){$_gah0mz17jcq8h3ir.parent(marker).each(function(v){v.dom().insertBefore(element.dom(),marker.dom())})},append=function(parent,element){parent.dom().appendChild(element.dom())},$_6290j62fjcq8h3qx={before:before$1,after:function(marker,element){$_gah0mz17jcq8h3ir.nextSibling(marker).fold(function(){$_gah0mz17jcq8h3ir.parent(marker).each(function(v){append(v,element)})},function(v){before$1(v,element)})},prepend:function(parent,element){$_gah0mz17jcq8h3ir.firstChild(parent).fold(function(){append(parent,element)},function(v){parent.dom().insertBefore(element.dom(),v.dom())})},append:append,appendAt:function(parent,element,index){$_gah0mz17jcq8h3ir.child(parent,index).fold(function(){append(parent,element)},function(v){before$1(v,element)})},wrap:function(element,wrapper){before$1(element,wrapper),append(wrapper,element)}},$_1f20i2hjcq8h3r1={before:function(marker,elements){$_de5suq4jcq8h2x0.each(elements,function(x){$_6290j62fjcq8h3qx.before(marker,x)})},after:function(marker,elements){$_de5suq4jcq8h2x0.each(elements,function(x,i){var e=0===i?marker:elements[i-1];$_6290j62fjcq8h3qx.after(e,x)})},prepend:function(parent,elements){$_de5suq4jcq8h2x0.each(elements.slice().reverse(),function(x){$_6290j62fjcq8h3qx.prepend(parent,x)})},append:function(parent,elements){$_de5suq4jcq8h2x0.each(elements,function(x){$_6290j62fjcq8h3qx.append(parent,x)})}},remove$2=function(element){var dom=element.dom();null!==dom.parentNode&&dom.parentNode.removeChild(dom)},$_8dor5e2gjcq8h3qz={empty:function(element){element.dom().textContent="",$_de5suq4jcq8h2x0.each($_gah0mz17jcq8h3ir.children(element),function(rogue){remove$2(rogue)})},remove:remove$2,unwrap:function(wrapper){var children=$_gah0mz17jcq8h3ir.children(wrapper);children.length>0&&$_1f20i2hjcq8h3r1.before(wrapper,children),remove$2(wrapper)}},api=function(is,name){var getOptionSafe=function(element){return is(element)?$_doqc1o5jcq8h2xq.from(element.dom().nodeValue):$_doqc1o5jcq8h2xq.none()},browser=$_cfduydmjcq8h3gc.detect().browser,getOption=browser.isIE()&&10===browser.version.major?function(element){try{return getOptionSafe(element)}catch(e){return $_doqc1o5jcq8h2xq.none()}}:getOptionSafe;return{get:function(element){if(!is(element))throw new Error("Can only get "+name+" value of a "+name+" node");return getOption(element).getOr("")},getOption:getOption,set:function(element,value){if(!is(element))throw new Error("Can only set raw "+name+" value of a "+name+" node");element.dom().nodeValue=value}}}($_d9btx8zjcq8h3hu.isText,"text"),$_e2sm7y2ijcq8h3r4={get:function(element){return api.get(element)},getOption:function(element){return api.getOption(element)},set:function(element,value){api.set(element,value)}},descendants$1=function(scope,predicate){var result=[];return $_de5suq4jcq8h2x0.each($_gah0mz17jcq8h3ir.children(scope),function(x){predicate(x)&&(result=result.concat([x])),result=result.concat(descendants$1(x,predicate))}),result},$_8c2uil2ljcq8h3rb={all:function(predicate){return descendants$1($_nqdtr15jcq8h3im.body(),predicate)},ancestors:function(scope,predicate,isRoot){return $_de5suq4jcq8h2x0.filter($_gah0mz17jcq8h3ir.parents(scope,isRoot),predicate)},siblings:function(scope,predicate){return $_de5suq4jcq8h2x0.filter($_gah0mz17jcq8h3ir.siblings(scope),predicate)},children:function(scope,predicate){return $_de5suq4jcq8h2x0.filter($_gah0mz17jcq8h3ir.children(scope),predicate)},descendants:descendants$1},$_7cq9b52kjcq8h3r9={all:function(selector){return $_ds01nx1fjcq8h3jy.all(selector)},ancestors:function(scope,selector,isRoot){return $_8c2uil2ljcq8h3rb.ancestors(scope,function(e){return $_ds01nx1fjcq8h3jy.is(e,selector)},isRoot)},siblings:function(scope,selector){return $_8c2uil2ljcq8h3rb.siblings(scope,function(e){return $_ds01nx1fjcq8h3jy.is(e,selector)})},children:function(scope,selector){return $_8c2uil2ljcq8h3rb.children(scope,function(e){return $_ds01nx1fjcq8h3jy.is(e,selector)})},descendants:function(scope,selector){return $_ds01nx1fjcq8h3jy.all(selector,scope)}},getLastChildren=function(elm){for(var children=[],rawNode=elm.dom();rawNode;)children.push($_etvcvfyjcq8h3hp.fromDom(rawNode)),rawNode=rawNode.lastChild;return children},isPaddingContents=function(elm){return $_d9btx8zjcq8h3hu.isText(elm)?""===$_e2sm7y2ijcq8h3r4.get(elm):$_2bhgbq1pjcq8h3ku.isBr(elm)},$_9nudqd2ejcq8h3qq={removeTrailingBr:function(elm){var allBrs=$_7cq9b52kjcq8h3r9.descendants(elm,"br"),brs=$_de5suq4jcq8h2x0.filter(getLastChildren(elm).slice(-1),$_2bhgbq1pjcq8h3ku.isBr);allBrs.length===brs.length&&$_de5suq4jcq8h2x0.each(brs,$_8dor5e2gjcq8h3qz.remove)},fillWithPaddingBr:function(elm){$_8dor5e2gjcq8h3qz.empty(elm),$_6290j62fjcq8h3qx.append(elm,$_etvcvfyjcq8h3hp.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(elm){return 1===$_de5suq4jcq8h2x0.filter($_gah0mz17jcq8h3ir.children(elm),isPaddingContents).length},trimBlockTrailingBr:function(elm){$_gah0mz17jcq8h3ir.lastChild(elm).each(function(lastChild){$_gah0mz17jcq8h3ir.prevSibling(lastChild).each(function(lastChildPrevSibling){$_2bhgbq1pjcq8h3ku.isBlock(elm)&&$_2bhgbq1pjcq8h3ku.isBr(lastChild)&&$_2bhgbq1pjcq8h3ku.isBlock(lastChildPrevSibling)&&$_8dor5e2gjcq8h3qz.remove(lastChild)})})}},makeMap$3=$_topwtjjcq8h3fq.makeMap,Writer=function(settings){var indent,indentBefore,indentAfter,encode,htmlOutput,html=[];return settings=settings||{},indent=settings.indent,indentBefore=makeMap$3(settings.indent_before||""),indentAfter=makeMap$3(settings.indent_after||""),encode=Entities.getEncodeFunc(settings.entity_encoding||"raw",settings.entities),htmlOutput="html"===settings.element_format,{start:function(name,attrs,empty){var i,l,attr,value;if(indent&&indentBefore[name]&&html.length>0&&(value=html[html.length-1]).length>0&&"\n"!==value&&html.push("\n"),html.push("<",name),attrs)for(i=0,l=attrs.length;i<l;i++)attr=attrs[i],html.push(" ",attr.name,'="',encode(attr.value,!0),'"');html[html.length]=!empty||htmlOutput?">":" />",empty&&indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1]).length>0&&"\n"!==value&&html.push("\n")},end:function(name){var value;html.push("</",name,">"),indent&&indentAfter[name]&&html.length>0&&(value=html[html.length-1]).length>0&&"\n"!==value&&html.push("\n")},text:function(text,raw){text.length>0&&(html[html.length]=raw?text:encode(text))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("\x3c!--",text,"--\x3e")},pi:function(name,text){text?html.push("<?",name," ",encode(text),"?>"):html.push("<?",name,"?>"),indent&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",indent?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}},Serializer=function(settings,schema){var self={},writer=Writer(settings);return settings=settings||{},settings.validate=!("validate"in settings)||settings.validate,self.schema=schema=schema||Schema(),self.writer=writer,self.serialize=function(node){var handlers,validate;validate=settings.validate,handlers={3:function(node){writer.text(node.value,node.raw)},8:function(node){writer.comment(node.value)},7:function(node){writer.pi(node.name,node.value)},10:function(node){writer.doctype(node.value)},4:function(node){writer.cdata(node.value)},11:function(node){if(node=node.firstChild)do{walk(node)}while(node=node.next)}},writer.reset();var walk=function(node){var name,isEmpty,attrs,attrName,attrValue,sortedAttrs,i,l,elementRule,handler=handlers[node.type];if(handler)handler(node);else{if(name=node.name,isEmpty=node.shortEnded,attrs=node.attributes,validate&&attrs&&attrs.length>1&&(sortedAttrs=[],sortedAttrs.map={},elementRule=schema.getElementRule(node.name))){for(i=0,l=elementRule.attributesOrder.length;i<l;i++)(attrName=elementRule.attributesOrder[i])in attrs.map&&(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));for(i=0,l=attrs.length;i<l;i++)(attrName=attrs[i].name)in sortedAttrs.map||(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));attrs=sortedAttrs}if(writer.start(node.name,attrs,isEmpty),!isEmpty){if(node=node.firstChild)do{walk(node)}while(node=node.next);writer.end(name)}}};return 1!==node.type||settings.inner?handlers[11](node):walk(node),writer.getContent()},self},walkToPositionIn=function(forward,rootNode,startNode){var position=forward?CaretPosition.before(startNode):CaretPosition.after(startNode);return fromPosition(forward,rootNode,position)},afterElement=function(node){return $_bpl7e51qjcq8h3kz.isBr(node)?CaretPosition.before(node):CaretPosition.after(node)},isBeforeOrStart=function(position){return CaretPosition.isTextPosition(position)?0===position.offset():$_dlol411zjcq8h3om.isCaretCandidate(position.getNode())},isAfterOrEnd=function(position){return CaretPosition.isTextPosition(position)?position.offset()===position.container().data.length:$_dlol411zjcq8h3om.isCaretCandidate(position.getNode(!0))},isBeforeAfterSameElement=function(from,to){return!CaretPosition.isTextPosition(from)&&!CaretPosition.isTextPosition(to)&&from.getNode()===to.getNode(!0)},isAtBr=function(position){return!CaretPosition.isTextPosition(position)&&$_bpl7e51qjcq8h3kz.isBr(position.getNode())},shouldSkipPosition=function(forward,from,to){return forward?!isBeforeAfterSameElement(from,to)&&!isAtBr(from)&&isAfterOrEnd(from)&&isBeforeOrStart(to):!isBeforeAfterSameElement(to,from)&&isBeforeOrStart(from)&&isAfterOrEnd(to)},fromPosition=function(forward,rootNode,position){var walker=CaretWalker(rootNode);return $_doqc1o5jcq8h2xq.from(forward?walker.next(position):walker.prev(position))},positionIn=function(forward,element){var startNode=forward?element.firstChild:element.lastChild;return $_bpl7e51qjcq8h3kz.isText(startNode)?$_doqc1o5jcq8h2xq.some(new CaretPosition(startNode,forward?0:startNode.data.length)):startNode?$_dlol411zjcq8h3om.isCaretCandidate(startNode)?$_doqc1o5jcq8h2xq.some(forward?CaretPosition.before(startNode):afterElement(startNode)):walkToPositionIn(forward,element,startNode):$_doqc1o5jcq8h2xq.none()},$_geef5m2pjcq8h3rp={fromPosition:fromPosition,nextPosition:$_djct026jcq8h2xw.curry(fromPosition,!0),prevPosition:$_djct026jcq8h2xw.curry(fromPosition,!1),navigate:function(forward,rootNode,from){return fromPosition(forward,rootNode,from).bind(function(to){return $_ctfd6a27jcq8h3pe.isInSameBlock(from,to,rootNode)&&shouldSkipPosition(forward,from,to)?fromPosition(forward,rootNode,to):$_doqc1o5jcq8h2xq.some(to)})},positionIn:positionIn,firstPositionIn:$_djct026jcq8h2xw.curry(positionIn,!0),lastPositionIn:$_djct026jcq8h2xw.curry(positionIn,!1)},createRange$1=function(sc,so,ec,eo){var rng=document.createRange();return rng.setStart(sc,so),rng.setEnd(ec,eo),rng},normalizeBlockSelectionRange=function(rng){var startPos=CaretPosition.fromRangeStart(rng),endPos=CaretPosition.fromRangeEnd(rng),rootNode=rng.commonAncestorContainer;return $_geef5m2pjcq8h3rp.fromPosition(!1,rootNode,endPos).map(function(newEndPos){return!$_ctfd6a27jcq8h3pe.isInSameBlock(startPos,endPos,rootNode)&&$_ctfd6a27jcq8h3pe.isInSameBlock(startPos,newEndPos,rootNode)?createRange$1(startPos.container(),startPos.offset(),newEndPos.container(),newEndPos.offset()):rng}).getOr(rng)},normalizeBlockSelection=function(rng){return rng.collapsed?rng:normalizeBlockSelectionRange(rng)},$_3rk60s2ojcq8h3rn={normalize:function(rng){return normalizeBlockSelection(rng)}},isTableCell=$_bpl7e51qjcq8h3kz.matchNodeNames("td th"),validInsertion=function(editor,value,parentNode){if("all"===parentNode.getAttribute("data-mce-bogus"))parentNode.parentNode.insertBefore(editor.dom.createFragment(value),parentNode);else{var node=parentNode.firstChild,node2=parentNode.lastChild;!node||node===node2&&"BR"===node.nodeName?editor.dom.setHTML(parentNode,value):editor.selection.setContent(value)}},trimBrsFromTableCell=function(dom,elm){$_doqc1o5jcq8h2xq.from(dom.getParent(elm,"td,th")).map($_etvcvfyjcq8h3hp.fromDom).each($_9nudqd2ejcq8h3qq.trimBlockTrailingBr)},insertHtmlAtCaret=function(editor,value,details){var parser,serializer,parentNode,rootNode,fragment,args,marker,rng,node,node2,bookmarkHtml,merge,textInlineElements=editor.schema.getTextInlineElements(),selection=editor.selection,dom=editor.dom,isPartOfFragment=function(node){return!!node.getAttribute("data-mce-fragment")};if(/^ | $/.test(value)&&(value=function(html){var rng,container,offset;rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset;var hasSiblingText=function(siblingName){return container[siblingName]&&3===container[siblingName].nodeType};return 3===container.nodeType&&(offset>0?html=html.replace(/^&nbsp;/," "):hasSiblingText("previousSibling")||(html=html.replace(/^ /,"&nbsp;")),offset<container.length?html=html.replace(/&nbsp;(<br>|)$/," "):hasSiblingText("nextSibling")||(html=html.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),html}(value)),parser=editor.parser,merge=details.merge,serializer=Serializer({validate:editor.settings.validate},editor.schema),bookmarkHtml='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',args={content:value,format:"html",selection:!0,paste:details.paste},(args=editor.fire("BeforeSetContent",args)).isDefaultPrevented())editor.fire("SetContent",{content:args.content,format:"html",selection:!0,paste:details.paste});else{-1===(value=args.content).indexOf("{$caret}")&&(value+="{$caret}"),value=value.replace(/\{\$caret\}/,bookmarkHtml);var caretElement=(rng=selection.getRng()).startContainer||(rng.parentElement?rng.parentElement():null),body=editor.getBody();caretElement===body&&selection.isCollapsed()&&dom.isBlock(body.firstChild)&&function(node){return node&&!editor.schema.getShortEndedElements()[node.nodeName]}(body.firstChild)&&dom.isEmpty(body.firstChild)&&((rng=dom.createRng()).setStart(body.firstChild,0),rng.setEnd(body.firstChild,0),selection.setRng(rng)),selection.isCollapsed()||(editor.selection.setRng($_3rk60s2ojcq8h3rn.normalize(editor.selection.getRng())),editor.getDoc().execCommand("Delete",!1,null),function(){var rng,container,offset;container=(rng=selection.getRng()).startContainer,offset=rng.startOffset,3===container.nodeType&&rng.collapsed&&(""===container.data[offset]?(container.deleteData(offset,1),/[\u00a0| ]$/.test(value)||(value+=" ")):""===container.data[offset-1]&&(container.deleteData(offset-1,1),/[\u00a0| ]$/.test(value)||(value=" "+value)))}());var parserArgs={context:(parentNode=selection.getNode()).nodeName.toLowerCase(),data:details.data,insert:!0};if(fragment=parser.parse(value,parserArgs),!0===details.paste&&$_7fgunj1xjcq8h3oa.isListFragment(editor.schema,fragment)&&$_7fgunj1xjcq8h3oa.isParentBlockLi(dom,parentNode))return rng=$_7fgunj1xjcq8h3oa.insertAtCaret(serializer,dom,editor.selection.getRng(!0),fragment),editor.selection.setRng(rng),void editor.fire("SetContent",args);if(function(fragment){for(var node=fragment;node=node.walk();)1===node.type&&node.attr("data-mce-fragment","1")}(fragment),"mce_marker"===(node=fragment.lastChild).attr("id"))for(marker=node,node=node.prev;node;node=node.walk(!0))if(3===node.type||!dom.isBlock(node.name)){editor.schema.isValidChild(node.parent.name,"span")&&node.parent.insert(marker,node,"br"===node.name);break}if(editor._selectionOverrides.showBlockCaretContainer(parentNode),parserArgs.invalid){for(selection.setContent(bookmarkHtml),parentNode=selection.getNode(),rootNode=editor.getBody(),9===parentNode.nodeType?parentNode=node=rootNode:node=parentNode;node!==rootNode;)parentNode=node,node=node.parentNode;value=parentNode===rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode),value=serializer.serialize(parser.parse(value.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return serializer.serialize(fragment)}))),parentNode===rootNode?dom.setHTML(rootNode,value):dom.setOuterHTML(parentNode,value)}else value=serializer.serialize(fragment),validInsertion(editor,value,parentNode);!function(){if(merge){var root_1=editor.getBody(),elementUtils_1=new ElementUtils(dom);$_topwtjjcq8h3fq.each(dom.select("*[data-mce-fragment]"),function(node){for(var testNode=node.parentNode;testNode&&testNode!==root_1;testNode=testNode.parentNode)textInlineElements[node.nodeName.toLowerCase()]&&elementUtils_1.compare(testNode,node)&&dom.remove(node,!0)})}}(),function(marker){var parentEditableFalseElm,parentBlock,nextRng;if(marker){if(selection.scrollIntoView(marker),parentEditableFalseElm=function(node){for(var root=editor.getBody();node&&node!==root;node=node.parentNode)if("false"===editor.dom.getContentEditable(node))return node;return null}(marker))return dom.remove(marker),void selection.select(parentEditableFalseElm);rng=dom.createRng(),(node=marker.previousSibling)&&3===node.nodeType?(rng.setStart(node,node.nodeValue.length),$_1surm29jcq8h31g.ie||(node2=marker.nextSibling)&&3===node2.nodeType&&(node.appendData(node2.data),node2.parentNode.removeChild(node2))):(rng.setStartBefore(marker),rng.setEndBefore(marker)),parentBlock=dom.getParent(marker,dom.isBlock),dom.remove(marker),parentBlock&&dom.isEmpty(parentBlock)&&(editor.$(parentBlock).empty(),rng.setStart(parentBlock,0),rng.setEnd(parentBlock,0),isTableCell(parentBlock)||isPartOfFragment(parentBlock)||!(nextRng=function(rng){var caretPos=CaretPosition.fromRangeStart(rng);if(caretPos=CaretWalker(editor.getBody()).next(caretPos))return caretPos.toRange()}(rng))?dom.add(parentBlock,dom.create("br",{"data-mce-bogus":"1"})):(rng=nextRng,dom.remove(parentBlock))),selection.setRng(rng)}}(dom.get("mce_marker")),function(elm){$_topwtjjcq8h3fq.each(elm.getElementsByTagName("*"),function(elm){elm.removeAttribute("data-mce-fragment")})}(editor.getBody()),trimBrsFromTableCell(editor.dom,editor.selection.getStart()),editor.fire("SetContent",args),editor.addVisual()}},processValue=function(value){var details;return"string"!=typeof value?(details=$_topwtjjcq8h3fq.extend({paste:value.paste,data:{paste:value.paste}},value),{content:value.content,details:details}):{content:value,details:{}}},$_5fia2a1wjcq8h3nn={insertAtCaret:function(editor,value){var result=processValue(value);insertHtmlAtCaret(editor,result.content,result.details)}},ClosestOrAncestor=function(is,ancestor,scope,a,isRoot){return is(scope,a)?$_doqc1o5jcq8h2xq.some(scope):$_1i3etu12jcq8h3i8.isFunction(isRoot)&&isRoot(scope)?$_doqc1o5jcq8h2xq.none():ancestor(scope,a,isRoot)},ancestor=function(scope,predicate,isRoot){for(var element=scope.dom(),stop=$_1i3etu12jcq8h3i8.isFunction(isRoot)?isRoot:$_djct026jcq8h2xw.constant(!1);element.parentNode;){element=element.parentNode;var el=$_etvcvfyjcq8h3hp.fromDom(element);if(predicate(el))return $_doqc1o5jcq8h2xq.some(el);if(stop(el))break}return $_doqc1o5jcq8h2xq.none()},child$1=function(scope,predicate){return $_de5suq4jcq8h2x0.find(scope.dom().childNodes,$_djct026jcq8h2xw.compose(predicate,$_etvcvfyjcq8h3hp.fromDom)).map($_etvcvfyjcq8h3hp.fromDom)},descendant=function(scope,predicate){var descend=function(element){for(var i=0;i<element.childNodes.length;i++){if(predicate($_etvcvfyjcq8h3hp.fromDom(element.childNodes[i])))return $_doqc1o5jcq8h2xq.some($_etvcvfyjcq8h3hp.fromDom(element.childNodes[i]));var res=descend(element.childNodes[i]);if(res.isSome())return res}return $_doqc1o5jcq8h2xq.none()};return descend(scope.dom())},$_26j8552ujcq8h3sl={first:function(predicate){return descendant($_nqdtr15jcq8h3im.body(),predicate)},ancestor:ancestor,closest:function(scope,predicate,isRoot){return ClosestOrAncestor(function(scope){return predicate(scope)},ancestor,scope,predicate,isRoot)},sibling:function(scope,predicate){var element=scope.dom();return element.parentNode?child$1($_etvcvfyjcq8h3hp.fromDom(element.parentNode),function(x){return!$_x06e31djcq8h3jh.eq(scope,x)&&predicate(x)}):$_doqc1o5jcq8h2xq.none()},child:child$1,descendant:descendant},sectionResult=$_1928vz18jcq8h3j2.immutable("sections","settings"),isTouch=$_cfduydmjcq8h3gc.detect().deviceType.isTouch(),mobilePlugins=["lists","autolink","autosave"],defaultMobileSettings={theme:"mobile"},normalizePlugins=function(plugins){var pluginNames=$_1i3etu12jcq8h3i8.isArray(plugins)?plugins.join(" "):plugins,trimmedPlugins=$_de5suq4jcq8h2x0.map($_1i3etu12jcq8h3i8.isString(pluginNames)?pluginNames.split(" "):[],$_cwgwqavjcq8h3h4.trim);return $_de5suq4jcq8h2x0.filter(trimmedPlugins,function(item){return item.length>0})},filterMobilePlugins=function(plugins){return $_de5suq4jcq8h2x0.filter(plugins,$_djct026jcq8h2xw.curry($_de5suq4jcq8h2x0.contains,mobilePlugins))},extractSections=function(keys,settings){var result=$_mhbuv13jcq8h3ic.bifilter(settings,function(value,key){return $_de5suq4jcq8h2x0.contains(keys,key)});return sectionResult(result.t,result.f)},getSection=function(sectionResult,name,defaults){var sections=sectionResult.sections(),sectionSettings=sections.hasOwnProperty(name)?sections[name]:{};return $_topwtjjcq8h3fq.extend({},defaults,sectionSettings)},hasSection=function(sectionResult,name){return sectionResult.sections().hasOwnProperty(name)},getDefaultSettings=function(id,documentBaseUrl,editor){return{id:id,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:documentBaseUrl,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:editor.convertURL,url_converter_scope:editor,ie7_compat:!0}},getExternalPlugins=function(overrideSettings,settings){var userDefinedExternalPlugins=settings.external_plugins?settings.external_plugins:{};return overrideSettings&&overrideSettings.external_plugins?$_topwtjjcq8h3fq.extend({},overrideSettings.external_plugins,userDefinedExternalPlugins):userDefinedExternalPlugins},combinePlugins=function(forcedPlugins,plugins){return[].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins))},processPlugins=function(isTouchDevice,sectionResult,defaultOverrideSettings,settings){var forcedPlugins=normalizePlugins(defaultOverrideSettings.forced_plugins),plugins=normalizePlugins(settings.plugins),platformPlugins=isTouchDevice&&hasSection(sectionResult,"mobile")?filterMobilePlugins(plugins):plugins,combinedPlugins=combinePlugins(forcedPlugins,platformPlugins);return $_topwtjjcq8h3fq.extend(settings,{plugins:combinedPlugins.join(" ")})},isOnMobile=function(isTouchDevice,sectionResult){var isInline=sectionResult.settings().inline;return isTouchDevice&&hasSection(sectionResult,"mobile")&&!isInline},combineSettings=function(isTouchDevice,defaultSettings,defaultOverrideSettings,settings){var sectionResult=extractSections(["mobile"],settings),extendedSettings=$_topwtjjcq8h3fq.extend(defaultSettings,defaultOverrideSettings,sectionResult.settings(),isOnMobile(isTouchDevice,sectionResult)?getSection(sectionResult,"mobile",defaultMobileSettings):{},{validate:!0,content_editable:sectionResult.settings().inline,external_plugins:getExternalPlugins(defaultOverrideSettings,sectionResult.settings())});return processPlugins(isTouchDevice,sectionResult,defaultOverrideSettings,extendedSettings)},getEditorSettings=function(editor,id,documentBaseUrl,defaultOverrideSettings,settings){var defaultSettings=getDefaultSettings(id,documentBaseUrl,editor);return combineSettings(isTouch,defaultSettings,defaultOverrideSettings,settings)},getFiltered=function(predicate,editor,name){return $_doqc1o5jcq8h2xq.from(editor.settings[name]).filter(predicate)},getString=$_djct026jcq8h2xw.curry(getFiltered,$_1i3etu12jcq8h3i8.isString),getParamObject=function(value){var output={};return"string"==typeof value?$_de5suq4jcq8h2x0.each(value.indexOf("=")>0?value.split(/[;,](?![^=;,]*(?:[;,]|$))/):value.split(","),function(value){(value=value.split("=")).length>1?output[$_topwtjjcq8h3fq.trim(value[0])]=$_topwtjjcq8h3fq.trim(value[1]):output[$_topwtjjcq8h3fq.trim(value[0])]=$_topwtjjcq8h3fq.trim(value)}):output=value,output},getParam=function(editor,name,defaultVal,type){var value=name in editor.settings?editor.settings[name]:defaultVal;return"hash"===type?getParamObject(value):"string"===type?getFiltered($_1i3etu12jcq8h3i8.isString,editor,name).getOr(defaultVal):"number"===type?getFiltered($_1i3etu12jcq8h3i8.isNumber,editor,name).getOr(defaultVal):"boolean"===type?getFiltered($_1i3etu12jcq8h3i8.isBoolean,editor,name).getOr(defaultVal):"object"===type?getFiltered($_1i3etu12jcq8h3i8.isObject,editor,name).getOr(defaultVal):"array"===type?getFiltered($_1i3etu12jcq8h3i8.isArray,editor,name).getOr(defaultVal):"function"===type?getFiltered($_1i3etu12jcq8h3i8.isFunction,editor,name).getOr(defaultVal):value},strongRtl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,$_4izbn2yjcq8h3tc={hasStrongRtl:function(text){return strongRtl.test(text)}},findInlineParents=function(isInlineTarget,rootNode,pos){return $_de5suq4jcq8h2x0.filter(DOMUtils.DOM.getParents(pos.container(),"*",rootNode),isInlineTarget)},normalizePosition=function(forward,pos){var container=pos.container(),offset=pos.offset();return forward?$_cyutcs20jcq8h3or.isCaretContainerInline(container)?$_bpl7e51qjcq8h3kz.isText(container.nextSibling)?new CaretPosition(container.nextSibling,0):CaretPosition.after(container):$_cyutcs20jcq8h3or.isBeforeInline(pos)?new CaretPosition(container,offset+1):pos:$_cyutcs20jcq8h3or.isCaretContainerInline(container)?$_bpl7e51qjcq8h3kz.isText(container.previousSibling)?new CaretPosition(container.previousSibling,container.previousSibling.data.length):CaretPosition.before(container):$_cyutcs20jcq8h3or.isAfterInline(pos)?new CaretPosition(container,offset-1):pos},$_7ve5rf2wjcq8h3sv={isInlineTarget:function(editor,elm){var selector=getString(editor,"inline_boundaries_selector").getOr("a[href],code");return $_ds01nx1fjcq8h3jy.is($_etvcvfyjcq8h3hp.fromDom(elm),selector)},findRootInline:function(isInlineTarget,rootNode,pos){var parents=findInlineParents(isInlineTarget,rootNode,pos);return $_doqc1o5jcq8h2xq.from(parents[parents.length-1])},isRtl:function(element){return"rtl"===DOMUtils.DOM.getStyle(element,"direction",!0)||$_4izbn2yjcq8h3tc.hasStrongRtl(element.textContent)},isAtZwsp:function(pos){return $_cyutcs20jcq8h3or.isBeforeInline(pos)||$_cyutcs20jcq8h3or.isAfterInline(pos)},normalizePosition:normalizePosition,normalizeForwards:$_djct026jcq8h2xw.curry(normalizePosition,!0),normalizeBackwards:$_djct026jcq8h2xw.curry(normalizePosition,!1),hasSameParentBlock:function(rootNode,node1,node2){var block1=$_ctfd6a27jcq8h3pe.getParentBlock(node1,rootNode),block2=$_ctfd6a27jcq8h3pe.getParentBlock(node2,rootNode);return block1&&block1===block2}},isBeforeRoot=function(rootNode){return function(elm){return $_x06e31djcq8h3jh.eq(rootNode,$_etvcvfyjcq8h3hp.fromDom(elm.dom().parentNode))}},placeCaretInEmptyBody=function(editor){var body=editor.getBody(),node=body.firstChild&&editor.dom.isBlock(body.firstChild)?body.firstChild:body;editor.selection.setCursorLocation(node,0)},$_f8lxkr2tjcq8h3sf={getParentBlock:function(rootNode,elm){return $_x06e31djcq8h3jh.contains(rootNode,elm)?$_26j8552ujcq8h3sl.closest(elm,function(element){return $_2bhgbq1pjcq8h3ku.isTextBlock(element)||$_2bhgbq1pjcq8h3ku.isListItem(element)},isBeforeRoot(rootNode)):$_doqc1o5jcq8h2xq.none()},paddEmptyBody:function(editor){editor.dom.isEmpty(editor.getBody())&&(editor.setContent(""),placeCaretInEmptyBody(editor))},willDeleteLastPositionInElement:function(forward,fromPos,elm){return $_7re31t2djcq8h3qn.liftN([$_geef5m2pjcq8h3rp.firstPositionIn(elm),$_geef5m2pjcq8h3rp.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_7ve5rf2wjcq8h3sv.normalizePosition(!0,firstPos),normalizedLastPos=$_7ve5rf2wjcq8h3sv.normalizePosition(!1,lastPos),normalizedFromPos=$_7ve5rf2wjcq8h3sv.normalizePosition(!1,fromPos);return forward?$_geef5m2pjcq8h3rp.nextPosition(elm,normalizedFromPos).map(function(nextPos){return nextPos.isEqual(normalizedLastPos)&&fromPos.isEqual(normalizedFirstPos)}).getOr(!1):$_geef5m2pjcq8h3rp.prevPosition(elm,normalizedFromPos).map(function(prevPos){return prevPos.isEqual(normalizedFirstPos)&&fromPos.isEqual(normalizedLastPos)}).getOr(!1)}).getOr(!0)}},ancestor$2=function(scope,selector,isRoot){return $_26j8552ujcq8h3sl.ancestor(scope,function(e){return $_ds01nx1fjcq8h3jy.is(e,selector)},isRoot)},$_75pgp31jcq8h3tk={first:function(selector){return $_ds01nx1fjcq8h3jy.one(selector)},ancestor:ancestor$2,sibling:function(scope,selector){return $_26j8552ujcq8h3sl.sibling(scope,function(e){return $_ds01nx1fjcq8h3jy.is(e,selector)})},child:function(scope,selector){return $_26j8552ujcq8h3sl.child(scope,function(e){return $_ds01nx1fjcq8h3jy.is(e,selector)})},descendant:function(scope,selector){return $_ds01nx1fjcq8h3jy.one(selector,scope)},closest:function(scope,selector,isRoot){return ClosestOrAncestor($_ds01nx1fjcq8h3jy.is,ancestor$2,scope,selector,isRoot)}},$_dls13230jcq8h3ti={any:function(selector){return $_75pgp31jcq8h3tk.first(selector).isSome()},ancestor:function(scope,selector,isRoot){return $_75pgp31jcq8h3tk.ancestor(scope,selector,isRoot).isSome()},sibling:function(scope,selector){return $_75pgp31jcq8h3tk.sibling(scope,selector).isSome()},child:function(scope,selector){return $_75pgp31jcq8h3tk.child(scope,selector).isSome()},descendant:function(scope,selector){return $_75pgp31jcq8h3tk.descendant(scope,selector).isSome()},closest:function(scope,selector,isRoot){return $_75pgp31jcq8h3tk.closest(scope,selector,isRoot).isSome()}},hasWhitespacePreserveParent=function(rootNode,node){var rootElement=$_etvcvfyjcq8h3hp.fromDom(rootNode),startNode=$_etvcvfyjcq8h3hp.fromDom(node);return $_dls13230jcq8h3ti.ancestor(startNode,"pre,code",$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,rootElement))},isWhitespace=function(rootNode,node){return $_bpl7e51qjcq8h3kz.isText(node)&&/^[ \t\r\n]*$/.test(node.data)&&!1===hasWhitespacePreserveParent(rootNode,node)},isNamedAnchor=function(node){return $_bpl7e51qjcq8h3kz.isElement(node)&&"A"===node.nodeName&&node.hasAttribute("name")},isContent=function(rootNode,node){return $_dlol411zjcq8h3om.isCaretCandidate(node)&&!1===isWhitespace(rootNode,node)||isNamedAnchor(node)||isBookmark(node)},isBookmark=$_bpl7e51qjcq8h3kz.hasAttribute("data-mce-bookmark"),isBogus$2=$_bpl7e51qjcq8h3kz.hasAttribute("data-mce-bogus"),isBogusAll=$_bpl7e51qjcq8h3kz.hasAttributeValue("data-mce-bogus","all"),isEmptyNode=function(targetNode){var walker,node,brCount=0;if(isContent(targetNode,targetNode))return!1;if(!(node=targetNode.firstChild))return!0;walker=new TreeWalker(node,targetNode);do{if(isBogusAll(node))node=walker.next(!0);else if(isBogus$2(node))node=walker.next();else if($_bpl7e51qjcq8h3kz.isBr(node))brCount++,node=walker.next();else{if(isContent(targetNode,node))return!1;node=walker.next()}}while(node);return brCount<=1},$_1b93z42zjcq8h3te={isEmpty:function(elm){return isEmptyNode(elm.dom())}},BlockPosition=$_1928vz18jcq8h3j2.immutable("block","position"),BlockBoundary=$_1928vz18jcq8h3j2.immutable("from","to"),getBlockPosition=function(rootNode,pos){var rootElm=$_etvcvfyjcq8h3hp.fromDom(rootNode),containerElm=$_etvcvfyjcq8h3hp.fromDom(pos.container());return $_f8lxkr2tjcq8h3sf.getParentBlock(rootElm,containerElm).map(function(block){return BlockPosition(block,pos)})},isDifferentBlocks=function(blockBoundary){return!1===$_x06e31djcq8h3jh.eq(blockBoundary.from().block(),blockBoundary.to().block())},hasSameParent=function(blockBoundary){return $_gah0mz17jcq8h3ir.parent(blockBoundary.from().block()).bind(function(parent1){return $_gah0mz17jcq8h3ir.parent(blockBoundary.to().block()).filter(function(parent2){return $_x06e31djcq8h3jh.eq(parent1,parent2)})}).isSome()},isEditable=function(blockBoundary){return!1===$_bpl7e51qjcq8h3kz.isContentEditableFalse(blockBoundary.from().block())&&!1===$_bpl7e51qjcq8h3kz.isContentEditableFalse(blockBoundary.to().block())},skipLastBr=function(rootNode,forward,blockPosition){return $_bpl7e51qjcq8h3kz.isBr(blockPosition.position().getNode())&&!1===$_1b93z42zjcq8h3te.isEmpty(blockPosition.block())?$_geef5m2pjcq8h3rp.positionIn(!1,blockPosition.block().dom()).bind(function(lastPositionInBlock){return lastPositionInBlock.isEqual(blockPosition.position())?$_geef5m2pjcq8h3rp.fromPosition(forward,rootNode,lastPositionInBlock).bind(function(to){return getBlockPosition(rootNode,to)}):$_doqc1o5jcq8h2xq.some(blockPosition)}).getOr(blockPosition):blockPosition},readFromRange=function(rootNode,forward,rng){var fromBlockPos=getBlockPosition(rootNode,CaretPosition.fromRangeStart(rng)),toBlockPos=fromBlockPos.bind(function(blockPos){return $_geef5m2pjcq8h3rp.fromPosition(forward,rootNode,blockPos.position()).bind(function(to){return getBlockPosition(rootNode,to).map(function(blockPos){return skipLastBr(rootNode,forward,blockPos)})})});return $_7re31t2djcq8h3qn.liftN([fromBlockPos,toBlockPos],BlockBoundary).filter(function(blockBoundary){return isDifferentBlocks(blockBoundary)&&hasSameParent(blockBoundary)&&isEditable(blockBoundary)})},$_5q0dec2sjcq8h3s7={read:function(rootNode,forward,rng){return rng.collapsed?readFromRange(rootNode,forward,rng):$_doqc1o5jcq8h2xq.none()}},dropLast=function(xs){return xs.slice(0,-1)},parentsUntil$1=function(startNode,rootElm,predicate){return $_x06e31djcq8h3jh.contains(rootElm,startNode)?dropLast($_gah0mz17jcq8h3ir.parents(startNode,function(elm){return predicate(elm)||$_x06e31djcq8h3jh.eq(elm,rootElm)})):[]},parents$1=function(startNode,rootElm){return parentsUntil$1(startNode,rootElm,$_djct026jcq8h2xw.constant(!1))},$_5174v33jcq8h3u4={parentsUntil:parentsUntil$1,parents:parents$1,parentsAndSelf:function(startNode,rootElm){return[startNode].concat(parents$1(startNode,rootElm))}},getChildrenUntilBlockBoundary=function(block){var children=$_gah0mz17jcq8h3ir.children(block);return $_de5suq4jcq8h2x0.findIndex(children,$_2bhgbq1pjcq8h3ku.isBlock).fold(function(){return children},function(index){return children.slice(0,index)})},extractChildren=function(block){var children=getChildrenUntilBlockBoundary(block);return $_de5suq4jcq8h2x0.each(children,function(node){$_8dor5e2gjcq8h3qz.remove(node)}),children},trimBr=function(first,block){$_geef5m2pjcq8h3rp.positionIn(first,block.dom()).each(function(position){var node=position.getNode();$_bpl7e51qjcq8h3kz.isBr(node)&&$_8dor5e2gjcq8h3qz.remove($_etvcvfyjcq8h3hp.fromDom(node))})},removeEmptyRoot=function(rootNode,block){var parents=$_5174v33jcq8h3u4.parentsAndSelf(block,rootNode);return $_de5suq4jcq8h2x0.find(parents.reverse(),$_1b93z42zjcq8h3te.isEmpty).each($_8dor5e2gjcq8h3qz.remove)},findParentInsertPoint=function(toBlock,block){var parents=$_gah0mz17jcq8h3ir.parents(block,function(elm){return $_x06e31djcq8h3jh.eq(elm,toBlock)});return $_doqc1o5jcq8h2xq.from(parents[parents.length-2])},getInsertionPoint=function(fromBlock,toBlock){return $_x06e31djcq8h3jh.contains(toBlock,fromBlock)?$_gah0mz17jcq8h3ir.parent(fromBlock).bind(function(parent){return $_x06e31djcq8h3jh.eq(parent,toBlock)?$_doqc1o5jcq8h2xq.some(fromBlock):findParentInsertPoint(toBlock,fromBlock)}):$_doqc1o5jcq8h2xq.none()},mergeBlockInto=function(rootNode,fromBlock,toBlock){if($_1b93z42zjcq8h3te.isEmpty(toBlock))return $_8dor5e2gjcq8h3qz.remove(toBlock),$_1b93z42zjcq8h3te.isEmpty(fromBlock)&&$_9nudqd2ejcq8h3qq.fillWithPaddingBr(fromBlock),$_geef5m2pjcq8h3rp.firstPositionIn(fromBlock.dom());trimBr(!0,fromBlock),trimBr(!1,toBlock);var children_1=extractChildren(fromBlock);return getInsertionPoint(fromBlock,toBlock).fold(function(){removeEmptyRoot(rootNode,fromBlock);var position=$_geef5m2pjcq8h3rp.lastPositionIn(toBlock.dom());return $_de5suq4jcq8h2x0.each(children_1,function(node){$_6290j62fjcq8h3qx.append(toBlock,node)}),position},function(target){var position=$_geef5m2pjcq8h3rp.prevPosition(toBlock.dom(),CaretPosition.before(target.dom()));return $_de5suq4jcq8h2x0.each(children_1,function(node){$_6290j62fjcq8h3qx.before(target,node)}),removeEmptyRoot(rootNode,fromBlock),position})},$_5xmge932jcq8h3tn={mergeBlocks:function(rootNode,forward,block1,block2){return forward?mergeBlockInto(rootNode,block2,block1):mergeBlockInto(rootNode,block1,block2)}},$_1kzdh42rjcq8h3rv={backspaceDelete:function(editor,forward){var position,rootNode=$_etvcvfyjcq8h3hp.fromDom(editor.getBody());return(position=$_5q0dec2sjcq8h3s7.read(rootNode.dom(),forward,editor.selection.getRng()).bind(function(blockBoundary){return $_5xmge932jcq8h3tn.mergeBlocks(rootNode,forward,blockBoundary.from().block(),blockBoundary.to().block())})).each(function(pos){editor.selection.setRng(pos.toRange())}),position.isSome()}},deleteRangeMergeBlocks=function(rootNode,selection){var rng=selection.getRng();return $_7re31t2djcq8h3qn.liftN([$_f8lxkr2tjcq8h3sf.getParentBlock(rootNode,$_etvcvfyjcq8h3hp.fromDom(rng.startContainer)),$_f8lxkr2tjcq8h3sf.getParentBlock(rootNode,$_etvcvfyjcq8h3hp.fromDom(rng.endContainer))],function(block1,block2){return!1===$_x06e31djcq8h3jh.eq(block1,block2)&&(rng.deleteContents(),$_5xmge932jcq8h3tn.mergeBlocks(rootNode,!0,block1,block2).each(function(pos){selection.setRng(pos.toRange())}),!0)}).getOr(!1)},isRawNodeInTable=function(root,rawNode){var node=$_etvcvfyjcq8h3hp.fromDom(rawNode),isRoot=$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,root);return $_26j8552ujcq8h3sl.ancestor(node,$_2bhgbq1pjcq8h3ku.isTableCell,isRoot).isSome()},isSelectionInTable=function(root,rng){return isRawNodeInTable(root,rng.startContainer)||isRawNodeInTable(root,rng.endContainer)},isEverythingSelected=function(root,rng){var noPrevious=$_geef5m2pjcq8h3rp.prevPosition(root.dom(),CaretPosition.fromRangeStart(rng)).isNone(),noNext=$_geef5m2pjcq8h3rp.nextPosition(root.dom(),CaretPosition.fromRangeEnd(rng)).isNone();return!isSelectionInTable(root,rng)&&noPrevious&&noNext},emptyEditor=function(editor){return editor.setContent(""),editor.selection.setCursorLocation(),!0},deleteRange=function(editor){var rootNode=$_etvcvfyjcq8h3hp.fromDom(editor.getBody()),rng=editor.selection.getRng();return isEverythingSelected(rootNode,rng)?emptyEditor(editor):deleteRangeMergeBlocks(rootNode,editor.selection)},$_5t65x34jcq8h3u8={backspaceDelete:function(editor,forward){return!editor.selection.isCollapsed()&&deleteRange(editor)}},$_b40jd137jcq8h3us={generate:function(cases){if(!$_1i3etu12jcq8h3i8.isArray(cases))throw new Error("cases must be an array");if(0===cases.length)throw new Error("there must be at least one case");var constructors=[],adt={};return $_de5suq4jcq8h2x0.each(cases,function(acase,count){var keys=$_mhbuv13jcq8h3ic.keys(acase);if(1!==keys.length)throw new Error("one and only one name per case");var key=keys[0],value=acase[key];if(void 0!==adt[key])throw new Error("duplicate key detected:"+key);if("cata"===key)throw new Error("cannot have a case named cata (sorry)");if(!$_1i3etu12jcq8h3i8.isArray(value))throw new Error("case arguments must be an array");constructors.push(key),adt[key]=function(){var argLength=arguments.length;if(argLength!==value.length)throw new Error("Wrong number of arguments to case "+key+". Expected "+value.length+" ("+value+"), got "+argLength);for(var args=new Array(argLength),i=0;i<args.length;i++)args[i]=arguments[i];return{fold:function(){if(arguments.length!==cases.length)throw new Error("Wrong number of arguments to fold. Expected "+cases.length+", got "+arguments.length);return arguments[count].apply(null,args)},match:function(branches){var branchKeys=$_mhbuv13jcq8h3ic.keys(branches);if(constructors.length!==branchKeys.length)throw new Error("Wrong number of arguments to match. Expected: "+constructors.join(",")+"\nActual: "+branchKeys.join(","));if(!$_de5suq4jcq8h2x0.forall(constructors,function(reqKey){return $_de5suq4jcq8h2x0.contains(branchKeys,reqKey)}))throw new Error("Not all branches were specified when using match. Specified: "+branchKeys.join(", ")+"\nRequired: "+constructors.join(", "));return branches[key].apply(null,args)},log:function(label){console.log(label,{constructors:constructors,constructor:key,params:args})}}}}),adt}},DeleteAction=$_b40jd137jcq8h3us.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),isAtContentEditableBlockCaret=function(forward,from){var elm=from.getNode(!1===forward),caretLocation=forward?"after":"before";return $_bpl7e51qjcq8h3kz.isElement(elm)&&elm.getAttribute("data-mce-caret")===caretLocation},deleteEmptyBlockOrMoveToCef=function(rootNode,forward,from,to){var toCefElm=to.getNode(!1===forward);return $_f8lxkr2tjcq8h3sf.getParentBlock($_etvcvfyjcq8h3hp.fromDom(rootNode),$_etvcvfyjcq8h3hp.fromDom(from.getNode())).map(function(blockElm){return $_1b93z42zjcq8h3te.isEmpty(blockElm)?DeleteAction.remove(blockElm.dom()):DeleteAction.moveToElement(toCefElm)}).orThunk(function(){return $_doqc1o5jcq8h2xq.some(DeleteAction.moveToElement(toCefElm))})},findCefPosition=function(rootNode,forward,from){return $_geef5m2pjcq8h3rp.fromPosition(forward,rootNode,from).bind(function(to){return forward&&$_bpl7e51qjcq8h3kz.isContentEditableFalse(to.getNode())?deleteEmptyBlockOrMoveToCef(rootNode,forward,from,to):!1===forward&&$_bpl7e51qjcq8h3kz.isContentEditableFalse(to.getNode(!0))?deleteEmptyBlockOrMoveToCef(rootNode,forward,from,to):forward&&$_ctfd6a27jcq8h3pe.isAfterContentEditableFalse(from)?$_doqc1o5jcq8h2xq.some(DeleteAction.moveToPosition(to)):!1===forward&&$_ctfd6a27jcq8h3pe.isBeforeContentEditableFalse(from)?$_doqc1o5jcq8h2xq.some(DeleteAction.moveToPosition(to)):$_doqc1o5jcq8h2xq.none()})},getContentEditableBlockAction=function(forward,elm){return forward&&$_bpl7e51qjcq8h3kz.isContentEditableFalse(elm.nextSibling)?$_doqc1o5jcq8h2xq.some(DeleteAction.moveToElement(elm.nextSibling)):!1===forward&&$_bpl7e51qjcq8h3kz.isContentEditableFalse(elm.previousSibling)?$_doqc1o5jcq8h2xq.some(DeleteAction.moveToElement(elm.previousSibling)):$_doqc1o5jcq8h2xq.none()},skipMoveToActionFromInlineCefToContent=function(root,from,deleteAction){return deleteAction.fold(function(elm){return $_doqc1o5jcq8h2xq.some(DeleteAction.remove(elm))},function(elm){return $_doqc1o5jcq8h2xq.some(DeleteAction.moveToElement(elm))},function(to){return $_ctfd6a27jcq8h3pe.isInSameBlock(from,to,root)?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(DeleteAction.moveToPosition(to))})},getContentEditableAction=function(rootNode,forward,from){return isAtContentEditableBlockCaret(forward,from)?getContentEditableBlockAction(forward,from.getNode(!1===forward)).fold(function(){return findCefPosition(rootNode,forward,from)},$_doqc1o5jcq8h2xq.some):findCefPosition(rootNode,forward,from).bind(function(deleteAction){return skipMoveToActionFromInlineCefToContent(rootNode,from,deleteAction)})},$_5qgj7036jcq8h3um={read:function(rootNode,forward,rng){var normalizedRange=$_ctfd6a27jcq8h3pe.normalizeRange(forward?1:-1,rootNode,rng),from=CaretPosition.fromRangeStart(normalizedRange);return!1===forward&&$_ctfd6a27jcq8h3pe.isAfterContentEditableFalse(from)?$_doqc1o5jcq8h2xq.some(DeleteAction.remove(from.getNode(!0))):forward&&$_ctfd6a27jcq8h3pe.isBeforeContentEditableFalse(from)?$_doqc1o5jcq8h2xq.some(DeleteAction.remove(from.getNode())):getContentEditableAction(rootNode,forward,from)}},needsReposition=function(pos,elm){var container=pos.container(),offset=pos.offset();return!1===CaretPosition.isTextPosition(pos)&&container===elm.parentNode&&offset>CaretPosition.before(elm).offset()},reposition=function(elm,pos){return needsReposition(pos,elm)?new CaretPosition(pos.container(),pos.offset()-1):pos},beforeOrStartOf=function(node){return $_bpl7e51qjcq8h3kz.isText(node)?new CaretPosition(node,0):CaretPosition.before(node)},afterOrEndOf=function(node){return $_bpl7e51qjcq8h3kz.isText(node)?new CaretPosition(node,node.data.length):CaretPosition.after(node)},getPreviousSiblingCaretPosition=function(elm){return $_dlol411zjcq8h3om.isCaretCandidate(elm.previousSibling)?$_doqc1o5jcq8h2xq.some(afterOrEndOf(elm.previousSibling)):elm.previousSibling?$_geef5m2pjcq8h3rp.lastPositionIn(elm.previousSibling):$_doqc1o5jcq8h2xq.none()},getNextSiblingCaretPosition=function(elm){return $_dlol411zjcq8h3om.isCaretCandidate(elm.nextSibling)?$_doqc1o5jcq8h2xq.some(beforeOrStartOf(elm.nextSibling)):elm.nextSibling?$_geef5m2pjcq8h3rp.firstPositionIn(elm.nextSibling):$_doqc1o5jcq8h2xq.none()},findCaretPositionBackwardsFromElm=function(rootElement,elm){var startPosition=CaretPosition.before(elm.previousSibling?elm.previousSibling:elm.parentNode);return $_geef5m2pjcq8h3rp.prevPosition(rootElement,startPosition).fold(function(){return $_geef5m2pjcq8h3rp.nextPosition(rootElement,CaretPosition.after(elm))},$_doqc1o5jcq8h2xq.some)},findCaretPositionForwardsFromElm=function(rootElement,elm){return $_geef5m2pjcq8h3rp.nextPosition(rootElement,CaretPosition.after(elm)).fold(function(){return $_geef5m2pjcq8h3rp.prevPosition(rootElement,CaretPosition.before(elm))},$_doqc1o5jcq8h2xq.some)},findCaretPositionBackwards=function(rootElement,elm){return getPreviousSiblingCaretPosition(elm).orThunk(function(){return getNextSiblingCaretPosition(elm)}).orThunk(function(){return findCaretPositionBackwardsFromElm(rootElement,elm)})},findCaretPositionForward=function(rootElement,elm){return getNextSiblingCaretPosition(elm).orThunk(function(){return getPreviousSiblingCaretPosition(elm)}).orThunk(function(){return findCaretPositionForwardsFromElm(rootElement,elm)})},findCaretPosition$1=function(forward,rootElement,elm){return forward?findCaretPositionForward(rootElement,elm):findCaretPositionBackwards(rootElement,elm)},findCaretPosOutsideElmAfterDelete=function(forward,rootElement,elm){return findCaretPosition$1(forward,rootElement,elm).map($_djct026jcq8h2xw.curry(reposition,elm))},setSelection=function(editor,forward,pos){pos.fold(function(){editor.focus()},function(pos){editor.selection.setRng(pos.toRange(),forward)})},eqRawNode=function(rawNode){return function(elm){return elm.dom()===rawNode}},isBlock$2=function(editor,elm){return elm&&editor.schema.getBlockElements().hasOwnProperty($_d9btx8zjcq8h3hu.name(elm))},paddEmptyBlock=function(elm){if($_1b93z42zjcq8h3te.isEmpty(elm)){var br=$_etvcvfyjcq8h3hp.fromHtml('<br data-mce-bogus="1">');return $_8dor5e2gjcq8h3qz.empty(elm),$_6290j62fjcq8h3qx.append(elm,br),$_doqc1o5jcq8h2xq.some(CaretPosition.before(br.dom()))}return $_doqc1o5jcq8h2xq.none()},deleteNormalized=function(elm,afterDeletePosOpt){return $_7re31t2djcq8h3qn.liftN([$_gah0mz17jcq8h3ir.prevSibling(elm),$_gah0mz17jcq8h3ir.nextSibling(elm),afterDeletePosOpt],function(prev,next,afterDeletePos){var offset,prevNode=prev.dom(),nextNode=next.dom();return $_bpl7e51qjcq8h3kz.isText(prevNode)&&$_bpl7e51qjcq8h3kz.isText(nextNode)?(offset=prevNode.data.length,prevNode.appendData(nextNode.data),$_8dor5e2gjcq8h3qz.remove(next),$_8dor5e2gjcq8h3qz.remove(elm),afterDeletePos.container()===nextNode?new CaretPosition(prevNode,offset):afterDeletePos):($_8dor5e2gjcq8h3qz.remove(elm),afterDeletePos)}).orThunk(function(){return $_8dor5e2gjcq8h3qz.remove(elm),afterDeletePosOpt})},$_cdt9q138jcq8h3uw={deleteElement:function(editor,forward,elm){var afterDeletePos=findCaretPosOutsideElmAfterDelete(forward,editor.getBody(),elm.dom()),parentBlock=$_26j8552ujcq8h3sl.ancestor(elm,$_djct026jcq8h2xw.curry(isBlock$2,editor),eqRawNode(editor.getBody())),normalizedAfterDeletePos=deleteNormalized(elm,afterDeletePos);editor.dom.isEmpty(editor.getBody())?(editor.setContent(""),editor.selection.setCursorLocation()):parentBlock.bind(paddEmptyBlock).fold(function(){setSelection(editor,forward,normalizedAfterDeletePos)},function(paddPos){setSelection(editor,forward,$_doqc1o5jcq8h2xq.some(paddPos))})}},deleteElement=function(editor,forward){return function(element){return editor._selectionOverrides.hideFakeCaret(),$_cdt9q138jcq8h3uw.deleteElement(editor,forward,$_etvcvfyjcq8h3hp.fromDom(element)),!0}},moveToElement=function(editor,forward){return function(element){var pos=forward?CaretPosition.before(element):CaretPosition.after(element);return editor.selection.setRng(pos.toRange()),!0}},moveToPosition=function(editor){return function(pos){return editor.selection.setRng(pos.toRange()),!0}},backspaceDeleteCaret=function(editor,forward){return $_5qgj7036jcq8h3um.read(editor.getBody(),forward,editor.selection.getRng()).map(function(deleteAction){return deleteAction.fold(deleteElement(editor,forward),moveToElement(editor,forward),moveToPosition(editor))}).getOr(!1)},deleteOffscreenSelection=function(rootElement){$_de5suq4jcq8h2x0.each($_7cq9b52kjcq8h3r9.descendants(rootElement,".mce-offscreen-selection"),$_8dor5e2gjcq8h3qz.remove)},backspaceDeleteRange=function(editor,forward){var selectedElement=editor.selection.getNode();return!!$_bpl7e51qjcq8h3kz.isContentEditableFalse(selectedElement)&&(deleteOffscreenSelection($_etvcvfyjcq8h3hp.fromDom(editor.getBody())),$_cdt9q138jcq8h3uw.deleteElement(editor,forward,$_etvcvfyjcq8h3hp.fromDom(editor.selection.getNode())),$_f8lxkr2tjcq8h3sf.paddEmptyBody(editor),!0)},getContentEditableRoot=function(root,node){for(;node&&node!==root;){if($_bpl7e51qjcq8h3kz.isContentEditableTrue(node)||$_bpl7e51qjcq8h3kz.isContentEditableFalse(node))return node;node=node.parentNode}return null},$_7vw9e735jcq8h3ug={backspaceDelete:function(editor,forward){return editor.selection.isCollapsed()?backspaceDeleteCaret(editor,forward):backspaceDeleteRange(editor,forward)},paddEmptyElement:function(editor){var br,ceRoot=getContentEditableRoot(editor.getBody(),editor.selection.getNode());return $_bpl7e51qjcq8h3kz.isContentEditableTrue(ceRoot)&&editor.dom.isBlock(ceRoot)&&editor.dom.isEmpty(ceRoot)&&(br=editor.dom.create("br",{"data-mce-bogus":"1"}),editor.dom.setHTML(ceRoot,""),ceRoot.appendChild(br),editor.selection.setRng(CaretPosition.before(br).toRange())),!0}},isText$7=$_bpl7e51qjcq8h3kz.isText,startsWithCaretContainer$1=function(node){return isText$7(node)&&node.data[0]===$_fz4vwq21jcq8h3ow.ZWSP},endsWithCaretContainer$1=function(node){return isText$7(node)&&node.data[node.data.length-1]===$_fz4vwq21jcq8h3ow.ZWSP},createZwsp=function(node){return node.ownerDocument.createTextNode($_fz4vwq21jcq8h3ow.ZWSP)},insertBefore$1=function(node){if(isText$7(node.previousSibling))return endsWithCaretContainer$1(node.previousSibling)?node.previousSibling:(node.previousSibling.appendData($_fz4vwq21jcq8h3ow.ZWSP),node.previousSibling);if(isText$7(node))return startsWithCaretContainer$1(node)?node:(node.insertData(0,$_fz4vwq21jcq8h3ow.ZWSP),node);var newNode=createZwsp(node);return node.parentNode.insertBefore(newNode,node),newNode},insertAfter$1=function(node){if(isText$7(node.nextSibling))return startsWithCaretContainer$1(node.nextSibling)?node.nextSibling:(node.nextSibling.insertData(0,$_fz4vwq21jcq8h3ow.ZWSP),node.nextSibling);if(isText$7(node))return endsWithCaretContainer$1(node)?node:(node.appendData($_fz4vwq21jcq8h3ow.ZWSP),node);var newNode=createZwsp(node);return node.nextSibling?node.parentNode.insertBefore(newNode,node.nextSibling):node.parentNode.appendChild(newNode),newNode},insertInline$1=function(before,node){return before?insertBefore$1(node):insertAfter$1(node)},$_cn2q8b3bjcq8h3vh={insertInline:insertInline$1,insertInlineBefore:$_djct026jcq8h2xw.curry(insertInline$1,!0),insertInlineAfter:$_djct026jcq8h2xw.curry(insertInline$1,!1)},isElement$6=$_bpl7e51qjcq8h3kz.isElement,isText$8=$_bpl7e51qjcq8h3kz.isText,removeNode=function(node){var parentNode=node.parentNode;parentNode&&parentNode.removeChild(node)},getNodeValue=function(node){try{return node.nodeValue}catch(ex){return""}},setNodeValue=function(node,text){0===text.length?removeNode(node):node.nodeValue=text},trimCount=function(text){var trimmedText=$_fz4vwq21jcq8h3ow.trim(text);return{count:text.length-trimmedText.length,text:trimmedText}},removeUnchanged=function(caretContainer,pos){return remove$3(caretContainer),pos},removeTextAndReposition=function(caretContainer,pos){var before=trimCount(caretContainer.data.substr(0,pos.offset())),after=trimCount(caretContainer.data.substr(pos.offset())),text=before.text+after.text;return text.length>0?(setNodeValue(caretContainer,text),new CaretPosition(caretContainer,pos.offset()-before.count)):pos},removeElementAndReposition=function(caretContainer,pos){var parentNode=pos.container(),newPosition=$_de5suq4jcq8h2x0.indexOf(parentNode.childNodes,caretContainer).map(function(index){return index<pos.offset()?new CaretPosition(parentNode,pos.offset()-1):pos}).getOr(pos);return remove$3(caretContainer),newPosition},removeTextCaretContainer=function(caretContainer,pos){return pos.container()===caretContainer?removeTextAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos)},removeElementCaretContainer=function(caretContainer,pos){return pos.container()===caretContainer.parentNode?removeElementAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos)},remove$3=function(caretContainerNode){if(isElement$6(caretContainerNode)&&$_cyutcs20jcq8h3or.isCaretContainer(caretContainerNode)&&($_cyutcs20jcq8h3or.hasContent(caretContainerNode)?caretContainerNode.removeAttribute("data-mce-caret"):removeNode(caretContainerNode)),isText$8(caretContainerNode)){var text=$_fz4vwq21jcq8h3ow.trim(getNodeValue(caretContainerNode));setNodeValue(caretContainerNode,text)}},$_ap2ju43cjcq8h3vl={removeAndReposition:function(container,pos){return CaretPosition.isTextPosition(pos)?removeTextCaretContainer(container,pos):removeElementCaretContainer(container,pos)},remove:remove$3},insertInlinePos=function(pos,before){return $_bpl7e51qjcq8h3kz.isText(pos.container())?$_cn2q8b3bjcq8h3vh.insertInline(before,pos.container()):$_cn2q8b3bjcq8h3vh.insertInline(before,pos.getNode())},isPosCaretContainer=function(pos,caret){var caretNode=caret.get();return caretNode&&pos.container()===caretNode&&$_cyutcs20jcq8h3or.isCaretContainerInline(caretNode)},$_2rj2wd3ajcq8h3ve={renderCaret:function(caret,location){return location.fold(function(element){$_ap2ju43cjcq8h3vl.remove(caret.get());var text=$_cn2q8b3bjcq8h3vh.insertInlineBefore(element);return caret.set(text),$_doqc1o5jcq8h2xq.some(new CaretPosition(text,text.length-1))},function(element){return $_geef5m2pjcq8h3rp.firstPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return new CaretPosition(caret.get(),1);$_ap2ju43cjcq8h3vl.remove(caret.get());var text=insertInlinePos(pos,!0);return caret.set(text),new CaretPosition(text,1)})},function(element){return $_geef5m2pjcq8h3rp.lastPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return new CaretPosition(caret.get(),caret.get().length-1);$_ap2ju43cjcq8h3vl.remove(caret.get());var text=insertInlinePos(pos,!1);return caret.set(text),new CaretPosition(text,text.length-1)})},function(element){$_ap2ju43cjcq8h3vl.remove(caret.get());var text=$_cn2q8b3bjcq8h3vh.insertInlineAfter(element);return caret.set(text),$_doqc1o5jcq8h2xq.some(new CaretPosition(text,1))})}},isInlineBlock=function(node){return node&&/^(IMG)$/.test(node.nodeName)},isWhiteSpaceNode$1=function(node){return node&&3===node.nodeType&&/^([\t \r\n]+|)$/.test(node.nodeValue)},normalizeStyleValue=function(dom,value,name){return"color"!==name&&"backgroundColor"!==name||(value=dom.toHex(value)),"fontWeight"===name&&700===value&&(value="bold"),"fontFamily"===name&&(value=value.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+value},$_9psjk33gjcq8h3wq={isInlineBlock:isInlineBlock,moveStart:function(dom,selection,rng){var walker,node,nodes,container=rng.startContainer,offset=rng.startOffset;if((rng.startContainer!==rng.endContainer||!isInlineBlock(rng.startContainer.childNodes[rng.startOffset]))&&(3===container.nodeType&&offset>=container.nodeValue.length&&(offset=dom.nodeIndex(container),container=container.parentNode),1===container.nodeType))for(offset<(nodes=container.childNodes).length?(container=nodes[offset],walker=new TreeWalker(container,dom.getParent(container,dom.isBlock))):(container=nodes[nodes.length-1],(walker=new TreeWalker(container,dom.getParent(container,dom.isBlock))).next(!0)),node=walker.current();node;node=walker.next())if(3===node.nodeType&&!isWhiteSpaceNode$1(node))return rng.setStart(node,0),void selection.setRng(rng)},getNonWhiteSpaceSibling:function(node,next,inc){if(node)for(next=next?"nextSibling":"previousSibling",node=inc?node:node[next];node;node=node[next])if(1===node.nodeType||!isWhiteSpaceNode$1(node))return node},isTextBlock:function(editor,name){return name.nodeType&&(name=name.nodeName),!!editor.schema.getTextBlockElements()[name.toLowerCase()]},isValid:function(ed,parent,child){return ed.schema.isValidChild(parent,child)},isWhiteSpaceNode:isWhiteSpaceNode$1,replaceVars:function(value,vars){return"string"!=typeof value?value=value(vars):vars&&(value=value.replace(/%(\w+)/g,function(str,name){return vars[name]||str})),value},isEq:function(str1,str2){return str1=str1||"",str2=str2||"",str1=""+(str1.nodeName||str1),str2=""+(str2.nodeName||str2),str1.toLowerCase()===str2.toLowerCase()},normalizeStyleValue:normalizeStyleValue,getStyle:function(dom,node,name){return normalizeStyleValue(dom,dom.getStyle(node,name),name)},getTextDecoration:function(dom,node){var decoration;return dom.getParent(node,function(n){return(decoration=dom.getStyle(n,"text-decoration"))&&"none"!==decoration}),decoration},getParents:function(dom,node,selector){return dom.getParents(node,selector,dom.getRoot())}},isBookmarkNode$2=$_5o3jsi29jcq8h3pn.isBookmarkNode,getParents$1=$_9psjk33gjcq8h3wq.getParents,isWhiteSpaceNode=$_9psjk33gjcq8h3wq.isWhiteSpaceNode,isTextBlock=$_9psjk33gjcq8h3wq.isTextBlock,findLeaf=function(node,offset){for(void 0===offset&&(offset=3===node.nodeType?node.length:node.childNodes.length);node&&node.hasChildNodes();)(node=node.childNodes[offset])&&(offset=3===node.nodeType?node.length:node.childNodes.length);return{node:node,offset:offset}},excludeTrailingWhitespace=function(endContainer,endOffset){var leaf=findLeaf(endContainer,endOffset);if(leaf.node){for(;leaf.node&&0===leaf.offset&&leaf.node.previousSibling;)leaf=findLeaf(leaf.node.previousSibling);leaf.node&&leaf.offset>0&&3===leaf.node.nodeType&&" "===leaf.node.nodeValue.charAt(leaf.offset-1)&&leaf.offset>1&&(endContainer=leaf.node).splitText(leaf.offset-1)}return endContainer},isBogusBr=function(node){return"BR"===node.nodeName&&node.getAttribute("data-mce-bogus")&&!node.nextSibling},findParentContentEditable=function(dom,node){for(var parent=node;parent;){if(1===parent.nodeType&&dom.getContentEditable(parent))return"false"===dom.getContentEditable(parent)?parent:node;parent=parent.parentNode}return node},findSpace=function(start,remove,node,offset){var pos,pos2,str=node.nodeValue;return void 0===offset&&(offset=start?str.length:0),start?-1===(pos=(pos=str.lastIndexOf(" ",offset))>(pos2=str.lastIndexOf("",offset))?pos:pos2)||remove||pos++:(pos=str.indexOf(" ",offset),pos2=str.indexOf("",offset),pos=-1!==pos&&(-1===pos2||pos<pos2)?pos:pos2),pos},findWordEndPoint=function(dom,body,container,offset,start,remove){var walker,node,pos,lastTextNode;if(3===container.nodeType){if(-1!==(pos=findSpace(start,remove,container,offset)))return{container:container,offset:pos};lastTextNode=container}for(walker=new TreeWalker(container,dom.getParent(container,dom.isBlock)||body);node=walker[start?"prev":"next"]();)if(3===node.nodeType){if(lastTextNode=node,-1!==(pos=findSpace(start,remove,node)))return{container:node,offset:pos}}else if(dom.isBlock(node))break;if(lastTextNode)return offset=start?0:lastTextNode.length,{container:lastTextNode,offset:offset}},findSelectorEndPoint=function(dom,format,rng,container,siblingName){var parents,i,y,curFormat;for(3===container.nodeType&&0===container.nodeValue.length&&container[siblingName]&&(container=container[siblingName]),parents=getParents$1(dom,container),i=0;i<parents.length;i++)for(y=0;y<format.length;y++)if(!("collapsed"in(curFormat=format[y])&&curFormat.collapsed!==rng.collapsed)&&dom.is(parents[i],curFormat.selector))return parents[i];return container},findBlockEndPoint=function(editor,format,container,siblingName){var node,dom=editor.dom,root=dom.getRoot();if(format[0].wrapper||(node=dom.getParent(container,format[0].block,root)),!node){var scopeRoot=dom.getParent(container,"LI,TD,TH");node=dom.getParent(3===container.nodeType?container.parentNode:container,function(node){return node!==root&&isTextBlock(editor,node)},scopeRoot)}if(node&&format[0].wrapper&&(node=getParents$1(dom,node,"ul,ol").reverse()[0]||node),!node)for(node=container;node[siblingName]&&!dom.isBlock(node[siblingName])&&(node=node[siblingName],!$_9psjk33gjcq8h3wq.isEq(node,"br")););return node||container},findParentContainer=function(dom,format,startContainer,startOffset,endContainer,endOffset,start){var container,parent,sibling,siblingName,root;if(container=parent=start?startContainer:endContainer,siblingName=start?"previousSibling":"nextSibling",root=dom.getRoot(),3===container.nodeType&&!isWhiteSpaceNode(container)&&(start?startOffset>0:endOffset<container.nodeValue.length))return container;for(;;){if(!format[0].block_expand&&dom.isBlock(parent))return parent;for(sibling=parent[siblingName];sibling;sibling=sibling[siblingName])if(!isBookmarkNode$2(sibling)&&!isWhiteSpaceNode(sibling)&&!isBogusBr(sibling))return parent;if(parent===root||parent.parentNode===root){container=parent;break}parent=parent.parentNode}return container},$_3sut9h3fjcq8h3wi={expandRng:function(editor,rng,format,remove){var endPoint,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,dom=editor.dom;return 1===startContainer.nodeType&&startContainer.hasChildNodes()&&3===(startContainer=$_1nmjnx23jcq8h3p1.getNode(startContainer,startOffset)).nodeType&&(startOffset=0),1===endContainer.nodeType&&endContainer.hasChildNodes()&&3===(endContainer=$_1nmjnx23jcq8h3p1.getNode(endContainer,rng.collapsed?endOffset:endOffset-1)).nodeType&&(endOffset=endContainer.nodeValue.length),startContainer=findParentContentEditable(dom,startContainer),endContainer=findParentContentEditable(dom,endContainer),(isBookmarkNode$2(startContainer.parentNode)||isBookmarkNode$2(startContainer))&&3===(startContainer=(startContainer=isBookmarkNode$2(startContainer)?startContainer:startContainer.parentNode).nextSibling||startContainer).nodeType&&(startOffset=0),(isBookmarkNode$2(endContainer.parentNode)||isBookmarkNode$2(endContainer))&&3===(endContainer=(endContainer=isBookmarkNode$2(endContainer)?endContainer:endContainer.parentNode).previousSibling||endContainer).nodeType&&(endOffset=endContainer.length),format[0].inline&&(rng.collapsed&&((endPoint=findWordEndPoint(dom,editor.getBody(),startContainer,startOffset,!0,remove))&&(startContainer=endPoint.container,startOffset=endPoint.offset),(endPoint=findWordEndPoint(dom,editor.getBody(),endContainer,endOffset,!1,remove))&&(endContainer=endPoint.container,endOffset=endPoint.offset)),endContainer=remove?endContainer:excludeTrailingWhitespace(endContainer,endOffset)),(format[0].inline||format[0].block_expand)&&(format[0].inline&&3===startContainer.nodeType&&0!==startOffset||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),format[0].inline&&3===endContainer.nodeType&&endOffset!==endContainer.nodeValue.length||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1))),format[0].selector&&!1!==format[0].expand&&!format[0].inline&&(startContainer=findSelectorEndPoint(dom,format,rng,startContainer,"previousSibling"),endContainer=findSelectorEndPoint(dom,format,rng,endContainer,"nextSibling")),(format[0].block||format[0].selector)&&(startContainer=findBlockEndPoint(editor,format,startContainer,"previousSibling"),endContainer=findBlockEndPoint(editor,format,endContainer,"nextSibling"),format[0].block&&(dom.isBlock(startContainer)||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),dom.isBlock(endContainer)||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1)))),1===startContainer.nodeType&&(startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1===endContainer.nodeType&&(endOffset=dom.nodeIndex(endContainer)+1,endContainer=endContainer.parentNode),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}}},isEq$2=$_9psjk33gjcq8h3wq.isEq,matchesUnInheritedFormatSelector=function(ed,node,name){var formatList=ed.formatter.get(name);if(formatList)for(var i=0;i<formatList.length;i++)if(!1===formatList[i].inherit&&ed.dom.is(node,formatList[i].selector))return!0;return!1},matchParents=function(editor,node,name,vars){var root=editor.dom.getRoot();return node!==root&&(node=editor.dom.getParent(node,function(node){return!!matchesUnInheritedFormatSelector(editor,node,name)||(node.parentNode===root||!!matchNode(editor,node,name,vars,!0))}),matchNode(editor,node,name,vars))},matchName=function(dom,node,format){return!!isEq$2(node,format.inline)||(!!isEq$2(node,format.block)||(format.selector?1===node.nodeType&&dom.is(node,format.selector):void 0))},matchItems=function(dom,node,format,itemName,similar,vars){var key,value,i,items=format[itemName];if(format.onmatch)return format.onmatch(node,format,itemName);if(items)if(void 0===items.length){for(key in items)if(items.hasOwnProperty(key)){if(value="attributes"===itemName?dom.getAttrib(node,key):$_9psjk33gjcq8h3wq.getStyle(dom,node,key),similar&&!value&&!format.exact)return;if((!similar||format.exact)&&!isEq$2(value,$_9psjk33gjcq8h3wq.normalizeStyleValue(dom,$_9psjk33gjcq8h3wq.replaceVars(items[key],vars),key)))return}}else for(i=0;i<items.length;i++)if("attributes"===itemName?dom.getAttrib(node,items[i]):$_9psjk33gjcq8h3wq.getStyle(dom,node,items[i]))return format;return format},matchNode=function(ed,node,name,vars,similar){var format,i,x,classes,formatList=ed.formatter.get(name),dom=ed.dom;if(formatList&&node)for(i=0;i<formatList.length;i++)if(format=formatList[i],matchName(ed.dom,node,format)&&matchItems(dom,node,format,"attributes",similar,vars)&&matchItems(dom,node,format,"styles",similar,vars)){if(classes=format.classes)for(x=0;x<classes.length;x++)if(!ed.dom.hasClass(node,classes[x]))return;return format}},$_1k94m23hjcq8h3wu={matchNode:matchNode,matchName:matchName,match:function(editor,name,vars,node){var startNode;return node?matchParents(editor,node,name,vars):(node=editor.selection.getNode(),!!matchParents(editor,node,name,vars)||!((startNode=editor.selection.getStart())===node||!matchParents(editor,startNode,name,vars)))},matchAll:function(editor,names,vars){var startElement,matchedFormatNames=[],checkedMap={};return startElement=editor.selection.getStart(),editor.dom.getParent(startElement,function(node){var i,name;for(i=0;i<names.length;i++)name=names[i],!checkedMap[name]&&matchNode(editor,node,name,vars)&&(checkedMap[name]=!0,matchedFormatNames.push(name))},editor.dom.getRoot()),matchedFormatNames},canApply:function(editor,name){var startNode,parents,i,x,selector,formatList=editor.formatter.get(name),dom=editor.dom;if(formatList)for(startNode=editor.selection.getStart(),parents=$_9psjk33gjcq8h3wq.getParents(dom,startNode),x=formatList.length-1;x>=0;x--){if(!(selector=formatList[x].selector)||formatList[x].defaultBlock)return!0;for(i=parents.length-1;i>=0;i--)if(dom.is(parents[i],selector))return!0}return!1},matchesUnInheritedFormatSelector:matchesUnInheritedFormatSelector},splitText=function(node,offset){return node.splitText(offset)},$_269mfz3ijcq8h3x1={split:function(rng){var startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;return startContainer===endContainer&&$_bpl7e51qjcq8h3kz.isText(startContainer)?startOffset>0&&startOffset<startContainer.nodeValue.length&&(startContainer=(endContainer=splitText(startContainer,startOffset)).previousSibling,endOffset>startOffset?(startContainer=endContainer=splitText(endContainer,endOffset-=startOffset).previousSibling,endOffset=endContainer.nodeValue.length,startOffset=0):endOffset=0):($_bpl7e51qjcq8h3kz.isText(startContainer)&&startOffset>0&&startOffset<startContainer.nodeValue.length&&(startContainer=splitText(startContainer,startOffset),startOffset=0),$_bpl7e51qjcq8h3kz.isText(endContainer)&&endOffset>0&&endOffset<endContainer.nodeValue.length&&(endOffset=(endContainer=splitText(endContainer,endOffset).previousSibling).nodeValue.length)),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}}},ZWSP$1=$_fz4vwq21jcq8h3ow.ZWSP,importNode=function(ownerDocument,node){return ownerDocument.importNode(node,!0)},isCaretNode=function(node){return 1===node.nodeType&&"_mce_caret"===node.id},getEmptyCaretContainers=function(node){for(var nodes=[];node;){if(3===node.nodeType&&node.nodeValue!==ZWSP$1||node.childNodes.length>1)return[];1===node.nodeType&&nodes.push(node),node=node.firstChild}return nodes},isCaretContainerEmpty=function(node){return getEmptyCaretContainers(node).length>0},findFirstTextNode=function(node){var walker;if(node)for(node=(walker=new TreeWalker(node,node)).current();node;node=walker.next())if(3===node.nodeType)return node;return null},createCaretContainer=function(fill){var caretContainer=$_etvcvfyjcq8h3hp.fromTag("span");return $_7np04f14jcq8h3ig.setAll(caretContainer,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),fill&&$_6290j62fjcq8h3qx.append(caretContainer,$_etvcvfyjcq8h3hp.fromText(ZWSP$1)),caretContainer},getParentCaretContainer=function(body,node){for(;node&&node!==body;){if("_mce_caret"===node.id)return node;node=node.parentNode}return null},trimZwspFromCaretContainer=function(caretContainerNode){var textNode=findFirstTextNode(caretContainerNode);return textNode&&textNode.nodeValue.charAt(0)===ZWSP$1&&textNode.deleteData(0,1),textNode},removeCaretContainerNode=function(dom,selection,node,moveCaret){var rng,block,textNode;rng=selection.getRng(!0),block=dom.getParent(node,dom.isBlock),isCaretContainerEmpty(node)?(!1!==moveCaret&&(rng.setStartBefore(node),rng.setEndBefore(node)),dom.remove(node)):(textNode=trimZwspFromCaretContainer(node),rng.startContainer===textNode&&rng.startOffset>0&&rng.setStart(textNode,rng.startOffset-1),rng.endContainer===textNode&&rng.endOffset>0&&rng.setEnd(textNode,rng.endOffset-1),dom.remove(node,!0)),block&&dom.isEmpty(block)&&$_9nudqd2ejcq8h3qq.fillWithPaddingBr($_etvcvfyjcq8h3hp.fromDom(block)),selection.setRng(rng)},removeCaretContainer=function(body,dom,selection,node,moveCaret){if(node)removeCaretContainerNode(dom,selection,node,moveCaret);else if(!(node=getParentCaretContainer(body,selection.getStart())))for(;node=dom.get("_mce_caret");)removeCaretContainerNode(dom,selection,node,!1)},insertCaretContainerNode=function(editor,caretContainer,formatNode){var dom=editor.dom,block=dom.getParent(formatNode,$_ghxtsv25jcq8h3p5.curry($_9psjk33gjcq8h3wq.isTextBlock,editor));block&&dom.isEmpty(block)?formatNode.parentNode.replaceChild(caretContainer,formatNode):($_9nudqd2ejcq8h3qq.removeTrailingBr($_etvcvfyjcq8h3hp.fromDom(formatNode)),dom.isEmpty(formatNode)?formatNode.parentNode.replaceChild(caretContainer,formatNode):dom.insertAfter(caretContainer,formatNode))},appendNode=function(parentNode,node){return parentNode.appendChild(node),node},insertFormatNodesIntoCaretContainer=function(formatNodes,caretContainer){var innerMostFormatNode=$_de5suq4jcq8h2x0.foldr(formatNodes,function(parentNode,formatNode){return appendNode(parentNode,formatNode.cloneNode(!1))},caretContainer);return appendNode(innerMostFormatNode,innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1))},disableCaretContainer=function(body,dom,selection,keyCode){removeCaretContainer(body,dom,selection,null,!1),8===keyCode&&selection.isCollapsed()&&selection.getStart().innerHTML===ZWSP$1&&removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart())),37!==keyCode&&39!==keyCode||removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart()))},$_24rn4g3ejcq8h3w4={setup:function(editor){var dom=editor.dom,selection=editor.selection,body=editor.getBody();editor.on("mouseup keydown",function(e){disableCaretContainer(body,dom,selection,e.keyCode)})},applyCaretFormat:function(editor,name,vars){var rng,caretContainer,textNode,offset,bookmark,text,selection=editor.selection;offset=(rng=selection.getRng(!0)).startOffset,text=rng.startContainer.nodeValue,(caretContainer=getParentCaretContainer(editor.getBody(),selection.getStart()))&&(textNode=findFirstTextNode(caretContainer));var wordcharRegex=/[^\s\u00a0\u00ad\u200b\ufeff]/;text&&offset>0&&offset<text.length&&wordcharRegex.test(text.charAt(offset))&&wordcharRegex.test(text.charAt(offset-1))?(bookmark=selection.getBookmark(),rng.collapse(!0),rng=$_3sut9h3fjcq8h3wi.expandRng(editor,rng,editor.formatter.get(name)),rng=$_269mfz3ijcq8h3x1.split(rng),editor.formatter.apply(name,vars,rng),selection.moveToBookmark(bookmark)):(caretContainer&&textNode.nodeValue===ZWSP$1?editor.formatter.apply(name,vars,caretContainer):(textNode=(caretContainer=importNode(editor.getDoc(),createCaretContainer(!0).dom())).firstChild,rng.insertNode(caretContainer),offset=1,editor.formatter.apply(name,vars,caretContainer)),selection.setCursorLocation(textNode,offset))},removeCaretFormat:function(editor,name,vars,similar){var container,offset,bookmark,hasContentAfter,node,formatNode,caretContainer,dom=editor.dom,selection=editor.selection,parents=[],rng=selection.getRng();for(container=rng.startContainer,offset=rng.startOffset,node=container,3===container.nodeType&&(offset!==container.nodeValue.length&&(hasContentAfter=!0),node=node.parentNode);node;){if($_1k94m23hjcq8h3wu.matchNode(editor,node,name,vars,similar)){formatNode=node;break}node.nextSibling&&(hasContentAfter=!0),parents.push(node),node=node.parentNode}if(formatNode)if(hasContentAfter){bookmark=selection.getBookmark(),rng.collapse(!0);var expandedRng=$_3sut9h3fjcq8h3wi.expandRng(editor,rng,editor.formatter.get(name),!0);expandedRng=$_269mfz3ijcq8h3x1.split(expandedRng),editor.formatter.remove(name,vars,expandedRng),selection.moveToBookmark(bookmark)}else{caretContainer=getParentCaretContainer(editor.getBody(),formatNode);var newCaretContainer=createCaretContainer(!1).dom(),caretNode=insertFormatNodesIntoCaretContainer(parents,newCaretContainer);caretContainer?insertCaretContainerNode(editor,newCaretContainer,caretContainer):insertCaretContainerNode(editor,newCaretContainer,formatNode),removeCaretContainerNode(dom,selection,caretContainer,!1),selection.setCursorLocation(caretNode,1),dom.isEmpty(formatNode)&&dom.remove(formatNode)}},isCaretNode:isCaretNode,getParentCaretContainer:getParentCaretContainer,replaceWithCaretFormat:function(targetNode,formatNodes){var caretContainer=createCaretContainer(!1),innerMost=insertFormatNodesIntoCaretContainer(formatNodes,caretContainer.dom());return $_6290j62fjcq8h3qx.before($_etvcvfyjcq8h3hp.fromDom(targetNode),caretContainer),$_8dor5e2gjcq8h3qz.remove($_etvcvfyjcq8h3hp.fromDom(targetNode)),CaretPosition(innerMost,0)},isFormatElement:function(editor,element){return editor.schema.getTextInlineElements().hasOwnProperty($_d9btx8zjcq8h3hu.name(element))&&!isCaretNode(element.dom())&&!$_bpl7e51qjcq8h3kz.isBogus(element.dom())}},$_1jnz743jjcq8h3x3={evaluateUntil:function(fns,args){for(var i=0;i<fns.length;i++){var result=fns[i].apply(null,args);if(result.isSome())return result}return $_doqc1o5jcq8h2xq.none()}},Location=$_b40jd137jcq8h3us.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rescope$1=function(rootNode,node){var parentBlock=$_ctfd6a27jcq8h3pe.getParentBlock(node,rootNode);return parentBlock||rootNode},before$3=function(isInlineTarget,rootNode,pos){var nPos=$_7ve5rf2wjcq8h3sv.normalizeForwards(pos),scope=rescope$1(rootNode,nPos.container());return $_7ve5rf2wjcq8h3sv.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_geef5m2pjcq8h3rp.nextPosition(scope,nPos).bind($_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.before(inline)})},$_doqc1o5jcq8h2xq.none)},isNotInsideFormatCaretContainer=function(rootNode,elm){return null===$_24rn4g3ejcq8h3w4.getParentCaretContainer(rootNode,elm)},findInsideRootInline=function(isInlineTarget,rootNode,pos){return $_7ve5rf2wjcq8h3sv.findRootInline(isInlineTarget,rootNode,pos).filter($_djct026jcq8h2xw.curry(isNotInsideFormatCaretContainer,rootNode))},start=function(isInlineTarget,rootNode,pos){var nPos=$_7ve5rf2wjcq8h3sv.normalizeBackwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_geef5m2pjcq8h3rp.prevPosition(inline,nPos).isNone()?$_doqc1o5jcq8h2xq.some(Location.start(inline)):$_doqc1o5jcq8h2xq.none()})},end=function(isInlineTarget,rootNode,pos){var nPos=$_7ve5rf2wjcq8h3sv.normalizeForwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_geef5m2pjcq8h3rp.nextPosition(inline,nPos).isNone()?$_doqc1o5jcq8h2xq.some(Location.end(inline)):$_doqc1o5jcq8h2xq.none()})},after$3=function(isInlineTarget,rootNode,pos){var nPos=$_7ve5rf2wjcq8h3sv.normalizeBackwards(pos),scope=rescope$1(rootNode,nPos.container());return $_7ve5rf2wjcq8h3sv.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_geef5m2pjcq8h3rp.prevPosition(scope,nPos).bind($_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.after(inline)})},$_doqc1o5jcq8h2xq.none)},isValidLocation=function(location){return!1===$_7ve5rf2wjcq8h3sv.isRtl(getElement(location))},readLocation=function(isInlineTarget,rootNode,pos){return $_1jnz743jjcq8h3x3.evaluateUntil([before$3,start,end,after$3],[isInlineTarget,rootNode,pos]).filter(isValidLocation)},getElement=function(location){return location.fold($_djct026jcq8h2xw.identity,$_djct026jcq8h2xw.identity,$_djct026jcq8h2xw.identity,$_djct026jcq8h2xw.identity)},getName=function(location){return location.fold($_djct026jcq8h2xw.constant("before"),$_djct026jcq8h2xw.constant("start"),$_djct026jcq8h2xw.constant("end"),$_djct026jcq8h2xw.constant("after"))},outside=function(location){return location.fold(Location.before,Location.before,Location.after,Location.after)},isEq=function(location1,location2){return getName(location1)===getName(location2)&&getElement(location1)===getElement(location2)},betweenInlines=function(forward,isInlineTarget,rootNode,from,to,location){return $_7re31t2djcq8h3qn.liftN([$_7ve5rf2wjcq8h3sv.findRootInline(isInlineTarget,rootNode,from),$_7ve5rf2wjcq8h3sv.findRootInline(isInlineTarget,rootNode,to)],function(fromInline,toInline){return fromInline!==toInline&&$_7ve5rf2wjcq8h3sv.hasSameParentBlock(rootNode,fromInline,toInline)?Location.after(forward?fromInline:toInline):location}).getOr(location)},skipNoMovement=function(fromLocation,toLocation){return fromLocation.fold($_djct026jcq8h2xw.constant(!0),function(fromLocation){return!isEq(fromLocation,toLocation)})},findLocationTraverse=function(forward,isInlineTarget,rootNode,fromLocation,pos){var from=$_7ve5rf2wjcq8h3sv.normalizePosition(forward,pos);return $_geef5m2pjcq8h3rp.fromPosition(forward,rootNode,from).map($_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.normalizePosition,forward)).fold(function(){return fromLocation.map(outside)},function(to){return readLocation(isInlineTarget,rootNode,to).map($_djct026jcq8h2xw.curry(betweenInlines,forward,isInlineTarget,rootNode,from,to)).filter($_djct026jcq8h2xw.curry(skipNoMovement,fromLocation))}).filter(isValidLocation)},findLocationSimple=function(forward,location){return forward?location.fold($_djct026jcq8h2xw.compose($_doqc1o5jcq8h2xq.some,Location.start),$_doqc1o5jcq8h2xq.none,$_djct026jcq8h2xw.compose($_doqc1o5jcq8h2xq.some,Location.after),$_doqc1o5jcq8h2xq.none):location.fold($_doqc1o5jcq8h2xq.none,$_djct026jcq8h2xw.compose($_doqc1o5jcq8h2xq.some,Location.before),$_doqc1o5jcq8h2xq.none,$_djct026jcq8h2xw.compose($_doqc1o5jcq8h2xq.some,Location.end))},findLocation=function(forward,isInlineTarget,rootNode,pos){var from=$_7ve5rf2wjcq8h3sv.normalizePosition(forward,pos),fromLocation=readLocation(isInlineTarget,rootNode,from);return readLocation(isInlineTarget,rootNode,from).bind($_djct026jcq8h2xw.curry(findLocationSimple,forward)).orThunk(function(){return findLocationTraverse(forward,isInlineTarget,rootNode,fromLocation,pos)})},$_59o57m3djcq8h3vw={readLocation:readLocation,findLocation:findLocation,prevLocation:$_djct026jcq8h2xw.curry(findLocation,!1),nextLocation:$_djct026jcq8h2xw.curry(findLocation,!0),getElement:getElement,outside:outside,inside:function(location){return location.fold(Location.start,Location.start,Location.end,Location.end)}},Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},hasSelectionModifyApi=function(editor){return $_1i3etu12jcq8h3i8.isFunction(editor.selection.getSel().modify)},moveRel=function(forward,selection,pos){var delta=forward?1:-1;return selection.setRng(CaretPosition(pos.container(),pos.offset()+delta).toRange()),selection.getSel().modify("move",forward?"forward":"backward","word"),!0},$_e0rlx03mjcq8h3xc={hasSelectionModifyApi:hasSelectionModifyApi,moveByWord:function(forward,editor){var rng=editor.selection.getRng(),pos=forward?CaretPosition.fromRangeEnd(rng):CaretPosition.fromRangeStart(rng);return!!hasSelectionModifyApi(editor)&&(forward&&$_cyutcs20jcq8h3or.isBeforeInline(pos)?moveRel(!0,editor.selection,pos):!(forward||!$_cyutcs20jcq8h3or.isAfterInline(pos))&&moveRel(!1,editor.selection,pos))}},setCaretPosition=function(editor,pos){var rng=editor.dom.createRng();rng.setStart(pos.container(),pos.offset()),rng.setEnd(pos.container(),pos.offset()),editor.selection.setRng(rng)},isFeatureEnabled$1=function(editor){return!1!==editor.settings.inline_boundaries},setSelected=function(state,elm){state?elm.setAttribute("data-mce-selected","inline-boundary"):elm.removeAttribute("data-mce-selected")},renderCaretLocation=function(editor,caret,location){return $_2rj2wd3ajcq8h3ve.renderCaret(caret,location).map(function(pos){return setCaretPosition(editor,pos),location})},findLocation$1=function(editor,caret,forward){var rootNode=editor.getBody(),from=CaretPosition.fromRangeStart(editor.selection.getRng()),isInlineTarget=$_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.isInlineTarget,editor);return $_59o57m3djcq8h3vw.findLocation(forward,isInlineTarget,rootNode,from).bind(function(location){return renderCaretLocation(editor,caret,location)})},toggleInlines=function(isInlineTarget,dom,elms){var selectedInlines=$_de5suq4jcq8h2x0.filter(dom.select('*[data-mce-selected="inline-boundary"]'),isInlineTarget),targetInlines=$_de5suq4jcq8h2x0.filter(elms,isInlineTarget);$_de5suq4jcq8h2x0.each($_de5suq4jcq8h2x0.difference(selectedInlines,targetInlines),$_djct026jcq8h2xw.curry(setSelected,!1)),$_de5suq4jcq8h2x0.each($_de5suq4jcq8h2x0.difference(targetInlines,selectedInlines),$_djct026jcq8h2xw.curry(setSelected,!0))},safeRemoveCaretContainer=function(editor,caret){if(editor.selection.isCollapsed()&&!0!==editor.composing&&caret.get()){var pos=CaretPosition.fromRangeStart(editor.selection.getRng());CaretPosition.isTextPosition(pos)&&!1===$_7ve5rf2wjcq8h3sv.isAtZwsp(pos)&&(setCaretPosition(editor,$_ap2ju43cjcq8h3vl.removeAndReposition(caret.get(),pos)),caret.set(null))}},renderInsideInlineCaret=function(isInlineTarget,editor,caret,elms){if(editor.selection.isCollapsed()){var inlines=$_de5suq4jcq8h2x0.filter(elms,isInlineTarget);$_de5suq4jcq8h2x0.each(inlines,function(inline){var pos=CaretPosition.fromRangeStart(editor.selection.getRng());$_59o57m3djcq8h3vw.readLocation(isInlineTarget,editor.getBody(),pos).bind(function(location){return renderCaretLocation(editor,caret,location)})})}},moveWord=function(forward,editor,caret){return function(){return!!isFeatureEnabled$1(editor)&&$_e0rlx03mjcq8h3xc.moveByWord(forward,editor)}},$_duo1zd3kjcq8h3x5={move:function(editor,caret,forward){return function(){return!!isFeatureEnabled$1(editor)&&findLocation$1(editor,caret,forward).isSome()}},moveNextWord:$_djct026jcq8h2xw.curry(moveWord,!0),movePrevWord:$_djct026jcq8h2xw.curry(moveWord,!1),setupSelectedState:function(editor){var caret=new Cell(null),isInlineTarget=$_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.isInlineTarget,editor);return editor.on("NodeChange",function(e){isFeatureEnabled$1(editor)&&(toggleInlines(isInlineTarget,editor.dom,e.parents),safeRemoveCaretContainer(editor,caret),renderInsideInlineCaret(isInlineTarget,editor,caret,e.parents))}),caret},setCaretPosition:setCaretPosition},isFeatureEnabled=function(editor){return!1!==editor.settings.inline_boundaries},rangeFromPositions=function(from,to){var range=document.createRange();return range.setStart(from.container(),from.offset()),range.setEnd(to.container(),to.offset()),range},hasOnlyTwoOrLessPositionsLeft=function(elm){return $_7re31t2djcq8h3qn.liftN([$_geef5m2pjcq8h3rp.firstPositionIn(elm),$_geef5m2pjcq8h3rp.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_7ve5rf2wjcq8h3sv.normalizePosition(!0,firstPos),normalizedLastPos=$_7ve5rf2wjcq8h3sv.normalizePosition(!1,lastPos);return $_geef5m2pjcq8h3rp.nextPosition(elm,normalizedFirstPos).map(function(pos){return pos.isEqual(normalizedLastPos)}).getOr(!0)}).getOr(!0)},setCaretLocation=function(editor,caret){return function(location){return $_2rj2wd3ajcq8h3ve.renderCaret(caret,location).map(function(pos){return $_duo1zd3kjcq8h3x5.setCaretPosition(editor,pos),!0}).getOr(!1)}},deleteFromTo=function(editor,caret,from,to){var rootNode=editor.getBody(),isInlineTarget=$_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.isInlineTarget,editor);editor.undoManager.ignore(function(){editor.selection.setRng(rangeFromPositions(from,to)),editor.execCommand("Delete"),$_59o57m3djcq8h3vw.readLocation(isInlineTarget,rootNode,CaretPosition.fromRangeStart(editor.selection.getRng())).map($_59o57m3djcq8h3vw.inside).map(setCaretLocation(editor,caret))}),editor.nodeChanged()},rescope=function(rootNode,node){var parentBlock=$_ctfd6a27jcq8h3pe.getParentBlock(node,rootNode);return parentBlock||rootNode},backspaceDeleteCollapsed=function(editor,caret,forward,from){var rootNode=rescope(editor.getBody(),from.container()),isInlineTarget=$_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.isInlineTarget,editor),fromLocation=$_59o57m3djcq8h3vw.readLocation(isInlineTarget,rootNode,from);return fromLocation.bind(function(location){return forward?location.fold($_djct026jcq8h2xw.constant($_doqc1o5jcq8h2xq.some($_59o57m3djcq8h3vw.inside(location))),$_doqc1o5jcq8h2xq.none,$_djct026jcq8h2xw.constant($_doqc1o5jcq8h2xq.some($_59o57m3djcq8h3vw.outside(location))),$_doqc1o5jcq8h2xq.none):location.fold($_doqc1o5jcq8h2xq.none,$_djct026jcq8h2xw.constant($_doqc1o5jcq8h2xq.some($_59o57m3djcq8h3vw.outside(location))),$_doqc1o5jcq8h2xq.none,$_djct026jcq8h2xw.constant($_doqc1o5jcq8h2xq.some($_59o57m3djcq8h3vw.inside(location))))}).map(setCaretLocation(editor,caret)).getOrThunk(function(){var toPosition=$_geef5m2pjcq8h3rp.navigate(forward,rootNode,from),toLocation=toPosition.bind(function(pos){return $_59o57m3djcq8h3vw.readLocation(isInlineTarget,rootNode,pos)});return fromLocation.isSome()&&toLocation.isSome()?$_7ve5rf2wjcq8h3sv.findRootInline(isInlineTarget,rootNode,from).map(function(elm){return!!hasOnlyTwoOrLessPositionsLeft(elm)&&($_cdt9q138jcq8h3uw.deleteElement(editor,forward,$_etvcvfyjcq8h3hp.fromDom(elm)),!0)}).getOr(!1):toLocation.bind(function(_){return toPosition.map(function(to){return forward?deleteFromTo(editor,caret,from,to):deleteFromTo(editor,caret,to,from),!0})}).getOr(!1)})},$_5ebyq839jcq8h3v8={backspaceDelete:function(editor,caret,forward){if(editor.selection.isCollapsed()&&isFeatureEnabled(editor)){var from=CaretPosition.fromRangeStart(editor.selection.getRng());return backspaceDeleteCollapsed(editor,caret,forward,from)}return!1}},tableCellRng=$_1928vz18jcq8h3j2.immutable("start","end"),tableSelection=$_1928vz18jcq8h3j2.immutable("rng","table","cells"),deleteAction=$_b40jd137jcq8h3us.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),getClosestCell=function(container,isRoot){return $_75pgp31jcq8h3tk.closest($_etvcvfyjcq8h3hp.fromDom(container),"td,th",isRoot)},getClosestTable=function(cell,isRoot){return $_75pgp31jcq8h3tk.ancestor(cell,"table",isRoot)},isExpandedCellRng=function(cellRng){return!1===$_x06e31djcq8h3jh.eq(cellRng.start(),cellRng.end())},getTableFromCellRng=function(cellRng,isRoot){return getClosestTable(cellRng.start(),isRoot).bind(function(startParentTable){return getClosestTable(cellRng.end(),isRoot).bind(function(endParentTable){return $_x06e31djcq8h3jh.eq(startParentTable,endParentTable)?$_doqc1o5jcq8h2xq.some(startParentTable):$_doqc1o5jcq8h2xq.none()})})},getCellRng=function(rng,isRoot){return $_7re31t2djcq8h3qn.liftN([getClosestCell(rng.startContainer,isRoot),getClosestCell(rng.endContainer,isRoot)],tableCellRng).filter(isExpandedCellRng)},getTableSelectionFromCellRng=function(cellRng,isRoot){return getTableFromCellRng(cellRng,isRoot).bind(function(table){var cells=$_7cq9b52kjcq8h3r9.descendants(table,"td,th");return tableSelection(cellRng,table,cells)})},getTableSelectionFromRng=function(rootNode,rng){var isRoot=$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,rootNode);return getCellRng(rng,isRoot).map(function(cellRng){return getTableSelectionFromCellRng(cellRng,isRoot)})},getCellIndex=function(cellArray,cell){return $_de5suq4jcq8h2x0.findIndex(cellArray,function(x){return $_x06e31djcq8h3jh.eq(x,cell)})},getSelectedCells=function(tableSelection){return $_7re31t2djcq8h3qn.liftN([getCellIndex(tableSelection.cells(),tableSelection.rng().start()),getCellIndex(tableSelection.cells(),tableSelection.rng().end())],function(startIndex,endIndex){return tableSelection.cells().slice(startIndex,endIndex+1)})},getAction=function(tableSelection){return getSelectedCells(tableSelection).bind(function(selected){var cells=tableSelection.cells();return selected.length===cells.length?deleteAction.removeTable(tableSelection.table()):deleteAction.emptyCells(selected)})},$_7e2qmh3ojcq8h3xz={getActionFromRange:function(rootNode,rng){return getTableSelectionFromRng(rootNode,rng).map(getAction)},getActionFromCells:function(cells){return deleteAction.emptyCells(cells)}},getRanges=function(selection){var ranges=[];if(selection)for(var i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));return ranges},$_7sn89a3qjcq8h3yc={getRanges:getRanges,getSelectedNodes:function(ranges){return $_de5suq4jcq8h2x0.bind(ranges,function(range){var node=$_1nmjnx23jcq8h3p1.getSelectedNode(range);return node?[$_etvcvfyjcq8h3hp.fromDom(node)]:[]})},hasMultipleRanges:function(selection){return getRanges(selection).length>1}},getCellsFromRanges=function(ranges){return $_de5suq4jcq8h2x0.filter($_7sn89a3qjcq8h3yc.getSelectedNodes(ranges),$_2bhgbq1pjcq8h3ku.isTableCell)},getCellsFromElement=function(elm){return $_7cq9b52kjcq8h3r9.descendants(elm,"td[data-mce-selected],th[data-mce-selected]")},getCellsFromElementOrRanges=function(ranges,element){var selectedCells=getCellsFromElement(element),rangeCells=getCellsFromRanges(ranges);return selectedCells.length>0?selectedCells:rangeCells},$_z2v3r3pjcq8h3y8={getCellsFromRanges:getCellsFromRanges,getCellsFromElement:getCellsFromElement,getCellsFromElementOrRanges:getCellsFromElementOrRanges,getCellsFromEditor:function(editor){return getCellsFromElementOrRanges($_7sn89a3qjcq8h3yc.getRanges(editor.selection.getSel()),$_etvcvfyjcq8h3hp.fromDom(editor.getBody()))}},emptyCells=function(editor,cells){return $_de5suq4jcq8h2x0.each(cells,$_9nudqd2ejcq8h3qq.fillWithPaddingBr),editor.selection.setCursorLocation(cells[0].dom(),0),!0},deleteTableElement=function(editor,table){return $_cdt9q138jcq8h3uw.deleteElement(editor,!1,table),!0},deleteCellRange=function(editor,rootElm,rng){return $_7e2qmh3ojcq8h3xz.getActionFromRange(rootElm,rng).map(function(action){return action.fold($_djct026jcq8h2xw.curry(deleteTableElement,editor),$_djct026jcq8h2xw.curry(emptyCells,editor))})},deleteCaptionRange=function(editor,caption){return emptyElement(editor,caption)},deleteTableRange=function(editor,rootElm,rng,startElm){return getParentCaption(rootElm,startElm).fold(function(){return deleteCellRange(editor,rootElm,rng)},function(caption){return deleteCaptionRange(editor,caption)}).getOr(!1)},deleteRange$1=function(editor,startElm){var rootNode=$_etvcvfyjcq8h3hp.fromDom(editor.getBody()),rng=editor.selection.getRng(),selectedCells=$_z2v3r3pjcq8h3y8.getCellsFromEditor(editor);return 0!==selectedCells.length?emptyCells(editor,selectedCells):deleteTableRange(editor,rootNode,rng,startElm)},getParentCell=function(rootElm,elm){return $_de5suq4jcq8h2x0.find($_5174v33jcq8h3u4.parentsAndSelf(elm,rootElm),$_2bhgbq1pjcq8h3ku.isTableCell)},getParentCaption=function(rootElm,elm){return $_de5suq4jcq8h2x0.find($_5174v33jcq8h3u4.parentsAndSelf(elm,rootElm),function(elm){return"caption"===$_d9btx8zjcq8h3hu.name(elm)})},deleteBetweenCells=function(editor,rootElm,forward,fromCell,from){return $_geef5m2pjcq8h3rp.navigate(forward,editor.getBody(),from).bind(function(to){return getParentCell(rootElm,$_etvcvfyjcq8h3hp.fromDom(to.getNode())).map(function(toCell){return!1===$_x06e31djcq8h3jh.eq(toCell,fromCell)})})},emptyElement=function(editor,elm){return $_9nudqd2ejcq8h3qq.fillWithPaddingBr(elm),editor.selection.setCursorLocation(elm.dom(),0),$_doqc1o5jcq8h2xq.some(!0)},isDeleteOfLastCharPos=function(fromCaption,forward,from,to){return $_geef5m2pjcq8h3rp.firstPositionIn(fromCaption.dom()).bind(function(first){return $_geef5m2pjcq8h3rp.lastPositionIn(fromCaption.dom()).map(function(last){return forward?from.isEqual(first)&&to.isEqual(last):from.isEqual(last)&&to.isEqual(first)})}).getOr(!0)},emptyCaretCaption=function(editor,elm){return emptyElement(editor,elm)},validateCaretCaption=function(rootElm,fromCaption,to){return getParentCaption(rootElm,$_etvcvfyjcq8h3hp.fromDom(to.getNode())).map(function(toCaption){return!1===$_x06e31djcq8h3jh.eq(toCaption,fromCaption)})},deleteCaretInsideCaption=function(editor,rootElm,forward,fromCaption,from){return $_geef5m2pjcq8h3rp.navigate(forward,editor.getBody(),from).bind(function(to){return isDeleteOfLastCharPos(fromCaption,forward,from,to)?emptyCaretCaption(editor,fromCaption):validateCaretCaption(rootElm,fromCaption,to)}).or($_doqc1o5jcq8h2xq.some(!0))},deleteCaretCells=function(editor,forward,rootElm,startElm){var from=CaretPosition.fromRangeStart(editor.selection.getRng());return getParentCell(rootElm,startElm).bind(function(fromCell){return $_1b93z42zjcq8h3te.isEmpty(fromCell)?emptyElement(editor,fromCell):deleteBetweenCells(editor,rootElm,forward,fromCell,from)})},deleteCaretCaption=function(editor,forward,rootElm,fromCaption){var from=CaretPosition.fromRangeStart(editor.selection.getRng());return $_1b93z42zjcq8h3te.isEmpty(fromCaption)?emptyElement(editor,fromCaption):deleteCaretInsideCaption(editor,rootElm,forward,fromCaption,from)},deleteCaret=function(editor,forward,startElm){var rootElm=$_etvcvfyjcq8h3hp.fromDom(editor.getBody());return getParentCaption(rootElm,startElm).fold(function(){return deleteCaretCells(editor,forward,rootElm,startElm)},function(fromCaption){return deleteCaretCaption(editor,forward,rootElm,fromCaption)}).getOr(!1)},$_2e1ncm3njcq8h3xg={backspaceDelete:function(editor,forward){var startElm=$_etvcvfyjcq8h3hp.fromDom(editor.selection.getStart(!0));return editor.selection.isCollapsed()?deleteCaret(editor,forward,startElm):deleteRange$1(editor,startElm)}},nativeCommand=function(editor,command){editor.getDoc().execCommand(command,!1,null)},$_gh0vrg2qjcq8h3rt={deleteCommand:function(editor){$_7vw9e735jcq8h3ug.backspaceDelete(editor,!1)||$_5ebyq839jcq8h3v8.backspaceDelete(editor,!1)||$_1kzdh42rjcq8h3rv.backspaceDelete(editor,!1)||$_2e1ncm3njcq8h3xg.backspaceDelete(editor)||$_5t65x34jcq8h3u8.backspaceDelete(editor,!1)||(nativeCommand(editor,"Delete"),$_f8lxkr2tjcq8h3sf.paddEmptyBody(editor))},forwardDeleteCommand:function(editor){$_7vw9e735jcq8h3ug.backspaceDelete(editor,!0)||$_5ebyq839jcq8h3v8.backspaceDelete(editor,!0)||$_1kzdh42rjcq8h3rv.backspaceDelete(editor,!0)||$_2e1ncm3njcq8h3xg.backspaceDelete(editor)||$_5t65x34jcq8h3u8.backspaceDelete(editor,!0)||nativeCommand(editor,"ForwardDelete")}},$_6zmpij3tjcq8h42i={isEq:function(rng1,rng2){return rng1&&rng2&&rng1.startContainer===rng2.startContainer&&rng1.startOffset===rng2.startOffset&&rng1.endContainer===rng2.endContainer&&rng1.endOffset===rng2.endOffset}},position=$_1928vz18jcq8h3j2.immutable("container","offset"),findParent=function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null},hasParent=function(node,rootNode,predicate){return null!==findParent(node,rootNode,predicate)},hasParentWithName=function(node,rootNode,name){return hasParent(node,rootNode,function(node){return node.nodeName===name})},isTable$1=function(node){return node&&"TABLE"===node.nodeName},isTableCell$1=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},isCeFalseCaretContainer=function(node,rootNode){return $_cyutcs20jcq8h3or.isCaretContainer(node)&&!1===hasParent(node,rootNode,$_24rn4g3ejcq8h3w4.isCaretNode)},hasBrBeforeAfter=function(dom,node,left){for(var walker=new TreeWalker(node,dom.getParent(node.parentNode,dom.isBlock)||dom.getRoot());node=walker[left?"prev":"next"]();)if($_bpl7e51qjcq8h3kz.isBr(node))return!0},isPrevNode=function(node,name){return node.previousSibling&&node.previousSibling.nodeName===name},hasContentEditableFalseParent=function(body,node){for(;node&&node!==body;){if($_bpl7e51qjcq8h3kz.isContentEditableFalse(node))return!0;node=node.parentNode}return!1},findTextNodeRelative=function(dom,isAfterNode,collapsed,left,startNode){var walker,lastInlineElement,parentBlockContainer,node,body=dom.getRoot(),nonEmptyElementsMap=dom.schema.getNonEmptyElements();if(parentBlockContainer=dom.getParent(startNode.parentNode,dom.isBlock)||body,left&&$_bpl7e51qjcq8h3kz.isBr(startNode)&&isAfterNode&&dom.isEmpty(parentBlockContainer))return $_doqc1o5jcq8h2xq.some(position(startNode.parentNode,dom.nodeIndex(startNode)));for(walker=new TreeWalker(startNode,parentBlockContainer);node=walker[left?"prev":"next"]();){if("false"===dom.getContentEditableParent(node)||isCeFalseCaretContainer(node,body))return $_doqc1o5jcq8h2xq.none();if($_bpl7e51qjcq8h3kz.isText(node)&&node.nodeValue.length>0)return!1===hasParentWithName(node,body,"A")?$_doqc1o5jcq8h2xq.some(position(node,left?node.nodeValue.length:0)):$_doqc1o5jcq8h2xq.none();if(dom.isBlock(node)||nonEmptyElementsMap[node.nodeName.toLowerCase()])return $_doqc1o5jcq8h2xq.none();lastInlineElement=node}return collapsed&&lastInlineElement?$_doqc1o5jcq8h2xq.some(position(lastInlineElement,0)):$_doqc1o5jcq8h2xq.none()},normalizeEndPoint=function(dom,collapsed,start,rng){var container,offset,walker,node,nonEmptyElementsMap,directionLeft,isAfterNode,body=dom.getRoot(),normalized=!1;if(container=rng[(start?"start":"end")+"Container"],offset=rng[(start?"start":"end")+"Offset"],isAfterNode=$_bpl7e51qjcq8h3kz.isElement(container)&&offset===container.childNodes.length,nonEmptyElementsMap=dom.schema.getNonEmptyElements(),directionLeft=start,$_cyutcs20jcq8h3or.isCaretContainer(container))return $_doqc1o5jcq8h2xq.none();if($_bpl7e51qjcq8h3kz.isElement(container)&&offset>container.childNodes.length-1&&(directionLeft=!1),$_bpl7e51qjcq8h3kz.isDocument(container)&&(container=body,offset=0),container===body){if(directionLeft&&(node=container.childNodes[offset>0?offset-1:0])){if($_cyutcs20jcq8h3or.isCaretContainer(node))return $_doqc1o5jcq8h2xq.none();if(nonEmptyElementsMap[node.nodeName]||isTable$1(node))return $_doqc1o5jcq8h2xq.none()}if(container.hasChildNodes()){if(offset=Math.min(!directionLeft&&offset>0?offset-1:offset,container.childNodes.length-1),container=container.childNodes[offset],offset=$_bpl7e51qjcq8h3kz.isText(container)&&isAfterNode?container.data.length:0,!collapsed&&container===body.lastChild&&isTable$1(container))return $_doqc1o5jcq8h2xq.none();if(hasContentEditableFalseParent(body,container)||$_cyutcs20jcq8h3or.isCaretContainer(container))return $_doqc1o5jcq8h2xq.none();if(container.hasChildNodes()&&!1===isTable$1(container)){node=container,walker=new TreeWalker(container,body);do{if($_bpl7e51qjcq8h3kz.isContentEditableFalse(node)||$_cyutcs20jcq8h3or.isCaretContainer(node)){normalized=!1;break}if($_bpl7e51qjcq8h3kz.isText(node)&&node.nodeValue.length>0){offset=directionLeft?0:node.nodeValue.length,container=node,normalized=!0;break}if(nonEmptyElementsMap[node.nodeName.toLowerCase()]&&!isTableCell$1(node)){offset=dom.nodeIndex(node),container=node.parentNode,"IMG"!==node.nodeName&&"PRE"!==node.nodeName||directionLeft||offset++,normalized=!0;break}}while(node=directionLeft?walker.next():walker.prev())}}}return collapsed&&($_bpl7e51qjcq8h3kz.isText(container)&&0===offset&&findTextNodeRelative(dom,isAfterNode,collapsed,!0,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),$_bpl7e51qjcq8h3kz.isElement(container)&&((node=container.childNodes[offset])||(node=container.childNodes[offset-1]),!node||!$_bpl7e51qjcq8h3kz.isBr(node)||isPrevNode(node,"A")||hasBrBeforeAfter(dom,node,!1)||hasBrBeforeAfter(dom,node,!0)||findTextNodeRelative(dom,isAfterNode,collapsed,!0,node).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}))),directionLeft&&!collapsed&&$_bpl7e51qjcq8h3kz.isText(container)&&offset===container.nodeValue.length&&findTextNodeRelative(dom,isAfterNode,collapsed,!1,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),normalized?$_doqc1o5jcq8h2xq.some(position(container,offset)):$_doqc1o5jcq8h2xq.none()},$_5auu293sjcq8h429={normalize:function(dom,rng){var collapsed=rng.collapsed,normRng=rng.cloneRange();return normalizeEndPoint(dom,collapsed,!0,normRng).each(function(pos){normRng.setStart(pos.container(),pos.offset())}),collapsed||normalizeEndPoint(dom,collapsed,!1,normRng).each(function(pos){normRng.setEnd(pos.container(),pos.offset())}),collapsed&&normRng.collapse(!0),$_6zmpij3tjcq8h42i.isEq(rng,normRng)?$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.some(normRng)}},hasRightSideContent=function(schema,container,parentBlock){for(var node,walker=new TreeWalker(container,parentBlock),nonEmptyElementsMap=schema.getNonEmptyElements();node=walker.next();)if(nonEmptyElementsMap[node.nodeName.toLowerCase()]||node.length>0)return!0},scrollToBr=function(dom,selection,brElm){var marker=dom.create("span",{},"&nbsp;");brElm.parentNode.insertBefore(marker,brElm),selection.scrollIntoView(marker),dom.remove(marker)},moveSelectionToBr=function(dom,selection,brElm,extraBr){var rng=dom.createRng();extraBr?(rng.setStartBefore(brElm),rng.setEndBefore(brElm)):(rng.setStartAfter(brElm),rng.setEndAfter(brElm)),selection.setRng(rng)},insertBrAtCaret=function(editor,evt){var brElm,extraBr,selection=editor.selection,dom=editor.dom,rng=selection.getRng();$_5auu293sjcq8h429.normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)});var offset=rng.startOffset,container=rng.startContainer;if(1===container.nodeType&&container.hasChildNodes()){var isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&3===container.nodeType?container.nodeValue.length:0}var parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"",isControlKey=evt&&evt.ctrlKey;"LI"!==containerBlockName||isControlKey||(parentBlock=containerBlock),container&&3===container.nodeType&&offset>=container.nodeValue.length&&(hasRightSideContent(editor.schema,container,parentBlock)||(brElm=dom.create("br"),rng.insertNode(brElm),rng.setStartAfter(brElm),rng.setEndAfter(brElm),extraBr=!0)),brElm=dom.create("br"),rng.insertNode(brElm),scrollToBr(dom,selection,brElm),moveSelectionToBr(dom,selection,brElm,extraBr),editor.undoManager.add()},insertBrBefore=function(editor,inline){var br=$_etvcvfyjcq8h3hp.fromTag("br");$_6290j62fjcq8h3qx.before($_etvcvfyjcq8h3hp.fromDom(inline),br),editor.undoManager.add()},insertBrAfter=function(editor,inline){hasBrAfter(editor.getBody(),inline)||$_6290j62fjcq8h3qx.after($_etvcvfyjcq8h3hp.fromDom(inline),$_etvcvfyjcq8h3hp.fromTag("br"));var br=$_etvcvfyjcq8h3hp.fromTag("br");$_6290j62fjcq8h3qx.after($_etvcvfyjcq8h3hp.fromDom(inline),br),scrollToBr(editor.dom,editor.selection,br.dom()),moveSelectionToBr(editor.dom,editor.selection,br.dom(),!1),editor.undoManager.add()},isBeforeBr=function(pos){return $_bpl7e51qjcq8h3kz.isBr(pos.getNode())},hasBrAfter=function(rootNode,startNode){return!!isBeforeBr(CaretPosition.after(startNode))||$_geef5m2pjcq8h3rp.nextPosition(rootNode,CaretPosition.after(startNode)).map(function(pos){return $_bpl7e51qjcq8h3kz.isBr(pos.getNode())}).getOr(!1)},isAnchorLink=function(elm){return elm&&"A"===elm.nodeName&&"href"in elm},isInsideAnchor=function(location){return location.fold($_djct026jcq8h2xw.constant(!1),isAnchorLink,isAnchorLink,$_djct026jcq8h2xw.constant(!1))},readInlineAnchorLocation=function(editor){var isInlineTarget=$_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.isInlineTarget,editor),position=CaretPosition.fromRangeStart(editor.selection.getRng());return $_59o57m3djcq8h3vw.readLocation(isInlineTarget,editor.getBody(),position).filter(isInsideAnchor)},insertBrOutsideAnchor=function(editor,location){location.fold($_djct026jcq8h2xw.noop,$_djct026jcq8h2xw.curry(insertBrBefore,editor),$_djct026jcq8h2xw.curry(insertBrAfter,editor),$_djct026jcq8h2xw.noop)},$_15j2kd3rjcq8h3yg={insert:function(editor,evt){var anchorLocation=readInlineAnchorLocation(editor);anchorLocation.isSome()?anchorLocation.each($_djct026jcq8h2xw.curry(insertBrOutsideAnchor,editor)):insertBrAtCaret(editor,evt)}},adt=$_b40jd137jcq8h3us.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$_61xmkq3wjcq8h42x={before:adt.before,on:adt.on,after:adt.after,cata:function(subject,onBefore,onOn,onAfter){return subject.fold(onBefore,onOn,onAfter)},getStart:function(situ){return situ.fold($_djct026jcq8h2xw.identity,$_djct026jcq8h2xw.identity,$_djct026jcq8h2xw.identity)}},type$1=$_b40jd137jcq8h3us.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),range$1=$_1928vz18jcq8h3j2.immutable("start","soffset","finish","foffset"),getStart=function(selection){return selection.match({domRange:function(rng){return $_etvcvfyjcq8h3hp.fromDom(rng.startContainer)},relative:function(startSitu,finishSitu){return $_61xmkq3wjcq8h42x.getStart(startSitu)},exact:function(start,soffset,finish,foffset){return start}})},$_2u5k703vjcq8h42t={domRange:type$1.domRange,relative:type$1.relative,exact:type$1.exact,exactFromRange:function(simRange){return type$1.exact(simRange.start(),simRange.soffset(),simRange.finish(),simRange.foffset())},range:range$1,getWin:function(selection){var start=getStart(selection);return $_gah0mz17jcq8h3ir.defaultView(start)}},browser$2=$_cfduydmjcq8h3gc.detect().browser,clamp=function(offset,element){var max=$_d9btx8zjcq8h3hu.isText(element)?$_e2sm7y2ijcq8h3r4.get(element).length:$_gah0mz17jcq8h3ir.children(element).length+1;return offset>max?max:offset<0?0:offset},normalizeRng=function(rng){return $_2u5k703vjcq8h42t.range(rng.start(),clamp(rng.soffset(),rng.start()),rng.finish(),clamp(rng.foffset(),rng.finish()))},isOrContains=function(root,elm){return $_x06e31djcq8h3jh.contains(root,elm)||$_x06e31djcq8h3jh.eq(root,elm)},isRngInRoot=function(root){return function(rng){return isOrContains(root,rng.start())&&isOrContains(root,rng.finish())}},shouldStore=function(editor){return!0===editor.inline||browser$2.isIE()},nativeRangeToSelectionRange=function(r){return $_2u5k703vjcq8h42t.range($_etvcvfyjcq8h3hp.fromDom(r.startContainer),r.startOffset,$_etvcvfyjcq8h3hp.fromDom(r.endContainer),r.endOffset)},readRange=function(win){var selection=win.getSelection();return(selection&&0!==selection.rangeCount?$_doqc1o5jcq8h2xq.from(selection.getRangeAt(0)):$_doqc1o5jcq8h2xq.none()).map(nativeRangeToSelectionRange)},getBookmark$2=function(root){var win=$_gah0mz17jcq8h3ir.defaultView(root);return readRange(win.dom()).filter(isRngInRoot(root))},validate=function(root,bookmark){return $_doqc1o5jcq8h2xq.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng)},bookmarkToNativeRng=function(bookmark){var rng=document.createRange();return rng.setStart(bookmark.start().dom(),bookmark.soffset()),rng.setEnd(bookmark.finish().dom(),bookmark.foffset()),$_doqc1o5jcq8h2xq.some(rng)},getRng=function(editor){return(editor.bookmark?editor.bookmark:$_doqc1o5jcq8h2xq.none()).bind($_djct026jcq8h2xw.curry(validate,$_etvcvfyjcq8h3hp.fromDom(editor.getBody()))).bind(bookmarkToNativeRng)},$_booaps3ujcq8h42k={store:function(editor){var newBookmark=shouldStore(editor)?getBookmark$2($_etvcvfyjcq8h3hp.fromDom(editor.getBody())):$_doqc1o5jcq8h2xq.none();editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},storeNative:function(editor,rng){var root=$_etvcvfyjcq8h3hp.fromDom(editor.getBody()),newBookmark=(shouldStore(editor)?$_doqc1o5jcq8h2xq.from(rng):$_doqc1o5jcq8h2xq.none()).map(nativeRangeToSelectionRange).filter(isRngInRoot(root));editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},readRange:readRange,restore:function(editor){getRng(editor).each(function(rng){editor.selection.setRng(rng)})},getRng:getRng,getBookmark:getBookmark$2,validate:validate},each$9=$_topwtjjcq8h3fq.each,extend$3=$_topwtjjcq8h3fq.extend,map$2=$_topwtjjcq8h3fq.map,inArray$2=$_topwtjjcq8h3fq.inArray,explode$2=$_topwtjjcq8h3fq.explode,EditorCommands=function(editor){var dom,selection,formatter,bookmark,commands={state:{},exec:{},value:{}},settings=editor.settings;editor.on("PreInit",function(){dom=editor.dom,selection=editor.selection,settings=editor.settings,formatter=editor.formatter});var queryCommandState=function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.state[command])return func(command);try{return editor.getDoc().queryCommandState(command)}catch(ex){}return!1}},addCommands=function(commandList,type){type=type||"exec",each$9(commandList,function(callback,command){each$9(command.toLowerCase().split(","),function(command){commands[type][command]=callback})})};extend$3(this,{execCommand:function(command,ui,value,args){var func,customCommand,state=!1;if(!editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command)||args&&args.skip_focus?$_booaps3ujcq8h42k.restore(editor):editor.focus(),(args=editor.fire("BeforeExecCommand",{command:command,ui:ui,value:value})).isDefaultPrevented())return!1;if(customCommand=command.toLowerCase(),func=commands.exec[customCommand])return func(customCommand,ui,value),editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;if(each$9(editor.plugins,function(p){if(p.execCommand&&p.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),state=!0,!1}),state)return state;if(editor.theme&&editor.theme.execCommand&&editor.theme.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;try{state=editor.getDoc().execCommand(command,ui,value)}catch(ex){}return!!state&&(editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0)}},queryCommandState:queryCommandState,queryCommandValue:function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.value[command])return func(command);try{return editor.getDoc().queryCommandValue(command)}catch(ex){}}},queryCommandSupported:function(command){if(command=command.toLowerCase(),commands.exec[command])return!0;try{return editor.getDoc().queryCommandSupported(command)}catch(ex){}return!1},addCommands:addCommands,addCommand:function(command,callback,scope){command=command.toLowerCase(),commands.exec[command]=function(command,ui,value,args){return callback.call(scope||editor,ui,value,args)}},addQueryStateHandler:function(command,callback,scope){command=command.toLowerCase(),commands.state[command]=function(){return callback.call(scope||editor)}},addQueryValueHandler:function(command,callback,scope){command=command.toLowerCase(),commands.value[command]=function(){return callback.call(scope||editor)}},hasCustomCommand:function(command){return command=command.toLowerCase(),!!commands.exec[command]}});var execNativeCommand=function(command,ui,value){return void 0===ui&&(ui=!1),void 0===value&&(value=null),editor.getDoc().execCommand(command,ui,value)},isFormatMatch=function(name){return formatter.match(name)},toggleFormat=function(name,value){formatter.toggle(name,value?{value:value}:void 0),editor.nodeChanged()},storeSelection=function(type){bookmark=selection.getBookmark(type)},restoreSelection=function(){selection.moveToBookmark(bookmark)};addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){editor.undoManager.add()},"Cut,Copy,Paste":function(command){var failed,doc=editor.getDoc();try{execNativeCommand(command)}catch(ex){failed=!0}if("paste"!==command||doc.queryCommandEnabled(command)||(failed=!0),failed||!doc.queryCommandSupported(command)){var msg=editor.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");$_1surm29jcq8h31g.mac&&(msg=msg.replace(/Ctrl\+/g,"+")),editor.notificationManager.open({text:msg,type:"error"})}},unlink:function(){if(selection.isCollapsed()){var elm=editor.dom.getParent(editor.selection.getStart(),"a");elm&&editor.dom.remove(elm,!0)}else formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(command){var align=command.substring(7);"full"===align&&(align="justify"),each$9("left,center,right,justify".split(","),function(name){align!==name&&formatter.remove("align"+name)}),"none"!==align&&toggleFormat("align"+align)},"InsertUnorderedList,InsertOrderedList":function(command){var listElm,listParent;execNativeCommand(command),(listElm=dom.getParent(selection.getNode(),"ol,ul"))&&(listParent=listElm.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)&&(storeSelection(),dom.split(listParent,listElm),restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){toggleFormat(command)},"ForeColor,HiliteColor,FontName":function(command,ui,value){toggleFormat(command,value)},FontSize:function(command,ui,value){var fontClasses,fontSizes;value>=1&&value<=7&&(fontSizes=explode$2(settings.font_size_style_values),value=(fontClasses=explode$2(settings.font_size_classes))?fontClasses[value-1]||value:fontSizes[value-1]||value),toggleFormat(command,value)},RemoveFormat:function(command){formatter.remove(command)},mceBlockQuote:function(){toggleFormat("blockquote")},FormatBlock:function(command,ui,value){return toggleFormat(value||"p")},mceCleanup:function(){var bookmark=selection.getBookmark();editor.setContent(editor.getContent({cleanup:!0}),{cleanup:!0}),selection.moveToBookmark(bookmark)},mceRemoveNode:function(command,ui,value){var node=value||selection.getNode();node!==editor.getBody()&&(storeSelection(),editor.dom.remove(node,!0),restoreSelection())},mceSelectNodeDepth:function(command,ui,value){var counter=0;dom.getParent(selection.getNode(),function(node){if(1===node.nodeType&&counter++===value)return selection.select(node),!1},editor.getBody())},mceSelectNode:function(command,ui,value){selection.select(value)},mceInsertContent:function(command,ui,value){$_5fia2a1wjcq8h3nn.insertAtCaret(editor,value)},mceInsertRawHTML:function(command,ui,value){selection.setContent("tiny_mce_marker"),editor.setContent(editor.getContent().replace(/tiny_mce_marker/g,function(){return value}))},mceToggleFormat:function(command,ui,value){toggleFormat(value)},mceSetContent:function(command,ui,value){editor.setContent(value)},"Indent,Outdent":function(command){var intentValue,indentUnit,value;intentValue=settings.indentation,indentUnit=/[a-z%]+$/i.exec(intentValue),intentValue=parseInt(intentValue,10),queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")?execNativeCommand(command):(settings.forced_root_block||dom.getParent(selection.getNode(),dom.isBlock)||formatter.apply("div"),each$9(selection.getSelectedBlocks(),function(element){if("false"!==dom.getContentEditable(element)&&"LI"!==element.nodeName){var indentStyleName=editor.getParam("indent_use_margin",!1)?"margin":"padding";indentStyleName="TABLE"===element.nodeName?"margin":indentStyleName,indentStyleName+="rtl"===dom.getStyle(element,"direction",!0)?"Right":"Left","outdent"===command?(value=Math.max(0,parseInt(element.style[indentStyleName]||0,10)-intentValue),dom.setStyle(element,indentStyleName,value?value+indentUnit:"")):(value=parseInt(element.style[indentStyleName]||0,10)+intentValue+indentUnit,dom.setStyle(element,indentStyleName,value))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){editor.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){editor.hasVisual=!editor.hasVisual,editor.addVisual()},mceReplaceContent:function(command,ui,value){editor.execCommand("mceInsertContent",!1,value.replace(/\{\$selection\}/g,selection.getContent({format:"text"})))},mceInsertLink:function(command,ui,value){var anchor;"string"==typeof value&&(value={href:value}),anchor=dom.getParent(selection.getNode(),"a"),value.href=value.href.replace(" ","%20"),anchor&&value.href||formatter.remove("link"),value.href&&formatter.apply("link",value,anchor)},selectAll:function(){var editingHost=dom.getParent(selection.getStart(),$_bpl7e51qjcq8h3kz.isContentEditableTrue);if(editingHost){var rng=dom.createRng();rng.selectNodeContents(editingHost),selection.setRng(rng)}},delete:function(){$_gh0vrg2qjcq8h3rt.deleteCommand(editor)},forwardDelete:function(){$_gh0vrg2qjcq8h3rt.forwardDeleteCommand(editor)},mceNewDocument:function(){editor.setContent("")},InsertLineBreak:function(command,ui,value){return $_15j2kd3rjcq8h3yg.insert(editor,value),!0}}),addCommands({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(command){var name="align"+command.substring(7),nodes=selection.isCollapsed()?[dom.getParent(selection.getNode(),dom.isBlock)]:selection.getSelectedBlocks(),matches=map$2(nodes,function(node){return!!formatter.matchNode(node,name)});return-1!==inArray$2(matches,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){return isFormatMatch(command)},mceBlockQuote:function(){return isFormatMatch("blockquote")},Outdent:function(){var node;if(settings.inline_styles){if((node=dom.getParent(selection.getStart(),dom.isBlock))&&parseInt(node.style.paddingLeft,10)>0)return!0;if((node=dom.getParent(selection.getEnd(),dom.isBlock))&&parseInt(node.style.paddingLeft,10)>0)return!0}return queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")||!settings.inline_styles&&!!dom.getParent(selection.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(command){var list=dom.getParent(selection.getNode(),"ul,ol");return list&&("insertunorderedlist"===command&&"UL"===list.tagName||"insertorderedlist"===command&&"OL"===list.tagName)}},"state"),addCommands({"FontSize,FontName":function(command){var parent,value=0;return(parent=dom.getParent(selection.getNode(),"span"))&&(value="fontsize"===command?parent.style.fontSize:parent.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),value}},"value"),addCommands({Undo:function(){editor.undoManager.undo()},Redo:function(){editor.undoManager.redo()}})},nativeEvents=$_topwtjjcq8h3fq.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Dispatcher=function(settings){var scope,toggleEvent,self=this,bindings={},returnFalse=function(){return!1},returnTrue=function(){return!0};scope=(settings=settings||{}).scope||self,toggleEvent=settings.toggleEvent||returnFalse;var on=function(name,callback,prepend,extra){var handlers,names,i;if(!1===callback&&(callback=returnFalse),callback)for(callback={func:callback},extra&&$_topwtjjcq8h3fq.extend(callback,extra),i=(names=name.toLowerCase().split(" ")).length;i--;)name=names[i],(handlers=bindings[name])||(handlers=bindings[name]=[],toggleEvent(name,!0)),prepend?handlers.unshift(callback):handlers.push(callback);return self},off=function(name,callback){var i,handlers,bindingName,names,hi;if(name)for(i=(names=name.toLowerCase().split(" ")).length;i--;){if(name=names[i],handlers=bindings[name],!name){for(bindingName in bindings)toggleEvent(bindingName,!1),delete bindings[bindingName];return self}if(handlers){if(callback)for(hi=handlers.length;hi--;)handlers[hi].func===callback&&(handlers=handlers.slice(0,hi).concat(handlers.slice(hi+1)),bindings[name]=handlers);else handlers.length=0;handlers.length||(toggleEvent(name,!1),delete bindings[name])}}else{for(name in bindings)toggleEvent(name,!1);bindings={}}return self};self.fire=function(name,args){var handlers,i,l,callback;if(name=name.toLowerCase(),args=args||{},args.type=name,args.target||(args.target=scope),args.preventDefault||(args.preventDefault=function(){args.isDefaultPrevented=returnTrue},args.stopPropagation=function(){args.isPropagationStopped=returnTrue},args.stopImmediatePropagation=function(){args.isImmediatePropagationStopped=returnTrue},args.isDefaultPrevented=returnFalse,args.isPropagationStopped=returnFalse,args.isImmediatePropagationStopped=returnFalse),settings.beforeFire&&settings.beforeFire(args),handlers=bindings[name])for(i=0,l=handlers.length;i<l;i++){if((callback=handlers[i]).once&&off(name,callback.func),args.isImmediatePropagationStopped())return args.stopPropagation(),args;if(!1===callback.func.call(scope,args))return args.preventDefault(),args}return args},self.on=on,self.off=off,self.once=function(name,callback,prepend){return on(name,callback,prepend,{once:!0})},self.has=function(name){return name=name.toLowerCase(),!(!bindings[name]||0===bindings[name].length)}};Dispatcher.isNative=function(name){return!!nativeEvents[name.toLowerCase()]};var customEventRootDelegates,getEventDispatcher=function(obj){return obj._eventDispatcher||(obj._eventDispatcher=new Dispatcher({scope:obj,toggleEvent:function(name,state){Dispatcher.isNative(name)&&obj.toggleNativeEvent&&obj.toggleNativeEvent(name,state)}})),obj._eventDispatcher},$_f07ote3yjcq8h436={fire:function(name,args,bubble){var self=this;if(self.removed&&"remove"!==name)return args;if(args=getEventDispatcher(self).fire(name,args,bubble),!1!==bubble&&self.parent)for(var parent_1=self.parent();parent_1&&!args.isPropagationStopped();)parent_1.fire(name,args,!1),parent_1=parent_1.parent();return args},on:function(name,callback,prepend){return getEventDispatcher(this).on(name,callback,prepend)},off:function(name,callback){return getEventDispatcher(this).off(name,callback)},once:function(name,callback){return getEventDispatcher(this).once(name,callback)},hasEventListeners:function(name){return getEventDispatcher(this).has(name)}},DOM$2=DOMUtils.DOM,getEventTarget=function(editor,eventName){return"selectionchange"===eventName?editor.getDoc():!editor.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)?editor.getDoc().documentElement:editor.settings.event_root?(editor.eventRoot||(editor.eventRoot=DOM$2.select(editor.settings.event_root)[0]),editor.eventRoot):editor.getBody()},bindEventDelegate=function(editor,eventName){var eventRootElm,delegate,isListening=function(editor){return!editor.hidden&&!editor.readonly};if(editor.delegates||(editor.delegates={}),!editor.delegates[eventName]&&!editor.removed)if(eventRootElm=getEventTarget(editor,eventName),editor.settings.event_root){if(customEventRootDelegates||(customEventRootDelegates={},editor.editorManager.on("removeEditor",function(){var name;if(!editor.editorManager.activeEditor&&customEventRootDelegates){for(name in customEventRootDelegates)editor.dom.unbind(getEventTarget(editor,name));customEventRootDelegates=null}})),customEventRootDelegates[eventName])return;delegate=function(e){for(var target=e.target,editors=editor.editorManager.get(),i=editors.length;i--;){var body=editors[i].getBody();(body===target||DOM$2.isChildOf(target,body))&&isListening(editors[i])&&editors[i].fire(eventName,e)}},customEventRootDelegates[eventName]=delegate,DOM$2.bind(eventRootElm,eventName,delegate)}else delegate=function(e){isListening(editor)&&editor.fire(eventName,e)},DOM$2.bind(eventRootElm,eventName,delegate),editor.delegates[eventName]=delegate},EditorObservable={bindPendingEventDelegates:function(){var self=this;$_topwtjjcq8h3fq.each(self._pendingNativeEvents,function(name){bindEventDelegate(self,name)})},toggleNativeEvent:function(name,state){var self=this;"focus"!==name&&"blur"!==name&&(state?self.initialized?bindEventDelegate(self,name):self._pendingNativeEvents?self._pendingNativeEvents.push(name):self._pendingNativeEvents=[name]:self.initialized&&(self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]),delete self.delegates[name]))},unbindAllNativeEvents:function(){var name,self=this;if(self.delegates){for(name in self.delegates)self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]);delete self.delegates}self.inline||(self.getBody().onload=null,self.dom.unbind(self.getWin()),self.dom.unbind(self.getDoc())),self.dom.unbind(self.getBody()),self.dom.unbind(self.getContainer())}},EditorObservable$1=EditorObservable=$_topwtjjcq8h3fq.extend({},$_f07ote3yjcq8h436,EditorObservable),setEditorCommandState=function(editor,cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},clickBlocker=function(editor){var target,handler;return target=editor.getBody(),handler=function(e){editor.dom.getParents(e.target,"a").length>0&&e.preventDefault()},editor.dom.bind(target,"click",handler),{unbind:function(){editor.dom.unbind(target,"click",handler)}}},toggleReadOnly=function(editor,state){editor._clickBlocker&&(editor._clickBlocker.unbind(),editor._clickBlocker=null),state?(editor._clickBlocker=clickBlocker(editor),editor.selection.controlSelection.hideResizeRect(),editor.readonly=!0,editor.getBody().contentEditable=!1):(editor.readonly=!1,editor.getBody().contentEditable=!0,setEditorCommandState(editor,"StyleWithCSS",!1),setEditorCommandState(editor,"enableInlineTableEditing",!1),setEditorCommandState(editor,"enableObjectResizing",!1),editor.focus(),editor.nodeChanged())},$_dea5kl40jcq8h43e={setMode:function(editor,mode){var currentMode=editor.readonly?"readonly":"design";mode!==currentMode&&(editor.initialized?toggleReadOnly(editor,"readonly"===mode):editor.on("init",function(){toggleReadOnly(editor,"readonly"===mode)}),editor.fire("SwitchMode",{mode:mode}))}},each$11=$_topwtjjcq8h3fq.each,explode$3=$_topwtjjcq8h3fq.explode,keyCodeLookup={f9:120,f10:121,f11:122},modifierNames=$_topwtjjcq8h3fq.makeMap("alt,ctrl,shift,meta,access"),Shortcuts=function(editor){var self=this,shortcuts={},pendingPatterns=[],parseShortcut=function(pattern){var id,key,shortcut={};each$11(explode$3(pattern,"+"),function(value){value in modifierNames?shortcut[value]=!0:/^[0-9]{2,}$/.test(value)?shortcut.keyCode=parseInt(value,10):(shortcut.charCode=value.charCodeAt(0),shortcut.keyCode=keyCodeLookup[value]||value.toUpperCase().charCodeAt(0))}),id=[shortcut.keyCode];for(key in modifierNames)shortcut[key]?id.push(key):shortcut[key]=!1;return shortcut.id=id.join(","),shortcut.access&&(shortcut.alt=!0,$_1surm29jcq8h31g.mac?shortcut.ctrl=!0:shortcut.shift=!0),shortcut.meta&&($_1surm29jcq8h31g.mac?shortcut.meta=!0:(shortcut.ctrl=!0,shortcut.meta=!1)),shortcut},createShortcut=function(pattern,desc,cmdFunc,scope){var shortcuts;return shortcuts=$_topwtjjcq8h3fq.map(explode$3(pattern,">"),parseShortcut),shortcuts[shortcuts.length-1]=$_topwtjjcq8h3fq.extend(shortcuts[shortcuts.length-1],{func:cmdFunc,scope:scope||editor}),$_topwtjjcq8h3fq.extend(shortcuts[0],{desc:editor.translate(desc),subpatterns:shortcuts.slice(1)})},hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},isFunctionKey=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},matchShortcut=function(e,shortcut){return!!shortcut&&(shortcut.ctrl===e.ctrlKey&&shortcut.meta===e.metaKey&&(shortcut.alt===e.altKey&&shortcut.shift===e.shiftKey&&(!!(e.keyCode===shortcut.keyCode||e.charCode&&e.charCode===shortcut.charCode)&&(e.preventDefault(),!0))))},executeShortcutAction=function(shortcut){return shortcut.func?shortcut.func.call(shortcut.scope):null};editor.on("keyup keypress keydown",function(e){!hasModifier(e)&&!isFunctionKey(e)||e.isDefaultPrevented()||(each$11(shortcuts,function(shortcut){if(matchShortcut(e,shortcut))return pendingPatterns=shortcut.subpatterns.slice(0),"keydown"===e.type&&executeShortcutAction(shortcut),!0}),matchShortcut(e,pendingPatterns[0])&&(1===pendingPatterns.length&&"keydown"===e.type&&executeShortcutAction(pendingPatterns[0]),pendingPatterns.shift()))}),self.add=function(pattern,desc,cmdFunc,scope){var cmd;return cmd=cmdFunc,"string"==typeof cmdFunc?cmdFunc=function(){editor.execCommand(cmd,!1,null)}:$_topwtjjcq8h3fq.isArray(cmd)&&(cmdFunc=function(){editor.execCommand(cmd[0],cmd[1],cmd[2])}),each$11(explode$3($_topwtjjcq8h3fq.trim(pattern.toLowerCase())),function(pattern){var shortcut=createShortcut(pattern,desc,cmdFunc,scope);shortcuts[shortcut.id]=shortcut}),!0},self.remove=function(pattern){var shortcut=createShortcut(pattern);return!!shortcuts[shortcut.id]&&(delete shortcuts[shortcut.id],!0)}},each$12=$_topwtjjcq8h3fq.each,isValidPrefixAttrName=function(name){return 0===name.indexOf("data-")||0===name.indexOf("aria-")},trimComments=function(text){return text.replace(/<!--|-->/g,"")},findEndTag=function(schema,html,startIndex){var index,matches,tokenRegExp,shortEndedElements,count=1;for(shortEndedElements=schema.getShortEndedElements(),(tokenRegExp=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=index=startIndex;matches=tokenRegExp.exec(html);){if(index=tokenRegExp.lastIndex,"/"===matches[1])count--;else if(!matches[1]){if(matches[2]in shortEndedElements)continue;count++}if(0===count)break}return index},SaxParser=function(settings,schema){var self=this,noop=function(){};settings=settings||{},self.schema=schema=schema||Schema(),!1!==settings.fix_self_closing&&(settings.fix_self_closing=!0),each$12("comment cdata text start end pi doctype".split(" "),function(name){name&&(self[name]=settings[name]||noop)}),self.parse=function(html){var matches,value,endRegExp,attrList,i,text,name,isInternalElement,removeInternalElements,shortEndedElements,fillAttrsMap,isShortEnded,validate,elementRule,isValidElement,attr,attribsValue,validAttributesMap,validAttributePatterns,attributesRequired,attributesDefault,attributesForced,processHtml,selfClosing,tokenRegExp,attrRegExp,specialElements,attrValue,fixSelfClosing,self=this,index=0,stack=[],idCount=0,decode=Entities.decode,filteredUrlAttrs=$_topwtjjcq8h3fq.makeMap("src,href,data,background,formaction,poster"),scriptUriRegExp=/((java|vb)script|mhtml):/i,dataUriRegExp=/^data:/i,processEndTag=function(name){var pos,i;for(pos=stack.length;pos--&&stack[pos].name!==name;);if(pos>=0){for(i=stack.length-1;i>=pos;i--)(name=stack[i]).valid&&self.end(name.name);stack.length=pos}};for(tokenRegExp=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),attrRegExp=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,shortEndedElements=schema.getShortEndedElements(),selfClosing=settings.self_closing_elements||schema.getSelfClosingElements(),fillAttrsMap=schema.getBoolAttrs(),validate=settings.validate,removeInternalElements=settings.remove_internals,fixSelfClosing=settings.fix_self_closing,specialElements=schema.getSpecialElements(),processHtml=html+">";matches=tokenRegExp.exec(processHtml);){if(index<matches.index&&self.text(decode(html.substr(index,matches.index-index))),value=matches[6])":"===(value=value.toLowerCase()).charAt(0)&&(value=value.substr(1)),processEndTag(value);else if(value=matches[7]){if(matches.index+matches[0].length>html.length){self.text(decode(html.substr(matches.index))),index=matches.index+matches[0].length;continue}if(":"===(value=value.toLowerCase()).charAt(0)&&(value=value.substr(1)),isShortEnded=value in shortEndedElements,fixSelfClosing&&selfClosing[value]&&stack.length>0&&stack[stack.length-1].name===value&&processEndTag(value),!validate||(elementRule=schema.getElementRule(value))){if(isValidElement=!0,validate&&(validAttributesMap=elementRule.attributes,validAttributePatterns=elementRule.attributePatterns),(attribsValue=matches[8])?((isInternalElement=-1!==attribsValue.indexOf("data-mce-type"))&&removeInternalElements&&(isValidElement=!1),(attrList=[]).map={},attribsValue.replace(attrRegExp,function(match,name,value,val2,val3){var attrRule,i,trimRegExp=/[\s\u0000-\u001F]+/g;if(name=name.toLowerCase(),value=name in fillAttrsMap?name:decode(value||val2||val3||""),validate&&!isInternalElement&&!1===isValidPrefixAttrName(name)){if(!(attrRule=validAttributesMap[name])&&validAttributePatterns){for(i=validAttributePatterns.length;i--&&!(attrRule=validAttributePatterns[i]).pattern.test(name););-1===i&&(attrRule=null)}if(!attrRule)return;if(attrRule.validValues&&!(value in attrRule.validValues))return}if(filteredUrlAttrs[name]&&!settings.allow_script_urls){var uri=value.replace(trimRegExp,"");try{uri=decodeURIComponent(uri)}catch(ex){uri=unescape(uri)}if(scriptUriRegExp.test(uri))return;if(!settings.allow_html_data_urls&&dataUriRegExp.test(uri)&&!/^data:image\//i.test(uri))return}isInternalElement&&(name in filteredUrlAttrs||0===name.indexOf("on"))||(attrList.map[name]=value,attrList.push({name:name,value:value}))})):(attrList=[]).map={},validate&&!isInternalElement){if(attributesRequired=elementRule.attributesRequired,attributesDefault=elementRule.attributesDefault,attributesForced=elementRule.attributesForced,elementRule.removeEmptyAttrs&&!attrList.length&&(isValidElement=!1),attributesForced)for(i=attributesForced.length;i--;)name=(attr=attributesForced[i]).name,"{$uid}"===(attrValue=attr.value)&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue});if(attributesDefault)for(i=attributesDefault.length;i--;)(name=(attr=attributesDefault[i]).name)in attrList.map||("{$uid}"===(attrValue=attr.value)&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue}));if(attributesRequired){for(i=attributesRequired.length;i--&&!(attributesRequired[i]in attrList.map););-1===i&&(isValidElement=!1)}if(attr=attrList.map["data-mce-bogus"]){if("all"===attr){index=findEndTag(schema,html,tokenRegExp.lastIndex),tokenRegExp.lastIndex=index;continue}isValidElement=!1}}isValidElement&&self.start(value,attrList,isShortEnded)}else isValidElement=!1;if(endRegExp=specialElements[value]){endRegExp.lastIndex=index=matches.index+matches[0].length,(matches=endRegExp.exec(html))?(isValidElement&&(text=html.substr(index,matches.index-index)),index=matches.index+matches[0].length):(text=html.substr(index),index=html.length),isValidElement&&(text.length>0&&self.text(text,!0),self.end(value)),tokenRegExp.lastIndex=index;continue}isShortEnded||(attribsValue&&attribsValue.indexOf("/")===attribsValue.length-1?isValidElement&&self.end(value):stack.push({name:value,valid:isValidElement}))}else(value=matches[1])?(">"===value.charAt(0)&&(value=" "+value),settings.allow_conditional_comments||"[if"!==value.substr(0,3).toLowerCase()||(value=" "+value),self.comment(value)):(value=matches[2])?self.cdata(trimComments(value)):(value=matches[3])?self.doctype(value):(value=matches[4])&&self.pi(value,matches[5]);index=matches.index+matches[0].length}for(index<html.length&&self.text(decode(html.substr(index))),i=stack.length-1;i>=0;i--)(value=stack[i]).valid&&self.end(value.name)}};SaxParser.findEndTag=findEndTag;var trimHtml=function(tempAttrs,html){var trimContentRegExp=new RegExp(["\\s?("+tempAttrs.join("|")+')="[^"]+"'].join("|"),"gi");return html.replace(trimContentRegExp,"")},trimInternal=function(serializer,html){var endTagIndex,index,matchLength,matches,shortEndedElements,content=html,bogusAllRegExp=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,schema=serializer.schema;for(content=trimHtml(serializer.getTempAttrs(),content),shortEndedElements=schema.getShortEndedElements();matches=bogusAllRegExp.exec(content);)index=bogusAllRegExp.lastIndex,matchLength=matches[0].length,endTagIndex=shortEndedElements[matches[1]]?index:SaxParser.findEndTag(schema,content,index),content=content.substring(0,index-matchLength)+content.substring(endTagIndex),bogusAllRegExp.lastIndex=index-matchLength;return content},$_71pfug42jcq8h43l={trimExternal:function(serializer,html){return $_fz4vwq21jcq8h3ow.trim(trimInternal(serializer,html))},trimInternal:trimInternal},$_fjoo4346jcq8h44f={any:function(predicate){return $_26j8552ujcq8h3sl.first(predicate).isSome()},ancestor:function(scope,predicate,isRoot){return $_26j8552ujcq8h3sl.ancestor(scope,predicate,isRoot).isSome()},closest:function(scope,predicate,isRoot){return $_26j8552ujcq8h3sl.closest(scope,predicate,isRoot).isSome()},sibling:function(scope,predicate){return $_26j8552ujcq8h3sl.sibling(scope,predicate).isSome()},child:function(scope,predicate){return $_26j8552ujcq8h3sl.child(scope,predicate).isSome()},descendant:function(scope,predicate){return $_26j8552ujcq8h3sl.descendant(scope,predicate).isSome()}},focus$1=function(element){element.dom().focus()},active=function(_doc){var doc=void 0!==_doc?_doc.dom():document;return $_doqc1o5jcq8h2xq.from(doc.activeElement).map($_etvcvfyjcq8h3hp.fromDom)},$_db7qtp45jcq8h44a={hasFocus:function(element){var doc=$_gah0mz17jcq8h3ir.owner(element).dom();return element.dom()===doc.activeElement},focus:focus$1,blur:function(element){element.dom().blur()},active:active,search:function(element){return active($_gah0mz17jcq8h3ir.owner(element)).filter(function(e){return element.dom().contains(e.dom())})},focusInside:function(element){var doc=$_gah0mz17jcq8h3ir.owner(element);active(doc).filter(function(a){return $_fjoo4346jcq8h44f.closest(a,$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,element))}).fold(function(){focus$1(element)},$_djct026jcq8h2xw.noop)}},getContentEditableHost=function(editor,node){return editor.dom.getParent(node,function(node){return"true"===editor.dom.getContentEditable(node)})},getCollapsedNode=function(rng){return rng.collapsed?$_doqc1o5jcq8h2xq.from($_1nmjnx23jcq8h3p1.getNode(rng.startContainer,rng.startOffset)).map($_etvcvfyjcq8h3hp.fromDom):$_doqc1o5jcq8h2xq.none()},getFocusInElement=function(root,rng){return getCollapsedNode(rng).bind(function(node){return $_2bhgbq1pjcq8h3ku.isTableSection(node)?$_doqc1o5jcq8h2xq.some(node):!1===$_x06e31djcq8h3jh.contains(root,node)?$_doqc1o5jcq8h2xq.some(root):$_doqc1o5jcq8h2xq.none()})},normalizeSelection=function(editor,rng){getFocusInElement($_etvcvfyjcq8h3hp.fromDom(editor.getBody()),rng).bind(function(elm){return $_geef5m2pjcq8h3rp.firstPositionIn(elm.dom())}).fold(function(){editor.selection.normalize()},function(caretPos){editor.selection.setRng(caretPos.toRange())})},focusBody=function(body){if(body.setActive)try{body.setActive()}catch(ex){body.focus()}else body.focus()},hasElementFocus=function(elm){return $_db7qtp45jcq8h44a.hasFocus(elm)||$_db7qtp45jcq8h44a.search(elm).isSome()},hasIframeFocus=function(editor){return editor.iframeElement&&$_db7qtp45jcq8h44a.hasFocus($_etvcvfyjcq8h3hp.fromDom(editor.iframeElement))},hasInlineFocus=function(editor){var rawBody=editor.getBody();return rawBody&&hasElementFocus($_etvcvfyjcq8h3hp.fromDom(rawBody))},hasFocus=function(editor){return editor.inline?hasInlineFocus(editor):hasIframeFocus(editor)},focusEditor=function(editor){var contentEditableHost,selection=editor.selection,contentEditable=editor.settings.content_editable,body=editor.getBody(),rng=selection.getRng();if(editor.quirks.refreshContentEditable(),contentEditableHost=getContentEditableHost(editor,selection.getNode()),editor.$.contains(body,contentEditableHost))return focusBody(contentEditableHost),normalizeSelection(editor,rng),void activateEditor(editor);void 0!==editor.bookmark&&!1===hasFocus(editor)&&$_booaps3ujcq8h42k.getRng(editor).each(function(bookmarkRng){editor.selection.setRng(bookmarkRng),rng=bookmarkRng}),contentEditable||($_1surm29jcq8h31g.opera||focusBody(body),editor.getWin().focus()),($_1surm29jcq8h31g.gecko||contentEditable)&&(focusBody(body),normalizeSelection(editor,rng)),activateEditor(editor)},activateEditor=function(editor){editor.editorManager.setActive(editor)},$_akpbtf44jcq8h43x={focus:function(editor,skipFocus){editor.removed||(skipFocus?activateEditor(editor):focusEditor(editor))},hasFocus:hasFocus},getProp=function(propName,elm){return elm.dom()[propName]},getComputedSizeProp=function(propName,elm){return parseInt($_a83gpl11jcq8h3hy.get(elm,propName),10)},getClientWidth=$_djct026jcq8h2xw.curry(getProp,"clientWidth"),getClientHeight=$_djct026jcq8h2xw.curry(getProp,"clientHeight"),getMarginTop=$_djct026jcq8h2xw.curry(getComputedSizeProp,"margin-top"),getMarginLeft=$_djct026jcq8h2xw.curry(getComputedSizeProp,"margin-left"),getBoundingClientRect=function(elm){return elm.dom().getBoundingClientRect()},isInsideElementContentArea=function(bodyElm,clientX,clientY){var clientWidth=getClientWidth(bodyElm),clientHeight=getClientHeight(bodyElm);return clientX>=0&&clientY>=0&&clientX<=clientWidth&&clientY<=clientHeight},transpose=function(inline,elm,clientX,clientY){var clientRect=getBoundingClientRect(elm);return{x:clientX-(inline?clientRect.left+elm.dom().clientLeft+getMarginLeft(elm):0),y:clientY-(inline?clientRect.top+elm.dom().clientTop+getMarginTop(elm):0)}},fromDomSafe=function(node){return $_doqc1o5jcq8h2xq.from(node).map($_etvcvfyjcq8h3hp.fromDom)},$_dm7vj649jcq8h44t={isXYInContentArea:function(editor,clientX,clientY){var bodyElm=$_etvcvfyjcq8h3hp.fromDom(editor.getBody()),targetElm=editor.inline?bodyElm:$_gah0mz17jcq8h3ir.documentElement(bodyElm),transposedPoint=transpose(editor.inline,targetElm,clientX,clientY);return isInsideElementContentArea(targetElm,transposedPoint.x,transposedPoint.y)},isEditorAttachedToDom:function(editor){var rawContainer=editor.inline?editor.getBody():editor.getContentAreaContainer();return fromDomSafe(rawContainer).map(function(container){return $_x06e31djcq8h3jh.contains($_gah0mz17jcq8h3ir.owner(container),container)}).getOr(!1)}},NotificationManagerImpl=function(){var unimplemented=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:unimplemented,close:unimplemented,reposition:unimplemented,getArgs:unimplemented}},NotificationManager=function(editor){var notifications=[],getImplementation=function(){var theme=editor.theme;return theme&&theme.getNotificationManagerImpl?theme.getNotificationManagerImpl():NotificationManagerImpl()},getTopNotification=function(){return $_doqc1o5jcq8h2xq.from(notifications[0])},isEqual=function(a,b){return!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout)},reposition=function(){notifications.length>0&&getImplementation().reposition(notifications)},addNotification=function(notification){notifications.push(notification)},closeNotification=function(notification){$_de5suq4jcq8h2x0.findIndex(notifications,function(otherNotification){return otherNotification===notification}).each(function(index){notifications.splice(index,1)})},open=function(args){if(!editor.removed&&$_dm7vj649jcq8h44t.isEditorAttachedToDom(editor))return $_de5suq4jcq8h2x0.find(notifications,function(notification){return isEqual(getImplementation().getArgs(notification),args)}).getOrThunk(function(){editor.editorManager.setActive(editor);var notification=getImplementation().open(args,function(){closeNotification(notification),reposition()});return addNotification(notification),reposition(),notification})};return function(editor){editor.on("SkinLoaded",function(){var serviceMessage=editor.settings.service_message;serviceMessage&&open({text:serviceMessage,type:"warning",timeout:0,icon:""})}),editor.on("ResizeEditor ResizeWindow",function(){$_51uzcpgjcq8h3db.requestAnimationFrame(reposition)}),editor.on("remove",function(){$_de5suq4jcq8h2x0.each(notifications,function(notification){getImplementation().close(notification)})})}(editor),{open:open,close:function(){getTopNotification().each(function(notification){getImplementation().close(notification),closeNotification(notification),reposition()})},getNotifications:function(){return notifications}}},WindowManagerImpl=function(){var unimplemented=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:unimplemented,alert:unimplemented,confirm:unimplemented,close:unimplemented,getParams:unimplemented,setParams:unimplemented}},WindowManager=function(editor){var windows=[],getImplementation=function(){var theme=editor.theme;return theme&&theme.getWindowManagerImpl?theme.getWindowManagerImpl():WindowManagerImpl()},funcBind=function(scope,f){return function(){return f?f.apply(scope,arguments):void 0}},fireOpenEvent=function(win){editor.fire("OpenWindow",{win:win})},fireCloseEvent=function(win){editor.fire("CloseWindow",{win:win})},addWindow=function(win){windows.push(win),fireOpenEvent(win)},closeWindow=function(win){$_de5suq4jcq8h2x0.findIndex(windows,function(otherWindow){return otherWindow===win}).each(function(index){windows.splice(index,1),fireCloseEvent(win),0===windows.length&&editor.focus()})},getTopWindow=function(){return $_doqc1o5jcq8h2xq.from(windows[windows.length-1])};return editor.on("remove",function(){$_de5suq4jcq8h2x0.each(windows.slice(0),function(win){getImplementation().close(win)})}),{windows:windows,open:function(args,params){editor.editorManager.setActive(editor),$_booaps3ujcq8h42k.store(editor);var win=getImplementation().open(args,params,closeWindow);return addWindow(win),win},alert:function(message,callback,scope){var win=getImplementation().alert(message,funcBind(scope||this,callback),closeWindow);addWindow(win)},confirm:function(message,callback,scope){var win=getImplementation().confirm(message,funcBind(scope||this,callback),closeWindow);addWindow(win)},close:function(){getTopWindow().each(function(win){getImplementation().close(win),closeWindow(win)})},getParams:function(){return getTopWindow().map(getImplementation().getParams).getOr(null)},setParams:function(params){getTopWindow().each(function(win){getImplementation().setParams(win,params)})},getWindows:function(){return windows}}},PluginManager=AddOnManager.PluginManager,resolvePluginName=function(targetUrl,suffix){for(var name_1 in PluginManager.urls)if(PluginManager.urls[name_1]+"/plugin"+suffix+".js"===targetUrl)return name_1;return null},pluginUrlToMessage=function(editor,url){var plugin=resolvePluginName(url,editor.suffix);return plugin?"Failed to load plugin: "+plugin+" from url "+url:"Failed to load plugin url: "+url},displayNotification=function(editor,message){editor.notificationManager.open({type:"error",text:message})},displayError=function(editor,message){editor._skinLoaded?displayNotification(editor,message):editor.on("SkinLoaded",function(){displayNotification(editor,message)})},$_2xdw0u4djcq8h456={pluginLoadError:function(editor,url){displayError(editor,pluginUrlToMessage(editor,url))},uploadError:function(editor,message){displayError(editor,"Failed to upload image: "+message)},displayError:displayError,initError:function(message){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var console=window.console;console&&(console.error?console.error.apply(console,arguments):console.log.apply(console,arguments))}},PluginManager$1=AddOnManager.PluginManager,ThemeManager=AddOnManager.ThemeManager,XMLHttpRequest=function(){return new($_d2wzeabjcq8h32x.getOrDie("XMLHttpRequest"))},Uploader=function(uploadStatus,settings){var pendingPromises={},pathJoin=function(path1,path2){return path1?path1.replace(/\/$/,"")+"/"+path2.replace(/^\//,""):path2},defaultHandler=function(blobInfo,success,failure,progress){var xhr,formData;(xhr=new XMLHttpRequest).open("POST",settings.url),xhr.withCredentials=settings.credentials,xhr.upload.onprogress=function(e){progress(e.loaded/e.total*100)},xhr.onerror=function(){failure("Image upload failed due to a XHR Transport error. Code: "+xhr.status)},xhr.onload=function(){var json;xhr.status<200||xhr.status>=300?failure("HTTP Error: "+xhr.status):(json=JSON.parse(xhr.responseText))&&"string"==typeof json.location?success(pathJoin(settings.basePath,json.location)):failure("Invalid JSON: "+xhr.responseText)},(formData=new FormData).append("file",blobInfo.blob(),blobInfo.filename()),xhr.send(formData)},noUpload=function(){return new promiseObj(function(resolve){resolve([])})},handlerSuccess=function(blobInfo,url){return{url:url,blobInfo:blobInfo,status:!0}},handlerFailure=function(blobInfo,error){return{url:"",blobInfo:blobInfo,status:!1,error:error}},resolvePending=function(blobUri,result){$_topwtjjcq8h3fq.each(pendingPromises[blobUri],function(resolve){resolve(result)}),delete pendingPromises[blobUri]},uploadBlobInfo=function(blobInfo,handler,openNotification){return uploadStatus.markPending(blobInfo.blobUri()),new promiseObj(function(resolve){var notification,progress,noop=function(){};try{var closeNotification_1=function(){notification&&(notification.close(),progress=noop)};handler(blobInfo,function(url){closeNotification_1(),uploadStatus.markUploaded(blobInfo.blobUri(),url),resolvePending(blobInfo.blobUri(),handlerSuccess(blobInfo,url)),resolve(handlerSuccess(blobInfo,url))},function(error){closeNotification_1(),uploadStatus.removeFailed(blobInfo.blobUri()),resolvePending(blobInfo.blobUri(),handlerFailure(blobInfo,error)),resolve(handlerFailure(blobInfo,error))},progress=function(percent){percent<0||percent>100||(notification||(notification=openNotification()),notification.progressBar.value(percent))})}catch(ex){resolve(handlerFailure(blobInfo,ex.message))}})},isDefaultHandler=function(handler){return handler===defaultHandler},pendingUploadBlobInfo=function(blobInfo){var blobUri=blobInfo.blobUri();return new promiseObj(function(resolve){pendingPromises[blobUri]=pendingPromises[blobUri]||[],pendingPromises[blobUri].push(resolve)})},uploadBlobs=function(blobInfos,openNotification){return blobInfos=$_topwtjjcq8h3fq.grep(blobInfos,function(blobInfo){return!uploadStatus.isUploaded(blobInfo.blobUri())}),promiseObj.all($_topwtjjcq8h3fq.map(blobInfos,function(blobInfo){return uploadStatus.isPending(blobInfo.blobUri())?pendingUploadBlobInfo(blobInfo):uploadBlobInfo(blobInfo,settings.handler,openNotification)}))};return settings=$_topwtjjcq8h3fq.extend({credentials:!1,handler:defaultHandler},settings),{upload:function(blobInfos,openNotification){return!settings.url&&isDefaultHandler(settings.handler)?noUpload():uploadBlobs(blobInfos,openNotification)}}},Blob=function(parts,properties){return new($_d2wzeabjcq8h32x.getOrDie("Blob"))(parts,properties)},FileReader=function(){return new($_d2wzeabjcq8h32x.getOrDie("FileReader"))},Uint8Array=function(arr){return new($_d2wzeabjcq8h32x.getOrDie("Uint8Array"))(arr)},$_3dkaes4qjcq8h46p={atob:function(base64){return $_d2wzeabjcq8h32x.getOrDie("atob")(base64)},requestAnimationFrame:function(callback){$_d2wzeabjcq8h32x.getOrDie("requestAnimationFrame")(callback)}},blobUriToBlob=function(url){return new promiseObj(function(resolve,reject){var rejectWithError=function(){reject("Cannot convert "+url+" to Blob. Resource might not exist or is inaccessible.")};try{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="blob",xhr.onload=function(){200===this.status?resolve(this.response):rejectWithError()},xhr.onerror=rejectWithError,xhr.send()}catch(ex){rejectWithError()}})},parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),(matches=/data:([^;]+)/.exec(uri[0]))&&(type=matches[1]),{type:type,data:uri[1]}},dataUriToBlob=function(uri){return new promiseObj(function(resolve){var str,arr,i;uri=parseDataUri(uri);try{str=$_3dkaes4qjcq8h46p.atob(uri.data)}catch(e){return void resolve(new Blob([]))}for(arr=new Uint8Array(str.length),i=0;i<arr.length;i++)arr[i]=str.charCodeAt(i);resolve(new Blob([arr],{type:uri.type}))})},$_5mct314mjcq8h46h={uriToBlob:function(url){return 0===url.indexOf("blob:")?blobUriToBlob(url):0===url.indexOf("data:")?dataUriToBlob(url):null},blobToDataUri:function(blob){return new promiseObj(function(resolve){var reader=new FileReader;reader.onloadend=function(){resolve(reader.result)},reader.readAsDataURL(blob)})},parseDataUri:parseDataUri},count=0,uniqueId=function(prefix){return(prefix||"blobid")+count++},imageToBlobInfo=function(blobCache,img,resolve,reject){var base64,blobInfo;0!==img.src.indexOf("blob:")?(base64=$_5mct314mjcq8h46h.parseDataUri(img.src).data,(blobInfo=blobCache.findFirst(function(cachedBlobInfo){return cachedBlobInfo.base64()===base64}))?resolve({image:img,blobInfo:blobInfo}):$_5mct314mjcq8h46h.uriToBlob(img.src).then(function(blob){blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})},function(err){reject(err)})):(blobInfo=blobCache.getByUri(img.src))?resolve({image:img,blobInfo:blobInfo}):$_5mct314mjcq8h46h.uriToBlob(img.src).then(function(blob){$_5mct314mjcq8h46h.blobToDataUri(blob).then(function(dataUri){base64=$_5mct314mjcq8h46h.parseDataUri(dataUri).data,blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})})},function(err){reject(err)})},getAllImages=function(elm){return elm?elm.getElementsByTagName("img"):[]},ImageScanner=function(uploadStatus,blobCache){var cachedPromises={};return{findAll:function(elm,predicate){var images,promises;return predicate||(predicate=$_ghxtsv25jcq8h3p5.constant(!0)),images=$_292trzkjcq8h3fz.filter(getAllImages(elm),function(img){var src=img.src;return!!$_1surm29jcq8h31g.fileApi&&!img.hasAttribute("data-mce-bogus")&&!img.hasAttribute("data-mce-placeholder")&&!(!src||src===$_1surm29jcq8h31g.transparentSrc)&&(0===src.indexOf("blob:")?!uploadStatus.isUploaded(src):0===src.indexOf("data:")&&predicate(img))}),promises=$_292trzkjcq8h3fz.map(images,function(img){var newPromise;return cachedPromises[img.src]?new promiseObj(function(resolve){cachedPromises[img.src].then(function(imageInfo){if("string"==typeof imageInfo)return imageInfo;resolve({image:img,blobInfo:imageInfo.blobInfo})})}):(newPromise=new promiseObj(function(resolve,reject){imageToBlobInfo(blobCache,img,resolve,reject)}).then(function(result){return delete cachedPromises[result.image.src],result}).catch(function(error){return delete cachedPromises[img.src],error}),cachedPromises[img.src]=newPromise,newPromise)}),promiseObj.all(promises)}}},count$1=0,seed=function(){var rnd=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+rnd()+rnd()+rnd()},$_6ogq5f4sjcq8h46u={uuid:function(prefix){return prefix+count$1+++seed()}},BlobCache=function(){var cache=[],constant=$_ghxtsv25jcq8h3p5.constant,mimeToExt=function(mime){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[mime.toLowerCase()]||"dat"},toBlobInfo=function(o){var id,name;if(!o.blob||!o.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return id=o.id||$_6ogq5f4sjcq8h46u.uuid("blobid"),name=o.name||id,{id:constant(id),name:constant(name),filename:constant(name+"."+mimeToExt(o.blob.type)),blob:constant(o.blob),base64:constant(o.base64),blobUri:constant(o.blobUri||$_tvwfrajcq8h32s.createObjectURL(o.blob)),uri:constant(o.uri)}},get=function(id){return findFirst(function(cachedBlobInfo){return cachedBlobInfo.id()===id})},findFirst=function(predicate){return $_292trzkjcq8h3fz.filter(cache,predicate)[0]};return{create:function(o,blob,base64,filename){return toBlobInfo("object"==typeof o?o:{id:o,name:filename,blob:blob,base64:base64})},add:function(blobInfo){get(blobInfo.id())||cache.push(blobInfo)},get:get,getByUri:function(blobUri){return findFirst(function(blobInfo){return blobInfo.blobUri()===blobUri})},findFirst:findFirst,removeByUri:function(blobUri){cache=$_292trzkjcq8h3fz.filter(cache,function(blobInfo){return blobInfo.blobUri()!==blobUri||($_tvwfrajcq8h32s.revokeObjectURL(blobInfo.blobUri()),!1)})},destroy:function(){$_292trzkjcq8h3fz.each(cache,function(cachedBlobInfo){$_tvwfrajcq8h32s.revokeObjectURL(cachedBlobInfo.blobUri())}),cache=[]}}},UploadStatus=function(){var blobUriStatuses={},createStatus=function(status,resultUri){return{status:status,resultUri:resultUri}},hasBlobUri=function(blobUri){return blobUri in blobUriStatuses};return{hasBlobUri:hasBlobUri,getResultUri:function(blobUri){var result=blobUriStatuses[blobUri];return result?result.resultUri:null},isPending:function(blobUri){return!!hasBlobUri(blobUri)&&1===blobUriStatuses[blobUri].status},isUploaded:function(blobUri){return!!hasBlobUri(blobUri)&&2===blobUriStatuses[blobUri].status},markPending:function(blobUri){blobUriStatuses[blobUri]=createStatus(1,null)},markUploaded:function(blobUri,resultUri){blobUriStatuses[blobUri]=createStatus(2,resultUri)},removeFailed:function(blobUri){delete blobUriStatuses[blobUri]},destroy:function(){blobUriStatuses={}}}},EditorUpload=function(editor){var uploader,imageScanner,blobCache=BlobCache(),settings=editor.settings,uploadStatus=UploadStatus(),aliveGuard=function(callback){return function(result){return editor.selection?callback(result):[]}},cacheInvalidator=function(){return"?"+(new Date).getTime()},replaceString=function(content,search,replace){var index=0;do{-1!==(index=content.indexOf(search,index))&&(content=content.substring(0,index)+replace+content.substr(index+search.length),index+=replace.length-search.length+1)}while(-1!==index);return content},replaceImageUrl=function(content,targetUrl,replacementUrl){return content=replaceString(content,'src="'+targetUrl+'"','src="'+replacementUrl+'"'),content=replaceString(content,'data-mce-src="'+targetUrl+'"','data-mce-src="'+replacementUrl+'"')},replaceUrlInUndoStack=function(targetUrl,replacementUrl){$_292trzkjcq8h3fz.each(editor.undoManager.data,function(level){"fragmented"===level.type?level.fragments=$_292trzkjcq8h3fz.map(level.fragments,function(fragment){return replaceImageUrl(fragment,targetUrl,replacementUrl)}):level.content=replaceImageUrl(level.content,targetUrl,replacementUrl)})},openNotification=function(){return editor.notificationManager.open({text:editor.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},replaceImageUri=function(image,resultUri){blobCache.removeByUri(image.src),replaceUrlInUndoStack(image.src,resultUri),editor.$(image).attr({src:settings.images_reuse_filename?resultUri+cacheInvalidator():resultUri,"data-mce-src":editor.convertURL(resultUri,"src")})},uploadImages=function(callback){return uploader||(uploader=Uploader(uploadStatus,{url:settings.images_upload_url,basePath:settings.images_upload_base_path,credentials:settings.images_upload_credentials,handler:settings.images_upload_handler})),scanForImages().then(aliveGuard(function(imageInfos){var blobInfos;return blobInfos=$_292trzkjcq8h3fz.map(imageInfos,function(imageInfo){return imageInfo.blobInfo}),uploader.upload(blobInfos,openNotification).then(aliveGuard(function(result){var filteredResult=$_292trzkjcq8h3fz.map(result,function(uploadInfo,index){var image=imageInfos[index].image;return uploadInfo.status&&!1!==editor.settings.images_replace_blob_uris?replaceImageUri(image,uploadInfo.url):uploadInfo.error&&$_2xdw0u4djcq8h456.uploadError(editor,uploadInfo.error),{element:image,status:uploadInfo.status}});return callback&&callback(filteredResult),filteredResult}))}))},uploadImagesAuto=function(callback){if(!1!==settings.automatic_uploads)return uploadImages(callback)},isValidDataUriImage=function(imgElm){return!settings.images_dataimg_filter||settings.images_dataimg_filter(imgElm)},scanForImages=function(){return imageScanner||(imageScanner=ImageScanner(uploadStatus,blobCache)),imageScanner.findAll(editor.getBody(),isValidDataUriImage).then(aliveGuard(function(result){return result=$_292trzkjcq8h3fz.filter(result,function(resultItem){return"string"!=typeof resultItem||($_2xdw0u4djcq8h456.displayError(editor,resultItem),!1)}),$_292trzkjcq8h3fz.each(result,function(resultItem){replaceUrlInUndoStack(resultItem.image.src,resultItem.blobInfo.blobUri()),resultItem.image.src=resultItem.blobInfo.blobUri(),resultItem.image.removeAttribute("data-mce-src")}),result}))},replaceBlobUris=function(content){return content.replace(/src="(blob:[^"]+)"/g,function(match,blobUri){var resultUri=uploadStatus.getResultUri(blobUri);if(resultUri)return'src="'+resultUri+'"';var blobInfo=blobCache.getByUri(blobUri);return blobInfo||(blobInfo=$_292trzkjcq8h3fz.reduce(editor.editorManager.get(),function(result,editor){return result||editor.editorUpload&&editor.editorUpload.blobCache.getByUri(blobUri)},null)),blobInfo?'src="data:'+blobInfo.blob().type+";base64,"+blobInfo.base64()+'"':match})};return editor.on("setContent",function(){!1!==editor.settings.automatic_uploads?uploadImagesAuto():scanForImages()}),editor.on("RawSaveContent",function(e){e.content=replaceBlobUris(e.content)}),editor.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=replaceBlobUris(e.content))}),editor.on("PostRender",function(){editor.parser.addNodeFilter("img",function(images){$_292trzkjcq8h3fz.each(images,function(img){var src=img.attr("src");if(!blobCache.getByUri(src)){var resultUri=uploadStatus.getResultUri(src);resultUri&&img.attr("src",resultUri)}})})}),{blobCache:blobCache,uploadImages:uploadImages,uploadImagesAuto:uploadImagesAuto,scanForImages:scanForImages,destroy:function(){blobCache.destroy(),uploadStatus.destroy(),imageScanner=uploader=null}}},isBlockElement=function(blockElements,node){return blockElements.hasOwnProperty(node.nodeName)},isValidTarget=function(blockElements,node){return!!$_bpl7e51qjcq8h3kz.isText(node)||!!$_bpl7e51qjcq8h3kz.isElement(node)&&(!isBlockElement(blockElements,node)&&!$_5o3jsi29jcq8h3pn.isBookmarkNode(node))},hasBlockParent=function(blockElements,root,node){return $_de5suq4jcq8h2x0.exists($_5174v33jcq8h3u4.parents($_etvcvfyjcq8h3hp.fromDom(node),$_etvcvfyjcq8h3hp.fromDom(root)),function(elm){return isBlockElement(blockElements,elm.dom())})},addRootBlocks=function(editor){var rng,startContainer,startOffset,endContainer,endOffset,rootBlockNode,tempNode,wrapped,restoreSelection,rootNodeName,forcedRootBlock,settings=editor.settings,dom=editor.dom,selection=editor.selection,schema=editor.schema,blockElements=schema.getBlockElements(),node=selection.getStart(),rootNode=editor.getBody();if(forcedRootBlock=settings.forced_root_block,node&&$_bpl7e51qjcq8h3kz.isElement(node)&&forcedRootBlock&&(rootNodeName=rootNode.nodeName.toLowerCase(),schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())&&!hasBlockParent(blockElements,rootNode,node))){for(startContainer=(rng=selection.getRng()).startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,restoreSelection=$_akpbtf44jcq8h43x.hasFocus(editor),node=rootNode.firstChild;node;)if(isValidTarget(blockElements,node)){if($_bpl7e51qjcq8h3kz.isText(node)&&0===node.nodeValue.length){tempNode=node,node=node.nextSibling,dom.remove(tempNode);continue}rootBlockNode||(rootBlockNode=dom.create(forcedRootBlock,editor.settings.forced_root_block_attrs),node.parentNode.insertBefore(rootBlockNode,node),wrapped=!0),tempNode=node,node=node.nextSibling,rootBlockNode.appendChild(tempNode)}else rootBlockNode=null,node=node.nextSibling;wrapped&&restoreSelection&&(rng.setStart(startContainer,startOffset),rng.setEnd(endContainer,endOffset),selection.setRng(rng),editor.nodeChanged())}},$_8ujd9i4ujcq8h46x={setup:function(editor){editor.settings.forced_root_block&&editor.on("NodeChange",$_djct026jcq8h2xw.curry(addRootBlocks,editor))}},NodeChange=function(editor){var lastRng,lastPath=[],isSameElementPath=function(startElm){var i,currentPath;if((currentPath=editor.$(startElm).parentsUntil(editor.getBody()).add(startElm)).length===lastPath.length){for(i=currentPath.length;i>=0&&currentPath[i]===lastPath[i];i--);if(-1===i)return lastPath=currentPath,!0}return lastPath=currentPath,!1};"onselectionchange"in editor.getDoc()||editor.on("NodeChange Click MouseUp KeyUp Focus",function(e){var nativeRng,fakeRng;fakeRng={startContainer:(nativeRng=editor.selection.getRng()).startContainer,startOffset:nativeRng.startOffset,endContainer:nativeRng.endContainer,endOffset:nativeRng.endOffset},"nodechange"!==e.type&&$_6zmpij3tjcq8h42i.isEq(fakeRng,lastRng)||editor.fire("SelectionChange"),lastRng=fakeRng}),editor.on("contextmenu",function(){editor.fire("SelectionChange")}),editor.on("SelectionChange",function(){var startElm=editor.selection.getStart(!0);!startElm||!$_1surm29jcq8h31g.range&&editor.selection.isCollapsed()||!isSameElementPath(startElm)&&editor.dom.isChildOf(startElm,editor.getBody())&&editor.nodeChanged({selectionChange:!0})}),editor.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"===editor.selection.getNode().nodeName?$_51uzcpgjcq8h3db.setEditorTimeout(editor,function(){editor.nodeChanged()}):editor.nodeChanged())}),this.nodeChanged=function(args){var node,parents,root,selection=editor.selection;editor.initialized&&selection&&!editor.settings.disable_nodechange&&!editor.readonly&&(root=editor.getBody(),(node=selection.getStart(!0)||root).ownerDocument===editor.getDoc()&&editor.dom.isChildOf(node,root)||(node=root),parents=[],editor.dom.getParent(node,function(node){if(node===root)return!0;parents.push(node)}),(args=args||{}).element=node,args.parents=parents,editor.fire("NodeChange",args))}},getAbsolutePosition=function(elm){var doc,docElem,win,clientRect;return clientRect=elm.getBoundingClientRect(),doc=elm.ownerDocument,docElem=doc.documentElement,win=doc.defaultView,{top:clientRect.top+win.pageYOffset-docElem.clientTop,left:clientRect.left+win.pageXOffset-docElem.clientLeft}},getBodyPosition=function(editor){return editor.inline?getAbsolutePosition(editor.getBody()):{left:0,top:0}},getScrollPosition=function(editor){var body=editor.getBody();return editor.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0}},getBodyScroll=function(editor){var body=editor.getBody(),docElm=editor.getDoc().documentElement,inlineScroll={left:body.scrollLeft,top:body.scrollTop},iframeScroll={left:body.scrollLeft||docElm.scrollLeft,top:body.scrollTop||docElm.scrollTop};return editor.inline?inlineScroll:iframeScroll},getMousePosition=function(editor,event){if(event.target.ownerDocument!==editor.getDoc()){var iframePosition=getAbsolutePosition(editor.getContentAreaContainer()),scrollPosition=getBodyScroll(editor);return{left:event.pageX-iframePosition.left+scrollPosition.left,top:event.pageY-iframePosition.top+scrollPosition.top}}return{left:event.pageX,top:event.pageY}},calculatePosition=function(bodyPosition,scrollPosition,mousePosition){return{pageX:mousePosition.left-bodyPosition.left+scrollPosition.left,pageY:mousePosition.top-bodyPosition.top+scrollPosition.top}},$_6ye3r64yjcq8h484={calc:function(editor,event){return calculatePosition(getBodyPosition(editor),getScrollPosition(editor),getMousePosition(editor,event))}},isContentEditableFalse$6=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isContentEditableTrue$4=$_bpl7e51qjcq8h3kz.isContentEditableTrue,isDraggable=function(rootElm,elm){return isContentEditableFalse$6(elm)&&elm!==rootElm},isValidDropTarget=function(editor,targetElement,dragElement){return targetElement!==dragElement&&!editor.dom.isChildOf(targetElement,dragElement)&&!isContentEditableFalse$6(targetElement)},cloneElement=function(elm){var cloneElm=elm.cloneNode(!0);return cloneElm.removeAttribute("data-mce-selected"),cloneElm},createGhost=function(editor,elm,width,height){var clonedElm=elm.cloneNode(!0);editor.dom.setStyles(clonedElm,{width:width,height:height}),editor.dom.setAttrib(clonedElm,"data-mce-selected",null);var ghostElm=editor.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return editor.dom.setStyles(ghostElm,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:width,height:height}),editor.dom.setStyles(clonedElm,{margin:0,boxSizing:"border-box"}),ghostElm.appendChild(clonedElm),ghostElm},appendGhostToBody=function(ghostElm,bodyElm){ghostElm.parentNode!==bodyElm&&bodyElm.appendChild(ghostElm)},moveGhost=function(ghostElm,position,width,height,maxX,maxY){var overflowX=0,overflowY=0;ghostElm.style.left=position.pageX+"px",ghostElm.style.top=position.pageY+"px",position.pageX+width>maxX&&(overflowX=position.pageX+width-maxX),position.pageY+height>maxY&&(overflowY=position.pageY+height-maxY),ghostElm.style.width=width-overflowX+"px",ghostElm.style.height=height-overflowY+"px"},removeElement=function(elm){elm&&elm.parentNode&&elm.parentNode.removeChild(elm)},isLeftMouseButtonPressed=function(e){return 0===e.button},hasDraggableElement=function(state){return state.element},applyRelPos=function(state,position){return{pageX:position.pageX-state.relX,pageY:position.pageY+5}},start$1=function(state,editor){return function(e){if(isLeftMouseButtonPressed(e)){var ceElm=$_292trzkjcq8h3fz.find(editor.dom.getParents(e.target),$_ghxtsv25jcq8h3p5.or(isContentEditableFalse$6,isContentEditableTrue$4));if(isDraggable(editor.getBody(),ceElm)){var elmPos=editor.dom.getPos(ceElm),bodyElm=editor.getBody(),docElm=editor.getDoc().documentElement;state.element=ceElm,state.screenX=e.screenX,state.screenY=e.screenY,state.maxX=(editor.inline?bodyElm.scrollWidth:docElm.offsetWidth)-2,state.maxY=(editor.inline?bodyElm.scrollHeight:docElm.offsetHeight)-2,state.relX=e.pageX-elmPos.x,state.relY=e.pageY-elmPos.y,state.width=ceElm.offsetWidth,state.height=ceElm.offsetHeight,state.ghost=createGhost(editor,ceElm,state.width,state.height)}}}},move$1=function(state,editor){var throttledPlaceCaretAt=$_51uzcpgjcq8h3db.throttle(function(clientX,clientY){editor._selectionOverrides.hideFakeCaret(),editor.selection.placeCaretAt(clientX,clientY)},0);return function(e){var movement=Math.max(Math.abs(e.screenX-state.screenX),Math.abs(e.screenY-state.screenY));if(hasDraggableElement(state)&&!state.dragging&&movement>10){if(editor.fire("dragstart",{target:state.element}).isDefaultPrevented())return;state.dragging=!0,editor.focus()}if(state.dragging){var targetPos=applyRelPos(state,$_6ye3r64yjcq8h484.calc(editor,e));appendGhostToBody(state.ghost,editor.getBody()),moveGhost(state.ghost,targetPos,state.width,state.height,state.maxX,state.maxY),throttledPlaceCaretAt(e.clientX,e.clientY)}}},getRawTarget=function(selection){var startContainer=selection.getSel().getRangeAt(0).startContainer;return 3===startContainer.nodeType?startContainer.parentNode:startContainer},drop=function(state,editor){return function(e){if(state.dragging&&isValidDropTarget(editor,getRawTarget(editor.selection),state.element)){var targetClone_1=cloneElement(state.element),args=editor.fire("drop",{targetClone:targetClone_1,clientX:e.clientX,clientY:e.clientY});args.isDefaultPrevented()||(targetClone_1=args.targetClone,editor.undoManager.transact(function(){removeElement(state.element),editor.insertContent(editor.dom.getOuterHTML(targetClone_1)),editor._selectionOverrides.hideFakeCaret()}))}removeDragState(state)}},stop=function(state,editor){return function(){removeDragState(state),state.dragging&&editor.fire("dragend")}},removeDragState=function(state){state.dragging=!1,state.element=null,removeElement(state.ghost)},bindFakeDragEvents=function(editor){var pageDom,dragStartHandler,dragHandler,dropHandler,dragEndHandler,rootDocument,state={};pageDom=DOMUtils.DOM,rootDocument=document,dragStartHandler=start$1(state,editor),dragHandler=move$1(state,editor),dropHandler=drop(state,editor),dragEndHandler=stop(state,editor),editor.on("mousedown",dragStartHandler),editor.on("mousemove",dragHandler),editor.on("mouseup",dropHandler),pageDom.bind(rootDocument,"mousemove",dragHandler),pageDom.bind(rootDocument,"mouseup",dragEndHandler),editor.on("remove",function(){pageDom.unbind(rootDocument,"mousemove",dragHandler),pageDom.unbind(rootDocument,"mouseup",dragEndHandler)})},blockIeDrop=function(editor){editor.on("drop",function(e){var realTarget=void 0!==e.clientX?editor.getDoc().elementFromPoint(e.clientX,e.clientY):null;(isContentEditableFalse$6(realTarget)||isContentEditableFalse$6(editor.dom.getContentEditableParent(realTarget)))&&e.preventDefault()})},$_2dx4r34xjcq8h47o={init:function(editor){bindFakeDragEvents(editor),blockIeDrop(editor)}},isContentEditableFalse$7=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isTableCell$2=function(node){return node&&/^(TD|TH)$/i.test(node.nodeName)},FakeCaret=function(rootNode,isBlock){var cursorInterval,caretContainerNode,$lastVisualCaret=null,getAbsoluteClientRect=function(node,before){var docElm,scrollX,scrollY,margin,rootRect,clientRect=$_99qwt122jcq8h3oy.collapse(node.getBoundingClientRect(),before);return"BODY"===rootNode.tagName?(docElm=rootNode.ownerDocument.documentElement,scrollX=rootNode.scrollLeft||docElm.scrollLeft,scrollY=rootNode.scrollTop||docElm.scrollTop):(rootRect=rootNode.getBoundingClientRect(),scrollX=rootNode.scrollLeft-rootRect.left,scrollY=rootNode.scrollTop-rootRect.top),clientRect.left+=scrollX,clientRect.right+=scrollX,clientRect.top+=scrollY,clientRect.bottom+=scrollY,clientRect.width=1,(margin=node.offsetWidth-node.clientWidth)>0&&(before&&(margin*=-1),clientRect.left+=margin,clientRect.right+=margin),clientRect},trimInlineCaretContainers=function(){var contentEditableFalseNodes,node,sibling,i,data;for(contentEditableFalseNodes=DomQuery("*[contentEditable=false]",rootNode),i=0;i<contentEditableFalseNodes.length;i++)sibling=(node=contentEditableFalseNodes[i]).previousSibling,$_cyutcs20jcq8h3or.endsWithCaretContainer(sibling)&&(1===(data=sibling.data).length?sibling.parentNode.removeChild(sibling):sibling.deleteData(data.length-1,1)),sibling=node.nextSibling,$_cyutcs20jcq8h3or.startsWithCaretContainer(sibling)&&(1===(data=sibling.data).length?sibling.parentNode.removeChild(sibling):sibling.deleteData(0,1));return null},hide=function(){trimInlineCaretContainers(),caretContainerNode&&($_ap2ju43cjcq8h3vl.remove(caretContainerNode),caretContainerNode=null),$lastVisualCaret&&($lastVisualCaret.remove(),$lastVisualCaret=null),clearInterval(cursorInterval)},hasFocus=function(){return rootNode.ownerDocument.activeElement===rootNode},startBlink=function(){cursorInterval=$_51uzcpgjcq8h3db.setInterval(function(){hasFocus()?DomQuery("div.mce-visual-caret",rootNode).toggleClass("mce-visual-caret-hidden"):DomQuery("div.mce-visual-caret",rootNode).addClass("mce-visual-caret-hidden")},500)};return{show:function(before,node){var clientRect,rng;return hide(),isTableCell$2(node)?null:isBlock(node)?(caretContainerNode=$_cyutcs20jcq8h3or.insertBlock("p",node,before),clientRect=getAbsoluteClientRect(node,before),DomQuery(caretContainerNode).css("top",clientRect.top),$lastVisualCaret=DomQuery('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(clientRect).appendTo(rootNode),before&&$lastVisualCaret.addClass("mce-visual-caret-before"),startBlink(),(rng=node.ownerDocument.createRange()).setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0),rng):(caretContainerNode=$_cyutcs20jcq8h3or.insertInline(node,before),rng=node.ownerDocument.createRange(),isContentEditableFalse$7(caretContainerNode.nextSibling)?(rng.setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0)):(rng.setStart(caretContainerNode,1),rng.setEnd(caretContainerNode,1)),rng)},hide:hide,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function(){$_51uzcpgjcq8h3db.clearInterval(cursorInterval)}}},getClientRects=function(node){var toArrayWithNode=function(clientRects){return $_292trzkjcq8h3fz.map(clientRects,function(clientRect){return clientRect=$_99qwt122jcq8h3oy.clone(clientRect),clientRect.node=node,clientRect})};if($_292trzkjcq8h3fz.isArray(node))return $_292trzkjcq8h3fz.reduce(node,function(result,node){return result.concat(getClientRects(node))},[]);if($_bpl7e51qjcq8h3kz.isElement(node))return toArrayWithNode(node.getClientRects());if($_bpl7e51qjcq8h3kz.isText(node)){var rng=node.ownerDocument.createRange();return rng.setStart(node,0),rng.setEnd(node,node.data.length),toArrayWithNode(rng.getClientRects())}},$_4sgx8851jcq8h48f={getClientRects:getClientRects},isContentEditableFalse$8=$_bpl7e51qjcq8h3kz.isContentEditableFalse,findNode$1=$_ctfd6a27jcq8h3pe.findNode,curry$3=$_ghxtsv25jcq8h3p5.curry,distanceToRectLeft=function(clientRect,clientX){return Math.abs(clientRect.left-clientX)},distanceToRectRight=function(clientRect,clientX){return Math.abs(clientRect.right-clientX)},findClosestClientRect=function(clientRects,clientX){var isInside=function(clientX,clientRect){return clientX>=clientRect.left&&clientX<=clientRect.right};return $_292trzkjcq8h3fz.reduce(clientRects,function(oldClientRect,clientRect){var oldDistance,newDistance;return oldDistance=Math.min(distanceToRectLeft(oldClientRect,clientX),distanceToRectRight(oldClientRect,clientX)),newDistance=Math.min(distanceToRectLeft(clientRect,clientX),distanceToRectRight(clientRect,clientX)),isInside(clientX,clientRect)?clientRect:isInside(clientX,oldClientRect)?oldClientRect:newDistance===oldDistance&&isContentEditableFalse$8(clientRect.node)?clientRect:newDistance<oldDistance?clientRect:oldClientRect})},walkUntil=function(direction,rootNode,predicateFn,node){for(;node=findNode$1(node,direction,$_dlol411zjcq8h3om.isEditableCaretCandidate,rootNode);)if(predicateFn(node))return},findLineNodeRects=function(rootNode,targetNodeRect){var clientRects=[],collect=function(checkPosFn,node){var lineRects;return lineRects=$_292trzkjcq8h3fz.filter($_4sgx8851jcq8h48f.getClientRects(node),function(clientRect){return!checkPosFn(clientRect,targetNodeRect)}),clientRects=clientRects.concat(lineRects),0===lineRects.length};return clientRects.push(targetNodeRect),walkUntil(-1,rootNode,curry$3(collect,$_99qwt122jcq8h3oy.isAbove),targetNodeRect.node),walkUntil(1,rootNode,curry$3(collect,$_99qwt122jcq8h3oy.isBelow),targetNodeRect.node),clientRects},getContentEditableFalseChildren=function(rootNode){return $_292trzkjcq8h3fz.filter($_292trzkjcq8h3fz.toArray(rootNode.getElementsByTagName("*")),isContentEditableFalse$8)},caretInfo=function(clientRect,clientX){return{node:clientRect.node,before:distanceToRectLeft(clientRect,clientX)<distanceToRectRight(clientRect,clientX)}},$_3x0ocn50jcq8h48c={findClosestClientRect:findClosestClientRect,findLineNodeRects:findLineNodeRects,closestCaret:function(rootNode,clientX,clientY){var contentEditableFalseNodeRects,closestNodeRect;return contentEditableFalseNodeRects=$_4sgx8851jcq8h48f.getClientRects(getContentEditableFalseChildren(rootNode)),contentEditableFalseNodeRects=$_292trzkjcq8h3fz.filter(contentEditableFalseNodeRects,function(clientRect){return clientY>=clientRect.top&&clientY<=clientRect.bottom}),(closestNodeRect=findClosestClientRect(contentEditableFalseNodeRects,clientX))&&(closestNodeRect=findClosestClientRect(findLineNodeRects(rootNode,closestNodeRect),clientX))&&isContentEditableFalse$8(closestNodeRect.node)?caretInfo(closestNodeRect,clientX):null}},$_1t4o3952jcq8h48h={isXYWithinRange:function(clientX,clientY,range){return!range.collapsed&&$_de5suq4jcq8h2x0.foldl(range.getClientRects(),function(state,rect){return state||$_99qwt122jcq8h3oy.containsXY(rect,clientX,clientY)},!1)}},$_7ti7dk54jcq8h48l={adaptable:function(fn,rate){var timer=null,args=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null,args=null)},throttle:function(){args=arguments,null===timer&&(timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate))}}},first:function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null===timer&&(timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate))}}},last:function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null!==timer&&clearTimeout(timer),timer=setTimeout(function(){fn.apply(null,args),timer=null,args=null},rate)}}}},isContentEditableTrue$5=$_bpl7e51qjcq8h3kz.isContentEditableTrue,isContentEditableFalse$9=$_bpl7e51qjcq8h3kz.isContentEditableFalse,showCaret=function(direction,editor,node,before){return editor._selectionOverrides.showCaret(direction,node,before)},getNodeRange=function(node){var rng=node.ownerDocument.createRange();return rng.selectNode(node),rng},renderCaretAtRange=function(editor,range){var caretPosition,ceRoot;return range=$_ctfd6a27jcq8h3pe.normalizeRange(1,editor.getBody(),range),caretPosition=CaretPosition.fromRangeStart(range),isContentEditableFalse$9(caretPosition.getNode())?showCaret(1,editor,caretPosition.getNode(),!caretPosition.isAtEnd()):isContentEditableFalse$9(caretPosition.getNode(!0))?showCaret(1,editor,caretPosition.getNode(!0),!1):(ceRoot=editor.dom.getParent(caretPosition.getNode(),$_ghxtsv25jcq8h3p5.or(isContentEditableFalse$9,isContentEditableTrue$5)),isContentEditableFalse$9(ceRoot)?showCaret(1,editor,ceRoot,!1):null)},$_aixegr55jcq8h48n={showCaret:showCaret,selectNode:function(editor,node){return editor.fire("BeforeObjectSelected",{target:node}).isDefaultPrevented()?null:getNodeRange(node)},renderCaretAtRange:renderCaretAtRange,renderRangeCaret:function(editor,range){return range&&range.collapsed?renderCaretAtRange(editor,range)||range:range}},$_5brksa53jcq8h48j={setup:function(editor){var renderFocusCaret=$_7ti7dk54jcq8h48l.first(function(){if(!editor.removed){var caretRange=$_aixegr55jcq8h48n.renderRangeCaret(editor,editor.selection.getRng());editor.selection.setRng(caretRange)}},0);editor.on("focus",function(){renderFocusCaret.throttle()}),editor.on("blur",function(){renderFocusCaret.cancel()})}},$_de018656jcq8h48p={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return $_1surm29jcq8h31g.mac?e.metaKey:e.ctrlKey&&!e.altKey}},isContentEditableTrue$3=$_bpl7e51qjcq8h3kz.isContentEditableTrue,isContentEditableFalse$5=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isAfterContentEditableFalse=$_ctfd6a27jcq8h3pe.isAfterContentEditableFalse,isBeforeContentEditableFalse=$_ctfd6a27jcq8h3pe.isBeforeContentEditableFalse,SelectionOverrides=function(editor){var selectedContentEditableNode,rootNode=editor.getBody(),fakeCaret=FakeCaret(editor.getBody(),function(node){return editor.dom.isBlock(node)}),realSelectionId="sel-"+editor.dom.uniqueId(),isFakeSelectionElement=function(elm){return editor.dom.hasClass(elm,"mce-offscreen-selection")},getRealSelectionElement=function(){var container=editor.dom.get(realSelectionId);return container?container.getElementsByTagName("*")[0]:container},setRange=function(range){range&&editor.selection.setRng(range)},getRange=function(){return editor.selection.getRng()},scrollIntoView=function(node,alignToTop){editor.selection.scrollIntoView(node,alignToTop)},showCaret=function(direction,node,before){return editor.fire("ShowCaret",{target:node,direction:direction,before:before}).isDefaultPrevented()?null:(scrollIntoView(node,-1===direction),fakeCaret.show(before,node))},getNormalizedRangeEndPoint=function(direction,range){return range=$_ctfd6a27jcq8h3pe.normalizeRange(direction,rootNode,range),-1===direction?CaretPosition.fromRangeStart(range):CaretPosition.fromRangeEnd(range)},isWithinCaretContainer=function(node){return $_cyutcs20jcq8h3or.isCaretContainer(node)||$_cyutcs20jcq8h3or.startsWithCaretContainer(node)||$_cyutcs20jcq8h3or.endsWithCaretContainer(node)},isRangeInCaretContainer=function(rng){return isWithinCaretContainer(rng.startContainer)||isWithinCaretContainer(rng.endContainer)},setContentEditableSelection=function(range,forward){var node,$realSelectionContainer,sel,startContainer,startOffset,endOffset,e,caretPosition,targetClone,origTargetClone,$=editor.$,dom=editor.dom;if(!range)return null;if(range.collapsed){if(!isRangeInCaretContainer(range))if(!1===forward){if(caretPosition=getNormalizedRangeEndPoint(-1,range),isContentEditableFalse$5(caretPosition.getNode(!0)))return showCaret(-1,caretPosition.getNode(!0),!1);if(isContentEditableFalse$5(caretPosition.getNode()))return showCaret(-1,caretPosition.getNode(),!caretPosition.isAtEnd())}else{if(caretPosition=getNormalizedRangeEndPoint(1,range),isContentEditableFalse$5(caretPosition.getNode()))return showCaret(1,caretPosition.getNode(),!caretPosition.isAtEnd());if(isContentEditableFalse$5(caretPosition.getNode(!0)))return showCaret(1,caretPosition.getNode(!0),!1)}return null}return startContainer=range.startContainer,startOffset=range.startOffset,endOffset=range.endOffset,3===startContainer.nodeType&&0===startOffset&&isContentEditableFalse$5(startContainer.parentNode)&&(startContainer=startContainer.parentNode,startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1!==startContainer.nodeType?null:(endOffset===startOffset+1&&(node=startContainer.childNodes[startOffset]),isContentEditableFalse$5(node)?(targetClone=origTargetClone=node.cloneNode(!0),(e=editor.fire("ObjectSelected",{target:node,targetClone:targetClone})).isDefaultPrevented()?null:($realSelectionContainer=$_75pgp31jcq8h3tk.descendant($_etvcvfyjcq8h3hp.fromDom(editor.getBody()),"#"+realSelectionId).fold(function(){return $([])},function(elm){return $([elm.dom()])}),targetClone=e.targetClone,0===$realSelectionContainer.length&&($realSelectionContainer=$('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",realSelectionId)).appendTo(editor.getBody()),range=editor.dom.createRng(),targetClone===origTargetClone&&$_1surm29jcq8h31g.ie?($realSelectionContainer.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(targetClone),range.setStartAfter($realSelectionContainer[0].firstChild.firstChild),range.setEndAfter(targetClone)):($realSelectionContainer.empty().append("").append(targetClone).append(""),range.setStart($realSelectionContainer[0].firstChild,1),range.setEnd($realSelectionContainer[0].lastChild,0)),$realSelectionContainer.css({top:dom.getPos(node,editor.getBody()).y}),$realSelectionContainer[0].focus(),(sel=editor.selection.getSel()).removeAllRanges(),sel.addRange(range),$_de5suq4jcq8h2x0.each($_7cq9b52kjcq8h3r9.descendants($_etvcvfyjcq8h3hp.fromDom(editor.getBody()),"*[data-mce-selected]"),function(elm){$_7np04f14jcq8h3ig.remove(elm,"data-mce-selected")}),node.setAttribute("data-mce-selected","1"),selectedContentEditableNode=node,hideFakeCaret(),range)):null)},removeContentEditableSelection=function(){selectedContentEditableNode&&(selectedContentEditableNode.removeAttribute("data-mce-selected"),$_75pgp31jcq8h3tk.descendant($_etvcvfyjcq8h3hp.fromDom(editor.getBody()),"#"+realSelectionId).each($_8dor5e2gjcq8h3qz.remove),selectedContentEditableNode=null)},hideFakeCaret=function(){fakeCaret.hide()};return $_1surm29jcq8h31g.ceFalse&&(function(){var getContentEditableRoot=function(node){for(var root=editor.getBody();node&&node!==root;){if(isContentEditableTrue$3(node)||isContentEditableFalse$5(node))return node;node=node.parentNode}return null};editor.on("mouseup",function(e){var range=getRange();range.collapsed&&$_dm7vj649jcq8h44t.isXYInContentArea(editor,e.clientX,e.clientY)&&setRange($_aixegr55jcq8h48n.renderCaretAtRange(editor,range))}),editor.on("click",function(e){var contentEditableRoot;(contentEditableRoot=getContentEditableRoot(e.target))&&(isContentEditableFalse$5(contentEditableRoot)&&(e.preventDefault(),editor.focus()),isContentEditableTrue$3(contentEditableRoot)&&editor.dom.isChildOf(contentEditableRoot,editor.selection.getNode())&&removeContentEditableSelection())}),editor.on("blur NewBlock",function(){removeContentEditableSelection()});var hasNormalCaretPosition=function(elm){var caretWalker=CaretWalker(elm);if(!elm.firstChild)return!1;var startPos=CaretPosition.before(elm.firstChild),newPos=caretWalker.next(startPos);return newPos&&!isBeforeContentEditableFalse(newPos)&&!isAfterContentEditableFalse(newPos)},isInSameBlock=function(node1,node2){return editor.dom.getParent(node1,editor.dom.isBlock)===editor.dom.getParent(node2,editor.dom.isBlock)},hasBetterMouseTarget=function(targetNode,caretNode){var targetBlock=editor.dom.getParent(targetNode,editor.dom.isBlock),caretBlock=editor.dom.getParent(caretNode,editor.dom.isBlock);return targetBlock&&!isInSameBlock(targetBlock,caretBlock)&&hasNormalCaretPosition(targetBlock)};!function(editor){var moved=!1;editor.on("touchstart",function(){moved=!1}),editor.on("touchmove",function(){moved=!0}),editor.on("touchend",function(e){var contentEditableRoot=getContentEditableRoot(e.target);isContentEditableFalse$5(contentEditableRoot)&&(moved||(e.preventDefault(),setContentEditableSelection($_aixegr55jcq8h48n.selectNode(editor,contentEditableRoot))))})}(editor),editor.on("mousedown",function(e){var contentEditableRoot;if(!1!==$_dm7vj649jcq8h44t.isXYInContentArea(editor,e.clientX,e.clientY))if(contentEditableRoot=getContentEditableRoot(e.target))isContentEditableFalse$5(contentEditableRoot)?(e.preventDefault(),setContentEditableSelection($_aixegr55jcq8h48n.selectNode(editor,contentEditableRoot))):(removeContentEditableSelection(),isContentEditableTrue$3(contentEditableRoot)&&e.shiftKey||$_1t4o3952jcq8h48h.isXYWithinRange(e.clientX,e.clientY,editor.selection.getRng())||editor.selection.placeCaretAt(e.clientX,e.clientY));else{removeContentEditableSelection(),hideFakeCaret();var caretInfo=$_3x0ocn50jcq8h48c.closestCaret(rootNode,e.clientX,e.clientY);caretInfo&&(hasBetterMouseTarget(e.target,caretInfo.node)||(e.preventDefault(),editor.getBody().focus(),setRange(showCaret(1,caretInfo.node,caretInfo.before))))}}),editor.on("keypress",function(e){$_de018656jcq8h48p.modifierPressed(e)||(e.keyCode,isContentEditableFalse$5(editor.selection.getNode())&&e.preventDefault())}),editor.on("getSelectionRange",function(e){var rng=e.range;if(selectedContentEditableNode){if(!selectedContentEditableNode.parentNode)return void(selectedContentEditableNode=null);(rng=rng.cloneRange()).selectNode(selectedContentEditableNode),e.range=rng}}),editor.on("setSelectionRange",function(e){var rng;(rng=setContentEditableSelection(e.range,e.forward))&&(e.range=rng)}),editor.on("AfterSetSelectionRange",function(e){var rng=e.range;isRangeInCaretContainer(rng)||hideFakeCaret(),isFakeSelectionElement(rng.startContainer.parentNode)||removeContentEditableSelection()}),editor.on("copy",function(e){var clipboardData=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!$_1surm29jcq8h31g.ie){var realSelectionElement=getRealSelectionElement();realSelectionElement&&(e.preventDefault(),clipboardData.clearData(),clipboardData.setData("text/html",realSelectionElement.outerHTML),clipboardData.setData("text/plain",realSelectionElement.outerText))}}),$_2dx4r34xjcq8h47o.init(editor),$_5brksa53jcq8h48j.setup(editor)}(),function(){var styles=editor.contentStyles;styles.push(fakeCaret.getCss()),styles.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")}()),{showCaret:showCaret,showBlockCaretContainer:function(blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&($_cyutcs20jcq8h3or.showCaretContainerBlock(blockCaretContainer),setRange(getRange()),scrollIntoView(blockCaretContainer[0]))},hideFakeCaret:hideFakeCaret,destroy:function(){fakeCaret.destroy(),selectedContentEditableNode=null}}},$_frs28x5ajcq8h494={KEEP:0,DELETE:2,INSERT:1,diff:function(left,right){var size=left.length+right.length+2,vDown=new Array(size),vUp=new Array(size),snake=function(start,end,diag){return{start:start,end:end,diag:diag}},buildScript=function(start1,end1,start2,end2,script){var middle=getMiddleSnake(start1,end1,start2,end2);if(null===middle||middle.start===end1&&middle.diag===end1-end2||middle.end===start1&&middle.diag===start1-start2)for(var i=start1,j=start2;i<end1||j<end2;)i<end1&&j<end2&&left[i]===right[j]?(script.push([0,left[i]]),++i,++j):end1-start1>end2-start2?(script.push([2,left[i]]),++i):(script.push([1,right[j]]),++j);else{buildScript(start1,middle.start,start2,middle.start-middle.diag,script);for(var i2=middle.start;i2<middle.end;++i2)script.push([0,left[i2]]);buildScript(middle.end,end1,middle.end-middle.diag,end2,script)}},buildSnake=function(start,diag,end1,end2){for(var end=start;end-diag<end2&&end<end1&&left[end]===right[end-diag];)++end;return snake(start,end,diag)},getMiddleSnake=function(start1,end1,start2,end2){var m=end1-start1,n=end2-start2;if(0===m||0===n)return null;var delta=m-n,sum=n+m,offset=(sum%2==0?sum:sum+1)/2;vDown[1+offset]=start1,vUp[1+offset]=end1+1;var d,k,i,x,y;for(d=0;d<=offset;++d){for(k=-d;k<=d;k+=2){for(i=k+offset,k===-d||k!==d&&vDown[i-1]<vDown[i+1]?vDown[i]=vDown[i+1]:vDown[i]=vDown[i-1]+1,y=(x=vDown[i])-start1+start2-k;x<end1&&y<end2&&left[x]===right[y];)vDown[i]=++x,++y;if(delta%2!=0&&delta-d<=k&&k<=delta+d&&vUp[i-delta]<=vDown[i])return buildSnake(vUp[i-delta],k+start1-start2,end1,end2)}for(k=delta-d;k<=delta+d;k+=2){for(i=k+offset-delta,k===delta-d||k!==delta+d&&vUp[i+1]<=vUp[i-1]?vUp[i]=vUp[i+1]-1:vUp[i]=vUp[i-1],y=(x=vUp[i]-1)-start1+start2-k;x>=start1&&y>=start2&&left[x]===right[y];)vUp[i]=x--,y--;if(delta%2==0&&-d<=k&&k<=d&&vUp[i]<=vDown[i+delta])return buildSnake(vUp[i],k+start1-start2,end1,end2)}}},script=[];return buildScript(0,left.length,0,right.length,script),script}},getOuterHtml=function(elm){return 1===elm.nodeType?elm.outerHTML:3===elm.nodeType?Entities.encodeRaw(elm.data,!1):8===elm.nodeType?"\x3c!--"+elm.data+"--\x3e":""},createFragment$1=function(html){var frag,node,container;for(container=document.createElement("div"),frag=document.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},insertAt=function(elm,html,index){var fragment=createFragment$1(html);if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.insertBefore(fragment,target)}else elm.appendChild(fragment)},removeAt=function(elm,index){if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.removeChild(target)}},applyDiff=function(diff,elm){var index=0;$_292trzkjcq8h3fz.each(diff,function(action){action[0]===$_frs28x5ajcq8h494.KEEP?index++:action[0]===$_frs28x5ajcq8h494.INSERT?(insertAt(elm,action[1],index),index++):action[0]===$_frs28x5ajcq8h494.DELETE&&removeAt(elm,index)})},$_21skir59jcq8h491={read:function(elm){return $_292trzkjcq8h3fz.filter($_292trzkjcq8h3fz.map(elm.childNodes,getOuterHtml),function(item){return item.length>0})},write:function(fragments,elm){var currentFragments=$_292trzkjcq8h3fz.map(elm.childNodes,getOuterHtml);return applyDiff($_frs28x5ajcq8h494.diff(currentFragments,fragments),elm),elm}},hasIframes=function(html){return-1!==html.indexOf("</iframe>")},createFragmentedLevel=function(fragments){return{type:"fragmented",fragments:fragments,content:"",bookmark:null,beforeBookmark:null}},createCompleteLevel=function(content){return{type:"complete",fragments:null,content:content,bookmark:null,beforeBookmark:null}},getLevelContent=function(level){return"fragmented"===level.type?level.fragments.join(""):level.content},$_7m69ra58jcq8h48y={createFragmentedLevel:createFragmentedLevel,createCompleteLevel:createCompleteLevel,createFromEditor:function(editor){var fragments,content,trimmedFragments;return fragments=$_21skir59jcq8h491.read(editor.getBody()),trimmedFragments=$_de5suq4jcq8h2x0.bind(fragments,function(html){var trimmed=$_71pfug42jcq8h43l.trimInternal(editor.serializer,html);return trimmed.length>0?[trimmed]:[]}),content=trimmedFragments.join(""),hasIframes(content)?createFragmentedLevel(trimmedFragments):createCompleteLevel(content)},applyToEditor:function(editor,level,before){"fragmented"===level.type?$_21skir59jcq8h491.write(level.fragments,editor.getBody()):editor.setContent(level.content,{format:"raw"}),editor.selection.moveToBookmark(before?level.beforeBookmark:level.bookmark)},isEq:function(level1,level2){return!!level1&&!!level2&&getLevelContent(level1)===getLevelContent(level2)}},UndoManager=function(editor){var beforeBookmark,isFirstTypedCharacter,self=this,index=0,data=[],locks=0,isUnlocked=function(){return 0===locks},setTyping=function(typing){isUnlocked()&&(self.typing=typing)},setDirty=function(state){editor.setDirty(state)},addNonTypingUndoLevel=function(e){setTyping(!1),self.add({},e)},endTyping=function(){self.typing&&(setTyping(!1),self.add())};return editor.on("init",function(){self.add()}),editor.on("BeforeExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&(endTyping(),self.beforeChange())}),editor.on("ExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&addNonTypingUndoLevel(e)}),editor.on("ObjectResizeStart Cut",function(){self.beforeChange()}),editor.on("SaveContent ObjectResized blur",addNonTypingUndoLevel),editor.on("DragEnd",addNonTypingUndoLevel),editor.on("KeyUp",function(e){var keyCode=e.keyCode;e.isDefaultPrevented()||((keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||45===keyCode||e.ctrlKey)&&(addNonTypingUndoLevel(),editor.nodeChanged()),46!==keyCode&&8!==keyCode||editor.nodeChanged(),isFirstTypedCharacter&&self.typing&&!1===$_7m69ra58jcq8h48y.isEq($_7m69ra58jcq8h48y.createFromEditor(editor),data[0])&&(!1===editor.isDirty()&&(setDirty(!0),editor.fire("change",{level:data[0],lastLevel:null})),editor.fire("TypingUndo"),isFirstTypedCharacter=!1,editor.nodeChanged()))}),editor.on("KeyDown",function(e){var keyCode=e.keyCode;if(!e.isDefaultPrevented())if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||45===keyCode)self.typing&&addNonTypingUndoLevel(e);else{var modKey=e.ctrlKey&&!e.altKey||e.metaKey;!(keyCode<16||keyCode>20)||224===keyCode||91===keyCode||self.typing||modKey||(self.beforeChange(),setTyping(!0),self.add({},e),isFirstTypedCharacter=!0)}}),editor.on("MouseDown",function(e){self.typing&&addNonTypingUndoLevel(e)}),editor.addShortcut("meta+z","","Undo"),editor.addShortcut("meta+y,meta+shift+z","","Redo"),editor.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||editor.nodeChanged()}),self={data:data,typing:!1,beforeChange:function(){isUnlocked()&&(beforeBookmark=$_4iu6be2ajcq8h3pp.getUndoBookmark(editor.selection))},add:function(level,event){var i,lastLevel,currentLevel,settings=editor.settings;if(currentLevel=$_7m69ra58jcq8h48y.createFromEditor(editor),level=level||{},level=$_topwtjjcq8h3fq.extend(level,currentLevel),!1===isUnlocked()||editor.removed)return null;if(lastLevel=data[index],editor.fire("BeforeAddUndo",{level:level,lastLevel:lastLevel,originalEvent:event}).isDefaultPrevented())return null;if(lastLevel&&$_7m69ra58jcq8h48y.isEq(lastLevel,level))return null;if(data[index]&&(data[index].beforeBookmark=beforeBookmark),settings.custom_undo_redo_levels&&data.length>settings.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,index=data.length}level.bookmark=$_4iu6be2ajcq8h3pp.getUndoBookmark(editor.selection),index<data.length-1&&(data.length=index+1),data.push(level),index=data.length-1;var args={level:level,lastLevel:lastLevel,originalEvent:event};return editor.fire("AddUndo",args),index>0&&(setDirty(!0),editor.fire("change",args)),level},undo:function(){var level;return self.typing&&(self.add(),self.typing=!1,setTyping(!1)),index>0&&(level=data[--index],$_7m69ra58jcq8h48y.applyToEditor(editor,level,!0),setDirty(!0),editor.fire("undo",{level:level})),level},redo:function(){var level;return index<data.length-1&&(level=data[++index],$_7m69ra58jcq8h48y.applyToEditor(editor,level,!1),setDirty(!0),editor.fire("redo",{level:level})),level},clear:function(){data=[],index=0,self.typing=!1,self.data=data,editor.fire("ClearUndos")},hasUndo:function(){return index>0||self.typing&&data[0]&&!$_7m69ra58jcq8h48y.isEq($_7m69ra58jcq8h48y.createFromEditor(editor),data[0])},hasRedo:function(){return index<data.length-1&&!self.typing},transact:function(callback){return endTyping(),self.beforeChange(),self.ignore(callback),self.add()},ignore:function(callback){try{locks++,callback()}finally{locks--}},extra:function(callback1,callback2){var lastLevel,bookmark;self.transact(callback1)&&(bookmark=data[index].bookmark,lastLevel=data[index-1],$_7m69ra58jcq8h48y.applyToEditor(editor,lastLevel,!0),self.transact(callback2)&&(data[index-1].beforeBookmark=bookmark))}}},postProcessHooks={},filter$2=$_292trzkjcq8h3fz.filter,each$14=$_292trzkjcq8h3fz.each;!function(name,hook){var hooks=postProcessHooks[name];hooks||(postProcessHooks[name]=hooks=[]),postProcessHooks[name].push(hook)}("pre",function(editor){var isPre,blocks,rng=editor.selection.getRng(),joinPre=function(pre1,pre2){DomQuery(pre2).remove(),DomQuery(pre1).append("<br><br>").append(pre2.childNodes)};isPre=$_bpl7e51qjcq8h3kz.matchNodeNames("pre"),rng.collapsed||(blocks=editor.selection.getSelectedBlocks(),each$14(filter$2(filter$2(blocks,isPre),function(pre){return isPre(pre.previousSibling)&&-1!==$_292trzkjcq8h3fz.indexOf(blocks,pre.previousSibling)}),function(pre){joinPre(pre.previousSibling,pre)}))});var $_fdyc4z5djcq8h49m={postProcess:function(name,editor){each$14(postProcessHooks[name],function(hook){hook(editor)})}},each$17=$_topwtjjcq8h3fq.each,getEndChild=function(container,index){var childNodes=container.childNodes;return--index>childNodes.length-1?index=childNodes.length-1:index<0&&(index=0),childNodes[index]||container},$_d9iprm5gjcq8h4ai={walk:function(dom,rng,callback){var ancestor,startPoint,endPoint,node,parent,siblings,nodes,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if((nodes=dom.select("td[data-mce-selected],th[data-mce-selected]")).length>0)each$17(nodes,function(node){callback([node])});else{var exclude=function(nodes){var node;return 3===(node=nodes[0]).nodeType&&node===startContainer&&startOffset>=node.nodeValue.length&&nodes.splice(0,1),node=nodes[nodes.length-1],0===endOffset&&nodes.length>0&&node===endContainer&&3===node.nodeType&&nodes.splice(nodes.length-1,1),nodes},collectSiblings=function(node,name,endNode){for(var siblings=[];node&&node!==endNode;node=node[name])siblings.push(node);return siblings},findEndPoint=function(node,root){do{if(node.parentNode===root)return node;node=node.parentNode}while(node)},walkBoundary=function(startNode,endNode,next){var siblingName=next?"nextSibling":"previousSibling";for(parent=(node=startNode).parentNode;node&&node!==endNode;node=parent)parent=node.parentNode,(siblings=collectSiblings(node===startNode?node:node[siblingName],siblingName)).length&&(next||siblings.reverse(),callback(exclude(siblings)))};if(1===startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=startContainer.childNodes[startOffset]),1===endContainer.nodeType&&endContainer.hasChildNodes()&&(endContainer=getEndChild(endContainer,endOffset)),startContainer===endContainer)return callback(exclude([startContainer]));for(ancestor=dom.findCommonAncestor(startContainer,endContainer),node=startContainer;node;node=node.parentNode){if(node===endContainer)return walkBoundary(startContainer,ancestor,!0);if(node===ancestor)break}for(node=endContainer;node;node=node.parentNode){if(node===startContainer)return walkBoundary(endContainer,ancestor);if(node===ancestor)break}startPoint=findEndPoint(startContainer,ancestor)||startContainer,endPoint=findEndPoint(endContainer,ancestor)||endContainer,walkBoundary(startContainer,startPoint,!0),(siblings=collectSiblings(startPoint===startContainer?startPoint:startPoint.nextSibling,"nextSibling",endPoint===endContainer?endPoint.nextSibling:endPoint)).length&&callback(exclude(siblings)),walkBoundary(endContainer,endPoint)}}},MCE_ATTR_RE=/^(src|href|style)$/,each$16=$_topwtjjcq8h3fq.each,isEq$5=$_9psjk33gjcq8h3wq.isEq,isTableCell$3=function(node){return/^(TH|TD)$/.test(node.nodeName)},getContainer=function(ed,rng,start){var container,offset,lastIdx;return container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],$_bpl7e51qjcq8h3kz.isElement(container)&&(lastIdx=container.childNodes.length-1,!start&&offset&&offset--,container=container.childNodes[offset>lastIdx?lastIdx:offset]),$_bpl7e51qjcq8h3kz.isText(container)&&start&&offset>=container.nodeValue.length&&(container=new TreeWalker(container,ed.getBody()).next()||container),$_bpl7e51qjcq8h3kz.isText(container)&&!start&&0===offset&&(container=new TreeWalker(container,ed.getBody()).prev()||container),container},wrap$2=function(dom,node,name,attrs){var wrapper=dom.create(name,attrs);return node.parentNode.insertBefore(wrapper,node),wrapper.appendChild(node),wrapper},matchName$1=function(dom,node,format){return!!isEq$5(node,format.inline)||(!!isEq$5(node,format.block)||(format.selector?$_bpl7e51qjcq8h3kz.isElement(node)&&dom.is(node,format.selector):void 0))},isColorFormatAndAnchor=function(node,format){return format.links&&"A"===node.tagName},find$4=function(dom,node,next,inc){return!(node=$_9psjk33gjcq8h3wq.getNonWhiteSpaceSibling(node,next,inc))||"BR"===node.nodeName||dom.isBlock(node)},removeNode$1=function(ed,node,format){var rootBlockElm,parentNode=node.parentNode,dom=ed.dom,forcedRootBlock=ed.settings.forced_root_block;format.block&&(forcedRootBlock?parentNode===dom.getRoot()&&(format.list_block&&isEq$5(node,format.list_block)||each$16($_topwtjjcq8h3fq.grep(node.childNodes),function(node){$_9psjk33gjcq8h3wq.isValid(ed,forcedRootBlock,node.nodeName.toLowerCase())?rootBlockElm?rootBlockElm.appendChild(node):(rootBlockElm=wrap$2(dom,node,forcedRootBlock),dom.setAttribs(rootBlockElm,ed.settings.forced_root_block_attrs)):rootBlockElm=0})):dom.isBlock(node)&&!dom.isBlock(parentNode)&&(find$4(dom,node,!1)||find$4(dom,node.firstChild,!0,1)||node.insertBefore(dom.create("br"),node.firstChild),find$4(dom,node,!0)||find$4(dom,node.lastChild,!1,1)||node.appendChild(dom.create("br")))),format.selector&&format.inline&&!isEq$5(format.inline,node)||dom.remove(node,1)},removeFormat=function(ed,format,vars,node,compareNode){var i,attrs,stylesModified,dom=ed.dom;if(!matchName$1(dom,node,format)&&!isColorFormatAndAnchor(node,format))return!1;if("all"!==format.remove)for(each$16(format.styles,function(value,name){value=$_9psjk33gjcq8h3wq.normalizeStyleValue(dom,$_9psjk33gjcq8h3wq.replaceVars(value,vars),name),"number"==typeof name&&(name=value,compareNode=0),(format.remove_similar||!compareNode||isEq$5($_9psjk33gjcq8h3wq.getStyle(dom,compareNode,name),value))&&dom.setStyle(node,name,""),stylesModified=1}),stylesModified&&""===dom.getAttrib(node,"style")&&(node.removeAttribute("style"),node.removeAttribute("data-mce-style")),each$16(format.attributes,function(value,name){var valueOut;if(value=$_9psjk33gjcq8h3wq.replaceVars(value,vars),"number"==typeof name&&(name=value,compareNode=0),!compareNode||isEq$5(dom.getAttrib(compareNode,name),value)){if("class"===name&&(value=dom.getAttrib(node,name))&&(valueOut="",each$16(value.split(/\s+/),function(cls){/mce\-\w+/.test(cls)&&(valueOut+=(valueOut?" ":"")+cls)}),valueOut))return void dom.setAttrib(node,name,valueOut);"class"===name&&node.removeAttribute("className"),MCE_ATTR_RE.test(name)&&node.removeAttribute("data-mce-"+name),node.removeAttribute(name)}}),each$16(format.classes,function(value){value=$_9psjk33gjcq8h3wq.replaceVars(value,vars),compareNode&&!dom.hasClass(compareNode,value)||dom.removeClass(node,value)}),attrs=dom.getAttribs(node),i=0;i<attrs.length;i++){var attrName=attrs[i].nodeName;if(0!==attrName.indexOf("_")&&0!==attrName.indexOf("data-"))return!1}return"none"!==format.remove?(removeNode$1(ed,node,format),!0):void 0},findFormatRoot=function(editor,container,name,vars,similar){var formatRoot;return each$16($_9psjk33gjcq8h3wq.getParents(editor.dom,container.parentNode).reverse(),function(parent){var format;formatRoot||"_start"===parent.id||"_end"===parent.id||(format=$_1k94m23hjcq8h3wu.matchNode(editor,parent,name,vars,similar))&&!1!==format.split&&(formatRoot=parent)}),formatRoot},wrapAndSplit=function(editor,formatList,formatRoot,container,target,split,format,vars){var parent,clone,lastClone,firstClone,i,formatRootParent,dom=editor.dom;if(formatRoot){for(formatRootParent=formatRoot.parentNode,parent=container.parentNode;parent&&parent!==formatRootParent;parent=parent.parentNode){for(clone=dom.clone(parent,!1),i=0;i<formatList.length;i++)if(removeFormat(editor,formatList[i],vars,clone,clone)){clone=0;break}clone&&(lastClone&&clone.appendChild(lastClone),firstClone||(firstClone=clone),lastClone=clone)}!split||format.mixed&&dom.isBlock(formatRoot)||(container=dom.split(formatRoot,container)),lastClone&&(target.parentNode.insertBefore(lastClone,target),firstClone.appendChild(target))}return container},$_1xyrfh5fjcq8h4a8={removeFormat:removeFormat,remove:function(ed,name,vars,node,similar){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],contentEditable=!0,dom=ed.dom,selection=ed.selection,splitToFormatRoot=function(container){var formatRoot=findFormatRoot(ed,container,name,vars,similar);return wrapAndSplit(ed,formatList,formatRoot,container,container,!0,format,vars)},process=function(node){var children,i,l,lastContentEditable,hasContentEditableState;if($_bpl7e51qjcq8h3kz.isElement(node)&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),children=$_topwtjjcq8h3fq.grep(node.childNodes),contentEditable&&!hasContentEditableState)for(i=0,l=formatList.length;i<l&&!removeFormat(ed,formatList[i],vars,node,node);i++);if(format.deep&&children.length){for(i=0,l=children.length;i<l;i++)process(children[i]);hasContentEditableState&&(contentEditable=lastContentEditable)}},unwrap=function(start){var node=dom.get(start?"_start":"_end"),out=node[start?"firstChild":"lastChild"];return $_5o3jsi29jcq8h3pn.isBookmarkNode(out)&&(out=out[start?"firstChild":"lastChild"]),$_bpl7e51qjcq8h3kz.isText(out)&&0===out.data.length&&(out=start?node.previousSibling||node.nextSibling:node.nextSibling||node.previousSibling),dom.remove(node,!0),out},removeRngStyle=function(rng){var startContainer,endContainer,commonAncestorContainer=rng.commonAncestorContainer;if(rng=$_3sut9h3fjcq8h3wi.expandRng(ed,rng,formatList,!0),format.split){if(startContainer=getContainer(ed,rng,!0),endContainer=getContainer(ed,rng),startContainer!==endContainer){if(/^(TR|TH|TD)$/.test(startContainer.nodeName)&&startContainer.firstChild&&(startContainer="TR"===startContainer.nodeName?startContainer.firstChild.firstChild||startContainer:startContainer.firstChild||startContainer),commonAncestorContainer&&/^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName)&&isTableCell$3(endContainer)&&endContainer.firstChild&&(endContainer=endContainer.firstChild||endContainer),dom.isChildOf(startContainer,endContainer)&&startContainer!==endContainer&&!dom.isBlock(endContainer)&&!isTableCell$3(startContainer)&&!isTableCell$3(endContainer))return startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),void(startContainer=unwrap(!0));startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),endContainer=wrap$2(dom,endContainer,"span",{id:"_end","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),splitToFormatRoot(endContainer),startContainer=unwrap(!0),endContainer=unwrap()}else startContainer=endContainer=splitToFormatRoot(startContainer);rng.startContainer=startContainer.parentNode?startContainer.parentNode:startContainer,rng.startOffset=dom.nodeIndex(startContainer),rng.endContainer=endContainer.parentNode?endContainer.parentNode:endContainer,rng.endOffset=dom.nodeIndex(endContainer)+1}$_d9iprm5gjcq8h4ai.walk(dom,rng,function(nodes){each$16(nodes,function(node){process(node),$_bpl7e51qjcq8h3kz.isElement(node)&&"underline"===ed.dom.getStyle(node,"text-decoration")&&node.parentNode&&"underline"===$_9psjk33gjcq8h3wq.getTextDecoration(dom,node.parentNode)&&removeFormat(ed,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,node)})})};if(node)node.nodeType?((rng=dom.createRng()).setStartBefore(node),rng.setEndAfter(node),removeRngStyle(rng)):removeRngStyle(node);else if("false"!==dom.getContentEditable(selection.getNode()))selection.isCollapsed()&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length?$_24rn4g3ejcq8h3w4.removeCaretFormat(ed,name,vars,similar):(bookmark=selection.getBookmark(),removeRngStyle(selection.getRng()),selection.moveToBookmark(bookmark),format.inline&&$_1k94m23hjcq8h3wu.match(ed,name,vars,selection.getStart())&&$_9psjk33gjcq8h3wq.moveStart(dom,selection,selection.getRng()),ed.nodeChanged());else{node=selection.getNode();for(var i=0,l=formatList.length;i<l&&(!formatList[i].ceFalseOverride||!removeFormat(ed,formatList[i],vars,node,node));i++);}}},each$15=$_topwtjjcq8h3fq.each,isElementNode$1=function(node){return node&&1===node.nodeType&&!$_5o3jsi29jcq8h3pn.isBookmarkNode(node)&&!$_24rn4g3ejcq8h3w4.isCaretNode(node)&&!$_bpl7e51qjcq8h3kz.isBogus(node)},findElementSibling=function(node,siblingName){var sibling;for(sibling=node;sibling;sibling=sibling[siblingName]){if(3===sibling.nodeType&&0!==sibling.nodeValue.length)return node;if(1===sibling.nodeType&&!$_5o3jsi29jcq8h3pn.isBookmarkNode(sibling))return sibling}return node},mergeSiblingsNodes=function(dom,prev,next){var sibling,tmpSibling,elementUtils=new ElementUtils(dom);if(prev&&next&&(prev=findElementSibling(prev,"previousSibling"),next=findElementSibling(next,"nextSibling"),elementUtils.compare(prev,next))){for(sibling=prev.nextSibling;sibling&&sibling!==next;)tmpSibling=sibling,sibling=sibling.nextSibling,prev.appendChild(tmpSibling);return dom.remove(next),$_topwtjjcq8h3fq.each($_topwtjjcq8h3fq.grep(next.childNodes),function(node){prev.appendChild(node)}),prev}return next},processChildElements$1=function(node,filter,process){each$15(node.childNodes,function(node){isElementNode$1(node)&&(filter(node)&&process(node),node.hasChildNodes()&&processChildElements$1(node,filter,process))})},hasStyle=function(dom,name){return $_djct026jcq8h2xw.curry(function(name,node){return!(!node||!$_9psjk33gjcq8h3wq.getStyle(dom,node,name))},name)},applyStyle=function(dom,name,value){return $_djct026jcq8h2xw.curry(function(name,value,node){dom.setStyle(node,name,value),""===node.getAttribute("style")&&node.removeAttribute("style"),unwrapEmptySpan(dom,node)},name,value)},unwrapEmptySpan=function(dom,node){"SPAN"===node.nodeName&&0===dom.getAttribs(node).length&&dom.remove(node,!0)},processUnderlineAndColor=function(dom,node){var textDecoration;1===node.nodeType&&node.parentNode&&1===node.parentNode.nodeType&&(textDecoration=$_9psjk33gjcq8h3wq.getTextDecoration(dom,node.parentNode),dom.getStyle(node,"color")&&textDecoration?dom.setStyle(node,"text-decoration",textDecoration):dom.getStyle(node,"text-decoration")===textDecoration&&dom.setStyle(node,"text-decoration",null))},clearChildStyles=function(dom,format,node){if(format.clear_child_styles){var selector=format.links?"*:not(a)":"*";each$15(dom.select(selector,node),function(node){isElementNode$1(node)&&each$15(format.styles,function(value,name){dom.setStyle(node,name,"")})})}},$_1y0zzu5ejcq8h4a0={mergeWithChildren:function(editor,formatList,vars,node){each$15(formatList,function(format){each$15(editor.dom.select(format.inline,node),function(child){isElementNode$1(child)&&$_1xyrfh5fjcq8h4a8.removeFormat(editor,format,vars,child,format.exact?child:null)}),clearChildStyles(editor.dom,format,node)})},mergeUnderlineAndColor:function(dom,format,vars,node){(format.styles.color||format.styles.textDecoration)&&($_topwtjjcq8h3fq.walk(node,$_djct026jcq8h2xw.curry(processUnderlineAndColor,dom),"childNodes"),processUnderlineAndColor(dom,node))},mergeBackgroundColorAndFontSize:function(dom,format,vars,node){format.styles&&format.styles.backgroundColor&&processChildElements$1(node,hasStyle(dom,"fontSize"),applyStyle(dom,"backgroundColor",$_9psjk33gjcq8h3wq.replaceVars(format.styles.backgroundColor,vars)))},mergeSubSup:function(dom,format,vars,node){"sub"!==format.inline&&"sup"!==format.inline||(processChildElements$1(node,hasStyle(dom,"fontSize"),applyStyle(dom,"fontSize","")),dom.remove(dom.select("sup"===format.inline?"sub":"sup",node),!0))},mergeSiblings:function(dom,format,vars,node){node&&!1!==format.merge_siblings&&(node=mergeSiblingsNodes(dom,$_9psjk33gjcq8h3wq.getNonWhiteSpaceSibling(node),node),node=mergeSiblingsNodes(dom,node,$_9psjk33gjcq8h3wq.getNonWhiteSpaceSibling(node,!0)))},mergeWithParents:function(editor,format,name,vars,node){$_1k94m23hjcq8h3wu.matchNode(editor,node.parentNode,name,vars)&&$_1xyrfh5fjcq8h4a8.removeFormat(editor,format,vars,node)||format.merge_with_parents&&editor.dom.getParent(node.parentNode,function(parent){if($_1k94m23hjcq8h3wu.matchNode(editor,parent,name,vars))return $_1xyrfh5fjcq8h4a8.removeFormat(editor,format,vars,node),!0})}},each$13=$_topwtjjcq8h3fq.each,isElementNode=function(node){return node&&1===node.nodeType&&!$_5o3jsi29jcq8h3pn.isBookmarkNode(node)&&!$_24rn4g3ejcq8h3w4.isCaretNode(node)&&!$_bpl7e51qjcq8h3kz.isBogus(node)},applyFormat=function(ed,name,vars,node){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],isCollapsed=!node&&ed.selection.isCollapsed(),dom=ed.dom,selection=ed.selection,setElementFormat=function(elm,fmt){if(fmt=fmt||format,elm){if(fmt.onformat&&fmt.onformat(elm,fmt,vars,node),each$13(fmt.styles,function(value,name){dom.setStyle(elm,name,$_9psjk33gjcq8h3wq.replaceVars(value,vars))}),fmt.styles){var styleVal=dom.getAttrib(elm,"style");styleVal&&elm.setAttribute("data-mce-style",styleVal)}each$13(fmt.attributes,function(value,name){dom.setAttrib(elm,name,$_9psjk33gjcq8h3wq.replaceVars(value,vars))}),each$13(fmt.classes,function(value){value=$_9psjk33gjcq8h3wq.replaceVars(value,vars),dom.hasClass(elm,value)||dom.addClass(elm,value)})}},applyNodeStyle=function(formatList,node){var found=!1;return!!format.selector&&(each$13(formatList,function(format){if(!("collapsed"in format&&format.collapsed!==isCollapsed))return dom.is(node,format.selector)&&!$_24rn4g3ejcq8h3w4.isCaretNode(node)?(setElementFormat(node,format),found=!0,!1):void 0}),found)},applyRngStyle=function(dom,rng,bookmark,nodeSpecific){var wrapName,wrapElm,newWrappers=[],contentEditable=!0;wrapName=format.inline||format.block,wrapElm=dom.create(wrapName),setElementFormat(wrapElm),$_d9iprm5gjcq8h4ai.walk(dom,rng,function(nodes){var currentWrapElm,process=function(node){var nodeName,parentName,hasContentEditableState,lastContentEditable;if(lastContentEditable=contentEditable,nodeName=node.nodeName.toLowerCase(),parentName=node.parentNode.nodeName.toLowerCase(),1===node.nodeType&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),$_9psjk33gjcq8h3wq.isEq(nodeName,"br"))return currentWrapElm=0,void(format.block&&dom.remove(node));if(format.wrapper&&$_1k94m23hjcq8h3wu.matchNode(ed,node,name,vars))currentWrapElm=0;else{if(contentEditable&&!hasContentEditableState&&format.block&&!format.wrapper&&$_9psjk33gjcq8h3wq.isTextBlock(ed,nodeName)&&$_9psjk33gjcq8h3wq.isValid(ed,parentName,wrapName))return node=dom.rename(node,wrapName),setElementFormat(node),newWrappers.push(node),void(currentWrapElm=0);if(format.selector){var found=applyNodeStyle(formatList,node);if(!format.inline||found)return void(currentWrapElm=0)}!contentEditable||hasContentEditableState||!$_9psjk33gjcq8h3wq.isValid(ed,wrapName,nodeName)||!$_9psjk33gjcq8h3wq.isValid(ed,parentName,wrapName)||!nodeSpecific&&3===node.nodeType&&1===node.nodeValue.length&&65279===node.nodeValue.charCodeAt(0)||$_24rn4g3ejcq8h3w4.isCaretNode(node)||format.inline&&dom.isBlock(node)?(currentWrapElm=0,each$13($_topwtjjcq8h3fq.grep(node.childNodes),process),hasContentEditableState&&(contentEditable=lastContentEditable),currentWrapElm=0):(currentWrapElm||(currentWrapElm=dom.clone(wrapElm,!1),node.parentNode.insertBefore(currentWrapElm,node),newWrappers.push(currentWrapElm)),currentWrapElm.appendChild(node))}};each$13(nodes,process)}),!0===format.links&&each$13(newWrappers,function(node){var process=function(node){"A"===node.nodeName&&setElementFormat(node,format),each$13($_topwtjjcq8h3fq.grep(node.childNodes),process)};process(node)}),each$13(newWrappers,function(node){var childCount,getChildElementNode=function(root){var child=!1;return each$13(root.childNodes,function(node){if(isElementNode(node))return child=node,!1}),child};childCount=function(node){var count=0;return each$13(node.childNodes,function(node){$_9psjk33gjcq8h3wq.isWhiteSpaceNode(node)||$_5o3jsi29jcq8h3pn.isBookmarkNode(node)||count++}),count}(node),!(newWrappers.length>1)&&dom.isBlock(node)||0!==childCount?(format.inline||format.wrapper)&&(format.exact||1!==childCount||(node=function(node){var child,clone;return(child=getChildElementNode(node))&&!$_5o3jsi29jcq8h3pn.isBookmarkNode(child)&&$_1k94m23hjcq8h3wu.matchName(dom,child,format)&&(clone=dom.clone(child,!1),setElementFormat(clone),dom.replace(clone,node,!0),dom.remove(child,1)),clone||node}(node)),$_1y0zzu5ejcq8h4a0.mergeWithChildren(ed,formatList,vars,node),$_1y0zzu5ejcq8h4a0.mergeWithParents(ed,format,name,vars,node),$_1y0zzu5ejcq8h4a0.mergeBackgroundColorAndFontSize(dom,format,vars,node),$_1y0zzu5ejcq8h4a0.mergeSubSup(dom,format,vars,node),$_1y0zzu5ejcq8h4a0.mergeSiblings(dom,format,vars,node)):dom.remove(node,1)})};if("false"!==dom.getContentEditable(selection.getNode())){if(format){if(node)node.nodeType?applyNodeStyle(formatList,node)||((rng=dom.createRng()).setStartBefore(node),rng.setEndAfter(node),applyRngStyle(dom,$_3sut9h3fjcq8h3wi.expandRng(ed,rng,formatList),0,!0)):applyRngStyle(dom,node,0,!0);else if(isCollapsed&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length)$_24rn4g3ejcq8h3w4.applyCaretFormat(ed,name,vars);else{var curSelNode=ed.selection.getNode();ed.settings.forced_root_block||!formatList[0].defaultBlock||dom.getParent(curSelNode,dom.isBlock)||applyFormat(ed,formatList[0].defaultBlock),ed.selection.setRng($_3rk60s2ojcq8h3rn.normalize(ed.selection.getRng())),bookmark=selection.getBookmark(),applyRngStyle(dom,$_3sut9h3fjcq8h3wi.expandRng(ed,selection.getRng(),formatList)),format.styles&&$_1y0zzu5ejcq8h4a0.mergeUnderlineAndColor(dom,format,vars,curSelNode),selection.moveToBookmark(bookmark),$_9psjk33gjcq8h3wq.moveStart(dom,selection,selection.getRng()),ed.nodeChanged()}$_fdyc4z5djcq8h49m.postProcess(name,ed)}}else{node=selection.getNode();for(var i=0,l=formatList.length;i<l;i++)if(formatList[i].ceFalseOverride&&dom.is(node,formatList[i].selector))return void setElementFormat(node,formatList[i])}},$_aex0rx5cjcq8h49e={applyFormat:applyFormat},each$18=$_topwtjjcq8h3fq.each,setup$3=function(formatChangeData,editor){var currentFormats={};formatChangeData.set({}),editor.on("NodeChange",function(e){var parents=$_9psjk33gjcq8h3wq.getParents(editor.dom,e.element),matchedFormats={};parents=$_topwtjjcq8h3fq.grep(parents,function(node){return 1===node.nodeType&&!node.getAttribute("data-mce-bogus")}),each$18(formatChangeData.get(),function(callbacks,format){each$18(parents,function(node){return editor.formatter.matchNode(node,format,{},callbacks.similar)?(currentFormats[format]||(each$18(callbacks,function(callback){callback(!0,{node:node,format:format,parents:parents})}),currentFormats[format]=callbacks),matchedFormats[format]=callbacks,!1):!$_1k94m23hjcq8h3wu.matchesUnInheritedFormatSelector(editor,node,format)&&void 0})}),each$18(currentFormats,function(callbacks,format){matchedFormats[format]||(delete currentFormats[format],each$18(callbacks,function(callback){callback(!1,{node:e.element,format:format,parents:parents})}))})})},addListeners=function(formatChangeData,formats,callback,similar){var formatChangeItems=formatChangeData.get();each$18(formats.split(","),function(format){formatChangeItems[format]||(formatChangeItems[format]=[],formatChangeItems[format].similar=similar),formatChangeItems[format].push(callback)}),formatChangeData.set(formatChangeItems)},$_c3mg6f5hjcq8h4am={formatChanged:function(editor,formatChangeState,formats,callback,similar){null===formatChangeState.get()&&setup$3(formatChangeState,editor),addListeners(formatChangeState,formats,callback,similar)}},$_bepik65jjcq8h4ar={get:function(dom){var formats={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(elm,fmt,vars){$_topwtjjcq8h3fq.each(vars,function(value,key){dom.setAttrib(elm,key,value)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $_topwtjjcq8h3fq.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(name){formats[name]={block:name,remove:"all"}}),formats}},FormatRegistry=function(editor){var formats={},register=function(name,format){name&&("string"!=typeof name?$_topwtjjcq8h3fq.each(name,function(format,name){register(name,format)}):(format=format.length?format:[format],$_topwtjjcq8h3fq.each(format,function(format){void 0===format.deep&&(format.deep=!format.selector),void 0===format.split&&(format.split=!format.selector||format.inline),void 0===format.remove&&format.selector&&!format.inline&&(format.remove="none"),format.selector&&format.inline&&(format.mixed=!0,format.block_expand=!0),"string"==typeof format.classes&&(format.classes=format.classes.split(/\s+/))}),formats[name]=format))};return register($_bepik65jjcq8h4ar.get(editor.dom)),register(editor.settings.formats),{get:function(name){return name?formats[name]:formats},register:register,unregister:function(name){return name&&formats[name]&&delete formats[name],formats}}},each$19=$_topwtjjcq8h3fq.each,dom=DOMUtils.DOM,parsedSelectorToHtml=function(ancestry,editor){var elm,item,fragment,schema=editor&&editor.schema||Schema({}),decorate=function(elm,item){item.classes.length&&dom.addClass(elm,item.classes.join(" ")),dom.setAttribs(elm,item.attrs)},createElement=function(sItem){var elm;return item="string"==typeof sItem?{name:sItem,classes:[],attrs:{}}:sItem,elm=dom.create(item.name),decorate(elm,item),elm},getRequiredParent=function(elm,candidate){var name="string"!=typeof elm?elm.nodeName.toLowerCase():elm,elmRule=schema.getElementRule(name),parentsRequired=elmRule&&elmRule.parentsRequired;return!(!parentsRequired||!parentsRequired.length)&&(candidate&&-1!==$_topwtjjcq8h3fq.inArray(parentsRequired,candidate)?candidate:parentsRequired[0])},wrapInHtml=function(elm,ancestry,siblings){var parent,parentCandidate,parentRequired,ancestor=ancestry.length>0&&ancestry[0],ancestorName=ancestor&&ancestor.name;if(parentRequired=getRequiredParent(elm,ancestorName))ancestorName===parentRequired?(parentCandidate=ancestry[0],ancestry=ancestry.slice(1)):parentCandidate=parentRequired;else if(ancestor)parentCandidate=ancestry[0],ancestry=ancestry.slice(1);else if(!siblings)return elm;return parentCandidate&&(parent=createElement(parentCandidate)).appendChild(elm),siblings&&(parent||(parent=dom.create("div")).appendChild(elm),$_topwtjjcq8h3fq.each(siblings,function(sibling){var siblingElm=createElement(sibling);parent.insertBefore(siblingElm,elm)})),wrapInHtml(parent,ancestry,parentCandidate&&parentCandidate.siblings)};return ancestry&&ancestry.length?(item=ancestry[0],elm=createElement(item),(fragment=dom.create("div")).appendChild(wrapInHtml(elm,ancestry.slice(1),item.siblings)),fragment):""},parseSelectorItem=function(item){var tagName,obj={classes:[],attrs:{}};return"*"!==(item=obj.selector=$_topwtjjcq8h3fq.trim(item))&&(tagName=item.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function($0,$1,$2,$3,$4){switch($1){case"#":obj.attrs.id=$2;break;case".":obj.classes.push($2);break;case":":-1!==$_topwtjjcq8h3fq.inArray("checked disabled enabled read-only required".split(" "),$2)&&(obj.attrs[$2]=$2)}if("["===$3){var m=$4.match(/([\w\-]+)(?:\=\"([^\"]+))?/);m&&(obj.attrs[m[1]]=m[2])}return""})),obj.name=tagName||"div",obj},parseSelector=function(selector){return selector&&"string"==typeof selector?(selector=selector.split(/\s*,\s*/)[0],selector=selector.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$_topwtjjcq8h3fq.map(selector.split(/(?:>|\s+(?![^\[\]]+\]))/),function(item){var siblings=$_topwtjjcq8h3fq.map(item.split(/(?:~\+|~|\+)/),parseSelectorItem),obj=siblings.pop();return siblings.length&&(obj.siblings=siblings),obj}).reverse()):[]},$_4wgnvg5kjcq8h4aw={getCssText:function(editor,format){var name,previewFrag,previewElm,items,parentFontSize,previewStyles,previewCss="";if(!1===(previewStyles=editor.settings.preview_styles))return"";"string"!=typeof previewStyles&&(previewStyles="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var removeVars=function(val){return val.replace(/%(\w+)/g,"")};if("string"==typeof format){if(!(format=editor.formatter.get(format)))return;format=format[0]}return"preview"in format&&!1===(previewStyles=format.preview)?"":(name=format.block||format.inline||"span",(items=parseSelector(format.selector)).length?(items[0].name||(items[0].name=name),name=format.selector,previewFrag=parsedSelectorToHtml(items,editor)):previewFrag=parsedSelectorToHtml([name],editor),previewElm=dom.select(name,previewFrag)[0]||previewFrag.firstChild,each$19(format.styles,function(value,name){(value=removeVars(value))&&dom.setStyle(previewElm,name,value)}),each$19(format.attributes,function(value,name){(value=removeVars(value))&&dom.setAttrib(previewElm,name,value)}),each$19(format.classes,function(value){value=removeVars(value),dom.hasClass(previewElm,value)||dom.addClass(previewElm,value)}),editor.fire("PreviewFormats"),dom.setStyles(previewFrag,{position:"absolute",left:-65535}),editor.getBody().appendChild(previewFrag),parentFontSize=dom.getStyle(editor.getBody(),"fontSize",!0),parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0,each$19(previewStyles.split(" "),function(name){var value=dom.getStyle(previewElm,name,!0);if(!("background-color"===name&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(value)&&(value=dom.getStyle(editor.getBody(),name,!0),"#ffffff"===dom.toHex(value).toLowerCase())||"color"===name&&"#000000"===dom.toHex(value).toLowerCase())){if("font-size"===name&&/em|%$/.test(value)){if(0===parentFontSize)return;value=(value=parseFloat(value)/(/%$/.test(value)?100:1))*parentFontSize+"px"}"border"===name&&value&&(previewCss+="padding:0 2px;"),previewCss+=name+":"+value+";"}}),editor.fire("AfterPreviewFormats"),dom.remove(previewFrag),previewCss)},parseSelector:parseSelector,selectorToHtml:function(selector,editor){return parsedSelectorToHtml(parseSelector(selector),editor)}},$_52hluy5ljcq8h4b3={toggle:function(editor,formats,name,vars,node){var fmt=formats.get(name);!$_1k94m23hjcq8h3wu.match(editor,name,vars,node)||"toggle"in fmt[0]&&!fmt[0].toggle?$_aex0rx5cjcq8h49e.applyFormat(editor,name,vars,node):$_1xyrfh5fjcq8h4a8.remove(editor,name,vars,node)}},$_63491f5mjcq8h4b4={setup:function(editor){editor.addShortcut("meta+b","","Bold"),editor.addShortcut("meta+i","","Italic"),editor.addShortcut("meta+u","","Underline");for(var i=1;i<=6;i++)editor.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);editor.addShortcut("access+7","",["FormatBlock",!1,"p"]),editor.addShortcut("access+8","",["FormatBlock",!1,"div"]),editor.addShortcut("access+9","",["FormatBlock",!1,"address"])}},Formatter=function(editor){var formats=FormatRegistry(editor),formatChangeState=Cell(null);return $_63491f5mjcq8h4b4.setup(editor),$_24rn4g3ejcq8h3w4.setup(editor),{get:formats.get,register:formats.register,unregister:formats.unregister,apply:$_djct026jcq8h2xw.curry($_aex0rx5cjcq8h49e.applyFormat,editor),remove:$_djct026jcq8h2xw.curry($_1xyrfh5fjcq8h4a8.remove,editor),toggle:$_djct026jcq8h2xw.curry($_52hluy5ljcq8h4b3.toggle,editor,formats),match:$_djct026jcq8h2xw.curry($_1k94m23hjcq8h3wu.match,editor),matchAll:$_djct026jcq8h2xw.curry($_1k94m23hjcq8h3wu.matchAll,editor),matchNode:$_djct026jcq8h2xw.curry($_1k94m23hjcq8h3wu.matchNode,editor),canApply:$_djct026jcq8h2xw.curry($_1k94m23hjcq8h3wu.canApply,editor),formatChanged:$_djct026jcq8h2xw.curry($_c3mg6f5hjcq8h4am.formatChanged,editor,formatChangeState),getCssText:$_djct026jcq8h2xw.curry($_4wgnvg5kjcq8h4aw.getCssText,editor)}},baseMerge=function(merger){return function(){for(var objects=new Array(arguments.length),i=0;i<objects.length;i++)objects[i]=arguments[i];if(0===objects.length)throw new Error("Can't merge zero objects");for(var ret={},j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject)curObject.hasOwnProperty(key)&&(ret[key]=merger(ret[key],curObject[key]))}return ret}},deepMerge=baseMerge(function(old,nu){return $_1i3etu12jcq8h3i8.isObject(old)&&$_1i3etu12jcq8h3i8.isObject(nu)?deepMerge(old,nu):nu}),merge=baseMerge(function(old,nu){return nu}),$_b4qnok5pjcq8h4bb={deepMerge:deepMerge,merge:merge},$_f3o3mg5qjcq8h4bd={firePreProcess:function(editor,args){return editor.fire("PreProcess",args)},firePostProcess:function(editor,args){return editor.fire("PostProcess",args)}},$_77dd0b5rjcq8h4bg={register:function(htmlParser,settings,dom){htmlParser.addAttributeFilter("data-mce-tabindex",function(nodes,name){for(var node,i=nodes.length;i--;)(node=nodes[i]).attr("tabindex",node.attributes.map["data-mce-tabindex"]),node.attr(name,null)}),htmlParser.addAttributeFilter("src,href,style",function(nodes,name){for(var node,value,i=nodes.length,internalName="data-mce-"+name,urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope;i--;)void 0!==(value=(node=nodes[i]).attributes.map[internalName])?(node.attr(name,value.length>0?value:null),node.attr(internalName,null)):(value=node.attributes.map[name],"style"===name?value=dom.serializeStyle(dom.parseStyle(value),node.name):urlConverter&&(value=urlConverter.call(urlConverterScope,value,name,node.name)),node.attr(name,value.length>0?value:null))}),htmlParser.addAttributeFilter("class",function(nodes){for(var node,value,i=nodes.length;i--;)(value=(node=nodes[i]).attr("class"))&&(value=node.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),node.attr("class",value.length>0?value:null))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes,name,args){for(var node,i=nodes.length;i--;)"bookmark"!==(node=nodes[i]).attributes.map["data-mce-type"]||args.cleanup||node.remove()}),htmlParser.addNodeFilter("noscript",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i].firstChild)&&(node.value=Entities.decode(node.value))}),htmlParser.addNodeFilter("script,style",function(nodes,name){for(var node,value,type,i=nodes.length,trim=function(value){return value.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)value=(node=nodes[i]).firstChild?node.firstChild.value:"","script"===name?((type=node.attr("type"))&&node.attr("type","mce-no/type"===type?null:type.replace(/^mce\-/,"")),"xhtml"===settings.element_format&&value.length>0&&(node.firstChild.value="// <![CDATA[\n"+trim(value)+"\n// ]]>")):"xhtml"===settings.element_format&&value.length>0&&(node.firstChild.value="\x3c!--\n"+trim(value)+"\n--\x3e")}),htmlParser.addNodeFilter("#comment",function(nodes){for(var node,i=nodes.length;i--;)0===(node=nodes[i]).value.indexOf("[CDATA[")?(node.name="#cdata",node.type=4,node.value=node.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===node.value.indexOf("mce:protected ")&&(node.name="#text",node.type=3,node.raw=!0,node.value=unescape(node.value).substr(14))}),htmlParser.addNodeFilter("xml:namespace,input",function(nodes,name){for(var node,i=nodes.length;i--;)7===(node=nodes[i]).type?node.remove():1===node.type&&("input"!==name||"type"in node.attributes.map||node.attr("type","text"))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes){$_de5suq4jcq8h2x0.each(nodes,function(node){"format-caret"===node.attr("data-mce-type")&&(node.isEmpty(htmlParser.schema.getNonEmptyElements())?node.remove():node.unwrap())})}),htmlParser.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)})},trimTrailingBr:function(rootNode){var brNode1,brNode2,isBr=function(node){return node&&"br"===node.name};isBr(brNode1=rootNode.lastChild)&&isBr(brNode2=brNode1.prev)&&(brNode1.remove(),brNode2.remove())}},preProcess=function(editor,node,args){var impl,doc,oldDoc,dom=editor.dom;return node=node.cloneNode(!0),(impl=document.implementation).createHTMLDocument&&(doc=impl.createHTMLDocument(""),$_topwtjjcq8h3fq.each("BODY"===node.nodeName?node.childNodes:[node],function(node){doc.body.appendChild(doc.importNode(node,!0))}),node="BODY"!==node.nodeName?doc.body.firstChild:doc.body,oldDoc=dom.doc,dom.doc=doc),$_f3o3mg5qjcq8h4bd.firePreProcess(editor,$_b4qnok5pjcq8h4bb.merge(args,{node:node})),oldDoc&&(dom.doc=oldDoc),node},shouldFireEvent=function(editor,args){return editor&&editor.hasEventListeners("PreProcess")&&!args.no_events},$_5j586k5sjcq8h4by={process:function(editor,node,args){return shouldFireEvent(editor,args)?preProcess(editor,node,args):node}},removeAttrs=function(node,names){$_de5suq4jcq8h2x0.each(names,function(name){node.attr(name,null)})},addFontToSpansFilter=function(domParser,styles,fontSizes){domParser.addNodeFilter("font",function(nodes){$_de5suq4jcq8h2x0.each(nodes,function(node){var props=styles.parse(node.attr("style")),color=node.attr("color"),face=node.attr("face"),size=node.attr("size");color&&(props.color=color),face&&(props["font-family"]=face),size&&(props["font-size"]=fontSizes[parseInt(node.attr("size"),10)-1]),node.name="span",node.attr("style",styles.serialize(props)),removeAttrs(node,["color","face","size"])})})},addStrikeToSpanFilter=function(domParser,styles){domParser.addNodeFilter("strike",function(nodes){$_de5suq4jcq8h2x0.each(nodes,function(node){var props=styles.parse(node.attr("style"));props["text-decoration"]="line-through",node.name="span",node.attr("style",styles.serialize(props))})})},addFilters=function(domParser,settings){var styles=Styles();settings.convert_fonts_to_spans&&addFontToSpansFilter(domParser,styles,$_topwtjjcq8h3fq.explode(settings.font_size_legacy_values)),addStrikeToSpanFilter(domParser,styles)},$_4yeof95ujcq8h4ci={register:function(domParser,settings){settings.inline_styles&&addFilters(domParser,settings)}},whiteSpaceRegExp$3=/^[ \t\r\n]*$/,typeLookup={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},walk$2=function(node,rootNode,prev){var sibling,parent,startName=prev?"lastChild":"firstChild",siblingName=prev?"prev":"next";if(node[startName])return node[startName];if(node!==rootNode){if(sibling=node[siblingName])return sibling;for(parent=node.parent;parent&&parent!==rootNode;parent=parent.parent)if(sibling=parent[siblingName])return sibling}},Node$2=function(name,type){this.name=name,this.type=type,1===type&&(this.attributes=[],this.attributes.map={})};Node$2.prototype={replace:function(node){var self=this;return node.parent&&node.remove(),self.insert(node,self),self.remove(),self},attr:function(name,value){var attrs,i,self=this;if("string"!=typeof name){for(i in name)self.attr(i,name[i]);return self}if(attrs=self.attributes){if(void 0!==value){if(null===value){if(name in attrs.map)for(delete attrs.map[name],i=attrs.length;i--;)if(attrs[i].name===name)return attrs=attrs.splice(i,1),self;return self}if(name in attrs.map){for(i=attrs.length;i--;)if(attrs[i].name===name){attrs[i].value=value;break}}else attrs.push({name:name,value:value});return attrs.map[name]=value,self}return attrs.map[name]}},clone:function(){var i,l,selfAttrs,selfAttr,cloneAttrs,self=this,clone=new Node$2(self.name,self.type);if(selfAttrs=self.attributes){for((cloneAttrs=[]).map={},i=0,l=selfAttrs.length;i<l;i++)"id"!==(selfAttr=selfAttrs[i]).name&&(cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value},cloneAttrs.map[selfAttr.name]=selfAttr.value);clone.attributes=cloneAttrs}return clone.value=self.value,clone.shortEnded=self.shortEnded,clone},wrap:function(wrapper){var self=this;return self.parent.insert(wrapper,self),wrapper.append(self),self},unwrap:function(){var node,next,self=this;for(node=self.firstChild;node;)next=node.next,self.insert(node,self,!0),node=next;self.remove()},remove:function(){var self=this,parent=self.parent,next=self.next,prev=self.prev;return parent&&(parent.firstChild===self?(parent.firstChild=next,next&&(next.prev=null)):prev.next=next,parent.lastChild===self?(parent.lastChild=prev,prev&&(prev.next=null)):next.prev=prev,self.parent=self.next=self.prev=null),self},append:function(node){var last,self=this;return node.parent&&node.remove(),(last=self.lastChild)?(last.next=node,node.prev=last,self.lastChild=node):self.lastChild=self.firstChild=node,node.parent=self,node},insert:function(node,refNode,before){var parent;return node.parent&&node.remove(),parent=refNode.parent||this,before?(refNode===parent.firstChild?parent.firstChild=node:refNode.prev.next=node,node.prev=refNode.prev,node.next=refNode,refNode.prev=node):(refNode===parent.lastChild?parent.lastChild=node:refNode.next.prev=node,node.next=refNode.next,node.prev=refNode,refNode.next=node),node.parent=parent,node},getAll:function(name){var node,self=this,collection=[];for(node=self.firstChild;node;node=walk$2(node,self))node.name===name&&collection.push(node);return collection},empty:function(){var nodes,i,node,self=this;if(self.firstChild){for(nodes=[],node=self.firstChild;node;node=walk$2(node,self))nodes.push(node);for(i=nodes.length;i--;)(node=nodes[i]).parent=node.firstChild=node.lastChild=node.next=node.prev=null}return self.firstChild=self.lastChild=null,self},isEmpty:function(elements,whitespace,predicate){var i,name,self=this,node=self.firstChild;if(whitespace=whitespace||{},node)do{if(1===node.type){if(node.attributes.map["data-mce-bogus"])continue;if(elements[node.name])return!1;for(i=node.attributes.length;i--;)if("name"===(name=node.attributes[i].name)||0===name.indexOf("data-mce-bookmark"))return!1}if(8===node.type)return!1;if(3===node.type&&!whiteSpaceRegExp$3.test(node.value))return!1;if(3===node.type&&node.parent&&whitespace[node.parent.name]&&whiteSpaceRegExp$3.test(node.value))return!1;if(predicate&&predicate(node))return!1}while(node=walk$2(node,self));return!0},walk:function(prev){return walk$2(this,null,prev)}},Node$2.create=function(name,attrs){var node,attrName;if(node=new Node$2(name,typeLookup[name]||1),attrs)for(attrName in attrs)node.attr(attrName,attrs[attrName]);return node};var makeMap$4=$_topwtjjcq8h3fq.makeMap,each$20=$_topwtjjcq8h3fq.each,explode$4=$_topwtjjcq8h3fq.explode,extend$4=$_topwtjjcq8h3fq.extend,paddEmptyNode=function(settings,args,blockElements,node){(settings.padd_empty_with_br||args.insert)&&blockElements[node.name]?node.empty().append(new Node$2("br","1")).shortEnded=!0:node.empty().append(new Node$2("#text","3")).value=""},isPaddedWithNbsp=function(node){return hasOnlyChild(node,"#text")&&""===node.firstChild.value},hasOnlyChild=function(node,name){return node&&node.firstChild&&node.firstChild===node.lastChild&&node.firstChild.name===name},isPadded=function(schema,node){var rule=schema.getElementRule(node.name);return rule&&rule.paddEmpty},isEmpty$1=function(schema,nonEmptyElements,whitespaceElements,node){return node.isEmpty(nonEmptyElements,whitespaceElements,function(node){return isPadded(schema,node)})},DomParser=function(settings,schema){var self={},nodeFilters={},attributeFilters=[],matchedNodes={},matchedAttributes={};(settings=settings||{}).validate=!("validate"in settings)||settings.validate,settings.root_name=settings.root_name||"body",self.schema=schema=schema||Schema();var fixInvalidChildren=function(nodes){var ni,node,parent,parents,newParent,currentNode,tempNode,childNode,i,nonEmptyElements,whitespaceElements,nonSplitableElements,textBlockElements,specialElements,sibling,nextNode;for(nonSplitableElements=makeMap$4("tr,td,th,tbody,thead,tfoot,table"),nonEmptyElements=schema.getNonEmptyElements(),whitespaceElements=schema.getWhiteSpaceElements(),textBlockElements=schema.getTextBlockElements(),specialElements=schema.getSpecialElements(),ni=0;ni<nodes.length;ni++)if((node=nodes[ni]).parent&&!node.fixed)if(textBlockElements[node.name]&&"li"===node.parent.name){for(sibling=node.next;sibling&&textBlockElements[sibling.name];)sibling.name="li",sibling.fixed=!0,node.parent.insert(sibling,node.parent),sibling=sibling.next;node.unwrap(node)}else{for(parents=[node],parent=node.parent;parent&&!schema.isValidChild(parent.name,node.name)&&!nonSplitableElements[parent.name];parent=parent.parent)parents.push(parent);if(parent&&parents.length>1){for(parents.reverse(),newParent=currentNode=self.filterNode(parents[0].clone()),i=0;i<parents.length-1;i++){for(schema.isValidChild(currentNode.name,parents[i].name)?(tempNode=self.filterNode(parents[i].clone()),currentNode.append(tempNode)):tempNode=currentNode,childNode=parents[i].firstChild;childNode&&childNode!==parents[i+1];)nextNode=childNode.next,tempNode.append(childNode),childNode=nextNode;currentNode=tempNode}isEmpty$1(schema,nonEmptyElements,whitespaceElements,newParent)?parent.insert(node,parents[0],!0):(parent.insert(newParent,parents[0],!0),parent.insert(node,newParent)),parent=parents[0],(isEmpty$1(schema,nonEmptyElements,whitespaceElements,parent)||hasOnlyChild(parent,"br"))&&parent.empty().remove()}else if(node.parent){if("li"===node.name){if((sibling=node.prev)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.append(node);continue}if((sibling=node.next)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.insert(node,sibling.firstChild,!0);continue}node.wrap(self.filterNode(new Node$2("ul",1)));continue}schema.isValidChild(node.parent.name,"div")&&schema.isValidChild("div",node.name)?node.wrap(self.filterNode(new Node$2("div",1))):specialElements[node.name]?node.empty().remove():node.unwrap()}}};return self.filterNode=function(node){var i,name,list;name in nodeFilters&&((list=matchedNodes[name])?list.push(node):matchedNodes[name]=[node]),i=attributeFilters.length;for(;i--;)(name=attributeFilters[i].name)in node.attributes.map&&((list=matchedAttributes[name])?list.push(node):matchedAttributes[name]=[node]);return node},self.addNodeFilter=function(name,callback){each$20(explode$4(name),function(name){var list=nodeFilters[name];list||(nodeFilters[name]=list=[]),list.push(callback)})},self.addAttributeFilter=function(name,callback){each$20(explode$4(name),function(name){var i;for(i=0;i<attributeFilters.length;i++)if(attributeFilters[i].name===name)return void attributeFilters[i].callbacks.push(callback);attributeFilters.push({name:name,callbacks:[callback]})})},self.parse=function(html,args){var parser,rootNode,node,nodes,i,l,fi,fl,list,name,validate,blockElements,startWhiteSpaceRegExp,isInWhiteSpacePreservedElement,endWhiteSpaceRegExp,allWhiteSpaceRegExp,isAllWhiteSpaceRegExp,whiteSpaceElements,children,nonEmptyElements,rootBlockName,invalidChildren=[];args=args||{},matchedNodes={},matchedAttributes={},blockElements=extend$4(makeMap$4("script,style,head,html,body,title,meta,param"),schema.getBlockElements()),nonEmptyElements=schema.getNonEmptyElements(),children=schema.children,validate=settings.validate,rootBlockName="forced_root_block"in args?args.forced_root_block:settings.forced_root_block,whiteSpaceElements=schema.getWhiteSpaceElements(),startWhiteSpaceRegExp=/^[ \t\r\n]+/,endWhiteSpaceRegExp=/[ \t\r\n]+$/,allWhiteSpaceRegExp=/[ \t\r\n]+/g,isAllWhiteSpaceRegExp=/^[ \t\r\n]+$/;var createNode=function(name,type){var list,node=new Node$2(name,type);return name in nodeFilters&&((list=matchedNodes[name])?list.push(node):matchedNodes[name]=[node]),node},removeWhitespaceBefore=function(node){var textNode,textNodeNext,textVal,sibling,blockElements=schema.getBlockElements();for(textNode=node.prev;textNode&&3===textNode.type;){if((textVal=textNode.value.replace(endWhiteSpaceRegExp,"")).length>0)return void(textNode.value=textVal);if(textNodeNext=textNode.next){if(3===textNodeNext.type&&textNodeNext.value.length){textNode=textNode.prev;continue}if(!blockElements[textNodeNext.name]&&"script"!==textNodeNext.name&&"style"!==textNodeNext.name){textNode=textNode.prev;continue}}sibling=textNode.prev,textNode.remove(),textNode=sibling}};if(parser=new SaxParser({validate:validate,allow_script_urls:settings.allow_script_urls,allow_conditional_comments:settings.allow_conditional_comments,self_closing_elements:function(input){var name,output={};for(name in input)"li"!==name&&"p"!==name&&(output[name]=input[name]);return output}(schema.getSelfClosingElements()),cdata:function(text){node.append(createNode("#cdata",4)).value=text},text:function(text,raw){var textNode;isInWhiteSpacePreservedElement||(text=text.replace(allWhiteSpaceRegExp," "),node.lastChild&&blockElements[node.lastChild.name]&&(text=text.replace(startWhiteSpaceRegExp,""))),0!==text.length&&((textNode=createNode("#text",3)).raw=!!raw,node.append(textNode).value=text)},comment:function(text){node.append(createNode("#comment",8)).value=text},pi:function(name,text){node.append(createNode(name,7)).value=text,removeWhitespaceBefore(node)},doctype:function(text){node.append(createNode("#doctype",10)).value=text,removeWhitespaceBefore(node)},start:function(name,attrs,empty){var newNode,attrFiltersLen,elementRule,attrName,parent;if(elementRule=validate?schema.getElementRule(name):{}){for((newNode=createNode(elementRule.outputName||name,1)).attributes=attrs,newNode.shortEnded=empty,node.append(newNode),(parent=children[node.name])&&children[newNode.name]&&!parent[newNode.name]&&invalidChildren.push(newNode),attrFiltersLen=attributeFilters.length;attrFiltersLen--;)(attrName=attributeFilters[attrFiltersLen].name)in attrs.map&&((list=matchedAttributes[attrName])?list.push(newNode):matchedAttributes[attrName]=[newNode]);blockElements[name]&&removeWhitespaceBefore(newNode),empty||(node=newNode),!isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!0)}},end:function(name){var textNode,elementRule,text,sibling,tempNode;if(elementRule=validate?schema.getElementRule(name):{}){if(blockElements[name]&&!isInWhiteSpacePreservedElement){if((textNode=node.firstChild)&&3===textNode.type)if((text=textNode.value.replace(startWhiteSpaceRegExp,"")).length>0)textNode.value=text,textNode=textNode.next;else for(sibling=textNode.next,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.next,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling;if((textNode=node.lastChild)&&3===textNode.type)if((text=textNode.value.replace(endWhiteSpaceRegExp,"")).length>0)textNode.value=text,textNode=textNode.prev;else for(sibling=textNode.prev,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.prev,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling}if(isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!1),elementRule.removeEmpty&&isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,node)&&!node.attributes.map.name&&!node.attributes.map.id)return tempNode=node.parent,blockElements[node.name]?node.empty().remove():node.unwrap(),void(node=tempNode);elementRule.paddEmpty&&(isPaddedWithNbsp(node)||isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,node))&&paddEmptyNode(settings,args,blockElements,node),node=node.parent}}},schema),rootNode=node=new Node$2(args.context||settings.root_name,11),parser.parse(html),validate&&invalidChildren.length&&(args.context?args.invalid=!0:fixInvalidChildren(invalidChildren)),rootBlockName&&("body"===rootNode.name||args.isRootContent)&&function(){var next,rootBlockNode,node=rootNode.firstChild,trim=function(rootBlockNode){rootBlockNode&&((node=rootBlockNode.firstChild)&&3===node.type&&(node.value=node.value.replace(startWhiteSpaceRegExp,"")),(node=rootBlockNode.lastChild)&&3===node.type&&(node.value=node.value.replace(endWhiteSpaceRegExp,"")))};if(schema.isValidChild(rootNode.name,rootBlockName.toLowerCase())){for(;node;)next=node.next,3===node.type||1===node.type&&"p"!==node.name&&!blockElements[node.name]&&!node.attr("data-mce-type")?rootBlockNode?rootBlockNode.append(node):((rootBlockNode=createNode(rootBlockName,1)).attr(settings.forced_root_block_attrs),rootNode.insert(rootBlockNode,node),rootBlockNode.append(node)):(trim(rootBlockNode),rootBlockNode=null),node=next;trim(rootBlockNode)}}(),!args.invalid){for(name in matchedNodes){for(list=nodeFilters[name],fi=(nodes=matchedNodes[name]).length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(i=0,l=list.length;i<l;i++)list[i](nodes,name,args)}for(i=0,l=attributeFilters.length;i<l;i++)if((list=attributeFilters[i]).name in matchedAttributes){for(fi=(nodes=matchedAttributes[list.name]).length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(fi=0,fl=list.callbacks.length;fi<fl;fi++)list.callbacks[fi](nodes,list.name,args)}}return rootNode},settings.remove_trailing_brs&&self.addNodeFilter("br",function(nodes,_,args){var i,node,parent,lastParent,prev,prevName,elementRule,textNode,l=nodes.length,blockElements=extend$4({},schema.getBlockElements()),nonEmptyElements=schema.getNonEmptyElements(),whiteSpaceElements=schema.getNonEmptyElements();for(blockElements.body=1,i=0;i<l;i++)if(node=nodes[i],parent=node.parent,blockElements[node.parent.name]&&node===parent.lastChild){for(prev=node.prev;prev;){if("span"!==(prevName=prev.name)||"bookmark"!==prev.attr("data-mce-type")){if("br"!==prevName)break;if("br"===prevName){node=null;break}}prev=prev.prev}node&&(node.remove(),isEmpty$1(schema,nonEmptyElements,whiteSpaceElements,parent)&&(elementRule=schema.getElementRule(parent.name))&&(elementRule.removeEmpty?parent.remove():elementRule.paddEmpty&&paddEmptyNode(settings,args,blockElements,parent)))}else{for(lastParent=node;parent&&parent.firstChild===lastParent&&parent.lastChild===lastParent&&(lastParent=parent,!blockElements[parent.name]);)parent=parent.parent;lastParent===parent&&!0!==settings.padd_empty_with_br&&((textNode=new Node$2("#text",3)).value="",node.replace(textNode))}}),self.addAttributeFilter("href",function(nodes){var node,i=nodes.length,appendRel=function(rel){return rel.split(" ").filter(function(p){return p.length>0}).concat(["noopener"]).sort().join(" ")};if(!settings.allow_unsafe_link_target)for(;i--;)"a"===(node=nodes[i]).name&&"_blank"===node.attr("target")&&node.attr("rel",function(rel){var newRel=rel?$_topwtjjcq8h3fq.trim(rel):"";return/\b(noopener)\b/g.test(newRel)?newRel:appendRel(newRel)}(node.attr("rel")))}),settings.allow_html_in_named_anchor||self.addAttributeFilter("id,name",function(nodes){for(var sibling,prevSibling,parent,node,i=nodes.length;i--;)if("a"===(node=nodes[i]).name&&node.firstChild&&!node.attr("href")){parent=node.parent,sibling=node.lastChild;do{prevSibling=sibling.prev,parent.insert(sibling,node),sibling=prevSibling}while(sibling)}}),settings.fix_list_elements&&self.addNodeFilter("ul,ol",function(nodes){for(var node,parentNode,i=nodes.length;i--;)if(node=nodes[i],"ul"===(parentNode=node.parent).name||"ol"===parentNode.name)if(node.prev&&"li"===node.prev.name)node.prev.append(node);else{var li=new Node$2("li",1);li.attr("style","list-style-type: none"),node.wrap(li)}}),settings.validate&&schema.getValidClasses()&&self.addAttributeFilter("class",function(nodes){for(var node,classList,ci,className,classValue,validClassesMap,valid,i=nodes.length,validClasses=schema.getValidClasses();i--;){for(classList=(node=nodes[i]).attr("class").split(" "),classValue="",ci=0;ci<classList.length;ci++)className=classList[ci],valid=!1,(validClassesMap=validClasses["*"])&&validClassesMap[className]&&(valid=!0),validClassesMap=validClasses[node.name],!valid&&validClassesMap&&validClassesMap[className]&&(valid=!0),valid&&(classValue&&(classValue+=" "),classValue+=className);classValue.length||(classValue=null),node.attr("class",classValue)}}),$_4yeof95ujcq8h4ci.register(self,settings),self},addTempAttr=function(htmlParser,tempAttrs,name){-1===$_topwtjjcq8h3fq.inArray(tempAttrs,name)&&(htmlParser.addAttributeFilter(name,function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)}),tempAttrs.push(name))},postProcess$1=function(editor,args,content){return!args.no_events&&editor?$_f3o3mg5qjcq8h4bd.firePostProcess(editor,$_b4qnok5pjcq8h4bb.merge(args,{content:content})).content:content},getHtmlFromNode=function(dom,node,args){var html=$_fz4vwq21jcq8h3ow.trim(args.getInner?node.innerHTML:dom.getOuterHTML(node));return args.selection?html:$_topwtjjcq8h3fq.trim(html)},parseHtml=function(htmlParser,dom,html,args){var parserArgs=args.selection?$_b4qnok5pjcq8h4bb.merge({forced_root_block:!1},args):args,rootNode=htmlParser.parse(html,parserArgs);return $_77dd0b5rjcq8h4bg.trimTrailingBr(rootNode),rootNode},serializeNode=function(settings,schema,node){return Serializer(settings,schema).serialize(node)},toHtml=function(editor,settings,schema,rootNode,args){var content=serializeNode(settings,schema,rootNode);return postProcess$1(editor,args,content)},DomSerializer=function(settings,editor){var dom,schema,htmlParser,tempAttrs=["data-mce-selected"];dom=editor&&editor.dom?editor.dom:DOMUtils.DOM,schema=editor&&editor.schema?editor.schema:Schema(settings),settings.entity_encoding=settings.entity_encoding||"named",settings.remove_trailing_brs=!("remove_trailing_brs"in settings)||settings.remove_trailing_brs,htmlParser=DomParser(settings,schema),$_77dd0b5rjcq8h4bg.register(htmlParser,settings,dom);return{schema:schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,serialize:function(node,parserArgs){var args=$_b4qnok5pjcq8h4bb.merge({format:"html"},parserArgs||{}),targetNode=$_5j586k5sjcq8h4by.process(editor,node,args),html=getHtmlFromNode(dom,targetNode,args),rootNode=parseHtml(htmlParser,0,html,args);return"tree"===args.format?rootNode:toHtml(editor,settings,schema,rootNode,args)},addRules:function(rules){schema.addValidElements(rules)},setRules:function(rules){schema.setValidElements(rules)},addTempAttr:$_djct026jcq8h2xw.curry(addTempAttr,htmlParser,tempAttrs),getTempAttrs:function(){return tempAttrs}}},Serializer$1=function(settings,editor){var domSerializer=DomSerializer(settings,editor);return{schema:domSerializer.schema,addNodeFilter:domSerializer.addNodeFilter,addAttributeFilter:domSerializer.addAttributeFilter,serialize:domSerializer.serialize,addRules:domSerializer.addRules,setRules:domSerializer.setRules,addTempAttr:domSerializer.addTempAttr,getTempAttrs:domSerializer.getTempAttrs}},findBlockCaretContainer=function(editor){return $_75pgp31jcq8h3tk.descendant($_etvcvfyjcq8h3hp.fromDom(editor.getBody()),"*[data-mce-caret]").fold($_djct026jcq8h2xw.constant(null),function(elm){return elm.dom()})},removeIeControlRect=function(editor){editor.selection.setRng(editor.selection.getRng())},showBlockCaretContainer=function(editor,blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&($_cyutcs20jcq8h3or.showCaretContainerBlock(blockCaretContainer),removeIeControlRect(editor),editor.selection.scrollIntoView(blockCaretContainer))},handleBlockContainer=function(editor,e){var blockCaretContainer=findBlockCaretContainer(editor);if(blockCaretContainer)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void showBlockCaretContainer(editor,blockCaretContainer)):void($_cyutcs20jcq8h3or.hasContent(blockCaretContainer)&&showBlockCaretContainer(editor,blockCaretContainer))},$_bhixbj5wjcq8h4ct={setup:function(editor){editor.on("keyup compositionstart",$_djct026jcq8h2xw.curry(handleBlockContainer,editor))}};!function(BookmarkManager){BookmarkManager.isBookmarkNode=$_5o3jsi29jcq8h3pn.isBookmarkNode}(BookmarkManager||(BookmarkManager={}));var BookmarkManager$1=BookmarkManager,isContentEditableFalse$10=$_bpl7e51qjcq8h3kz.isContentEditableFalse,isContentEditableTrue$6=$_bpl7e51qjcq8h3kz.isContentEditableTrue,getContentEditableRoot$1=function(root,node){for(;node&&node!==root;){if(isContentEditableTrue$6(node)||isContentEditableFalse$10(node))return node;node=node.parentNode}return null},ControlSelection=function(selection,editor){var selectedElm,selectedElmGhost,resizeHelper,resizeHandles,selectedHandle,startX,startY,selectedElmX,selectedElmY,startW,startH,ratio,resizeStarted,width,height,startScrollWidth,startScrollHeight,dom=editor.dom,each=$_topwtjjcq8h3fq.each,editableDoc=editor.getDoc(),rootDocument=document,abs=Math.abs,round=Math.round,rootElement=editor.getBody();resizeHandles={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var rootClass=".mce-content-body";editor.contentStyles.push(rootClass+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+rootClass+" .mce-resizehandle:hover {background: #000}"+rootClass+" img[data-mce-selected],"+rootClass+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+rootClass+" .mce-clonedresizable {position: absolute;"+($_1surm29jcq8h31g.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+rootClass+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var isImage=function(elm){return elm&&("IMG"===elm.nodeName||editor.dom.is(elm,"figure.image"))},isEventOnImageOutsideRange=function(evt,range){return isImage(evt.target)&&!$_1t4o3952jcq8h48h.isXYWithinRange(evt.clientX,evt.clientY,range)},contextMenuSelectImage=function(evt){var target=evt.target;isEventOnImageOutsideRange(evt,editor.selection.getRng())&&!evt.isDefaultPrevented()&&(evt.preventDefault(),editor.selection.select(target))},getResizeTarget=function(elm){return editor.dom.is(elm,"figure.image")?elm.querySelector("img"):elm},isResizable=function(elm){var selector=editor.settings.object_resizing;return!1!==selector&&!$_1surm29jcq8h31g.iOS&&("string"!=typeof selector&&(selector="table,img,figure.image,div"),"false"!==elm.getAttribute("data-mce-resize")&&(elm!==editor.getBody()&&$_ds01nx1fjcq8h3jy.is($_etvcvfyjcq8h3hp.fromDom(elm),selector)))},resizeGhostElement=function(e){var deltaX,deltaY,resizeHelperX,resizeHelperY;deltaX=e.screenX-startX,deltaY=e.screenY-startY,width=deltaX*selectedHandle[2]+startW,height=deltaY*selectedHandle[3]+startH,width=width<5?5:width,height=height<5?5:height,(isImage(selectedElm)&&!1!==editor.settings.resize_img_proportional?!$_de018656jcq8h48p.modifierPressed(e):$_de018656jcq8h48p.modifierPressed(e)||isImage(selectedElm)&&selectedHandle[2]*selectedHandle[3]!=0)&&(abs(deltaX)>abs(deltaY)?(height=round(width*ratio),width=round(height/ratio)):(width=round(height/ratio),height=round(width*ratio))),dom.setStyles(getResizeTarget(selectedElmGhost),{width:width,height:height}),resizeHelperX=selectedHandle.startPos.x+deltaX,resizeHelperY=selectedHandle.startPos.y+deltaY,resizeHelperX=resizeHelperX>0?resizeHelperX:0,resizeHelperY=resizeHelperY>0?resizeHelperY:0,dom.setStyles(resizeHelper,{left:resizeHelperX,top:resizeHelperY,display:"block"}),resizeHelper.innerHTML=width+" &times; "+height,selectedHandle[2]<0&&selectedElmGhost.clientWidth<=width&&dom.setStyle(selectedElmGhost,"left",selectedElmX+(startW-width)),selectedHandle[3]<0&&selectedElmGhost.clientHeight<=height&&dom.setStyle(selectedElmGhost,"top",selectedElmY+(startH-height)),(deltaX=rootElement.scrollWidth-startScrollWidth)+(deltaY=rootElement.scrollHeight-startScrollHeight)!==0&&dom.setStyles(resizeHelper,{left:resizeHelperX-deltaX,top:resizeHelperY-deltaY}),resizeStarted||(editor.fire("ObjectResizeStart",{target:selectedElm,width:startW,height:startH}),resizeStarted=!0)},endGhostResize=function(){resizeStarted=!1;var setSizeProp=function(name,value){value&&(selectedElm.style[name]||!editor.schema.isValid(selectedElm.nodeName.toLowerCase(),name)?dom.setStyle(getResizeTarget(selectedElm),name,value):dom.setAttrib(getResizeTarget(selectedElm),name,value))};setSizeProp("width",width),setSizeProp("height",height),dom.unbind(editableDoc,"mousemove",resizeGhostElement),dom.unbind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.unbind(rootDocument,"mousemove",resizeGhostElement),dom.unbind(rootDocument,"mouseup",endGhostResize)),dom.remove(selectedElmGhost),dom.remove(resizeHelper),showResizeRect(selectedElm),editor.fire("ObjectResized",{target:selectedElm,width:width,height:height}),dom.setAttrib(selectedElm,"style",dom.getAttrib(selectedElm,"style")),editor.nodeChanged()},showResizeRect=function(targetElm){var position,targetWidth,targetHeight,e,rect;hideResizeRect(),unbindResizeHandleEvents(),position=dom.getPos(targetElm,rootElement),selectedElmX=position.x,selectedElmY=position.y,rect=targetElm.getBoundingClientRect(),targetWidth=rect.width||rect.right-rect.left,targetHeight=rect.height||rect.bottom-rect.top,selectedElm!==targetElm&&(selectedElm=targetElm,width=height=0),e=editor.fire("ObjectSelected",{target:targetElm}),isResizable(targetElm)&&!e.isDefaultPrevented()?each(resizeHandles,function(handle,name){var handleElm,startDrag=function(e){startX=e.screenX,startY=e.screenY,startW=getResizeTarget(selectedElm).clientWidth,startH=getResizeTarget(selectedElm).clientHeight,ratio=startH/startW,selectedHandle=handle,handle.startPos={x:targetWidth*handle[0]+selectedElmX,y:targetHeight*handle[1]+selectedElmY},startScrollWidth=rootElement.scrollWidth,startScrollHeight=rootElement.scrollHeight,selectedElmGhost=selectedElm.cloneNode(!0),dom.addClass(selectedElmGhost,"mce-clonedresizable"),dom.setAttrib(selectedElmGhost,"data-mce-bogus","all"),selectedElmGhost.contentEditable=!1,selectedElmGhost.unSelectabe=!0,dom.setStyles(selectedElmGhost,{left:selectedElmX,top:selectedElmY,margin:0}),selectedElmGhost.removeAttribute("data-mce-selected"),rootElement.appendChild(selectedElmGhost),dom.bind(editableDoc,"mousemove",resizeGhostElement),dom.bind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.bind(rootDocument,"mousemove",resizeGhostElement),dom.bind(rootDocument,"mouseup",endGhostResize)),resizeHelper=dom.add(rootElement,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},startW+" &times; "+startH)};(handleElm=dom.get("mceResizeHandle"+name))&&dom.remove(handleElm),handleElm=dom.add(rootElement,"div",{id:"mceResizeHandle"+name,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+name+"-resize; margin:0; padding:0"}),$_1surm29jcq8h31g.ie&&(handleElm.contentEditable=!1),dom.bind(handleElm,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),startDrag(e)}),handle.elm=handleElm,dom.setStyles(handleElm,{left:targetWidth*handle[0]+selectedElmX-handleElm.offsetWidth/2,top:targetHeight*handle[1]+selectedElmY-handleElm.offsetHeight/2})}):hideResizeRect(),selectedElm.setAttribute("data-mce-selected","1")},hideResizeRect=function(){var name,handleElm;unbindResizeHandleEvents(),selectedElm&&selectedElm.removeAttribute("data-mce-selected");for(name in resizeHandles)(handleElm=dom.get("mceResizeHandle"+name))&&(dom.unbind(handleElm),dom.remove(handleElm))},updateResizeRect=function(e){var startElm,controlElm,isChildOrEqual=function(node,parent){if(node)do{if(node===parent)return!0}while(node=node.parentNode)};resizeStarted||editor.removed||(each(dom.select("img[data-mce-selected],hr[data-mce-selected]"),function(img){img.removeAttribute("data-mce-selected")}),controlElm="mousedown"===e.type?e.target:selection.getNode(),isChildOrEqual(controlElm=dom.$(controlElm).closest("table,img,figure.image,hr")[0],rootElement)&&(disableGeckoResize(),startElm=selection.getStart(!0),isChildOrEqual(startElm,controlElm)&&isChildOrEqual(selection.getEnd(!0),controlElm))?showResizeRect(controlElm):hideResizeRect())},isWithinContentEditableFalse=function(elm){return isContentEditableFalse$10(getContentEditableRoot$1(editor.getBody(),elm))},unbindResizeHandleEvents=function(){for(var name_1 in resizeHandles){var handle=resizeHandles[name_1];handle.elm&&(dom.unbind(handle.elm),delete handle.elm)}},disableGeckoResize=function(){try{editor.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(ex){}};editor.on("init",function(){disableGeckoResize(),$_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie>=11&&(editor.on("mousedown click",function(e){var target=e.target,nodeName=target.nodeName;resizeStarted||!/^(TABLE|IMG|HR)$/.test(nodeName)||isWithinContentEditableFalse(target)||(2!==e.button&&editor.selection.select(target,"TABLE"===nodeName),"mousedown"===e.type&&editor.nodeChanged())}),editor.dom.bind(rootElement,"mscontrolselect",function(e){var delayedSelect=function(node){$_51uzcpgjcq8h3db.setEditorTimeout(editor,function(){editor.selection.select(node)})};if(isWithinContentEditableFalse(e.target))return e.preventDefault(),void delayedSelect(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&delayedSelect(e.target))}));var throttledUpdateResizeRect=$_51uzcpgjcq8h3db.throttle(function(e){editor.composing||updateResizeRect(e)});editor.on("nodechange ResizeEditor ResizeWindow drop",throttledUpdateResizeRect),editor.on("keyup compositionend",function(e){selectedElm&&"TABLE"===selectedElm.nodeName&&throttledUpdateResizeRect(e)}),editor.on("hide blur",hideResizeRect),editor.on("contextmenu",contextMenuSelectImage)}),editor.on("remove",unbindResizeHandleEvents);return{isResizable:isResizable,showResizeRect:showResizeRect,hideResizeRect:hideResizeRect,updateResizeRect:updateResizeRect,destroy:function(){selectedElm=selectedElmGhost=null}}},getPos$1=function(elm){for(var x=0,y=0,offsetParent=elm;offsetParent&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;return{x:x,y:y}},fireScrollIntoViewEvent=function(editor,elm,alignToTop){var scrollEvent={elm:elm,alignToTop:alignToTop};return editor.fire("scrollIntoView",scrollEvent),scrollEvent.isDefaultPrevented()},$_csmxlk60jcq8h4e2={scrollIntoView:function(editor,elm,alignToTop){var y,viewPort,viewPortY,viewPortH,dom=editor.dom,root=dom.getRoot(),offsetY=0;if(!fireScrollIntoViewEvent(editor,elm,alignToTop)&&$_bpl7e51qjcq8h3kz.isElement(elm)){if(!1===alignToTop&&(offsetY=elm.offsetHeight),"BODY"!==root.nodeName){var scrollContainer=editor.selection.getScrollContainer();if(scrollContainer)return y=getPos$1(elm).y-getPos$1(scrollContainer).y+offsetY,viewPortH=scrollContainer.clientHeight,viewPortY=scrollContainer.scrollTop,void((y<viewPortY||y+25>viewPortY+viewPortH)&&(scrollContainer.scrollTop=y<viewPortY?y:y-viewPortH+25))}viewPort=dom.getViewPort(editor.getWin()),y=dom.getPos(elm).y+offsetY,viewPortY=viewPort.y,viewPortH=viewPort.h,(y<viewPort.y||y+25>viewPortY+viewPortH)&&editor.getWin().scrollTo(0,y<viewPortY?y:y-viewPortH+25)}}},hasCeProperty=function(node){return $_bpl7e51qjcq8h3kz.isContentEditableTrue(node)||$_bpl7e51qjcq8h3kz.isContentEditableFalse(node)},findParent$1=function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null},findClosestIeRange=function(clientX,clientY,doc){var element,rng,rects;if(element=doc.elementFromPoint(clientX,clientY),rng=doc.body.createTextRange(),element&&"HTML"!==element.tagName||(element=doc.body),rng.moveToElementText(element),rects=$_topwtjjcq8h3fq.toArray(rng.getClientRects()),(rects=rects.sort(function(a,b){return a=Math.abs(Math.max(a.top-clientY,a.bottom-clientY)),b=Math.abs(Math.max(b.top-clientY,b.bottom-clientY)),a-b})).length>0){clientY=(rects[0].bottom+rects[0].top)/2;try{return rng.moveToPoint(clientX,clientY),rng.collapse(!0),rng}catch(ex){}}return null},moveOutOfContentEditableFalse=function(rng,rootNode){var parentElement=rng&&rng.parentElement?rng.parentElement():null;return $_bpl7e51qjcq8h3kz.isContentEditableFalse(findParent$1(parentElement,rootNode,hasCeProperty))?null:rng},$_a49bkx61jcq8h4e6={fromPoint:function(clientX,clientY,doc){var rng,point,pointDoc=doc;if(pointDoc.caretPositionFromPoint)(point=pointDoc.caretPositionFromPoint(clientX,clientY))&&((rng=doc.createRange()).setStart(point.offsetNode,point.offset),rng.collapse(!0));else if(doc.caretRangeFromPoint)rng=doc.caretRangeFromPoint(clientX,clientY);else if(pointDoc.body.createTextRange){rng=pointDoc.body.createTextRange();try{rng.moveToPoint(clientX,clientY),rng.collapse(!0)}catch(ex){rng=findClosestIeRange(clientX,clientY,doc)}return moveOutOfContentEditableFalse(rng,doc.body)}return rng}},$_99q9j762jcq8h4e8={processRanges:function(editor,ranges){return $_de5suq4jcq8h2x0.map(ranges,function(range){var evt=editor.fire("GetSelectionRange",{range:range});return evt.range!==range?evt.range:range})}},clone$2=function(original,deep){return $_etvcvfyjcq8h3hp.fromDom(original.dom().cloneNode(deep))},deep$1=function(original){return clone$2(original,!0)},shallowAs=function(original,tag){var nu=$_etvcvfyjcq8h3hp.fromTag(tag),attributes=$_7np04f14jcq8h3ig.clone(original);return $_7np04f14jcq8h3ig.setAll(nu,attributes),nu},$_9fwdge65jcq8h4en={shallow:function(original){return clone$2(original,!1)},shallowAs:shallowAs,deep:deep$1,copy:function(original,tag){var nu=shallowAs(original,tag),cloneChildren=$_gah0mz17jcq8h3ir.children(deep$1(original));return $_1f20i2hjcq8h3r1.append(nu,cloneChildren),nu},mutate:function(original,tag){var nu=shallowAs(original,tag);$_6290j62fjcq8h3qx.before(original,nu);var children=$_gah0mz17jcq8h3ir.children(original);return $_1f20i2hjcq8h3r1.append(nu,children),$_8dor5e2gjcq8h3qz.remove(original),nu}},$_d8ic9a66jcq8h4ep={fromElements:function(elements,scope){var fragment=(scope||document).createDocumentFragment();return $_de5suq4jcq8h2x0.each(elements,function(element){fragment.appendChild(element.dom())}),$_etvcvfyjcq8h3hp.fromDom(fragment)}},getStartNode=function(rng){var sc=rng.startContainer,so=rng.startOffset;return $_bpl7e51qjcq8h3kz.isText(sc)?0===so?$_doqc1o5jcq8h2xq.some($_etvcvfyjcq8h3hp.fromDom(sc)):$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.from(sc.childNodes[so]).map($_etvcvfyjcq8h3hp.fromDom)},getEndNode=function(rng){var ec=rng.endContainer,eo=rng.endOffset;return $_bpl7e51qjcq8h3kz.isText(ec)?eo===ec.data.length?$_doqc1o5jcq8h2xq.some($_etvcvfyjcq8h3hp.fromDom(ec)):$_doqc1o5jcq8h2xq.none():$_doqc1o5jcq8h2xq.from(ec.childNodes[eo-1]).map($_etvcvfyjcq8h3hp.fromDom)},getFirstChildren=function(node){return $_gah0mz17jcq8h3ir.firstChild(node).fold($_djct026jcq8h2xw.constant([node]),function(child){return[node].concat(getFirstChildren(child))})},getLastChildren$1=function(node){return $_gah0mz17jcq8h3ir.lastChild(node).fold($_djct026jcq8h2xw.constant([node]),function(child){return"br"===$_d9btx8zjcq8h3hu.name(child)?$_gah0mz17jcq8h3ir.prevSibling(child).map(function(sibling){return[node].concat(getLastChildren$1(sibling))}).getOr([]):[node].concat(getLastChildren$1(child))})},hasAllContentsSelected=function(elm,rng){return $_7re31t2djcq8h3qn.liftN([getStartNode(rng),getEndNode(rng)],function(startNode,endNode){var start=$_de5suq4jcq8h2x0.find(getFirstChildren(elm),$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,startNode)),end=$_de5suq4jcq8h2x0.find(getLastChildren$1(elm),$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,endNode));return start.isSome()&&end.isSome()}).getOr(!1)},moveEndPoint$1=function(dom,rng,node,start){var root=node,walker=new TreeWalker(node,root),nonEmptyElementsMap=dom.schema.getNonEmptyElements();do{if(3===node.nodeType&&0!==$_topwtjjcq8h3fq.trim(node.nodeValue).length)return void(start?rng.setStart(node,0):rng.setEnd(node,node.nodeValue.length));if(nonEmptyElementsMap[node.nodeName]&&!/^(TD|TH)$/.test(node.nodeName))return void(start?rng.setStartBefore(node):"BR"===node.nodeName?rng.setEndBefore(node):rng.setEndAfter(node));if($_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<11&&dom.isBlock(node)&&dom.isEmpty(node))return void(start?rng.setStart(node,0):rng.setEnd(node,0))}while(node=start?walker.next():walker.prev());"BODY"===root.nodeName&&(start?rng.setStart(root,0):rng.setEnd(root,root.childNodes.length))},tableModel=$_1928vz18jcq8h3j2.immutable("element","width","rows"),tableRow=$_1928vz18jcq8h3j2.immutable("element","cells"),cellPosition=$_1928vz18jcq8h3j2.immutable("x","y"),getSpan=function(td,key){var value=parseInt($_7np04f14jcq8h3ig.get(td,key),10);return isNaN(value)?1:value},fillout=function(table,x,y,tr,td){for(var rowspan=getSpan(td,"rowspan"),colspan=getSpan(td,"colspan"),rows=table.rows(),y2=y;y2<y+rowspan;y2++){rows[y2]||(rows[y2]=tableRow($_9fwdge65jcq8h4en.deep(tr),[]));for(var x2=x;x2<x+colspan;x2++)rows[y2].cells()[x2]=y2===y&&x2===x?td:$_9fwdge65jcq8h4en.shallow(td)}},cellExists=function(table,x,y){var rows=table.rows();return!!(rows[y]?rows[y].cells():[])[x]},skipCellsX=function(table,x,y){for(;cellExists(table,x,y);)x++;return x},getWidth=function(rows){return $_de5suq4jcq8h2x0.foldl(rows,function(acc,row){return row.cells().length>acc?row.cells().length:acc},0)},findElementPos=function(table,element){for(var rows=table.rows(),y=0;y<rows.length;y++)for(var cells=rows[y].cells(),x=0;x<cells.length;x++)if($_x06e31djcq8h3jh.eq(cells[x],element))return $_doqc1o5jcq8h2xq.some(cellPosition(x,y));return $_doqc1o5jcq8h2xq.none()},extractRows=function(table,sx,sy,ex,ey){for(var newRows=[],rows=table.rows(),y=sy;y<=ey;y++){var cells=rows[y].cells(),slice=sx<ex?cells.slice(sx,ex+1):cells.slice(ex,sx+1);newRows.push(tableRow(rows[y].element(),slice))}return newRows},subTable=function(table,startPos,endPos){var sx=startPos.x(),sy=startPos.y(),ex=endPos.x(),ey=endPos.y(),newRows=sy<ey?extractRows(table,sx,sy,ex,ey):extractRows(table,sx,ey,ex,sy);return tableModel(table.element(),getWidth(newRows),newRows)},createDomTable=function(table,rows){var tableElement=$_9fwdge65jcq8h4en.shallow(table.element()),tableBody=$_etvcvfyjcq8h3hp.fromTag("tbody");return $_1f20i2hjcq8h3r1.append(tableBody,rows),$_6290j62fjcq8h3qx.append(tableElement,tableBody),tableElement},modelRowsToDomRows=function(table){return $_de5suq4jcq8h2x0.map(table.rows(),function(row){var cells=$_de5suq4jcq8h2x0.map(row.cells(),function(cell){var td=$_9fwdge65jcq8h4en.deep(cell);return $_7np04f14jcq8h3ig.remove(td,"colspan"),$_7np04f14jcq8h3ig.remove(td,"rowspan"),td}),tr=$_9fwdge65jcq8h4en.shallow(row.element());return $_1f20i2hjcq8h3r1.append(tr,cells),tr})},$_ba8oxc68jcq8h4f1={fromDom:function(tableElm){var table=tableModel($_9fwdge65jcq8h4en.shallow(tableElm),0,[]);return $_de5suq4jcq8h2x0.each($_7cq9b52kjcq8h3r9.descendants(tableElm,"tr"),function(tr,y){$_de5suq4jcq8h2x0.each($_7cq9b52kjcq8h3r9.descendants(tr,"td,th"),function(td,x){fillout(table,skipCellsX(table,x,y),y,tr,td)})}),tableModel(table.element(),getWidth(table.rows()),table.rows())},toDom:function(table){return createDomTable(table,modelRowsToDomRows(table))},subsection:function(table,startElement,endElement){return findElementPos(table,startElement).bind(function(startPos){return findElementPos(table,endElement).map(function(endPos){return subTable(table,startPos,endPos)})})}},findParentListContainer=function(parents){return $_de5suq4jcq8h2x0.find(parents,function(elm){return"ul"===$_d9btx8zjcq8h3hu.name(elm)||"ol"===$_d9btx8zjcq8h3hu.name(elm)})},getFullySelectedListWrappers=function(parents,rng){return $_de5suq4jcq8h2x0.find(parents,function(elm){return"li"===$_d9btx8zjcq8h3hu.name(elm)&&hasAllContentsSelected(elm,rng)}).fold($_djct026jcq8h2xw.constant([]),function(li){return findParentListContainer(parents).map(function(listCont){return[$_etvcvfyjcq8h3hp.fromTag("li"),$_etvcvfyjcq8h3hp.fromTag($_d9btx8zjcq8h3hu.name(listCont))]}).getOr([])})},wrap$3=function(innerElm,elms){var wrapped=$_de5suq4jcq8h2x0.foldl(elms,function(acc,elm){return $_6290j62fjcq8h3qx.append(elm,acc),elm},innerElm);return elms.length>0?$_d8ic9a66jcq8h4ep.fromElements([wrapped]):wrapped},directListWrappers=function(commonAnchorContainer){return $_2bhgbq1pjcq8h3ku.isListItem(commonAnchorContainer)?$_gah0mz17jcq8h3ir.parent(commonAnchorContainer).filter($_2bhgbq1pjcq8h3ku.isList).fold($_djct026jcq8h2xw.constant([]),function(listElm){return[commonAnchorContainer,listElm]}):$_2bhgbq1pjcq8h3ku.isList(commonAnchorContainer)?[commonAnchorContainer]:[]},getWrapElements=function(rootNode,rng){var commonAnchorContainer=$_etvcvfyjcq8h3hp.fromDom(rng.commonAncestorContainer),parents=$_5174v33jcq8h3u4.parentsAndSelf(commonAnchorContainer,rootNode),wrapElements=$_de5suq4jcq8h2x0.filter(parents,function(elm){return $_2bhgbq1pjcq8h3ku.isInline(elm)||$_2bhgbq1pjcq8h3ku.isHeading(elm)}),listWrappers=getFullySelectedListWrappers(parents,rng),allWrappers=wrapElements.concat(listWrappers.length?listWrappers:directListWrappers(commonAnchorContainer));return $_de5suq4jcq8h2x0.map(allWrappers,$_9fwdge65jcq8h4en.shallow)},emptyFragment=function(){return $_d8ic9a66jcq8h4ep.fromElements([])},getFragmentFromRange=function(rootNode,rng){return wrap$3($_etvcvfyjcq8h3hp.fromDom(rng.cloneContents()),getWrapElements(rootNode,rng))},getParentTable=function(rootElm,cell){return $_75pgp31jcq8h3tk.ancestor(cell,"table",$_djct026jcq8h2xw.curry($_x06e31djcq8h3jh.eq,rootElm))},getTableFragment=function(rootNode,selectedTableCells){return getParentTable(rootNode,selectedTableCells[0]).bind(function(tableElm){var firstCell=selectedTableCells[0],lastCell=selectedTableCells[selectedTableCells.length-1],fullTableModel=$_ba8oxc68jcq8h4f1.fromDom(tableElm);return $_ba8oxc68jcq8h4f1.subsection(fullTableModel,firstCell,lastCell).map(function(sectionedTableModel){return $_d8ic9a66jcq8h4ep.fromElements([$_ba8oxc68jcq8h4f1.toDom(sectionedTableModel)])})}).getOrThunk(emptyFragment)},getSelectionFragment=function(rootNode,ranges){return ranges.length>0&&ranges[0].collapsed?emptyFragment():getFragmentFromRange(rootNode,ranges[0])},$_8k5kvz64jcq8h4ee={read:function(rootNode,ranges){var selectedCells=$_z2v3r3pjcq8h3y8.getCellsFromElementOrRanges(ranges,rootNode);return selectedCells.length>0?getTableFragment(rootNode,selectedCells):getSelectionFragment(rootNode,ranges)}},$_y5fch63jcq8h4ea={getContent:function(editor,args){var fragment,rng=editor.selection.getRng(),tmpElm=editor.dom.create("body"),sel=editor.selection.getSel(),ranges=$_99q9j762jcq8h4e8.processRanges(editor,$_7sn89a3qjcq8h3yc.getRanges(sel));if(args=args||{},args.get=!0,args.format=args.format||"html",args.selection=!0,(args=editor.fire("BeforeGetContent",args)).isDefaultPrevented())return editor.fire("GetContent",args),args.content;if("text"===args.format)return editor.selection.isCollapsed()?"":$_fz4vwq21jcq8h3ow.trim(rng.text||(sel.toString?sel.toString():""));rng.cloneContents?(fragment=args.contextual?$_8k5kvz64jcq8h4ee.read($_etvcvfyjcq8h3hp.fromDom(editor.getBody()),ranges).dom():rng.cloneContents())&&tmpElm.appendChild(fragment):void 0!==rng.item||void 0!==rng.htmlText?(tmpElm.innerHTML="<br>"+(rng.item?rng.item(0).outerHTML:rng.htmlText),tmpElm.removeChild(tmpElm.firstChild)):tmpElm.innerHTML=rng.toString(),args.getInner=!0;var content=editor.selection.serializer.serialize(tmpElm,args);return"tree"===args.format?content:(args.content=editor.selection.isCollapsed()?"":content,editor.fire("GetContent",args),args.content)}},$_35auoq69jcq8h4fm={setContent:function(editor,content,args){var caretNode,frag,temp,rng=editor.selection.getRng(),doc=editor.getDoc();if(args=args||{format:"html"},args.set=!0,args.selection=!0,args.content=content,args.no_events||!(args=editor.fire("BeforeSetContent",args)).isDefaultPrevented()){if(content=args.content,rng.insertNode){content+='<span id="__caret">_</span>',rng.startContainer===doc&&rng.endContainer===doc?doc.body.innerHTML=content:(rng.deleteContents(),0===doc.body.childNodes.length?doc.body.innerHTML=content:rng.createContextualFragment?rng.insertNode(rng.createContextualFragment(content)):(frag=doc.createDocumentFragment(),temp=doc.createElement("div"),frag.appendChild(temp),temp.outerHTML=content,rng.insertNode(frag))),caretNode=editor.dom.get("__caret"),(rng=doc.createRange()).setStartBefore(caretNode),rng.setEndBefore(caretNode),editor.selection.setRng(rng),editor.dom.remove("__caret");try{editor.selection.setRng(rng)}catch(ex){}}else rng.item&&(doc.execCommand("Delete",!1,null),rng=editor.getRng()),/^\s+/.test(content)?(rng.pasteHTML('<span id="__mce_tmp">_</span>'+content),editor.dom.remove("__mce_tmp")):rng.pasteHTML(content);args.no_events||editor.fire("SetContent",args)}else editor.fire("SetContent",args)}},getEndpointElement=function(root,rng,start,real,resolve){var container=start?rng.startContainer:rng.endContainer,offset=start?rng.startOffset:rng.endOffset;return $_doqc1o5jcq8h2xq.from(container).map($_etvcvfyjcq8h3hp.fromDom).map(function(elm){return real&&rng.collapsed?elm:$_gah0mz17jcq8h3ir.child(elm,resolve(elm,offset)).getOr(elm)}).bind(function(elm){return $_d9btx8zjcq8h3hu.isElement(elm)?$_doqc1o5jcq8h2xq.some(elm):$_gah0mz17jcq8h3ir.parent(elm)}).map(function(elm){return elm.dom()}).getOr(root)},getStart$2=function(root,rng,real){return getEndpointElement(root,rng,!0,real,function(elm,offset){return Math.min($_gah0mz17jcq8h3ir.childNodesCount(elm),offset)})},getEnd=function(root,rng,real){return getEndpointElement(root,rng,!1,real,function(elm,offset){return offset>0?offset-1:offset})},skipEmptyTextNodes=function(node,forwards){for(var orig=node;node&&$_bpl7e51qjcq8h3kz.isText(node)&&0===node.length;)node=forwards?node.nextSibling:node.previousSibling;return node||orig},getNode$1=function(root,rng){var elm,startContainer,endContainer,startOffset,endOffset;return rng?(startContainer=rng.startContainer,endContainer=rng.endContainer,startOffset=rng.startOffset,endOffset=rng.endOffset,elm=rng.commonAncestorContainer,!rng.collapsed&&(startContainer===endContainer&&endOffset-startOffset<2&&startContainer.hasChildNodes()&&(elm=startContainer.childNodes[startOffset]),3===startContainer.nodeType&&3===endContainer.nodeType&&(startContainer=startContainer.length===startOffset?skipEmptyTextNodes(startContainer.nextSibling,!0):startContainer.parentNode,endContainer=0===endOffset?skipEmptyTextNodes(endContainer.previousSibling,!1):endContainer.parentNode,startContainer&&startContainer===endContainer))?startContainer:elm&&3===elm.nodeType?elm.parentNode:elm):root},getSelectedBlocks=function(dom,rng,startElm,endElm){var node,root,selectedBlocks=[];if(root=dom.getRoot(),startElm=dom.getParent(startElm||getStart$2(root,rng,!1),dom.isBlock),endElm=dom.getParent(endElm||getEnd(root,rng,!1),dom.isBlock),startElm&&startElm!==root&&selectedBlocks.push(startElm),startElm&&endElm&&startElm!==endElm){node=startElm;for(var walker=new TreeWalker(startElm,root);(node=walker.next())&&node!==endElm;)dom.isBlock(node)&&selectedBlocks.push(node)}return endElm&&startElm!==endElm&&endElm!==root&&selectedBlocks.push(endElm),selectedBlocks},select$1=function(dom,node,content){return $_doqc1o5jcq8h2xq.from(node).map(function(node){var idx=dom.nodeIndex(node),rng=dom.createRng();return rng.setStart(node.parentNode,idx),rng.setEnd(node.parentNode,idx+1),content&&(moveEndPoint$1(dom,rng,node,!0),moveEndPoint$1(dom,rng,node,!1)),rng})},each$21=$_topwtjjcq8h3fq.each,isNativeIeSelection=function(rng){return!!rng.select},isAttachedToDom=function(node){return!(!node||!node.ownerDocument)&&$_x06e31djcq8h3jh.contains($_etvcvfyjcq8h3hp.fromDom(node.ownerDocument),$_etvcvfyjcq8h3hp.fromDom(node))},isValidRange=function(rng){return!!rng&&(!!isNativeIeSelection(rng)||isAttachedToDom(rng.startContainer)&&isAttachedToDom(rng.endContainer))},Selection$1=function(dom,win,serializer,editor){var bookmarkManager,controlSelection,selectedRange,explicitRange,selectorChangedData,setContent=function(content,args){return $_35auoq69jcq8h4fm.setContent(editor,content,args)},collapse=function(toStart){var rng=getRng();rng.collapse(!!toStart),setRng(rng)},getSel=function(){return win.getSelection?win.getSelection():win.document.selection},getRng=function(){var selection,rng,elm,doc,tryCompareBoundaryPoints=function(how,sourceRange,destinationRange){try{return sourceRange.compareBoundaryPoints(how,destinationRange)}catch(ex){return-1}};if(!win)return null;if(void 0===(doc=win.document)||null===doc)return null;if(void 0!==editor.bookmark&&!1===$_akpbtf44jcq8h43x.hasFocus(editor)){var bookmark=$_booaps3ujcq8h42k.getRng(editor);if(bookmark.isSome())return bookmark.map(function(r){return $_99q9j762jcq8h4e8.processRanges(editor,[r])[0]}).getOr(doc.createRange())}try{(selection=getSel())&&(rng=selection.rangeCount>0?selection.getRangeAt(0):selection.createRange?selection.createRange():doc.createRange())}catch(ex){}return(rng=$_99q9j762jcq8h4e8.processRanges(editor,[rng])[0])||(rng=doc.createRange?doc.createRange():doc.body.createTextRange()),rng.setStart&&9===rng.startContainer.nodeType&&rng.collapsed&&(elm=dom.getRoot(),rng.setStart(elm,0),rng.setEnd(elm,0)),selectedRange&&explicitRange&&(0===tryCompareBoundaryPoints(rng.START_TO_START,rng,selectedRange)&&0===tryCompareBoundaryPoints(rng.END_TO_END,rng,selectedRange)?rng=explicitRange:(selectedRange=null,explicitRange=null)),rng},setRng=function(rng,forward){var sel,node,evt;if(isValidRange(rng)){var ieRange=isNativeIeSelection(rng)?rng:null;if(ieRange){explicitRange=null;try{ieRange.select()}catch(ex){}}else{if(sel=getSel(),evt=editor.fire("SetSelectionRange",{range:rng,forward:forward}),rng=evt.range,sel){explicitRange=rng;try{sel.removeAllRanges(),sel.addRange(rng)}catch(ex){}!1===forward&&sel.extend&&(sel.collapse(rng.endContainer,rng.endOffset),sel.extend(rng.startContainer,rng.startOffset)),selectedRange=sel.rangeCount>0?sel.getRangeAt(0):null}rng.collapsed||rng.startContainer!==rng.endContainer||!sel.setBaseAndExtent||$_1surm29jcq8h31g.ie||rng.endOffset-rng.startOffset<2&&rng.startContainer.hasChildNodes()&&(node=rng.startContainer.childNodes[rng.startOffset])&&"IMG"===node.tagName&&(sel.setBaseAndExtent(rng.startContainer,rng.startOffset,rng.endContainer,rng.endOffset),sel.anchorNode===rng.startContainer&&sel.focusNode===rng.endContainer||sel.setBaseAndExtent(node,0,node,1)),editor.fire("AfterSetSelectionRange",{range:rng,forward:forward})}}},isForward=function(){var anchorRange,focusRange,sel=getSel();return!(sel&&sel.anchorNode&&sel.focusNode)||((anchorRange=dom.createRng()).setStart(sel.anchorNode,sel.anchorOffset),anchorRange.collapse(!0),(focusRange=dom.createRng()).setStart(sel.focusNode,sel.focusOffset),focusRange.collapse(!0),anchorRange.compareBoundaryPoints(anchorRange.START_TO_START,focusRange)<=0)},exports={bookmarkManager:null,controlSelection:null,dom:dom,win:win,serializer:serializer,editor:editor,collapse:collapse,setCursorLocation:function(node,offset){var rng=dom.createRng();node?(rng.setStart(node,offset),rng.setEnd(node,offset),setRng(rng),collapse(!1)):(moveEndPoint$1(dom,rng,editor.getBody(),!0),setRng(rng))},getContent:function(args){return $_y5fch63jcq8h4ea.getContent(editor,args)},setContent:setContent,getBookmark:function(type,normalized){return bookmarkManager.getBookmark(type,normalized)},moveToBookmark:function(bookmark){return bookmarkManager.moveToBookmark(bookmark)},select:function(node,content){return select$1(dom,node,content).each(setRng),node},isCollapsed:function(){var rng=getRng(),sel=getSel();return!(!rng||rng.item)&&(rng.compareEndPoints?0===rng.compareEndPoints("StartToEnd",rng):!sel||rng.collapsed)},isForward:isForward,setNode:function(elm){return setContent(dom.getOuterHTML(elm)),elm},getNode:function(){return getNode$1(editor.getBody(),getRng())},getSel:getSel,setRng:setRng,getRng:getRng,getStart:function(real){return getStart$2(editor.getBody(),getRng(),real)},getEnd:function(real){return getEnd(editor.getBody(),getRng(),real)},getSelectedBlocks:function(startElm,endElm){return getSelectedBlocks(dom,getRng(),startElm,endElm)},normalize:function(){var rng=getRng();if(!$_7sn89a3qjcq8h3yc.hasMultipleRanges(getSel())){var normRng=$_5auu293sjcq8h429.normalize(dom,rng);return normRng.each(function(normRng){setRng(normRng,isForward())}),normRng.getOr(rng)}return rng},selectorChanged:function(selector,callback){var currentSelectors;return selectorChangedData||(selectorChangedData={},currentSelectors={},editor.on("NodeChange",function(e){var node=e.element,parents=dom.getParents(node,null,dom.getRoot()),matchedSelectors={};each$21(selectorChangedData,function(callbacks,selector){each$21(parents,function(node){if(dom.is(node,selector))return currentSelectors[selector]||(each$21(callbacks,function(callback){callback(!0,{node:node,selector:selector,parents:parents})}),currentSelectors[selector]=callbacks),matchedSelectors[selector]=callbacks,!1})}),each$21(currentSelectors,function(callbacks,selector){matchedSelectors[selector]||(delete currentSelectors[selector],each$21(callbacks,function(callback){callback(!1,{node:node,selector:selector,parents:parents})}))})})),selectorChangedData[selector]||(selectorChangedData[selector]=[]),selectorChangedData[selector].push(callback),exports},getScrollContainer:function(){for(var scrollContainer,node=dom.getRoot();node&&"BODY"!==node.nodeName;){if(node.scrollHeight>node.clientHeight){scrollContainer=node;break}node=node.parentNode}return scrollContainer},scrollIntoView:function(elm,alignToTop){return $_csmxlk60jcq8h4e2.scrollIntoView(editor,elm,alignToTop)},placeCaretAt:function(clientX,clientY){return setRng($_a49bkx61jcq8h4e6.fromPoint(clientX,clientY,editor.getDoc()))},getBoundingClientRect:function(){var rng=getRng();return rng.collapsed?CaretPosition.fromRangeStart(rng).getClientRects()[0]:rng.getBoundingClientRect()},destroy:function(){win=null,controlSelection.destroy()}};return bookmarkManager=BookmarkManager$1(exports),controlSelection=ControlSelection(exports,editor),exports.bookmarkManager=bookmarkManager,exports.controlSelection=controlSelection,exports},curry$4=$_ghxtsv25jcq8h3p5.curry,findUntil=function(direction,rootNode,predicateFn,node){for(;node=$_ctfd6a27jcq8h3pe.findNode(node,direction,$_dlol411zjcq8h3om.isEditableCaretCandidate,rootNode);)if(predicateFn(node))return},walkUntil$1=function(direction,isAboveFn,isBeflowFn,rootNode,predicateFn,caretPosition){var node,targetClientRect,line=0,result=[],add=function(node){var i,clientRect,clientRects;for(clientRects=$_4sgx8851jcq8h48f.getClientRects(node),-1===direction&&(clientRects=clientRects.reverse()),i=0;i<clientRects.length;i++)if(clientRect=clientRects[i],!isBeflowFn(clientRect,targetClientRect)){if(result.length>0&&isAboveFn(clientRect,$_292trzkjcq8h3fz.last(result))&&line++,clientRect.line=line,predicateFn(clientRect))return!0;result.push(clientRect)}};return(targetClientRect=$_292trzkjcq8h3fz.last(caretPosition.getClientRects()))?(node=caretPosition.getNode(),add(node),findUntil(direction,rootNode,add,node),result):result},$_btk4qq6ejcq8h4g8={upUntil:curry$4(walkUntil$1,-1,$_99qwt122jcq8h3oy.isAbove,$_99qwt122jcq8h3oy.isBelow),downUntil:curry$4(walkUntil$1,1,$_99qwt122jcq8h3oy.isBelow,$_99qwt122jcq8h3oy.isAbove),positionsUntil:function(direction,rootNode,predicateFn,node){var walkFn,isBelowFn,isAboveFn,caretPosition,clientRect,targetClientRect,caretWalker=CaretWalker(rootNode),result=[],line=0,getClientRect=function(caretPosition){return $_292trzkjcq8h3fz.last(caretPosition.getClientRects())};1===direction?(walkFn=caretWalker.next,isBelowFn=$_99qwt122jcq8h3oy.isBelow,isAboveFn=$_99qwt122jcq8h3oy.isAbove,caretPosition=CaretPosition.after(node)):(walkFn=caretWalker.prev,isBelowFn=$_99qwt122jcq8h3oy.isAbove,isAboveFn=$_99qwt122jcq8h3oy.isBelow,caretPosition=CaretPosition.before(node)),targetClientRect=getClientRect(caretPosition);do{if(caretPosition.isVisible()&&(clientRect=getClientRect(caretPosition),!isAboveFn(clientRect,targetClientRect))){if(result.length>0&&isBelowFn(clientRect,$_292trzkjcq8h3fz.last(result))&&line++,clientRect=$_99qwt122jcq8h3oy.clone(clientRect),clientRect.position=caretPosition,clientRect.line=line,predicateFn(clientRect))return result;result.push(clientRect)}}while(caretPosition=walkFn(caretPosition));return result},isAboveLine:curry$4(function(lineNumber,clientRect){return clientRect.line>lineNumber}),isLine:curry$4(function(lineNumber,clientRect){return clientRect.line===lineNumber})},isContentEditableFalse$11=$_bpl7e51qjcq8h3kz.isContentEditableFalse,getSelectedNode$1=$_1nmjnx23jcq8h3p1.getSelectedNode,isAfterContentEditableFalse$1=$_ctfd6a27jcq8h3pe.isAfterContentEditableFalse,isBeforeContentEditableFalse$1=$_ctfd6a27jcq8h3pe.isBeforeContentEditableFalse,getVisualCaretPosition=function(walkFn,caretPosition){for(;caretPosition=walkFn(caretPosition);)if(caretPosition.isVisible())return caretPosition;return caretPosition},isMoveInsideSameBlock=function(fromCaretPosition,toCaretPosition){var inSameBlock=$_ctfd6a27jcq8h3pe.isInSameBlock(fromCaretPosition,toCaretPosition);return!(inSameBlock||!$_bpl7e51qjcq8h3kz.isBr(fromCaretPosition.getNode()))||inSameBlock},isRangeInCaretContainerBlock=function(range){return $_cyutcs20jcq8h3or.isCaretContainerBlock(range.startContainer)},getNormalizedRangeEndPoint=function(direction,rootNode,range){return range=$_ctfd6a27jcq8h3pe.normalizeRange(direction,rootNode,range),-1===direction?CaretPosition.fromRangeStart(range):CaretPosition.fromRangeEnd(range)},moveToCeFalseHorizontally=function(direction,editor,getNextPosFn,isBeforeContentEditableFalseFn,range){var node,caretPosition,peekCaretPosition,rangeIsInContainerBlock;return!range.collapsed&&(node=getSelectedNode$1(range),isContentEditableFalse$11(node))?$_aixegr55jcq8h48n.showCaret(direction,editor,node,-1===direction):(rangeIsInContainerBlock=isRangeInCaretContainerBlock(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),isBeforeContentEditableFalseFn(caretPosition)?$_aixegr55jcq8h48n.selectNode(editor,caretPosition.getNode(-1===direction)):(caretPosition=getNextPosFn(caretPosition))?isBeforeContentEditableFalseFn(caretPosition)?$_aixegr55jcq8h48n.showCaret(direction,editor,caretPosition.getNode(-1===direction),1===direction):(peekCaretPosition=getNextPosFn(caretPosition),isBeforeContentEditableFalseFn(peekCaretPosition)&&isMoveInsideSameBlock(caretPosition,peekCaretPosition)?$_aixegr55jcq8h48n.showCaret(direction,editor,peekCaretPosition.getNode(-1===direction),1===direction):rangeIsInContainerBlock?$_aixegr55jcq8h48n.renderRangeCaret(editor,caretPosition.toRange()):null):rangeIsInContainerBlock?range:null)},moveToCeFalseVertically=function(direction,editor,walkerFn,range){var caretPosition,linePositions,nextLinePositions,closestNextLineRect,caretClientRect,clientX,dist1,dist2,contentEditableFalseNode;if(contentEditableFalseNode=getSelectedNode$1(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),linePositions=walkerFn(editor.getBody(),$_btk4qq6ejcq8h4g8.isAboveLine(1),caretPosition),nextLinePositions=$_292trzkjcq8h3fz.filter(linePositions,$_btk4qq6ejcq8h4g8.isLine(1)),caretClientRect=$_292trzkjcq8h3fz.last(caretPosition.getClientRects()),isBeforeContentEditableFalse$1(caretPosition)&&(contentEditableFalseNode=caretPosition.getNode()),isAfterContentEditableFalse$1(caretPosition)&&(contentEditableFalseNode=caretPosition.getNode(!0)),!caretClientRect)return null;if(clientX=caretClientRect.left,(closestNextLineRect=$_3x0ocn50jcq8h48c.findClosestClientRect(nextLinePositions,clientX))&&isContentEditableFalse$11(closestNextLineRect.node))return dist1=Math.abs(clientX-closestNextLineRect.left),dist2=Math.abs(clientX-closestNextLineRect.right),$_aixegr55jcq8h48n.showCaret(direction,editor,closestNextLineRect.node,dist1<dist2);if(contentEditableFalseNode){var caretPositions=$_btk4qq6ejcq8h4g8.positionsUntil(direction,editor.getBody(),$_btk4qq6ejcq8h4g8.isAboveLine(1),contentEditableFalseNode);if(closestNextLineRect=$_3x0ocn50jcq8h48c.findClosestClientRect($_292trzkjcq8h3fz.filter(caretPositions,$_btk4qq6ejcq8h4g8.isLine(1)),clientX))return $_aixegr55jcq8h48n.renderRangeCaret(editor,closestNextLineRect.position.toRange());if(closestNextLineRect=$_292trzkjcq8h3fz.last($_292trzkjcq8h3fz.filter(caretPositions,$_btk4qq6ejcq8h4g8.isLine(0))))return $_aixegr55jcq8h48n.renderRangeCaret(editor,closestNextLineRect.position.toRange())}},createTextBlock=function(editor){var textBlock=editor.dom.create(editor.settings.forced_root_block);return(!$_1surm29jcq8h31g.ie||$_1surm29jcq8h31g.ie>=11)&&(textBlock.innerHTML='<br data-mce-bogus="1">'),textBlock},exitPreBlock=function(editor,direction,range){var pre,newBlock,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_ghxtsv25jcq8h3p5.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_ghxtsv25jcq8h3p5.curry(getVisualCaretPosition,caretWalker.prev);if(range.collapsed&&editor.settings.forced_root_block){if(!(pre=editor.dom.getParent(range.startContainer,"PRE")))return;(1===direction?getNextVisualCaretPosition(CaretPosition.fromRangeStart(range)):getPrevVisualCaretPosition(CaretPosition.fromRangeStart(range)))||(newBlock=createTextBlock(editor),1===direction?editor.$(pre).after(newBlock):editor.$(pre).before(newBlock),editor.selection.select(newBlock,!0),editor.selection.collapse())}},getHorizontalRange=function(editor,forward){var newRange,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_ghxtsv25jcq8h3p5.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_ghxtsv25jcq8h3p5.curry(getVisualCaretPosition,caretWalker.prev),direction=forward?1:-1,getNextPosFn=forward?getNextVisualCaretPosition:getPrevVisualCaretPosition,isBeforeContentEditableFalseFn=forward?isBeforeContentEditableFalse$1:isAfterContentEditableFalse$1,range=editor.selection.getRng();return(newRange=moveToCeFalseHorizontally(direction,editor,getNextPosFn,isBeforeContentEditableFalseFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range))||null},getVerticalRange=function(editor,down){var newRange,direction=down?1:-1,walkerFn=down?$_btk4qq6ejcq8h4g8.downUntil:$_btk4qq6ejcq8h4g8.upUntil,range=editor.selection.getRng();return(newRange=moveToCeFalseVertically(direction,editor,walkerFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range))||null},$_8oxfg76djcq8h4g1={moveH:function(editor,forward){return function(){var newRng=getHorizontalRange(editor,forward);return!!newRng&&(editor.selection.setRng(newRng),!0)}},moveV:function(editor,down){return function(){var newRng=getVerticalRange(editor,down);return!!newRng&&(editor.selection.setRng(newRng),!0)}}},defaultPatterns=function(patterns){return $_de5suq4jcq8h2x0.map(patterns,function(pattern){return $_b4qnok5pjcq8h4bb.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:$_djct026jcq8h2xw.noop},pattern)})},matchesEvent=function(pattern,evt){return evt.keyCode===pattern.keyCode&&evt.shiftKey===pattern.shiftKey&&evt.altKey===pattern.altKey&&evt.ctrlKey===pattern.ctrlKey&&evt.metaKey===pattern.metaKey},match$1=function(patterns,evt){return $_de5suq4jcq8h2x0.bind(defaultPatterns(patterns),function(pattern){return matchesEvent(pattern,evt)?[pattern]:[]})},$_cowqq16fjcq8h4gc={match:match$1,action:function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}},execute:function(patterns,evt){return $_de5suq4jcq8h2x0.find(match$1(patterns,evt),function(pattern){return pattern.action()})}},executeKeydownOverride=function(editor,caret,evt){var os=$_cfduydmjcq8h3gc.detect().os;$_cowqq16fjcq8h4gc.execute([{keyCode:$_de018656jcq8h48p.RIGHT,action:$_8oxfg76djcq8h4g1.moveH(editor,!0)},{keyCode:$_de018656jcq8h48p.LEFT,action:$_8oxfg76djcq8h4g1.moveH(editor,!1)},{keyCode:$_de018656jcq8h48p.UP,action:$_8oxfg76djcq8h4g1.moveV(editor,!1)},{keyCode:$_de018656jcq8h48p.DOWN,action:$_8oxfg76djcq8h4g1.moveV(editor,!0)},{keyCode:$_de018656jcq8h48p.RIGHT,action:$_duo1zd3kjcq8h3x5.move(editor,caret,!0)},{keyCode:$_de018656jcq8h48p.LEFT,action:$_duo1zd3kjcq8h3x5.move(editor,caret,!1)},{keyCode:$_de018656jcq8h48p.RIGHT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_duo1zd3kjcq8h3x5.moveNextWord(editor,caret)},{keyCode:$_de018656jcq8h48p.LEFT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_duo1zd3kjcq8h3x5.movePrevWord(editor,caret)}],evt).each(function(_){evt.preventDefault()})},$_1moeo86cjcq8h4fx={setup:function(editor,caret){editor.on("keydown",function(evt){!1===evt.isDefaultPrevented()&&executeKeydownOverride(editor,caret,evt)})}},getParentInlines=function(rootElm,startElm){var parents=$_5174v33jcq8h3u4.parentsAndSelf(startElm,rootElm);return $_de5suq4jcq8h2x0.findIndex(parents,$_2bhgbq1pjcq8h3ku.isBlock).fold($_djct026jcq8h2xw.constant(parents),function(index){return parents.slice(0,index)})},hasOnlyOneChild$1=function(elm){return 1===$_gah0mz17jcq8h3ir.children(elm).length},deleteLastPosition=function(forward,editor,target,parentInlines){var isFormatElement=$_djct026jcq8h2xw.curry($_24rn4g3ejcq8h3w4.isFormatElement,editor),formatNodes=$_de5suq4jcq8h2x0.map($_de5suq4jcq8h2x0.filter(parentInlines,isFormatElement),function(elm){return elm.dom()});if(0===formatNodes.length)$_cdt9q138jcq8h3uw.deleteElement(editor,forward,target);else{var pos=$_24rn4g3ejcq8h3w4.replaceWithCaretFormat(target.dom(),formatNodes);editor.selection.setRng(pos.toRange())}},deleteCaret$1=function(editor,forward){var rootElm=$_etvcvfyjcq8h3hp.fromDom(editor.getBody()),startElm=$_etvcvfyjcq8h3hp.fromDom(editor.selection.getStart()),parentInlines=$_de5suq4jcq8h2x0.filter(getParentInlines(rootElm,startElm),hasOnlyOneChild$1);return $_de5suq4jcq8h2x0.last(parentInlines).map(function(target){var fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());return!!$_f8lxkr2tjcq8h3sf.willDeleteLastPositionInElement(forward,fromPos,target.dom())&&(deleteLastPosition(forward,editor,target,parentInlines),!0)}).getOr(!1)},$_bxyybv6hjcq8h4gj={backspaceDelete:function(editor,forward){return!!editor.selection.isCollapsed()&&deleteCaret$1(editor,forward)}},executeKeydownOverride$1=function(editor,caret,evt){$_cowqq16fjcq8h4gc.execute([{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_7vw9e735jcq8h3ug.backspaceDelete,editor,!1)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_7vw9e735jcq8h3ug.backspaceDelete,editor,!0)},{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_5ebyq839jcq8h3v8.backspaceDelete,editor,caret,!1)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_5ebyq839jcq8h3v8.backspaceDelete,editor,caret,!0)},{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_5t65x34jcq8h3u8.backspaceDelete,editor,!1)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_5t65x34jcq8h3u8.backspaceDelete,editor,!0)},{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_1kzdh42rjcq8h3rv.backspaceDelete,editor,!1)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_1kzdh42rjcq8h3rv.backspaceDelete,editor,!0)},{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_2e1ncm3njcq8h3xg.backspaceDelete,editor,!1)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_2e1ncm3njcq8h3xg.backspaceDelete,editor,!0)},{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_bxyybv6hjcq8h4gj.backspaceDelete,editor,!1)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_bxyybv6hjcq8h4gj.backspaceDelete,editor,!0)}],evt).each(function(_){evt.preventDefault()})},executeKeyupOverride=function(editor,evt){$_cowqq16fjcq8h4gc.execute([{keyCode:$_de018656jcq8h48p.BACKSPACE,action:$_cowqq16fjcq8h4gc.action($_7vw9e735jcq8h3ug.paddEmptyElement,editor)},{keyCode:$_de018656jcq8h48p.DELETE,action:$_cowqq16fjcq8h4gc.action($_7vw9e735jcq8h3ug.paddEmptyElement,editor)}],evt)},$_1fcz6w6gjcq8h4gg={setup:function(editor,caret){editor.on("keydown",function(evt){!1===evt.isDefaultPrevented()&&executeKeydownOverride$1(editor,caret,evt)}),editor.on("keyup",function(evt){!1===evt.isDefaultPrevented()&&executeKeyupOverride(editor,evt)})}},getBodySetting=function(editor,name,defaultValue){var value=editor.getParam(name,defaultValue);if(-1!==value.indexOf("=")){var bodyObj=editor.getParam(name,"","hash");return bodyObj.hasOwnProperty(editor.id)?bodyObj[editor.id]:defaultValue}return value},$_f098zt6ljcq8h4hd={getIframeAttrs:function(editor){return editor.getParam("iframe_attrs",{})},getDocType:function(editor){return editor.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(editor){return editor.getParam("document_base_url","")},getBodyId:function(editor){return getBodySetting(editor,"body_id","tinymce")},getBodyClass:function(editor){return getBodySetting(editor,"body_class","")},getContentSecurityPolicy:function(editor){return editor.getParam("content_security_policy","")},shouldPutBrInPre:function(editor){return editor.getParam("br_in_pre",!0)},getForcedRootBlock:function(editor){if(editor.getParam("force_p_newlines",!1))return"p";var block=editor.getParam("forced_root_block","p");return!1===block?"":block},getForcedRootBlockAttrs:function(editor){return editor.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(editor){return editor.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(editor){return editor.getParam("no_newline_selector","")},shouldKeepStyles:function(editor){return editor.getParam("keep_styles",!0)},shouldEndContainerOnEmtpyBlock:function(editor){return editor.getParam("end_container_on_empty_block",!1)}},firstNonWhiteSpaceNodeSibling=function(node){for(;node;){if(1===node.nodeType||3===node.nodeType&&node.data&&/[\r\n\s]/.test(node.data))return node;node=node.nextSibling}},getParentBlock$2=function(editor){return $_doqc1o5jcq8h2xq.from(editor.dom.getParent(editor.selection.getStart(!0),editor.dom.isBlock))},$_fccedq6njcq8h4hj={moveToCaretPosition:function(editor,root){var walker,node,rng,lastNode=root,dom=editor.dom,moveCaretBeforeOnEnterElementsMap=editor.schema.getMoveCaretBeforeOnEnterElements();if(root){if(/^(LI|DT|DD)$/.test(root.nodeName)){var firstChild=firstNonWhiteSpaceNodeSibling(root.firstChild);firstChild&&/^(UL|OL|DL)$/.test(firstChild.nodeName)&&root.insertBefore(dom.doc.createTextNode(""),root.firstChild)}if(rng=dom.createRng(),root.normalize(),root.hasChildNodes()){for(walker=new TreeWalker(root,root);node=walker.current();){if($_bpl7e51qjcq8h3kz.isText(node)){rng.setStart(node,0),rng.setEnd(node,0);break}if(moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]){rng.setStartBefore(node),rng.setEndBefore(node);break}lastNode=node,node=walker.next()}node||(rng.setStart(lastNode,0),rng.setEnd(lastNode,0))}else $_bpl7e51qjcq8h3kz.isBr(root)?root.nextSibling&&dom.isBlock(root.nextSibling)?(rng.setStartBefore(root),rng.setEndBefore(root)):(rng.setStartAfter(root),rng.setEndAfter(root)):(rng.setStart(root,0),rng.setEnd(root,0));editor.selection.setRng(rng),dom.remove(void 0),editor.selection.scrollIntoView(root)}},getEditableRoot:function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},getParentBlock:getParentBlock$2,getParentBlockName:function(editor){return getParentBlock$2(editor).fold($_djct026jcq8h2xw.constant(""),function(parentBlock){return parentBlock.nodeName.toUpperCase()})},isListItemParentBlock:function(editor){return getParentBlock$2(editor).filter(function(elm){return $_2bhgbq1pjcq8h3ku.isListItem($_etvcvfyjcq8h3hp.fromDom(elm))}).isSome()}},hasFirstChild=function(elm,name){return elm.firstChild&&elm.firstChild.nodeName===name},hasParent$1=function(elm,parentName){return elm&&elm.parentNode&&elm.parentNode.nodeName===parentName},isListBlock=function(elm){return elm&&/^(OL|UL|LI)$/.test(elm.nodeName)},isNestedList=function(elm){return isListBlock(elm)&&isListBlock(elm.parentNode)},getContainerBlock=function(containerBlock){var containerBlockParent=containerBlock.parentNode;return/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)?containerBlockParent:containerBlock},isFirstOrLastLi=function(containerBlock,parentBlock,first){for(var node=containerBlock[first?"firstChild":"lastChild"];node&&!$_bpl7e51qjcq8h3kz.isElement(node);)node=node[first?"nextSibling":"previousSibling"];return node===parentBlock},$_7nn9pt6mjcq8h4hg={insert:function(editor,createNewBlock,containerBlock,parentBlock,newBlockName){var dom=editor.dom,rng=editor.selection.getRng();if(containerBlock!==editor.getBody()){isNestedList(containerBlock)&&(newBlockName="LI");var newBlock=newBlockName?createNewBlock(newBlockName):dom.create("BR");if(isFirstOrLastLi(containerBlock,parentBlock,!0)&&isFirstOrLastLi(containerBlock,parentBlock,!1))hasParent$1(containerBlock,"LI")?dom.insertAfter(newBlock,getContainerBlock(containerBlock)):dom.replace(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!0))hasParent$1(containerBlock,"LI")?(dom.insertAfter(newBlock,getContainerBlock(containerBlock)),newBlock.appendChild(dom.doc.createTextNode(" ")),newBlock.appendChild(containerBlock)):containerBlock.parentNode.insertBefore(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!1))dom.insertAfter(newBlock,getContainerBlock(containerBlock));else{containerBlock=getContainerBlock(containerBlock);var tmpRng=rng.cloneRange();tmpRng.setStartAfter(parentBlock),tmpRng.setEndAfter(containerBlock);var fragment=tmpRng.extractContents();"LI"===newBlockName&&hasFirstChild(fragment,"LI")?(newBlock=fragment.firstChild,dom.insertAfter(fragment,containerBlock)):(dom.insertAfter(fragment,containerBlock),dom.insertAfter(newBlock,containerBlock))}dom.remove(parentBlock),$_fccedq6njcq8h4hj.moveToCaretPosition(editor,newBlock)}}},isEmptyAnchor=function(elm){return elm&&"A"===elm.nodeName&&0===$_topwtjjcq8h3fq.trim($_fz4vwq21jcq8h3ow.trim(elm.innerText||elm.textContent)).length},isTableCell$4=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},emptyBlock=function(elm){elm.innerHTML='<br data-mce-bogus="1">'},containerAndSiblingName=function(container,nodeName){return container.nodeName===nodeName||container.previousSibling&&container.previousSibling.nodeName===nodeName},canSplitBlock=function(dom,node){return node&&dom.isBlock(node)&&!/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName)&&!/^(fixed|absolute)/i.test(node.style.position)&&"true"!==dom.getContentEditable(node)},trimInlineElementsOnLeftSideOfBlock=function(dom,nonEmptyElementsMap,block){var i,node=block,firstChilds=[];if(node){for(;node=node.firstChild;){if(dom.isBlock(node))return;$_bpl7e51qjcq8h3kz.isElement(node)&&!nonEmptyElementsMap[node.nodeName.toLowerCase()]&&firstChilds.push(node)}for(i=firstChilds.length;i--;)!(node=firstChilds[i]).hasChildNodes()||node.firstChild===node.lastChild&&""===node.firstChild.nodeValue?dom.remove(node):isEmptyAnchor(node)&&dom.remove(node)}},normalizeZwspOffset=function(start,container,offset){return!1===$_bpl7e51qjcq8h3kz.isText(container)?offset:start?1===offset&&container.data.charAt(offset-1)===$_fz4vwq21jcq8h3ow.ZWSP?0:offset:offset===container.data.length-1&&container.data.charAt(offset)===$_fz4vwq21jcq8h3ow.ZWSP?container.data.length:offset},includeZwspInRange=function(rng){var newRng=rng.cloneRange();return newRng.setStart(rng.startContainer,normalizeZwspOffset(!0,rng.startContainer,rng.startOffset)),newRng.setEnd(rng.endContainer,normalizeZwspOffset(!1,rng.endContainer,rng.endOffset)),newRng},trimLeadingLineBreaks=function(node){do{$_bpl7e51qjcq8h3kz.isText(node)&&(node.nodeValue=node.nodeValue.replace(/^[\r\n]+/,"")),node=node.firstChild}while(node)},getEditableRoot=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},setForcedBlockAttrs=function(editor,node){var forcedRootBlockName=$_f098zt6ljcq8h4hd.getForcedRootBlock(editor);forcedRootBlockName&&forcedRootBlockName.toLowerCase()===node.tagName.toLowerCase()&&editor.dom.setAttribs(node,$_f098zt6ljcq8h4hd.getForcedRootBlockAttrs(editor))},wrapSelfAndSiblingsInDefaultBlock=function(editor,newBlockName,rng,container,offset){var newBlock,parentBlock,startNode,node,next,rootBlockName,blockName=newBlockName||"P",dom=editor.dom,editableRoot=getEditableRoot(dom,container);if(!(parentBlock=dom.getParent(container,dom.isBlock))||!canSplitBlock(dom,parentBlock)){if(parentBlock=parentBlock||editableRoot,rootBlockName=parentBlock===editor.getBody()||isTableCell$4(parentBlock)?parentBlock.nodeName.toLowerCase():parentBlock.parentNode.nodeName.toLowerCase(),!parentBlock.hasChildNodes())return newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),parentBlock.appendChild(newBlock),rng.setStart(newBlock,0),rng.setEnd(newBlock,0),newBlock;for(node=container;node.parentNode!==parentBlock;)node=node.parentNode;for(;node&&!dom.isBlock(node);)startNode=node,node=node.previousSibling;if(startNode&&editor.schema.isValidChild(rootBlockName,blockName.toLowerCase())){for(newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),startNode.parentNode.insertBefore(newBlock,startNode),node=startNode;node&&!dom.isBlock(node);)next=node.nextSibling,newBlock.appendChild(node),node=next;rng.setStart(container,offset),rng.setEnd(container,offset)}}return container},addBrToBlockIfNeeded=function(dom,block){var lastChild;block.normalize(),(lastChild=block.lastChild)&&!/^(left|right)$/gi.test(dom.getStyle(lastChild,"float",!0))||dom.add(block,"br")},$_8bibsq6kjcq8h4gu={insert:function(editor,evt){var tmpRng,editableRoot,container,offset,parentBlock,shiftKey,newBlock,fragment,containerBlock,parentBlockName,containerBlockName,newBlockName,isAfterLastNodeInContainer,dom=editor.dom,schema=editor.schema,nonEmptyElementsMap=schema.getNonEmptyElements(),rng=editor.selection.getRng(),createNewBlock=function(name){var block,clonedNode,caretNode,node=container,textInlineElements=schema.getTextInlineElements();if(name||"TABLE"===parentBlockName||"HR"===parentBlockName?(block=dom.create(name||newBlockName),setForcedBlockAttrs(editor,block)):block=parentBlock.cloneNode(!1),caretNode=block,!1===$_f098zt6ljcq8h4hd.shouldKeepStyles(editor))dom.setAttrib(block,"style",null),dom.setAttrib(block,"class",null);else do{if(textInlineElements[node.nodeName]){if($_24rn4g3ejcq8h3w4.isCaretNode(node))continue;clonedNode=node.cloneNode(!1),dom.setAttrib(clonedNode,"id",""),block.hasChildNodes()?(clonedNode.appendChild(block.firstChild),block.appendChild(clonedNode)):(caretNode=clonedNode,block.appendChild(clonedNode))}}while((node=node.parentNode)&&node!==editableRoot);return emptyBlock(caretNode),block},isCaretAtStartOrEndOfBlock=function(start){var walker,node,name,normalizedOffset;if(normalizedOffset=normalizeZwspOffset(start,container,offset),$_bpl7e51qjcq8h3kz.isText(container)&&(start?normalizedOffset>0:normalizedOffset<container.nodeValue.length))return!1;if(container.parentNode===parentBlock&&isAfterLastNodeInContainer&&!start)return!0;if(start&&$_bpl7e51qjcq8h3kz.isElement(container)&&container===parentBlock.firstChild)return!0;if(containerAndSiblingName(container,"TABLE")||containerAndSiblingName(container,"HR"))return isAfterLastNodeInContainer&&!start||!isAfterLastNodeInContainer&&start;for(walker=new TreeWalker(container,parentBlock),$_bpl7e51qjcq8h3kz.isText(container)&&(start&&0===normalizedOffset?walker.prev():start||normalizedOffset!==container.nodeValue.length||walker.next());node=walker.current();){if($_bpl7e51qjcq8h3kz.isElement(node)){if(!node.getAttribute("data-mce-bogus")&&(name=node.nodeName.toLowerCase(),nonEmptyElementsMap[name]&&"br"!==name))return!1}else if($_bpl7e51qjcq8h3kz.isText(node)&&!/^[ \t\r\n]*$/.test(node.nodeValue))return!1;start?walker.prev():walker.next()}return!0},insertNewBlockAfter=function(){newBlock=/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName)&&"HGROUP"!==containerBlockName?createNewBlock(newBlockName):createNewBlock(),$_f098zt6ljcq8h4hd.shouldEndContainerOnEmtpyBlock(editor)&&canSplitBlock(dom,containerBlock)&&dom.isEmpty(parentBlock)?newBlock=dom.split(containerBlock,parentBlock):dom.insertAfter(newBlock,parentBlock),$_fccedq6njcq8h4hj.moveToCaretPosition(editor,newBlock)};$_5auu293sjcq8h429.normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)}),container=rng.startContainer,offset=rng.startOffset,newBlockName=$_f098zt6ljcq8h4hd.getForcedRootBlock(editor),shiftKey=evt.shiftKey,$_bpl7e51qjcq8h3kz.isElement(container)&&container.hasChildNodes()&&(isAfterLastNodeInContainer=offset>container.childNodes.length-1,container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&$_bpl7e51qjcq8h3kz.isText(container)?container.nodeValue.length:0),(editableRoot=getEditableRoot(dom,container))&&((newBlockName&&!shiftKey||!newBlockName&&shiftKey)&&(container=wrapSelfAndSiblingsInDefaultBlock(editor,newBlockName,rng,container,offset)),parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,parentBlockName=parentBlock?parentBlock.nodeName.toUpperCase():"","LI"!==(containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"")||evt.ctrlKey||(parentBlock=containerBlock,containerBlock=containerBlock.parentNode,parentBlockName=containerBlockName),/^(LI|DT|DD)$/.test(parentBlockName)&&dom.isEmpty(parentBlock)?$_7nn9pt6mjcq8h4hg.insert(editor,createNewBlock,containerBlock,parentBlock,newBlockName):newBlockName&&parentBlock===editor.getBody()||(newBlockName=newBlockName||"P",$_cyutcs20jcq8h3or.isCaretContainerBlock(parentBlock)?(newBlock=$_cyutcs20jcq8h3or.showCaretContainerBlock(parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),$_fccedq6njcq8h4hj.moveToCaretPosition(editor,newBlock)):isCaretAtStartOrEndOfBlock()?insertNewBlockAfter():isCaretAtStartOrEndOfBlock(!0)?(newBlock=parentBlock.parentNode.insertBefore(createNewBlock(),parentBlock),$_fccedq6njcq8h4hj.moveToCaretPosition(editor,containerAndSiblingName(parentBlock,"HR")?newBlock:parentBlock)):((tmpRng=includeZwspInRange(rng).cloneRange()).setEndAfter(parentBlock),fragment=tmpRng.extractContents(),trimLeadingLineBreaks(fragment),newBlock=fragment.firstChild,dom.insertAfter(fragment,parentBlock),trimInlineElementsOnLeftSideOfBlock(dom,nonEmptyElementsMap,newBlock),addBrToBlockIfNeeded(dom,parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),newBlock.normalize(),dom.isEmpty(newBlock)?(dom.remove(newBlock),insertNewBlockAfter()):$_fccedq6njcq8h4hj.moveToCaretPosition(editor,newBlock)),dom.setAttrib(newBlock,"id",""),editor.fire("NewBlock",{newBlock:newBlock})))}},matchesSelector=function(editor,selector){return $_fccedq6njcq8h4hj.getParentBlock(editor).filter(function(parentBlock){return selector.length>0&&$_ds01nx1fjcq8h3jy.is($_etvcvfyjcq8h3hp.fromDom(parentBlock),selector)}).isSome()},$_4mnanu6pjcq8h4ht={shouldInsertBr:function(editor){return matchesSelector(editor,$_f098zt6ljcq8h4hd.getBrNewLineSelector(editor))},shouldBlockNewLine:function(editor){return matchesSelector(editor,$_f098zt6ljcq8h4hd.getNoNewLineSelector(editor))}},newLineAction=$_b40jd137jcq8h3us.generate([{br:[]},{block:[]},{none:[]}]),shouldBlockNewLine=function(editor,shiftKey){return $_4mnanu6pjcq8h4ht.shouldBlockNewLine(editor)},isBrMode=function(requiredState){return function(editor,shiftKey){return""===$_f098zt6ljcq8h4hd.getForcedRootBlock(editor)===requiredState}},inListBlock=function(requiredState){return function(editor,shiftKey){return $_fccedq6njcq8h4hj.isListItemParentBlock(editor)===requiredState}},inPreBlock=function(requiredState){return function(editor,shiftKey){return"PRE"===$_fccedq6njcq8h4hj.getParentBlockName(editor)===requiredState}},shouldPutBrInPre$1=function(requiredState){return function(editor,shiftKey){return $_f098zt6ljcq8h4hd.shouldPutBrInPre(editor)===requiredState}},inBrContext=function(editor,shiftKey){return $_4mnanu6pjcq8h4ht.shouldInsertBr(editor)},hasShiftKey=function(editor,shiftKey){return shiftKey},canInsertIntoEditableRoot=function(editor){var forcedRootBlock=$_f098zt6ljcq8h4hd.getForcedRootBlock(editor),rootEditable=$_fccedq6njcq8h4hj.getEditableRoot(editor.dom,editor.selection.getStart());return rootEditable&&editor.schema.isValidChild(rootEditable.nodeName,forcedRootBlock||"P")},match$2=function(predicates,action){return function(editor,shiftKey){return $_de5suq4jcq8h2x0.foldl(predicates,function(res,p){return res&&p(editor,shiftKey)},!0)?$_doqc1o5jcq8h2xq.some(action):$_doqc1o5jcq8h2xq.none()}},$_bu0kzy6ojcq8h4hp={getAction:function(editor,evt){return $_1jnz743jjcq8h3x3.evaluateUntil([match$2([shouldBlockNewLine],newLineAction.none()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1),hasShiftKey],newLineAction.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1)],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0),hasShiftKey],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0)],newLineAction.br()),match$2([inListBlock(!0),hasShiftKey],newLineAction.br()),match$2([inListBlock(!0)],newLineAction.block()),match$2([isBrMode(!0),hasShiftKey,canInsertIntoEditableRoot],newLineAction.block()),match$2([isBrMode(!0)],newLineAction.br()),match$2([inBrContext],newLineAction.br()),match$2([isBrMode(!1),hasShiftKey],newLineAction.br()),match$2([canInsertIntoEditableRoot],newLineAction.block())],[editor,evt.shiftKey]).getOr(newLineAction.none())}},$_90wpp76jjcq8h4gp={insert:function(editor,evt){$_bu0kzy6ojcq8h4hp.getAction(editor,evt).fold(function(){$_15j2kd3rjcq8h3yg.insert(editor,evt)},function(){$_8bibsq6kjcq8h4gu.insert(editor,evt)},$_djct026jcq8h2xw.noop)}},endTypingLevel=function(undoManager){undoManager.typing&&(undoManager.typing=!1,undoManager.add())},handleEnterKeyEvent=function(editor,event){event.isDefaultPrevented()||(event.preventDefault(),endTypingLevel(editor.undoManager),editor.undoManager.transact(function(){!1===editor.selection.isCollapsed()&&editor.execCommand("Delete"),$_90wpp76jjcq8h4gp.insert(editor,event)}))},$_en19eg6ijcq8h4go={setup:function(editor){editor.on("keydown",function(event){event.keyCode===$_de018656jcq8h48p.ENTER&&handleEnterKeyEvent(editor,event)})}},isValidInsertPoint=function(location,caretPosition){return isAtStartOrEnd(location)&&$_bpl7e51qjcq8h3kz.isText(caretPosition.container())},insertNbspAtPosition=function(editor,caretPosition){var container=caretPosition.container(),offset=caretPosition.offset();container.insertData(offset,""),editor.selection.setCursorLocation(container,offset+1)},insertAtLocation=function(editor,caretPosition,location){return!!isValidInsertPoint(location,caretPosition)&&(insertNbspAtPosition(editor,caretPosition),!0)},insertAtCaret$2=function(editor){var isInlineTarget=$_djct026jcq8h2xw.curry($_7ve5rf2wjcq8h3sv.isInlineTarget,editor),caretPosition=CaretPosition.fromRangeStart(editor.selection.getRng());return $_59o57m3djcq8h3vw.readLocation(isInlineTarget,editor.getBody(),caretPosition).map($_djct026jcq8h2xw.curry(insertAtLocation,editor,caretPosition)).getOr(!1)},isAtStartOrEnd=function(location){return location.fold($_djct026jcq8h2xw.constant(!1),$_djct026jcq8h2xw.constant(!0),$_djct026jcq8h2xw.constant(!0),$_djct026jcq8h2xw.constant(!1))},$_f1so376rjcq8h4hy={insertAtSelection:function(editor){return!!editor.selection.isCollapsed()&&insertAtCaret$2(editor)}},executeKeydownOverride$2=function(editor,evt){$_cowqq16fjcq8h4gc.execute([{keyCode:$_de018656jcq8h48p.SPACEBAR,action:$_cowqq16fjcq8h4gc.action($_f1so376rjcq8h4hy.insertAtSelection,editor)}],evt).each(function(_){evt.preventDefault()})},$_97acxc6qjcq8h4hw={setup:function(editor){editor.on("keydown",function(evt){!1===evt.isDefaultPrevented()&&executeKeydownOverride$2(editor,evt)})}},$_60al0r6bjcq8h4fw={setup:function(editor){var caret=$_duo1zd3kjcq8h3x5.setupSelectedState(editor);$_1moeo86cjcq8h4fx.setup(editor,caret),$_1fcz6w6gjcq8h4gg.setup(editor,caret),$_en19eg6ijcq8h4go.setup(editor),$_97acxc6qjcq8h4hw.setup(editor)}},Quirks=function(editor){var each=$_topwtjjcq8h3fq.each,BACKSPACE=$_de018656jcq8h48p.BACKSPACE,DELETE=$_de018656jcq8h48p.DELETE,dom=editor.dom,selection=editor.selection,settings=editor.settings,parser=editor.parser,isGecko=$_1surm29jcq8h31g.gecko,isIE=$_1surm29jcq8h31g.ie,isWebKit=$_1surm29jcq8h31g.webkit,mceInternalDataType=isIE?"Text":"URL",setEditorCommandState=function(cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},isDefaultPrevented=function(e){return e.isDefaultPrevented()},setMceInternalContent=function(e){var selectionHtml,internalContent;e.dataTransfer&&(editor.selection.isCollapsed()&&"IMG"===e.target.tagName&&selection.select(e.target),(selectionHtml=editor.selection.getContent()).length>0&&(internalContent="data:text/mce-internal,"+escape(editor.id)+","+escape(selectionHtml),e.dataTransfer.setData(mceInternalDataType,internalContent)))},getMceInternalContent=function(e){var internalContent;return e.dataTransfer&&(internalContent=e.dataTransfer.getData(mceInternalDataType))&&internalContent.indexOf("data:text/mce-internal,")>=0?(internalContent=internalContent.substr("data:text/mce-internal,".length).split(","),{id:unescape(internalContent[0]),html:unescape(internalContent[1])}):null},insertClipboardContents=function(content,internal){editor.queryCommandSupported("mceInsertClipboardContent")?editor.execCommand("mceInsertClipboardContent",!1,{content:content,internal:internal}):editor.execCommand("mceInsertContent",!1,content)},selectAll=function(){editor.shortcuts.add("meta+a",null,"SelectAll")},disableBackspaceIntoATable=function(){editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE&&selection.isCollapsed()&&0===selection.getRng().startOffset){var previousSibling=selection.getNode().previousSibling;if(previousSibling&&previousSibling.nodeName&&"table"===previousSibling.nodeName.toLowerCase())return e.preventDefault(),!1}})},bodyHeight=function(){editor.inline||(editor.contentStyles.push("body {min-height: 150px}"),editor.on("click",function(e){var rng;if("HTML"===e.target.nodeName){if($_1surm29jcq8h31g.ie>11)return void editor.getBody().focus();rng=editor.selection.getRng(),editor.getBody().focus(),editor.selection.setRng(rng),editor.selection.normalize(),editor.nodeChanged()}}))};return editor.on("keydown",function(e){var rng,container,offset,root,parent;if(!isDefaultPrevented(e)&&e.keyCode===$_de018656jcq8h48p.BACKSPACE&&(rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset,root=dom.getRoot(),parent=container,rng.collapsed&&0===offset)){for(;parent&&parent.parentNode&&parent.parentNode.firstChild===parent&&parent.parentNode!==root;)parent=parent.parentNode;"BLOCKQUOTE"===parent.tagName&&(editor.formatter.toggle("blockquote",null,parent),(rng=dom.createRng()).setStart(container,0),rng.setEnd(container,0),selection.setRng(rng))}}),function(){var serializeRng=function(rng){var body=dom.create("body"),contents=rng.cloneContents();return body.appendChild(contents),selection.serializer.serialize(body,{format:"html"})},allContentsSelected=function(rng){var selection=serializeRng(rng),allRng=dom.createRng();return allRng.selectNode(editor.getBody()),selection===serializeRng(allRng)};editor.on("keydown",function(e){var isCollapsed,body,keyCode=e.keyCode;if(!isDefaultPrevented(e)&&(keyCode===DELETE||keyCode===BACKSPACE)){if(isCollapsed=editor.selection.isCollapsed(),body=editor.getBody(),isCollapsed&&!dom.isEmpty(body))return;if(!isCollapsed&&!allContentsSelected(editor.selection.getRng()))return;e.preventDefault(),editor.setContent(""),body.firstChild&&dom.isBlock(body.firstChild)?editor.selection.setCursorLocation(body.firstChild,0):editor.selection.setCursorLocation(body,0),editor.nodeChanged()}})}(),$_1surm29jcq8h31g.windowsPhone||editor.on("keyup focusin mouseup",function(e){$_de018656jcq8h48p.modifierPressed(e)||selection.normalize()},!0),isWebKit&&(editor.settings.content_editable||dom.bind(editor.getDoc(),"mousedown mouseup",function(e){var rng;if(e.target===editor.getDoc().documentElement)if(rng=selection.getRng(),editor.getBody().focus(),"mousedown"===e.type){if($_cyutcs20jcq8h3or.isCaretContainer(rng.startContainer))return;selection.placeCaretAt(e.clientX,e.clientY)}else selection.setRng(rng)}),editor.on("click",function(e){var target=e.target;/^(IMG|HR)$/.test(target.nodeName)&&"false"!==dom.getContentEditableParent(target)&&(e.preventDefault(),editor.selection.select(target),editor.nodeChanged()),"A"===target.nodeName&&dom.hasClass(target,"mce-item-anchor")&&(e.preventDefault(),selection.select(target))}),settings.forced_root_block&&editor.on("init",function(){setEditorCommandState("DefaultParagraphSeparator",settings.forced_root_block)}),editor.on("init",function(){editor.dom.bind(editor.getBody(),"submit",function(e){e.preventDefault()})}),disableBackspaceIntoATable(),parser.addNodeFilter("br",function(nodes){for(var i=nodes.length;i--;)"Apple-interchange-newline"===nodes[i].attr("class")&&nodes[i].remove()}),$_1surm29jcq8h31g.iOS?(editor.inline||editor.on("keydown",function(){document.activeElement===document.body&&editor.getWin().focus()}),bodyHeight(),editor.on("click",function(e){var elm=e.target;do{if("A"===elm.tagName)return void e.preventDefault()}while(elm=elm.parentNode)}),editor.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):selectAll()),$_1surm29jcq8h31g.ie>=11&&(bodyHeight(),disableBackspaceIntoATable()),$_1surm29jcq8h31g.ie&&(selectAll(),setEditorCommandState("AutoUrlDetect",!1),editor.on("dragstart",function(e){setMceInternalContent(e)}),editor.on("drop",function(e){if(!isDefaultPrevented(e)){var internalContent=getMceInternalContent(e);if(internalContent&&internalContent.id!==editor.id){e.preventDefault();var rng=$_a49bkx61jcq8h4e6.fromPoint(e.x,e.y,editor.getDoc());selection.setRng(rng),insertClipboardContents(internalContent.html,!0)}}})),isGecko&&(editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(!editor.getBody().getElementsByTagName("hr").length)return;if(selection.isCollapsed()&&0===selection.getRng().startOffset){var node=selection.getNode(),previousSibling=node.previousSibling;if("HR"===node.nodeName)return dom.remove(node),void e.preventDefault();previousSibling&&previousSibling.nodeName&&"hr"===previousSibling.nodeName.toLowerCase()&&(dom.remove(previousSibling),e.preventDefault())}}}),Range.prototype.getClientRects||editor.on("mousedown",function(e){if(!isDefaultPrevented(e)&&"HTML"===e.target.nodeName){var body_1=editor.getBody();body_1.blur(),$_51uzcpgjcq8h3db.setEditorTimeout(editor,function(){body_1.focus()})}}),function(){var getAttributeApplyFunction=function(){var template=dom.getAttribs(selection.getStart().cloneNode(!1));return function(){var target=selection.getStart();target!==editor.getBody()&&(dom.setAttrib(target,"style",null),each(template,function(attr){target.setAttributeNode(attr.cloneNode(!0))}))}},isSelectionAcrossElements=function(){return!selection.isCollapsed()&&dom.getParent(selection.getStart(),dom.isBlock)!==dom.getParent(selection.getEnd(),dom.isBlock)};editor.on("keypress",function(e){var applyAttributes;if(!isDefaultPrevented(e)&&(8===e.keyCode||46===e.keyCode)&&isSelectionAcrossElements())return applyAttributes=getAttributeApplyFunction(),editor.getDoc().execCommand("delete",!1,null),applyAttributes(),e.preventDefault(),!1}),dom.bind(editor.getDoc(),"cut",function(e){var applyAttributes;!isDefaultPrevented(e)&&isSelectionAcrossElements()&&(applyAttributes=getAttributeApplyFunction(),$_51uzcpgjcq8h3db.setEditorTimeout(editor,function(){applyAttributes()}))})}(),settings.readonly||editor.on("BeforeExecCommand MouseDown",function(){setEditorCommandState("StyleWithCSS",!1),setEditorCommandState("enableInlineTableEditing",!1),settings.object_resizing||setEditorCommandState("enableObjectResizing",!1)}),function(){var fixLinks=function(){each(dom.select("a"),function(node){var parentNode=node.parentNode,root=dom.getRoot();if(parentNode.lastChild===node){for(;parentNode&&!dom.isBlock(parentNode);){if(parentNode.parentNode.lastChild!==parentNode||parentNode===root)return;parentNode=parentNode.parentNode}dom.add(parentNode,"br",{"data-mce-bogus":1})}})};editor.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||fixLinks()})}(),editor.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),$_1surm29jcq8h31g.mac&&editor.on("keydown",function(e){!$_de018656jcq8h48p.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),editor.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}),disableBackspaceIntoATable()),{refreshContentEditable:function(){},isHidden:function(){var sel;return!isGecko||editor.removed?0:!(sel=editor.selection.getSel())||!sel.rangeCount||0===sel.rangeCount}}},DOM$5=DOMUtils.DOM,appendStyle=function(editor,text){var head=$_etvcvfyjcq8h3hp.fromDom(editor.getDoc().head),tag=$_etvcvfyjcq8h3hp.fromTag("style");$_7np04f14jcq8h3ig.set(tag,"type","text/css"),$_6290j62fjcq8h3qx.append(tag,$_etvcvfyjcq8h3hp.fromText(text)),$_6290j62fjcq8h3qx.append(head,tag)},createParser=function(editor){var parser=DomParser(editor.settings,editor.schema);return parser.addAttributeFilter("src,href,style,tabindex",function(nodes,name){for(var node,value,internalName,i=nodes.length,dom=editor.dom;i--;)if(node=nodes[i],value=node.attr(name),internalName="data-mce-"+name,!node.attributes.map[internalName]){if(0===value.indexOf("data:")||0===value.indexOf("blob:"))continue;"style"===name?((value=dom.serializeStyle(dom.parseStyle(value),node.name)).length||(value=null),node.attr(internalName,value),node.attr(name,value)):"tabindex"===name?(node.attr(internalName,value),node.attr(name,null)):node.attr(internalName,editor.convertURL(value,name,node.name))}}),parser.addNodeFilter("script",function(nodes){for(var node,type,i=nodes.length;i--;)0!==(type=(node=nodes[i]).attr("type")||"no/type").indexOf("mce-")&&node.attr("type","mce-"+type)}),parser.addNodeFilter("#cdata",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i]).type=8,node.name="#comment",node.value="[CDATA["+node.value+"]]"}),parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(nodes){for(var node,i=nodes.length,nonEmptyElements=editor.schema.getNonEmptyElements();i--;)(node=nodes[i]).isEmpty(nonEmptyElements)&&0===node.getAll("br").length&&(node.append(new Node$2("br",1)).shortEnded=!0)}),parser},autoFocus=function(editor){editor.settings.auto_focus&&$_51uzcpgjcq8h3db.setEditorTimeout(editor,function(){var focusEditor;(focusEditor=!0===editor.settings.auto_focus?editor:editor.editorManager.get(editor.settings.auto_focus)).destroyed||focusEditor.focus()},100)},initEditor=function(editor){editor.bindPendingEventDelegates(),editor.initialized=!0,editor.fire("init"),editor.focus(!0),editor.nodeChanged({initial:!0}),editor.execCallback("init_instance_callback",editor),autoFocus(editor)},getStyleSheetLoader=function(editor){return editor.inline?DOM$5.styleSheetLoader:editor.dom.styleSheetLoader},$_34dlbs4hjcq8h45h={initContentBody:function(editor,skipWrite){var body,contentCssText,settings=editor.settings,targetElm=editor.getElement(),doc=editor.getDoc();settings.inline||(editor.getElement().style.visibility=editor.orgVisibility),skipWrite||settings.content_editable||(doc.open(),doc.write(editor.iframeHTML),doc.close()),settings.content_editable&&(editor.on("remove",function(){var bodyEl=this.getBody();DOM$5.removeClass(bodyEl,"mce-content-body"),DOM$5.removeClass(bodyEl,"mce-edit-focus"),DOM$5.setAttrib(bodyEl,"contentEditable",null)}),DOM$5.addClass(targetElm,"mce-content-body"),editor.contentDocument=doc=settings.content_document||document,editor.contentWindow=settings.content_window||window,editor.bodyElement=targetElm,settings.content_document=settings.content_window=null,settings.root_name=targetElm.nodeName.toLowerCase()),(body=editor.getBody()).disabled=!0,editor.readonly=settings.readonly,editor.readonly||(editor.inline&&"static"===DOM$5.getStyle(body,"position",!0)&&(body.style.position="relative"),body.contentEditable=editor.getParam("content_editable_state",!0)),body.disabled=!1,editor.editorUpload=EditorUpload(editor),editor.schema=Schema(settings),editor.dom=new DOMUtils(doc,{keep_values:!0,url_converter:editor.convertURL,url_converter_scope:editor,hex_colors:settings.force_hex_style_colors,class_filter:settings.class_filter,update_styles:!0,root_element:editor.inline?editor.getBody():null,collect:settings.content_editable,schema:editor.schema,onSetAttrib:function(e){editor.fire("SetAttrib",e)}}),editor.parser=createParser(editor),editor.serializer=Serializer$1(settings,editor),editor.selection=Selection$1(editor.dom,editor.getWin(),editor.serializer,editor),editor.formatter=Formatter(editor),editor.undoManager=UndoManager(editor),editor._nodeChangeDispatcher=new NodeChange(editor),editor._selectionOverrides=SelectionOverrides(editor),$_bhixbj5wjcq8h4ct.setup(editor),$_60al0r6bjcq8h4fw.setup(editor),$_8ujd9i4ujcq8h46x.setup(editor),editor.fire("PreInit"),settings.browser_spellcheck||settings.gecko_spellcheck||(doc.body.spellcheck=!1,DOM$5.setAttrib(body,"spellcheck","false")),editor.quirks=Quirks(editor),editor.fire("PostRender"),settings.directionality&&(body.dir=settings.directionality),settings.nowrap&&(body.style.whiteSpace="nowrap"),settings.protect&&editor.on("BeforeSetContent",function(e){$_topwtjjcq8h3fq.each(settings.protect,function(pattern){e.content=e.content.replace(pattern,function(str){return"\x3c!--mce:protected "+escape(str)+"--\x3e"})})}),editor.on("SetContent",function(){editor.addVisual(editor.getBody())}),settings.padd_empty_editor&&editor.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),editor.load({initial:!0,format:"html"}),editor.startContent=editor.getContent({format:"raw"}),editor.on("compositionstart compositionend",function(e){editor.composing="compositionstart"===e.type}),editor.contentStyles.length>0&&(contentCssText="",$_topwtjjcq8h3fq.each(editor.contentStyles,function(style){contentCssText+=style+"\r\n"}),editor.dom.addStyle(contentCssText)),getStyleSheetLoader(editor).loadAll(editor.contentCSS,function(_){initEditor(editor)},function(urls){initEditor(editor)}),settings.content_style&&appendStyle(editor,settings.content_style)}},DOM$6=DOMUtils.DOM,relaxDomain=function(editor,ifr){if(document.domain!==window.location.hostname&&$_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<12){var bodyUuid=$_6ogq5f4sjcq8h46u.uuid("mce");editor[bodyUuid]=function(){$_34dlbs4hjcq8h45h.initContentBody(editor)};var domainRelaxUrl='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+editor.id+'");document.write(ed.iframeHTML);document.close();ed.'+bodyUuid+"(true);})()";return DOM$6.setAttrib(ifr,"src",domainRelaxUrl),!0}return!1},normalizeHeight=function(height){var normalizedHeight="number"==typeof height?height+"px":height;return normalizedHeight||""},createIframeElement=function(id,title,height,customAttrs){var iframe=$_etvcvfyjcq8h3hp.fromTag("iframe");return $_7np04f14jcq8h3ig.setAll(iframe,customAttrs),$_7np04f14jcq8h3ig.setAll(iframe,{id:id+"_ifr",frameBorder:"0",allowTransparency:"true",title:title}),$_a83gpl11jcq8h3hy.setAll(iframe,{width:"100%",height:normalizeHeight(height),display:"block"}),iframe},getIframeHtml=function(editor){var bodyId,bodyClass,iframeHTML;return iframeHTML=$_f098zt6ljcq8h4hd.getDocType(editor)+"<html><head>",$_f098zt6ljcq8h4hd.getDocumentBaseUrl(editor)!==editor.documentBaseUrl&&(iframeHTML+='<base href="'+editor.documentBaseURI.getURI()+'" />'),iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',bodyId=$_f098zt6ljcq8h4hd.getBodyId(editor),bodyClass=$_f098zt6ljcq8h4hd.getBodyClass(editor),$_f098zt6ljcq8h4hd.getContentSecurityPolicy(editor)&&(iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+$_f098zt6ljcq8h4hd.getContentSecurityPolicy(editor)+'" />'),iframeHTML+='</head><body id="'+bodyId+'" class="mce-content-body '+bodyClass+'" data-id="'+editor.id+'"><br></body></html>'},createIframe=function(editor,o){var title=editor.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),ifr=createIframeElement(editor.id,title,o.height,$_f098zt6ljcq8h4hd.getIframeAttrs(editor)).dom();ifr.onload=function(){ifr.onload=null,editor.fire("load")};var isDomainRelaxed=relaxDomain(editor,ifr);return editor.contentAreaContainer=o.iframeContainer,editor.iframeElement=ifr,editor.iframeHTML=getIframeHtml(editor),DOM$6.add(o.iframeContainer,ifr),isDomainRelaxed},$_d82r9z6tjcq8h4ie={init:function(editor,boxInfo){var isDomainRelaxed=createIframe(editor,boxInfo);boxInfo.editorContainer&&(DOM$6.get(boxInfo.editorContainer).style.display=editor.orgDisplay,editor.hidden=DOM$6.isHidden(boxInfo.editorContainer)),editor.getElement().style.display="none",DOM$6.setAttrib(editor.id,"aria-hidden",!0),isDomainRelaxed||$_34dlbs4hjcq8h45h.initContentBody(editor)}},DOM$4=DOMUtils.DOM,initPlugin=function(editor,initializedPlugins,plugin){var pluginUrl,pluginInstance,Plugin=PluginManager$1.get(plugin);if(pluginUrl=PluginManager$1.urls[plugin]||editor.documentBaseUrl.replace(/\/$/,""),plugin=$_topwtjjcq8h3fq.trim(plugin),Plugin&&-1===$_topwtjjcq8h3fq.inArray(initializedPlugins,plugin)){if($_topwtjjcq8h3fq.each(PluginManager$1.dependencies(plugin),function(dep){initPlugin(editor,initializedPlugins,dep)}),editor.plugins[plugin])return;pluginInstance=new Plugin(editor,pluginUrl,editor.$),editor.plugins[plugin]=pluginInstance,pluginInstance.init&&(pluginInstance.init(editor,pluginUrl),initializedPlugins.push(plugin))}},trimLegacyPrefix=function(name){return name.replace(/^\-/,"")},initPlugins=function(editor){var initializedPlugins=[];$_topwtjjcq8h3fq.each(editor.settings.plugins.split(/[ ,]/),function(name){initPlugin(editor,initializedPlugins,trimLegacyPrefix(name))})},initTheme=function(editor){var Theme,theme=editor.settings.theme;$_1i3etu12jcq8h3i8.isString(theme)?(editor.settings.theme=trimLegacyPrefix(theme),Theme=ThemeManager.get(theme),editor.theme=new Theme(editor,ThemeManager.urls[theme]),editor.theme.init&&editor.theme.init(editor,ThemeManager.urls[theme]||editor.documentBaseUrl.replace(/\/$/,""),editor.$)):editor.theme={}},renderFromLoadedTheme=function(editor){var w,h,minHeight,re,info,settings=editor.settings,elm=editor.getElement();return w=settings.width||DOM$4.getStyle(elm,"width")||"100%",h=settings.height||DOM$4.getStyle(elm,"height")||elm.offsetHeight,minHeight=settings.min_height||100,(re=/^[0-9\.]+(|px)$/i).test(""+w)&&(w=Math.max(parseInt(w,10),100)),re.test(""+h)&&(h=Math.max(parseInt(h,10),minHeight)),info=editor.theme.renderUI({targetNode:elm,width:w,height:h,deltaWidth:settings.delta_width,deltaHeight:settings.delta_height}),settings.content_editable||(h=(info.iframeHeight||h)+("number"==typeof h?info.deltaHeight||0:""))<minHeight&&(h=minHeight),info.height=h,info},renderFromThemeFunc=function(editor){var info,elm=editor.getElement();return(info=editor.settings.theme(editor,elm)).editorContainer.nodeType&&(info.editorContainer.id=info.editorContainer.id||editor.id+"_parent"),info.iframeContainer&&info.iframeContainer.nodeType&&(info.iframeContainer.id=info.iframeContainer.id||editor.id+"_iframecontainer"),info.height=info.iframeHeight?info.iframeHeight:elm.offsetHeight,info},createThemeFalseResult=function(element){return{editorContainer:element,iframeContainer:element}},renderThemeFalseIframe=function(targetElement){var iframeContainer=DOM$4.create("div");return DOM$4.insertAfter(iframeContainer,targetElement),createThemeFalseResult(iframeContainer)},renderThemeFalse=function(editor){var targetElement=editor.getElement();return editor.inline?createThemeFalseResult(null):renderThemeFalseIframe(targetElement)},renderThemeUi=function(editor){var settings=editor.settings,elm=editor.getElement();return editor.orgDisplay=elm.style.display,$_1i3etu12jcq8h3i8.isString(settings.theme)?renderFromLoadedTheme(editor):$_1i3etu12jcq8h3i8.isFunction(settings.theme)?renderFromThemeFunc(editor):renderThemeFalse(editor)},$_7v7yu64ejcq8h459={init:function(editor){var boxInfo,settings=editor.settings,elm=editor.getElement();return editor.rtl=settings.rtl_ui||editor.editorManager.i18n.rtl,editor.editorManager.i18n.setCode(settings.language),settings.aria_label=settings.aria_label||DOM$4.getAttrib(elm,"aria-label",editor.getLang("aria.rich_text_area")),editor.fire("ScriptsLoaded"),initTheme(editor),initPlugins(editor),boxInfo=renderThemeUi(editor),editor.editorContainer=boxInfo.editorContainer?boxInfo.editorContainer:null,settings.content_css&&$_topwtjjcq8h3fq.each($_topwtjjcq8h3fq.explode(settings.content_css),function(u){editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u))}),settings.content_editable?$_34dlbs4hjcq8h45h.initContentBody(editor):$_d82r9z6tjcq8h4ie.init(editor,boxInfo)}},DOM$3=DOMUtils.DOM,hasSkipLoadPrefix=function(name){return"-"===name.charAt(0)},loadLanguage=function(scriptLoader,editor){var settings=editor.settings;settings.language&&"en"!==settings.language&&!settings.language_url&&(settings.language_url=editor.editorManager.baseURL+"/langs/"+settings.language+".js"),settings.language_url&&!editor.editorManager.i18n.data[settings.language]&&scriptLoader.add(settings.language_url)},loadTheme=function(scriptLoader,editor,suffix,callback){var settings=editor.settings,theme=settings.theme;if($_1i3etu12jcq8h3i8.isString(theme)){if(!hasSkipLoadPrefix(theme)&&!ThemeManager.urls.hasOwnProperty(theme)){var themeUrl=settings.theme_url;themeUrl?ThemeManager.load(theme,editor.documentBaseURI.toAbsolute(themeUrl)):ThemeManager.load(theme,"themes/"+theme+"/theme"+suffix+".js")}scriptLoader.loadQueue(function(){ThemeManager.waitFor(theme,callback)})}else callback()},loadPlugins=function(settings,suffix){$_topwtjjcq8h3fq.isArray(settings.plugins)&&(settings.plugins=settings.plugins.join(" ")),$_topwtjjcq8h3fq.each(settings.external_plugins,function(url,name){PluginManager$1.load(name,url),settings.plugins+=" "+name}),$_topwtjjcq8h3fq.each(settings.plugins.split(/[ ,]/),function(plugin){if((plugin=$_topwtjjcq8h3fq.trim(plugin))&&!PluginManager$1.urls[plugin])if(hasSkipLoadPrefix(plugin)){plugin=plugin.substr(1,plugin.length);var dependencies=PluginManager$1.dependencies(plugin);$_topwtjjcq8h3fq.each(dependencies,function(dep){var defaultSettings={prefix:"plugins/",resource:dep,suffix:"/plugin"+suffix+".js"};dep=PluginManager$1.createUrl(defaultSettings,dep),PluginManager$1.load(dep.resource,dep)})}else PluginManager$1.load(plugin,{prefix:"plugins/",resource:plugin,suffix:"/plugin"+suffix+".js"})})},loadScripts=function(editor,suffix){var scriptLoader=ScriptLoader.ScriptLoader;loadTheme(scriptLoader,editor,suffix,function(){loadLanguage(scriptLoader,editor),loadPlugins(editor.settings,suffix),scriptLoader.loadQueue(function(){editor.removed||$_7v7yu64ejcq8h459.init(editor)},editor,function(urls){$_2xdw0u4djcq8h456.pluginLoadError(editor,urls[0]),editor.removed||$_7v7yu64ejcq8h459.init(editor)})})},$_77pa8347jcq8h44i={render:function(editor){var settings=editor.settings,id=editor.id,readyHandler=function(){DOM$3.unbind(window,"ready",readyHandler),editor.render()};if(EventUtils.Event.domLoaded){if(editor.getElement()&&$_1surm29jcq8h31g.contentEditable){settings.inline?editor.inline=!0:(editor.orgVisibility=editor.getElement().style.visibility,editor.getElement().style.visibility="hidden");var form=editor.getElement().form||DOM$3.getParent(id,"form");form&&(editor.formElement=form,settings.hidden_input&&!/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)&&(DOM$3.insertAfter(DOM$3.create("input",{type:"hidden",name:id}),id),editor.hasHiddenInput=!0),editor.formEventDelegate=function(e){editor.fire(e.type,e)},DOM$3.bind(form,"submit reset",editor.formEventDelegate),editor.on("reset",function(){editor.setContent(editor.startContent,{format:"raw"})}),!settings.submit_patch||form.submit.nodeType||form.submit.length||form._mceOldSubmit||(form._mceOldSubmit=form.submit,form.submit=function(){return editor.editorManager.triggerSave(),editor.setDirty(!1),form._mceOldSubmit(form)})),editor.windowManager=WindowManager(editor),editor.notificationManager=NotificationManager(editor),"xml"===settings.encoding&&editor.on("GetContent",function(e){e.save&&(e.content=DOM$3.encode(e.content))}),settings.add_form_submit_trigger&&editor.on("submit",function(){editor.initialized&&editor.save()}),settings.add_unload_trigger&&(editor._beforeUnload=function(){!editor.initialized||editor.destroyed||editor.isHidden()||editor.save({format:"raw",no_events:!0,set_dirty:!1})},editor.editorManager.on("BeforeUnload",editor._beforeUnload)),editor.editorManager.add(editor),loadScripts(editor,editor.suffix)}}else DOM$3.bind(window,"ready",readyHandler)}},$_3xnyvg6ujcq8h4ij={add:function(editor,name,settings){var sidebars=editor.sidebars?editor.sidebars:[];sidebars.push({name:name,settings:settings}),editor.sidebars=sidebars}},each$22=$_topwtjjcq8h3fq.each,trim$5=$_topwtjjcq8h3fq.trim,queryParts="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),DEFAULT_PORTS={ftp:21,http:80,https:443,mailto:25},URI=function(url,settings){var baseUri,baseUrl,self=this;if(url=trim$5(url),settings=self.settings=settings||{},baseUri=settings.base_uri,/^([\w\-]+):([^\/]{2})/i.test(url)||/^\s*#/.test(url))self.source=url;else{var isProtocolRelative=0===url.indexOf("//");0!==url.indexOf("/")||isProtocolRelative||(url=(baseUri?baseUri.protocol||"http":"http")+"://mce_host"+url),/^[\w\-]*:?\/\//.test(url)||(baseUrl=settings.base_uri?settings.base_uri.path:new URI(document.location.href).directory,""==settings.base_uri.protocol?url="//mce_host"+self.toAbsPath(baseUrl,url):(url=/([^#?]*)([#?]?.*)/.exec(url),url=(baseUri&&baseUri.protocol||"http")+"://mce_host"+self.toAbsPath(baseUrl,url[1])+url[2])),url=url.replace(/@@/g,"(mce_at)"),url=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url),each$22(queryParts,function(v,i){var part=url[i];part&&(part=part.replace(/\(mce_at\)/g,"@@")),self[v]=part}),baseUri&&(self.protocol||(self.protocol=baseUri.protocol),self.userInfo||(self.userInfo=baseUri.userInfo),self.port||"mce_host"!==self.host||(self.port=baseUri.port),self.host&&"mce_host"!==self.host||(self.host=baseUri.host),self.source=""),isProtocolRelative&&(self.protocol="")}};URI.prototype={setPath:function(path){var self=this;path=/^(.*?)\/?(\w+)?$/.exec(path),self.path=path[0],self.directory=path[1],self.file=path[2],self.source="",self.getURI()},toRelative:function(uri){var output,self=this;if("./"===uri)return uri;if("mce_host"!==(uri=new URI(uri,{base_uri:self})).host&&self.host!==uri.host&&uri.host||self.port!==uri.port||self.protocol!==uri.protocol&&""!==uri.protocol)return uri.getURI();var tu=self.getURI(),uu=uri.getURI();return tu===uu||"/"===tu.charAt(tu.length-1)&&tu.substr(0,tu.length-1)===uu?tu:(output=self.toRelPath(self.path,uri.path),uri.query&&(output+="?"+uri.query),uri.anchor&&(output+="#"+uri.anchor),output)},toAbsolute:function(uri,noHost){return(uri=new URI(uri,{base_uri:this})).getURI(noHost&&this.isSameOrigin(uri))},isSameOrigin:function(uri){if(this.host==uri.host&&this.protocol==uri.protocol){if(this.port==uri.port)return!0;var defaultPort=DEFAULT_PORTS[this.protocol];if(defaultPort&&(this.port||defaultPort)==(uri.port||defaultPort))return!0}return!1},toRelPath:function(base,path){var items,i,l,breakPoint=0,out="";if(base=base.substring(0,base.lastIndexOf("/")),base=base.split("/"),items=path.split("/"),base.length>=items.length)for(i=0,l=base.length;i<l;i++)if(i>=items.length||base[i]!==items[i]){breakPoint=i+1;break}if(base.length<items.length)for(i=0,l=items.length;i<l;i++)if(i>=base.length||base[i]!==items[i]){breakPoint=i+1;break}if(1===breakPoint)return path;for(i=0,l=base.length-(breakPoint-1);i<l;i++)out+="../";for(i=breakPoint-1,l=items.length;i<l;i++)out+=i!==breakPoint-1?"/"+items[i]:items[i];return out},toAbsPath:function(base,path){var i,tr,outPath,nb=0,o=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),each$22(base,function(k){k&&o.push(k)}),base=o,i=path.length-1,o=[];i>=0;i--)0!==path[i].length&&"."!==path[i]&&(".."!==path[i]?nb>0?nb--:o.push(path[i]):nb++);return i=base.length-nb,0!==(outPath=i<=0?o.reverse().join("/"):base.slice(0,i).join("/")+"/"+o.reverse().join("/")).indexOf("/")&&(outPath="/"+outPath),tr&&outPath.lastIndexOf("/")!==outPath.length-1&&(outPath+=tr),outPath},getURI:function(noProtoHost){var s,self=this;return self.source&&!noProtoHost||(s="",noProtoHost||(self.protocol?s+=self.protocol+"://":s+="//",self.userInfo&&(s+=self.userInfo+"@"),self.host&&(s+=self.host),self.port&&(s+=":"+self.port)),self.path&&(s+=self.path),self.query&&(s+="?"+self.query),self.anchor&&(s+="#"+self.anchor),self.source=s),self.source}},URI.parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),(matches=/data:([^;]+)/.exec(uri[0]))&&(type=matches[1]),{type:type,data:uri[1]}},URI.getDocumentBaseUrl=function(loc){var baseUrl;return baseUrl=0!==loc.protocol.indexOf("http")&&"file:"!==loc.protocol?loc.href:loc.protocol+"//"+loc.host+loc.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(baseUrl)&&(baseUrl=baseUrl.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(baseUrl)||(baseUrl+="/")),baseUrl};var DOM$1=DOMUtils.DOM,extend$2=$_topwtjjcq8h3fq.extend,each$8=$_topwtjjcq8h3fq.each,trim$3=$_topwtjjcq8h3fq.trim,resolve$2=$_topwtjjcq8h3fq.resolve,ie$2=$_1surm29jcq8h31g.ie,Editor=function(id,settings,editorManager){var documentBaseUrl,baseUri,self=this;documentBaseUrl=self.documentBaseUrl=editorManager.documentBaseURL,baseUri=editorManager.baseURI,settings=getEditorSettings(self,id,documentBaseUrl,editorManager.defaultSettings,settings),self.settings=settings,AddOnManager.language=settings.language||"en",AddOnManager.languageLoad=settings.language_load,AddOnManager.baseURL=editorManager.baseURL,self.id=id,self.setDirty(!1),self.plugins={},self.documentBaseURI=new URI(settings.document_base_url,{base_uri:baseUri}),self.baseURI=baseUri,self.contentCSS=[],self.contentStyles=[],self.shortcuts=new Shortcuts(self),self.loadedCSS={},self.editorCommands=new EditorCommands(self),self.suffix=editorManager.suffix,self.editorManager=editorManager,self.inline=settings.inline,self.buttons={},self.menuItems={},settings.cache_suffix&&($_1surm29jcq8h31g.cacheSuffix=settings.cache_suffix.replace(/^[\?\&]+/,"")),!1===settings.override_viewport&&($_1surm29jcq8h31g.overrideViewPort=!1),editorManager.fire("SetupEditor",self),self.execCallback("setup",self),self.$=DomQuery.overrideDefaults(function(){return{context:self.inline?self.getBody():self.getDoc(),element:self.getBody()}})};extend$2(Editor.prototype={render:function(){$_77pa8347jcq8h44i.render(this)},focus:function(skipFocus){$_akpbtf44jcq8h43x.focus(this,skipFocus)},execCallback:function(name){var scope,self=this,callback=self.settings[name];if(callback)return self.callbackLookup&&(scope=self.callbackLookup[name])&&(callback=scope.func,scope=scope.scope),"string"==typeof callback&&(scope=(scope=callback.replace(/\.\w+$/,""))?resolve$2(scope):0,callback=resolve$2(callback),self.callbackLookup=self.callbackLookup||{},self.callbackLookup[name]={func:callback,scope:scope}),callback.apply(scope||self,Array.prototype.slice.call(arguments,1))},translate:function(text){if(text&&$_topwtjjcq8h3fq.is(text,"string")){var lang_1=this.settings.language||"en",i18n_1=this.editorManager.i18n;text=i18n_1.data[lang_1+"."+text]||text.replace(/\{\#([^\}]+)\}/g,function(a,b){return i18n_1.data[lang_1+"."+b]||"{#"+b+"}"})}return this.editorManager.translate(text)},getLang:function(name,defaultVal){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+name]||(void 0!==defaultVal?defaultVal:"{#"+name+"}")},getParam:function(name,defaultVal,type){return getParam(this,name,defaultVal,type)},nodeChanged:function(args){this._nodeChangeDispatcher.nodeChanged(args)},addButton:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),settings.stateSelector&&void 0===settings.active&&(settings.active=!1),settings.text||settings.icon||(settings.icon=name),self.buttons=self.buttons,settings.tooltip=settings.tooltip||settings.title,self.buttons[name]=settings},addSidebar:function(name,settings){return $_3xnyvg6ujcq8h4ij.add(this,name,settings)},addMenuItem:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),self.menuItems=self.menuItems,self.menuItems[name]=settings},addContextToolbar:function(predicate,items){var selector,self=this;self.contextToolbars=self.contextToolbars||[],"string"==typeof predicate&&(selector=predicate,predicate=function(elm){return self.dom.is(elm,selector)}),self.contextToolbars.push({id:$_6ogq5f4sjcq8h46u.uuid("mcet"),predicate:predicate,items:items})},addCommand:function(name,callback,scope){this.editorCommands.addCommand(name,callback,scope)},addQueryStateHandler:function(name,callback,scope){this.editorCommands.addQueryStateHandler(name,callback,scope)},addQueryValueHandler:function(name,callback,scope){this.editorCommands.addQueryValueHandler(name,callback,scope)},addShortcut:function(pattern,desc,cmdFunc,scope){this.shortcuts.add(pattern,desc,cmdFunc,scope)},execCommand:function(cmd,ui,value,args){return this.editorCommands.execCommand(cmd,ui,value,args)},queryCommandState:function(cmd){return this.editorCommands.queryCommandState(cmd)},queryCommandValue:function(cmd){return this.editorCommands.queryCommandValue(cmd)},queryCommandSupported:function(cmd){return this.editorCommands.queryCommandSupported(cmd)},show:function(){var self=this;self.hidden&&(self.hidden=!1,self.inline?self.getBody().contentEditable=!0:(DOM$1.show(self.getContainer()),DOM$1.hide(self.id)),self.load(),self.fire("show"))},hide:function(){var self=this,doc=self.getDoc();self.hidden||(ie$2&&doc&&!self.inline&&doc.execCommand("SelectAll"),self.save(),self.inline?(self.getBody().contentEditable=!1,self===self.editorManager.focusedEditor&&(self.editorManager.focusedEditor=null)):(DOM$1.hide(self.getContainer()),DOM$1.setStyle(self.id,"display",self.orgDisplay)),self.hidden=!0,self.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(state,time){this.fire("ProgressState",{state:state,time:time})},load:function(args){var html,self=this,elm=self.getElement();return self.removed?"":elm?(args=args||{},args.load=!0,html=self.setContent(void 0!==elm.value?elm.value:elm.innerHTML,args),args.element=elm,args.no_events||self.fire("LoadContent",args),args.element=elm=null,html):void 0},save:function(args){var html,form,self=this,elm=self.getElement();if(elm&&self.initialized&&!self.removed)return args=args||{},args.save=!0,args.element=elm,html=args.content=self.getContent(args),args.no_events||self.fire("SaveContent",args),"raw"===args.format&&self.fire("RawSaveContent",args),html=args.content,/TEXTAREA|INPUT/i.test(elm.nodeName)?elm.value=html:(self.inline||(elm.innerHTML=html),(form=DOM$1.getParent(self.id,"form"))&&each$8(form.elements,function(elm){if(elm.name===self.id)return elm.value=html,!1})),args.element=elm=null,!1!==args.set_dirty&&self.setDirty(!1),html},setContent:function(content,args){var forcedRootBlockName,padd,self=this,body=self.getBody();return args=args||{},args.format=args.format||"html",args.set=!0,args.content=content,args.no_events||self.fire("BeforeSetContent",args),0===(content=args.content).length||/^\s+$/.test(content)?(padd=ie$2&&ie$2<11?"":'<br data-mce-bogus="1">',"TABLE"===body.nodeName?content="<tr><td>"+padd+"</td></tr>":/^(UL|OL)$/.test(body.nodeName)&&(content="<li>"+padd+"</li>"),(forcedRootBlockName=self.settings.forced_root_block)&&self.schema.isValidChild(body.nodeName.toLowerCase(),forcedRootBlockName.toLowerCase())?(content=padd,content=self.dom.createHTML(forcedRootBlockName,self.settings.forced_root_block_attrs,content)):ie$2||content||(content='<br data-mce-bogus="1">'),self.dom.setHTML(body,content),self.fire("SetContent",args)):("raw"!==args.format&&(content=Serializer({validate:self.validate},self.schema).serialize(self.parser.parse(content,{isRootContent:!0,insert:!0}))),args.content=trim$3(content),self.dom.setHTML(body,args.content),args.no_events||self.fire("SetContent",args)),args.content},getContent:function(args){var content,self=this,body=self.getBody();if(self.removed)return"";if(args=args||{},args.format=args.format||"html",args.get=!0,args.getInner=!0,args.no_events||self.fire("BeforeGetContent",args),"raw"===args.format)content=$_topwtjjcq8h3fq.trim($_71pfug42jcq8h43l.trimExternal(self.serializer,body.innerHTML));else if("text"===args.format)content=body.innerText||body.textContent;else{if("tree"===args.format)return self.serializer.serialize(body,args);content=self.serializer.serialize(body,args)}return"text"!==args.format?args.content=trim$3(content):args.content=content,args.no_events||self.fire("GetContent",args),args.content},insertContent:function(content,args){args&&(content=extend$2({content:content},args)),this.execCommand("mceInsertContent",!1,content)},isDirty:function(){return!this.isNotDirty},setDirty:function(state){var oldState=!this.isNotDirty;this.isNotDirty=!state,state&&state!==oldState&&this.fire("dirty")},setMode:function(mode){$_dea5kl40jcq8h43e.setMode(this,mode)},getContainer:function(){var self=this;return self.container||(self.container=DOM$1.get(self.editorContainer||self.id+"_parent")),self.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=DOM$1.get(this.id)),this.targetElm},getWin:function(){var elm,self=this;return self.contentWindow||(elm=self.iframeElement)&&(self.contentWindow=elm.contentWindow),self.contentWindow},getDoc:function(){var win,self=this;return self.contentDocument||(win=self.getWin())&&(self.contentDocument=win.document),self.contentDocument},getBody:function(){var doc=this.getDoc();return this.bodyElement||(doc?doc.body:null)},convertURL:function(url,name,elm){var self=this,settings=self.settings;return settings.urlconverter_callback?self.execCallback("urlconverter_callback",url,elm,!0,name):!settings.convert_urls||elm&&"LINK"===elm.nodeName||0===url.indexOf("file:")||0===url.length?url:settings.relative_urls?self.documentBaseURI.toRelative(url):url=self.documentBaseURI.toAbsolute(url,settings.remove_script_host)},addVisual:function(elm){var cls,self=this,settings=self.settings,dom=self.dom;elm=elm||self.getBody(),void 0===self.hasVisual&&(self.hasVisual=settings.visual),each$8(dom.select("table,a",elm),function(elm){var value;switch(elm.nodeName){case"TABLE":return cls=settings.visual_table_class||"mce-item-table",void((value=dom.getAttrib(elm,"border"))&&"0"!==value||!self.hasVisual?dom.removeClass(elm,cls):dom.addClass(elm,cls));case"A":return void(dom.getAttrib(elm,"href",!1)||(value=dom.getAttrib(elm,"name")||elm.id,cls=settings.visual_anchor_class||"mce-item-anchor",value&&self.hasVisual?dom.addClass(elm,cls):dom.removeClass(elm,cls)))}}),self.fire("VisualAid",{element:elm,hasVisual:self.hasVisual})},remove:function(){var self=this;self.removed||(self.save(),self.removed=1,self.unbindAllNativeEvents(),self.hasHiddenInput&&DOM$1.remove(self.getElement().nextSibling),self.inline||(ie$2&&ie$2<10&&self.getDoc().execCommand("SelectAll",!1,null),DOM$1.setStyle(self.id,"display",self.orgDisplay),self.getBody().onload=null),self.fire("remove"),self.editorManager.remove(self),DOM$1.remove(self.getContainer()),self._selectionOverrides.destroy(),self.editorUpload.destroy(),self.destroy())},destroy:function(automatic){var form,self=this;self.destroyed||(automatic||self.removed?(automatic||(self.editorManager.off("beforeunload",self._beforeUnload),self.theme&&self.theme.destroy&&self.theme.destroy(),self.selection.destroy(),self.dom.destroy()),(form=self.formElement)&&(form._mceOldSubmit&&(form.submit=form._mceOldSubmit,form._mceOldSubmit=null),DOM$1.unbind(form,"submit reset",self.formEventDelegate)),self.contentAreaContainer=self.formElement=self.container=self.editorContainer=null,self.bodyElement=self.contentDocument=self.contentWindow=null,self.iframeElement=self.targetElm=null,self.selection&&(self.selection=self.selection.win=self.selection.dom=self.selection.dom.doc=null),self.destroyed=1):self.remove())},uploadImages:function(callback){return this.editorUpload.uploadImages(callback)},_scanForImages:function(){return this.editorUpload.scanForImages()}},EditorObservable$1);var documentFocusInHandler,beforeUnloadDelegate,EditorManager,$_geykie6yjcq8h4jh={isEditorUIElement:function(elm){return-1!==elm.className.toString().indexOf("mce-")}},isManualNodeChange=function(e){return"nodechange"===e.type&&e.selectionChange},registerPageMouseUp=function(editor,throttledStore){var mouseUpPage=function(){throttledStore.throttle()};DOMUtils.DOM.bind(document,"mouseup",mouseUpPage),editor.on("remove",function(){DOMUtils.DOM.unbind(document,"mouseup",mouseUpPage)})},registerFocusOut=function(editor){editor.on("focusout",function(){$_booaps3ujcq8h42k.store(editor)})},registerMouseUp=function(editor,throttledStore){editor.on("mouseup touchend",function(e){throttledStore.throttle()})},registerEditorEvents=function(editor,throttledStore){var browser=$_cfduydmjcq8h3gc.detect().browser;browser.isIE()||browser.isEdge()?registerFocusOut(editor):registerMouseUp(editor,throttledStore),editor.on("keyup nodechange",function(e){isManualNodeChange(e)||$_booaps3ujcq8h42k.store(editor)})},$_3hendc6zjcq8h4ji={register:function(editor){var throttledStore=$_7ti7dk54jcq8h48l.first(function(){$_booaps3ujcq8h42k.store(editor)},0);editor.inline&&registerPageMouseUp(editor,throttledStore),editor.on("init",function(){registerEditorEvents(editor,throttledStore)}),editor.on("remove",function(){throttledStore.cancel()})}},DOM$8=DOMUtils.DOM,isEditorUIElement=function(elm){return $_geykie6yjcq8h4jh.isEditorUIElement(elm)},isUIElement=function(editor,elm){var customSelector=editor?editor.settings.custom_ui_selector:"";return null!==DOM$8.getParent(elm,function(elm){return isEditorUIElement(elm)||!!customSelector&&editor.dom.is(elm,customSelector)})},getActiveElement=function(){try{return document.activeElement}catch(ex){return document.body}},registerEvents=function(editorManager,e){var editor=e.editor;$_3hendc6zjcq8h4ji.register(editor),editor.on("focusin",function(){var self=this,focusedEditor=editorManager.focusedEditor;focusedEditor!==self&&(focusedEditor&&focusedEditor.fire("blur",{focusedEditor:self}),editorManager.setActive(self),editorManager.focusedEditor=self,self.fire("focus",{blurredEditor:focusedEditor}),self.focus(!0))}),editor.on("focusout",function(){var self=this;$_51uzcpgjcq8h3db.setEditorTimeout(self,function(){var focusedEditor=editorManager.focusedEditor;isUIElement(self,getActiveElement())||focusedEditor!==self||(self.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null)})}),documentFocusInHandler||(documentFocusInHandler=function(e){var target,activeEditor=editorManager.activeEditor;target=e.target,activeEditor&&target.ownerDocument===document&&(target===document.body||isUIElement(activeEditor,target)||editorManager.focusedEditor!==activeEditor||(activeEditor.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null))},DOM$8.bind(document,"focusin",documentFocusInHandler))},unregisterDocumentEvents=function(editorManager,e){editorManager.focusedEditor===e.editor&&(editorManager.focusedEditor=null),editorManager.activeEditor||(DOM$8.unbind(document,"focusin",documentFocusInHandler),documentFocusInHandler=null)},$_dkvnez6xjcq8h4je={setup:function(editorManager){editorManager.on("AddEditor",$_djct026jcq8h2xw.curry(registerEvents,editorManager)),editorManager.on("RemoveEditor",$_djct026jcq8h2xw.curry(unregisterDocumentEvents,editorManager))},isEditorUIElement:isEditorUIElement,isUIElement:isUIElement},data={},code="en",$_7xugob70jcq8h4jm={setCode:function(newCode){newCode&&(code=newCode,this.rtl=!!this.data[newCode]&&"rtl"===this.data[newCode]._dir)},getCode:function(){return code},rtl:!1,add:function(code,items){var langData=data[code];langData||(data[code]=langData={});for(var name_1 in items)langData[name_1]=items[name_1];this.setCode(code)},translate:function(text){var langData=data[code]||{},toString=function(obj){return $_topwtjjcq8h3fq.is(obj,"function")?Object.prototype.toString.call(obj):isEmpty(obj)?"":""+obj},isEmpty=function(text){return""===text||null===text||$_topwtjjcq8h3fq.is(text,"undefined")},getLangData=function(text){return text=toString(text),$_topwtjjcq8h3fq.hasOwn(langData,text)?toString(langData[text]):text};if(isEmpty(text))return"";if($_topwtjjcq8h3fq.is(text,"object")&&$_topwtjjcq8h3fq.hasOwn(text,"raw"))return toString(text.raw);if($_topwtjjcq8h3fq.is(text,"array")){var values_1=text.slice(1);text=getLangData(text[0]).replace(/\{([0-9]+)\}/g,function($1,$2){return $_topwtjjcq8h3fq.hasOwn(values_1,$2)?toString(values_1[$2]):$1})}return getLangData(text).replace(/{context:\w+}$/,"")},data:data},DOM$7=DOMUtils.DOM,explode$5=$_topwtjjcq8h3fq.explode,each$23=$_topwtjjcq8h3fq.each,extend$5=$_topwtjjcq8h3fq.extend,instanceCounter=0,boundGlobalEvents=!1,legacyEditors=[],editors=[],isValidLegacyKey=function(id){return"length"!==id},globalEventDelegate=function(e){each$23(EditorManager.get(),function(editor){"scroll"===e.type?editor.fire("ScrollWindow",e):editor.fire("ResizeWindow",e)})},toggleGlobalEvents=function(state){state!==boundGlobalEvents&&(state?DomQuery(window).on("resize scroll",globalEventDelegate):DomQuery(window).off("resize scroll",globalEventDelegate),boundGlobalEvents=state)},removeEditorFromList=function(targetEditor){var oldEditors=editors;delete legacyEditors[targetEditor.id];for(var i=0;i<legacyEditors.length;i++)if(legacyEditors[i]===targetEditor){legacyEditors.splice(i,1);break}return editors=$_de5suq4jcq8h2x0.filter(editors,function(editor){return targetEditor!==editor}),EditorManager.activeEditor===targetEditor&&(EditorManager.activeEditor=editors.length>0?editors[0]:null),EditorManager.focusedEditor===targetEditor&&(EditorManager.focusedEditor=null),oldEditors.length!==editors.length},purgeDestroyedEditor=function(editor){return editor&&editor.initialized&&!(editor.getContainer()||editor.getBody()).parentNode&&(removeEditorFromList(editor),editor.unbindAllNativeEvents(),editor.destroy(!0),editor.removed=!0,editor=null),editor};extend$5(EditorManager={defaultSettings:{},$:DomQuery,majorVersion:"4",minorVersion:"7.5",releaseDate:"2018-01-22",editors:legacyEditors,i18n:$_7xugob70jcq8h4jm,activeEditor:null,settings:{},setup:function(){var baseURL,documentBaseURL,preInit,src,self=this,suffix="";if(documentBaseURL=URI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(documentBaseURL)&&(documentBaseURL=documentBaseURL.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(documentBaseURL)||(documentBaseURL+="/")),preInit=window.tinymce||window.tinyMCEPreInit)baseURL=preInit.base||preInit.baseURL,suffix=preInit.suffix;else{for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){var srcScript=(src=scripts[i].src).substring(src.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(src)){-1!==srcScript.indexOf(".min")&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/"));break}}!baseURL&&document.currentScript&&(-1!==(src=document.currentScript.src).indexOf(".min")&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/")))}self.baseURL=new URI(documentBaseURL).toAbsolute(baseURL),self.documentBaseURL=documentBaseURL,self.baseURI=new URI(self.baseURL),self.suffix=suffix,$_dkvnez6xjcq8h4je.setup(self)},overrideDefaults:function(defaultSettings){var baseUrl,suffix;(baseUrl=defaultSettings.base_url)&&(this.baseURL=new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\/+$/,"")),this.baseURI=new URI(this.baseURL)),suffix=defaultSettings.suffix,defaultSettings.suffix&&(this.suffix=suffix),this.defaultSettings=defaultSettings;var pluginBaseUrls=defaultSettings.plugin_base_urls;for(var name_1 in pluginBaseUrls)AddOnManager.PluginManager.urls[name_1]=pluginBaseUrls[name_1]},init:function(settings){var result,invalidInlineTargets,self=this;invalidInlineTargets=$_topwtjjcq8h3fq.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var isInvalidInlineTarget=function(settings,elm){return settings.inline&&elm.tagName.toLowerCase()in invalidInlineTargets},createId=function(elm){var id=elm.id;return id||(id=(id=elm.name)&&!DOM$7.get(id)?elm.name:DOM$7.uniqueId(),elm.setAttribute("id",id)),id},execCallback=function(name){var callback=settings[name];if(callback)return callback.apply(self,Array.prototype.slice.call(arguments,2))},hasClass=function(elm,className){return className.constructor===RegExp?className.test(elm.className):DOM$7.hasClass(elm,className)},findTargets=function(settings){var l,targets=[];if($_1surm29jcq8h31g.ie&&$_1surm29jcq8h31g.ie<11)return $_2xdw0u4djcq8h456.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(settings.types)return each$23(settings.types,function(type){targets=targets.concat(DOM$7.select(type.selector))}),targets;if(settings.selector)return DOM$7.select(settings.selector);if(settings.target)return[settings.target];switch(settings.mode){case"exact":(l=settings.elements||"").length>0&&each$23(explode$5(l),function(id){var elm;(elm=DOM$7.get(id))?targets.push(elm):each$23(document.forms,function(f){each$23(f.elements,function(e){e.name===id&&(id="mce_editor_"+instanceCounter++,DOM$7.setAttrib(e,"id",id),targets.push(e))})})});break;case"textareas":case"specific_textareas":each$23(DOM$7.select("textarea"),function(elm){settings.editor_deselector&&hasClass(elm,settings.editor_deselector)||settings.editor_selector&&!hasClass(elm,settings.editor_selector)||targets.push(elm)})}return targets},provideResults=function(editors){result=editors},initEditors=function(){var targets,initCount=0,editors=[],createEditor=function(id,settings,targetElm){var editor=new Editor(id,settings,self);editors.push(editor),editor.on("init",function(){++initCount===targets.length&&provideResults(editors)}),editor.targetElm=editor.targetElm||targetElm,editor.render()};DOM$7.unbind(window,"ready",initEditors),execCallback("onpageload"),targets=DomQuery.unique(findTargets(settings)),settings.types?each$23(settings.types,function(type){$_topwtjjcq8h3fq.each(targets,function(elm){return!DOM$7.is(elm,type.selector)||(createEditor(createId(elm),extend$5({},settings,type),elm),!1)})}):($_topwtjjcq8h3fq.each(targets,function(elm){purgeDestroyedEditor(self.get(elm.id))}),0===(targets=$_topwtjjcq8h3fq.grep(targets,function(elm){return!self.get(elm.id)})).length?provideResults([]):each$23(targets,function(elm){isInvalidInlineTarget(settings,elm)?$_2xdw0u4djcq8h456.initError("Could not initialize inline editor on invalid inline target element",elm):createEditor(createId(elm),settings,elm)}))};return self.settings=settings,DOM$7.bind(window,"ready",initEditors),new promiseObj(function(resolve){result?resolve(result):provideResults=function(editors){resolve(editors)}})},get:function(id){return 0===arguments.length?editors.slice(0):$_1i3etu12jcq8h3i8.isString(id)?$_de5suq4jcq8h2x0.find(editors,function(editor){return editor.id===id}).getOr(null):$_1i3etu12jcq8h3i8.isNumber(id)&&editors[id]?editors[id]:null},add:function(editor){var self=this;return legacyEditors[editor.id]===editor?editor:(null===self.get(editor.id)&&(isValidLegacyKey(editor.id)&&(legacyEditors[editor.id]=editor),legacyEditors.push(editor),editors.push(editor)),toggleGlobalEvents(!0),self.activeEditor=editor,self.fire("AddEditor",{editor:editor}),beforeUnloadDelegate||(beforeUnloadDelegate=function(){self.fire("BeforeUnload")},DOM$7.bind(window,"beforeunload",beforeUnloadDelegate)),editor)},createEditor:function(id,settings){return this.add(new Editor(id,settings,this))},remove:function(selector){var i,editor,self=this;if(selector)return $_1i3etu12jcq8h3i8.isString(selector)?(selector=selector.selector||selector,void each$23(DOM$7.select(selector),function(elm){(editor=self.get(elm.id))&&self.remove(editor)})):(editor=selector,$_1i3etu12jcq8h3i8.isNull(self.get(editor.id))?null:(removeEditorFromList(editor)&&self.fire("RemoveEditor",{editor:editor}),0===editors.length&&DOM$7.unbind(window,"beforeunload",beforeUnloadDelegate),editor.remove(),toggleGlobalEvents(editors.length>0),editor));for(i=editors.length-1;i>=0;i--)self.remove(editors[i])},execCommand:function(cmd,ui,value){var self=this,editor=self.get(value);switch(cmd){case"mceAddEditor":return self.get(value)||new Editor(value,self.settings,self).render(),!0;case"mceRemoveEditor":return editor&&editor.remove(),!0;case"mceToggleEditor":return editor?(editor.isHidden()?editor.show():editor.hide(),!0):(self.execCommand("mceAddEditor",0,value),!0)}return!!self.activeEditor&&self.activeEditor.execCommand(cmd,ui,value)},triggerSave:function(){each$23(editors,function(editor){editor.save()})},addI18n:function(code,items){$_7xugob70jcq8h4jm.add(code,items)},translate:function(text){return $_7xugob70jcq8h4jm.translate(text)},setActive:function(editor){var activeEditor=this.activeEditor;this.activeEditor!==editor&&(activeEditor&&activeEditor.fire("deactivate",{relatedTarget:editor}),editor.fire("activate",{relatedTarget:activeEditor})),this.activeEditor=editor}},$_f07ote3yjcq8h436),EditorManager.setup();var EditorManager$1=EditorManager;!function(RangeUtils){RangeUtils.compareRanges=$_6zmpij3tjcq8h42i.isEq,RangeUtils.getCaretRangeFromPoint=$_a49bkx61jcq8h4e6.fromPoint,RangeUtils.getSelectedNode=$_1nmjnx23jcq8h3p1.getSelectedNode,RangeUtils.getNode=$_1nmjnx23jcq8h3p1.getNode}(RangeUtils||(RangeUtils={}));var extendClass,initializing,RangeUtils$1=RangeUtils,min=Math.min,max=Math.max,round$1=Math.round,relativePosition=function(rect,targetRect,rel){var x,y,w,h,targetW,targetH;return x=targetRect.x,y=targetRect.y,w=rect.w,h=rect.h,targetW=targetRect.w,targetH=targetRect.h,"b"===(rel=(rel||"").split(""))[0]&&(y+=targetH),"r"===rel[1]&&(x+=targetW),"c"===rel[0]&&(y+=round$1(targetH/2)),"c"===rel[1]&&(x+=round$1(targetW/2)),"b"===rel[3]&&(y-=h),"r"===rel[4]&&(x-=w),"c"===rel[3]&&(y-=round$1(h/2)),"c"===rel[4]&&(x-=round$1(w/2)),create$2(x,y,w,h)},create$2=function(x,y,w,h){return{x:x,y:y,w:w,h:h}},$_epms1472jcq8h4jt={inflate:function(rect,w,h){return create$2(rect.x-w,rect.y-h,rect.w+2*w,rect.h+2*h)},relativePosition:relativePosition,findBestRelativePosition:function(rect,targetRect,constrainRect,rels){var pos,i;for(i=0;i<rels.length;i++)if((pos=relativePosition(rect,targetRect,rels[i])).x>=constrainRect.x&&pos.x+pos.w<=constrainRect.w+constrainRect.x&&pos.y>=constrainRect.y&&pos.y+pos.h<=constrainRect.h+constrainRect.y)return rels[i];return null},intersect:function(rect,cropRect){var x1,y1,x2,y2;return x1=max(rect.x,cropRect.x),y1=max(rect.y,cropRect.y),x2=min(rect.x+rect.w,cropRect.x+cropRect.w),y2=min(rect.y+rect.h,cropRect.y+cropRect.h),x2-x1<0||y2-y1<0?null:create$2(x1,y1,x2-x1,y2-y1)},clamp:function(rect,clampRect,fixedSize){var underflowX1,underflowY1,overflowX2,overflowY2,x1,y1,x2,y2,cx2,cy2;return x1=rect.x,y1=rect.y,x2=rect.x+rect.w,y2=rect.y+rect.h,cx2=clampRect.x+clampRect.w,cy2=clampRect.y+clampRect.h,underflowX1=max(0,clampRect.x-x1),underflowY1=max(0,clampRect.y-y1),overflowX2=max(0,x2-cx2),overflowY2=max(0,y2-cy2),x1+=underflowX1,y1+=underflowY1,fixedSize&&(x2+=underflowX1,y2+=underflowY1,x1-=overflowX2,y1-=overflowY2),x2-=overflowX2,y2-=overflowY2,create$2(x1,y1,x2-x1,y2-y1)},create:create$2,fromClientRect:function(clientRect){return create$2(clientRect.left,clientRect.top,clientRect.width,clientRect.height)}},types={},$_czoexk73jcq8h4jx={add:function(type,typeClass){types[type.toLowerCase()]=typeClass},has:function(type){return!!types[type.toLowerCase()]},get:function(type){var lctype=type.toLowerCase(),controlType=types.hasOwnProperty(lctype)?types[lctype]:null;if(null===controlType)throw new Error("Could not find module for type: "+type);return controlType},create:function(type,settings){var ControlType;if("string"==typeof type?(settings=settings||{}).type=type:type=(settings=type).type,type=type.toLowerCase(),!(ControlType=types[type]))throw new Error("Could not find control by type: "+type);return ControlType=new ControlType(settings),ControlType.type=type,ControlType}},each$24=$_topwtjjcq8h3fq.each,extend$6=$_topwtjjcq8h3fq.extend,Class=function(){};Class.extend=extendClass=function(prop){var prototype,name,member,self=this,_super=self.prototype,Class=function(){var i,mixins,mixin,self=this;if(!initializing&&(self.init&&self.init.apply(self,arguments),mixins=self.Mixins))for(i=mixins.length;i--;)(mixin=mixins[i]).init&&mixin.init.apply(self,arguments)},dummy=function(){return this};initializing=!0,prototype=new self,initializing=!1,prop.Mixins&&(each$24(prop.Mixins,function(mixin){for(var name_1 in mixin)"init"!==name_1&&(prop[name_1]=mixin[name_1])}),_super.Mixins&&(prop.Mixins=_super.Mixins.concat(prop.Mixins))),prop.Methods&&each$24(prop.Methods.split(","),function(name){prop[name]=dummy}),prop.Properties&&each$24(prop.Properties.split(","),function(name){var fieldName="_"+name;prop[name]=function(value){var self=this;return void 0!==value?(self[fieldName]=value,self):self[fieldName]}}),prop.Statics&&each$24(prop.Statics,function(func,name){Class[name]=func}),prop.Defaults&&_super.Defaults&&(prop.Defaults=extend$6({},_super.Defaults,prop.Defaults));for(name in prop)"function"==typeof(member=prop[name])&&_super[name]?prototype[name]=function(name,fn){return function(){var ret,self=this,tmp=self._super;return self._super=_super[name],ret=fn.apply(self,arguments),self._super=tmp,ret}}(name,member):prototype[name]=member;return Class.prototype=prototype,Class.constructor=Class,Class.extend=extendClass,Class};var min$1=Math.min,max$1=Math.max,round$2=Math.round,serialize=function(o,quote){var i,v,t,name;if(quote=quote||'"',null===o)return"null";if("string"==(t=typeof o))return v="\bb\tt\nn\ff\rr\"\"''\\\\",quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){return'"'===quote&&"'"===a?a:(i=v.indexOf(b))+1?"\\"+v.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+quote;if("object"===t){if(o.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(o)){for(i=0,v="[";i<o.length;i++)v+=(i>0?",":"")+serialize(o[i],quote);return v+"]"}v="{";for(name in o)o.hasOwnProperty(name)&&(v+="function"!=typeof o[name]?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):"");return v+"}"}return""+o},$_f0x1pj76jcq8h4k7={serialize:serialize,parse:function(text){try{return window[String.fromCharCode(101)+"val"]("("+text+")")}catch(ex){}}},$_atrmy177jcq8h4k9={callbacks:{},count:0,send:function(settings){var self=this,dom=DOMUtils.DOM,count=void 0!==settings.count?settings.count:self.count,id="tinymce_jsonp_"+count;self.callbacks[count]=function(json){dom.remove(id),delete self.callbacks[count],settings.callback(json)},dom.add(dom.doc.body,"script",{id:id,src:settings.url,type:"text/javascript"}),self.count++}},XHR={send:function(settings){var xhr,count=0,ready=function(){!settings.async||4===xhr.readyState||count++>1e4?(settings.success&&count<1e4&&200===xhr.status?settings.success.call(settings.success_scope,""+xhr.responseText,xhr,settings):settings.error&&settings.error.call(settings.error_scope,count>1e4?"TIMED_OUT":"GENERAL",xhr,settings),xhr=null):setTimeout(ready,10)};if(settings.scope=settings.scope||this,settings.success_scope=settings.success_scope||settings.scope,settings.error_scope=settings.error_scope||settings.scope,settings.async=!1!==settings.async,settings.data=settings.data||"",XHR.fire("beforeInitialize",{settings:settings}),xhr=new XMLHttpRequest){if(xhr.overrideMimeType&&xhr.overrideMimeType(settings.content_type),xhr.open(settings.type||(settings.data?"POST":"GET"),settings.url,settings.async),settings.crossDomain&&(xhr.withCredentials=!0),settings.content_type&&xhr.setRequestHeader("Content-Type",settings.content_type),settings.requestheaders&&$_topwtjjcq8h3fq.each(settings.requestheaders,function(header){xhr.setRequestHeader(header.key,header.value)}),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),(xhr=XHR.fire("beforeSend",{xhr:xhr,settings:settings}).xhr).send(settings.data),!settings.async)return ready();setTimeout(ready,10)}}};$_topwtjjcq8h3fq.extend(XHR,$_f07ote3yjcq8h436);var extend$7=$_topwtjjcq8h3fq.extend,JSONRequest=function(settings){this.settings=extend$7({},settings),this.count=0};JSONRequest.sendRPC=function(o){return(new JSONRequest).send(o)},JSONRequest.prototype={send:function(args){var ecb=args.error,scb=args.success;(args=extend$7(this.settings,args)).success=function(c,x){void 0===(c=$_f0x1pj76jcq8h4k7.parse(c))&&(c={error:"JSON Parse error."}),c.error?ecb.call(args.error_scope||args.scope,c.error,x):scb.call(args.success_scope||args.scope,c.result)},args.error=function(ty,x){ecb&&ecb.call(args.error_scope||args.scope,ty,x)},args.data=$_f0x1pj76jcq8h4k7.serialize({id:args.id||"c"+this.count++,method:args.method,params:args.params}),args.content_type="application/json",XHR.send(args)}};var localStorage=window.localStorage,tinymce=EditorManager$1,publicApi={geom:{Rect:$_epms1472jcq8h4jt},util:{Promise:promiseObj,Delay:$_51uzcpgjcq8h3db,Tools:$_topwtjjcq8h3fq,VK:$_de018656jcq8h48p,URI:URI,Class:Class,EventDispatcher:Dispatcher,Observable:$_f07ote3yjcq8h436,I18n:$_7xugob70jcq8h4jm,XHR:XHR,JSON:$_f0x1pj76jcq8h4k7,JSONRequest:JSONRequest,JSONP:$_atrmy177jcq8h4k9,LocalStorage:localStorage,Color:function(value){var self={},r=0,g=0,b=0,rgb2hsv=function(r,g,b){var h,s,v,d,minRGB,maxRGB;return h=0,s=0,v=0,r/=255,g/=255,b/=255,minRGB=min$1(r,min$1(g,b)),maxRGB=max$1(r,max$1(g,b)),minRGB===maxRGB?(v=minRGB,{h:0,s:0,v:100*v}):(d=r===minRGB?g-b:b===minRGB?r-g:b-r,h=r===minRGB?3:b===minRGB?1:5,h=60*(h-d/(maxRGB-minRGB)),s=(maxRGB-minRGB)/maxRGB,v=maxRGB,{h:round$2(h),s:round$2(100*s),v:round$2(100*v)})},hsvToRgb=function(hue,saturation,brightness){var side,chroma,x,match;if(hue=(parseInt(hue,10)||0)%360,saturation=parseInt(saturation,10)/100,brightness=parseInt(brightness,10)/100,saturation=max$1(0,min$1(saturation,1)),brightness=max$1(0,min$1(brightness,1)),0!==saturation){switch(side=hue/60,chroma=brightness*saturation,x=chroma*(1-Math.abs(side%2-1)),match=brightness-chroma,Math.floor(side)){case 0:r=chroma,g=x,b=0;break;case 1:r=x,g=chroma,b=0;break;case 2:r=0,g=chroma,b=x;break;case 3:r=0,g=x,b=chroma;break;case 4:r=x,g=0,b=chroma;break;case 5:r=chroma,g=0,b=x;break;default:r=g=b=0}r=round$2(255*(r+match)),g=round$2(255*(g+match)),b=round$2(255*(b+match))}else r=g=b=round$2(255*brightness)},parse=function(value){var matches;return"object"==typeof value?"r"in value?(r=value.r,g=value.g,b=value.b):"v"in value&&hsvToRgb(value.h,value.s,value.v):(matches=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(value))?(r=parseInt(matches[1],10),g=parseInt(matches[2],10),b=parseInt(matches[3],10)):(matches=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value))?(r=parseInt(matches[1],16),g=parseInt(matches[2],16),b=parseInt(matches[3],16)):(matches=/#([0-F])([0-F])([0-F])/gi.exec(value))&&(r=parseInt(matches[1]+matches[1],16),g=parseInt(matches[2]+matches[2],16),b=parseInt(matches[3]+matches[3],16)),r=r<0?0:r>255?255:r,g=g<0?0:g>255?255:g,b=b<0?0:b>255?255:b,self};return value&&parse(value),self.toRgb=function(){return{r:r,g:g,b:b}},self.toHsv=function(){return rgb2hsv(r,g,b)},self.toHex=function(){var hex=function(val){return(val=parseInt(val,10).toString(16)).length>1?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)},self.parse=parse,self}},dom:{EventUtils:EventUtils,Sizzle:Sizzle,DomQuery:DomQuery,TreeWalker:TreeWalker,DOMUtils:DOMUtils,ScriptLoader:ScriptLoader,RangeUtils:RangeUtils$1,Serializer:Serializer$1,ControlSelection:ControlSelection,BookmarkManager:BookmarkManager$1,Selection:Selection$1,Event:EventUtils.Event},html:{Styles:Styles,Entities:Entities,Node:Node$2,Schema:Schema,SaxParser:SaxParser,DomParser:DomParser,Writer:Writer,Serializer:Serializer},ui:{Factory:$_czoexk73jcq8h4jx},Env:$_1surm29jcq8h31g,AddOnManager:AddOnManager,Formatter:Formatter,UndoManager:UndoManager,EditorCommands:EditorCommands,WindowManager:WindowManager,NotificationManager:NotificationManager,EditorObservable:EditorObservable$1,Shortcuts:Shortcuts,Editor:Editor,FocusManager:$_geykie6yjcq8h4jh,EditorManager:EditorManager$1,DOM:DOMUtils.DOM,ScriptLoader:ScriptLoader.ScriptLoader,PluginManager:AddOnManager.PluginManager,ThemeManager:AddOnManager.ThemeManager,trim:$_topwtjjcq8h3fq.trim,isArray:$_topwtjjcq8h3fq.isArray,is:$_topwtjjcq8h3fq.is,toArray:$_topwtjjcq8h3fq.toArray,makeMap:$_topwtjjcq8h3fq.makeMap,each:$_topwtjjcq8h3fq.each,map:$_topwtjjcq8h3fq.map,grep:$_topwtjjcq8h3fq.grep,inArray:$_topwtjjcq8h3fq.inArray,extend:$_topwtjjcq8h3fq.extend,create:$_topwtjjcq8h3fq.create,walk:$_topwtjjcq8h3fq.walk,createNS:$_topwtjjcq8h3fq.createNS,resolve:$_topwtjjcq8h3fq.resolve,explode:$_topwtjjcq8h3fq.explode,_addCacheSuffix:$_topwtjjcq8h3fq._addCacheSuffix,isOpera:$_1surm29jcq8h31g.opera,isWebKit:$_1surm29jcq8h31g.webkit,isIE:$_1surm29jcq8h31g.ie,isGecko:$_1surm29jcq8h31g.gecko,isMac:$_1surm29jcq8h31g.mac};!function(tinymce){window.tinymce=tinymce,window.tinyMCE=tinymce}(tinymce=$_topwtjjcq8h3fq.extend(tinymce,publicApi))}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Emitter=function(){function Emitter(){_classCallCheck(this,Emitter)}return _createClass(Emitter,[{key:"on",value:function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this}},{key:"emit",value:function(event){this._callbacks=this._callbacks||{};var callbacks=this._callbacks[event];if(callbacks){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];for(var _i=0,_iterator=_iterator=callbacks;;){if(_i>=_iterator.length)break;_iterator[_i++].apply(this,args)}}return this}},{key:"off",value:function(event,fn){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1===arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++)if(callbacks[i]===fn){callbacks.splice(i,1);break}return this}}]),Emitter}(),Dropzone=function(_Emitter){function Dropzone(el,options){_classCallCheck(this,Dropzone);var _this=_possibleConstructorReturn(this,(Dropzone.__proto__||Object.getPrototypeOf(Dropzone)).call(this)),fallback=void 0,left=void 0;if(_this.element=el,_this.version=Dropzone.version,_this.defaultOptions.previewTemplate=_this.defaultOptions.previewTemplate.replace(/\n*/g,""),_this.clickableElements=[],_this.listeners=[],_this.files=[],"string"==typeof _this.element&&(_this.element=document.querySelector(_this.element)),!_this.element||null==_this.element.nodeType)throw new Error("Invalid dropzone element.");if(_this.element.dropzone)throw new Error("Dropzone already attached.");Dropzone.instances.push(_this),_this.element.dropzone=_this;var elementOptions=null!=(left=Dropzone.optionsForElement(_this.element))?left:{};if(_this.options=Dropzone.extend({},_this.defaultOptions,elementOptions,null!=options?options:{}),_this.options.forceFallback||!Dropzone.isBrowserSupported()){var _ret;return _ret=_this.options.fallback.call(_this),_possibleConstructorReturn(_this,_ret)}if(null==_this.options.url&&(_this.options.url=_this.element.getAttribute("action")),!_this.options.url)throw new Error("No URL provided.");if(_this.options.acceptedFiles&&_this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(_this.options.uploadMultiple&&_this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return _this.options.acceptedMimeTypes&&(_this.options.acceptedFiles=_this.options.acceptedMimeTypes,delete _this.options.acceptedMimeTypes),null!=_this.options.renameFilename&&(_this.options.renameFile=function(file){return _this.options.renameFilename.call(_this,file.name,file)}),_this.options.method=_this.options.method.toUpperCase(),(fallback=_this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==_this.options.previewsContainer&&(_this.options.previewsContainer?_this.previewsContainer=Dropzone.getElement(_this.options.previewsContainer,"previewsContainer"):_this.previewsContainer=_this.element),_this.options.clickable&&(!0===_this.options.clickable?_this.clickableElements=[_this.element]:_this.clickableElements=Dropzone.getElements(_this.options.clickable,"clickable")),_this.init(),_this}return _inherits(Dropzone,Emitter),_createClass(Dropzone,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(files,xhr,chunk){if(chunk)return{dzuuid:chunk.file.upload.uuid,dzchunkindex:chunk.index,dztotalfilesize:chunk.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:chunk.file.upload.totalChunkCount,dzchunkbyteoffset:chunk.index*this.options.chunkSize}},accept:function(file,done){return done()},chunksUploaded:function(file,done){done()},fallback:function(){var messageElement=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var _i2=0,_iterator2=_iterator2=this.element.getElementsByTagName("div");;){var _ref2;if(_i2>=_iterator2.length)break;var child=_ref2=_iterator2[_i2++];if(/(^| )dz-message($| )/.test(child.className)){messageElement=child,child.className="dz-message";break}}messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement));var span=messageElement.getElementsByTagName("span")[0];return span&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file,width,height,resizeMethod){var info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height;null==width&&null==height?(width=info.srcWidth,height=info.srcHeight):null==width?width=height*srcRatio:null==height&&(height=width/srcRatio);var trgRatio=(width=Math.min(width,info.srcWidth))/(height=Math.min(height,info.srcHeight));if(info.srcWidth>width||info.srcHeight>height)if("crop"===resizeMethod)srcRatio>trgRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio);else{if("contain"!==resizeMethod)throw new Error("Unknown resizeMethod '"+resizeMethod+"'");srcRatio>trgRatio?height=width/srcRatio:width=height*srcRatio}return info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info.trgWidth=width,info.trgHeight=height,info},transformFile:function(file,done){return(this.options.resizeWidth||this.options.resizeHeight)&&file.type.match(/image.*/)?this.resizeImage(file,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,done):done(file)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var _this2=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement);for(var _i3=0,_iterator3=_iterator3=file.previewElement.querySelectorAll("[data-dz-name]");;){var _ref3;if(_i3>=_iterator3.length)break;var node=_ref3=_iterator3[_i3++];node.textContent=file.name}for(var _i4=0,_iterator4=_iterator4=file.previewElement.querySelectorAll("[data-dz-size]");!(_i4>=_iterator4.length);)(node=_iterator4[_i4++]).innerHTML=this.filesize(file.size);this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),file.previewElement.appendChild(file._removeLink));for(var removeFileEvent=function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this2.options.dictCancelUploadConfirmation,function(){return _this2.removeFile(file)}):_this2.options.dictRemoveFileConfirmation?Dropzone.confirm(_this2.options.dictRemoveFileConfirmation,function(){return _this2.removeFile(file)}):_this2.removeFile(file)},_i5=0,_iterator5=_iterator5=file.previewElement.querySelectorAll("[data-dz-remove]");;){if(_i5>=_iterator5.length)break;_iterator5[_i5++].addEventListener("click",removeFileEvent)}}},removedfile:function(file){return null!=file.previewElement&&null!=file.previewElement.parentNode&&file.previewElement.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");for(var _i6=0,_iterator6=_iterator6=file.previewElement.querySelectorAll("[data-dz-thumbnail]");;){var _ref5;if(_i6>=_iterator6.length)break;var thumbnailElement=_ref5=_iterator6[_i6++];thumbnailElement.alt=file.name,thumbnailElement.src=dataUrl}return setTimeout(function(){return file.previewElement.classList.add("dz-image-preview")},1)}},error:function(file,message){if(file.previewElement){file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error);for(var _i7=0,_iterator7=_iterator7=file.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(_i7>=_iterator7.length)break;_iterator7[_i7++].textContent=message}}},errormultiple:function(){},processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(file,progress,bytesSent){if(file.previewElement)for(var _i8=0,_iterator8=_iterator8=file.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){var _ref7;if(_i8>=_iterator8.length)break;var node=_ref7=_iterator8[_i8++];"PROGRESS"===node.nodeName?node.value=progress:node.style.width=progress+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(file){return this.emit("error",file,"Upload canceled.")},canceledmultiple:function(){},complete:function(file){if(file._removeLink&&(file._removeLink.textContent=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(target){for(var _len2=arguments.length,objects=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)objects[_key2-1]=arguments[_key2];for(var _i9=0,_iterator9=_iterator9=objects;;){var _ref8;if(_i9>=_iterator9.length)break;var object=_ref8=_iterator9[_i9++];for(var key in object){var val=object[key];target[key]=val}}return target}}]),_createClass(Dropzone,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(file){return file.accepted}).map(function(file){return file})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(file){return!file.accepted}).map(function(file){return file})}},{key:"getFilesWithStatus",value:function(status){return this.files.filter(function(file){return file.status===status}).map(function(file){return file})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(Dropzone.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(Dropzone.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(Dropzone.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(file){return file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED}).map(function(file){return file})}},{key:"init",value:function(){var _this3=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&function setupHiddenFileInput(){return _this3.hiddenFileInput&&_this3.hiddenFileInput.parentNode.removeChild(_this3.hiddenFileInput),_this3.hiddenFileInput=document.createElement("input"),_this3.hiddenFileInput.setAttribute("type","file"),(null===_this3.options.maxFiles||_this3.options.maxFiles>1)&&_this3.hiddenFileInput.setAttribute("multiple","multiple"),_this3.hiddenFileInput.className="dz-hidden-input",null!==_this3.options.acceptedFiles&&_this3.hiddenFileInput.setAttribute("accept",_this3.options.acceptedFiles),null!==_this3.options.capture&&_this3.hiddenFileInput.setAttribute("capture",_this3.options.capture),_this3.hiddenFileInput.style.visibility="hidden",_this3.hiddenFileInput.style.position="absolute",_this3.hiddenFileInput.style.top="0",_this3.hiddenFileInput.style.left="0",_this3.hiddenFileInput.style.height="0",_this3.hiddenFileInput.style.width="0",document.querySelector(_this3.options.hiddenInputContainer).appendChild(_this3.hiddenFileInput),_this3.hiddenFileInput.addEventListener("change",function(){var files=_this3.hiddenFileInput.files;if(files.length)for(var _i10=0,_iterator10=_iterator10=files;;){var _ref9;if(_i10>=_iterator10.length)break;var file=_ref9=_iterator10[_i10++];_this3.addFile(file)}return _this3.emit("addedfiles",files),setupHiddenFileInput()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;for(var _i11=0,_iterator11=_iterator11=this.events;;){var _ref10;if(_i11>=_iterator11.length)break;var eventName=_ref10=_iterator11[_i11++];this.on(eventName,this.options[eventName])}this.on("uploadprogress",function(){return _this3.updateTotalUploadProgress()}),this.on("removedfile",function(){return _this3.updateTotalUploadProgress()}),this.on("canceled",function(file){return _this3.emit("complete",file)}),this.on("complete",function(file){if(0===_this3.getAddedFiles().length&&0===_this3.getUploadingFiles().length&&0===_this3.getQueuedFiles().length)return setTimeout(function(){return _this3.emit("queuecomplete")},0)});var noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return _this3.emit("dragstart",e)},dragenter:function(e){return noPropagation(e),_this3.emit("dragenter",e)},dragover:function(e){var efct=void 0;try{efct=e.dataTransfer.effectAllowed}catch(error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this3.emit("dragover",e)},dragleave:function(e){return _this3.emit("dragleave",e)},drop:function(e){return noPropagation(e),_this3.drop(e)},dragend:function(e){return _this3.emit("dragend",e)}}}],this.clickableElements.forEach(function(clickableElement){return _this3.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this3.element||evt.target===_this3.element||Dropzone.elementInside(evt.target,_this3.element.querySelector(".dz-message")))&&_this3.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var totalUploadProgress=void 0,totalBytesSent=0,totalBytes=0;if(this.getActiveFiles().length){for(var _i12=0,_iterator12=_iterator12=this.getActiveFiles();;){var _ref11;if(_i12>=_iterator12.length)break;var file=_ref11=_iterator12[_i12++];totalBytesSent+=file.upload.bytesSent,totalBytes+=file.upload.total}totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)}},{key:"_getParamName",value:function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")}},{key:"_renameFile",value:function(file){return"function"!=typeof this.options.renameFile?file.name:this.options.renameFile(file)}},{key:"getFallbackForm",value:function(){var existingFallback=void 0,form=void 0;if(existingFallback=this.getExistingFallback())return existingFallback;var fieldsString='<div class="dz-fallback">';this.options.dictFallbackText&&(fieldsString+="<p>"+this.options.dictFallbackText+"</p>"),fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var fields=Dropzone.createElement(fieldsString);return"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(fields):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields}},{key:"getExistingFallback",value:function(){for(var _arr=["div","form"],_i14=0;_i14<_arr.length;_i14++){var fallback,tagName=_arr[_i14];if(fallback=function(elements){for(var _i13=0,_iterator13=_iterator13=elements;;){var _ref12;if(_i13>=_iterator13.length)break;var el=_ref12=_iterator13[_i13++];if(/(^| )fallback($| )/.test(el.className))return el}}(this.element.getElementsByTagName(tagName)))return fallback}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.addEventListener(event,listener,!1))}return result}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.removeEventListener(event,listener,!1))}return result}()})}},{key:"disable",value:function(){var _this4=this;return this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),this.files.map(function(file){return _this4.cancelUpload(file)})}},{key:"enable",value:function(){return this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(size){var selectedSize=0,selectedUnit="b";if(size>0){for(var units=["tb","gb","mb","kb","b"],i=0;i<units.length;i++){var unit=units[i];if(size>=Math.pow(this.options.filesizeBase,4-i)/10){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}}selectedSize=Math.round(10*selectedSize)/10}return"<strong>"+selectedSize+"</strong> "+this.options.dictFileSizeUnits[selectedUnit]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);var files=e.dataTransfer.files;if(this.emit("addedfiles",files),files.length){var items=e.dataTransfer.items;items&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)}}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(x){return x.items})){this.emit("paste",e);var items=e.clipboardData.items;return items.length?this._addFilesFromItems(items):void 0}}},{key:"handleFiles",value:function(files){var _this5=this;return files.map(function(file){return _this5.addFile(file)})}},{key:"_addFilesFromItems",value:function(items){var _this6=this;return function(){for(var result=[],_i15=0,_iterator14=_iterator14=items;;){var _ref13;if(_i15>=_iterator14.length)break;var entry,item=_ref13=_iterator14[_i15++];null!=item.webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?result.push(_this6.addFile(item.getAsFile())):entry.isDirectory?result.push(_this6._addFilesFromDirectory(entry,entry.name)):result.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?result.push(_this6.addFile(item.getAsFile())):result.push(void 0)}return result}()}},{key:"_addFilesFromDirectory",value:function(directory,path){var _this7=this,dirReader=directory.createReader(),errorHandler=function(error){return __guardMethod__(console,"log",function(o){return o.log(error)})};return function readEntries(){return dirReader.readEntries(function(entries){if(entries.length>0){for(var _i16=0,_iterator15=_iterator15=entries;;){var _ref14;if(_i16>=_iterator15.length)break;var entry=_ref14=_iterator15[_i16++];entry.isFile?entry.file(function(file){if(!_this7.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath=path+"/"+file.name,_this7.addFile(file)}):entry.isDirectory&&_this7._addFilesFromDirectory(entry,path+"/"+entry.name)}readEntries()}return null},errorHandler)}()}},{key:"accept",value:function(file,done){return file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)}},{key:"addFile",value:function(file){var _this8=this;return file.upload={uuid:Dropzone.uuidv4(),progress:0,total:file.size,bytesSent:0,filename:this._renameFile(file),chunked:this.options.chunking&&(this.options.forceChunking||file.size>this.options.chunkSize),totalChunkCount:Math.ceil(file.size/this.options.chunkSize)},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,function(error){return error?(file.accepted=!1,_this8._errorProcessing([file],error)):(file.accepted=!0,_this8.options.autoQueue&&_this8.enqueueFile(file)),_this8._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(files){for(var _i17=0,_iterator16=_iterator16=files;;){var _ref15;if(_i17>=_iterator16.length)break;var file=_ref15=_iterator16[_i17++];this.enqueueFile(file)}return null}},{key:"enqueueFile",value:function(file){var _this9=this;if(file.status!==Dropzone.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(file.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return _this9.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(file){var _this10=this;if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(file),setTimeout(function(){return _this10._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var _this11=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var file=this._thumbnailQueue.shift();return this.createThumbnail(file,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(dataUrl){return _this11.emit("thumbnail",file,dataUrl),_this11._processingThumbnail=!1,_this11._processThumbnailQueue()})}}},{key:"removeFile",value:function(file){if(file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(cancelIfNecessary){null==cancelIfNecessary&&(cancelIfNecessary=!1);for(var _i18=0,_iterator17=_iterator17=this.files.slice();;){var _ref16;if(_i18>=_iterator17.length)break;var file=_ref16=_iterator17[_i18++];(file.status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file)}return null}},{key:"resizeImage",value:function(file,width,height,resizeMethod,callback){var _this12=this;return this.createThumbnail(file,width,height,resizeMethod,!1,function(dataUrl,canvas){if(null===canvas)return callback(file);var resizeMimeType=_this12.options.resizeMimeType;null==resizeMimeType&&(resizeMimeType=file.type);var resizedDataURL=canvas.toDataURL(resizeMimeType,_this12.options.resizeQuality);return"image/jpeg"!==resizeMimeType&&"image/jpg"!==resizeMimeType||(resizedDataURL=ExifRestore.restore(file.dataURL,resizedDataURL)),callback(Dropzone.dataURItoBlob(resizedDataURL))})}},{key:"createThumbnail",value:function(file,width,height,resizeMethod,fixOrientation,callback){var _this13=this,fileReader=new FileReader;return fileReader.onload=function(){file.dataURL=fileReader.result;if("image/svg+xml"!==file.type)return _this13.createThumbnailFromUrl(file,width,height,resizeMethod,fixOrientation,callback);null!=callback&&callback(fileReader.result)},fileReader.readAsDataURL(file)}},{key:"createThumbnailFromUrl",value:function(file,width,height,resizeMethod,fixOrientation,callback,crossOrigin){var _this14=this,img=document.createElement("img");return crossOrigin&&(img.crossOrigin=crossOrigin),img.onload=function(){var loadExif=function(callback){return callback(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&fixOrientation&&(loadExif=function(callback){return EXIF.getData(img,function(){return callback(EXIF.getTag(this,"Orientation"))})}),loadExif(function(orientation){file.width=img.width,file.height=img.height;var resizeInfo=_this14.options.resize.call(_this14,file,width,height,resizeMethod),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,orientation>4&&(canvas.width=resizeInfo.trgHeight,canvas.height=resizeInfo.trgWidth),orientation){case 2:ctx.translate(canvas.width,0),ctx.scale(-1,1);break;case 3:ctx.translate(canvas.width,canvas.height),ctx.rotate(Math.PI);break;case 4:ctx.translate(0,canvas.height),ctx.scale(1,-1);break;case 5:ctx.rotate(.5*Math.PI),ctx.scale(1,-1);break;case 6:ctx.rotate(.5*Math.PI),ctx.translate(0,-canvas.height);break;case 7:ctx.rotate(.5*Math.PI),ctx.translate(canvas.width,-canvas.height),ctx.scale(-1,1);break;case 8:ctx.rotate(-.5*Math.PI),ctx.translate(-canvas.width,0)}drawImageIOSFix(ctx,img,null!=resizeInfo.srcX?resizeInfo.srcX:0,null!=resizeInfo.srcY?resizeInfo.srcY:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=resizeInfo.trgX?resizeInfo.trgX:0,null!=resizeInfo.trgY?resizeInfo.trgY:0,resizeInfo.trgWidth,resizeInfo.trgHeight);var thumbnail=canvas.toDataURL("image/png");if(null!=callback)return callback(thumbnail,canvas)})},null!=callback&&(img.onerror=callback),img.src=file.dataURL}},{key:"processQueue",value:function(){var parallelUploads=this.options.parallelUploads,processingLength=this.getUploadingFiles().length,i=processingLength;if(!(processingLength>=parallelUploads)){var queuedFiles=this.getQueuedFiles();if(queuedFiles.length>0){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}}}},{key:"processFile",value:function(file){return this.processFiles([file])}},{key:"processFiles",value:function(files){for(var _i19=0,_iterator18=_iterator18=files;;){var _ref17;if(_i19>=_iterator18.length)break;var file=_ref17=_iterator18[_i19++];file.processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file)}return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)}},{key:"_getFilesWithXhr",value:function(xhr){return this.files.filter(function(file){return file.xhr===xhr}).map(function(file){return file})}},{key:"cancelUpload",value:function(file){if(file.status===Dropzone.UPLOADING){for(var groupedFiles=this._getFilesWithXhr(file.xhr),_i20=0,_iterator19=_iterator19=groupedFiles;;){if(_i20>=_iterator19.length)break;_iterator19[_i20++].status=Dropzone.CANCELED}void 0!==file.xhr&&file.xhr.abort();for(var _i21=0,_iterator20=_iterator20=groupedFiles;;){var _ref19;if(_i21>=_iterator20.length)break;var _groupedFile=_ref19=_iterator20[_i21++];this.emit("canceled",_groupedFile)}this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else file.status!==Dropzone.ADDED&&file.status!==Dropzone.QUEUED||(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(option){if("function"==typeof option){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return option.apply(this,args)}return option}},{key:"uploadFile",value:function(file){return this.uploadFiles([file])}},{key:"uploadFiles",value:function(files){var _this15=this;this._transformFiles(files,function(transformedFiles){if(files[0].upload.chunked){var file=files[0],transformedFile=transformedFiles[0],startedChunkCount=0;file.upload.chunks=[];var handleNextChunk=function(){for(var chunkIndex=0;void 0!==file.upload.chunks[chunkIndex];)chunkIndex++;if(!(chunkIndex>=file.upload.totalChunkCount)){startedChunkCount++;var start=chunkIndex*_this15.options.chunkSize,end=Math.min(start+_this15.options.chunkSize,file.size),dataBlock={name:_this15._getParamName(0),data:transformedFile.webkitSlice?transformedFile.webkitSlice(start,end):transformedFile.slice(start,end),filename:file.upload.filename,chunkIndex:chunkIndex};file.upload.chunks[chunkIndex]={file:file,index:chunkIndex,dataBlock:dataBlock,status:Dropzone.UPLOADING,progress:0,retries:0},_this15._uploadData(files,[dataBlock])}};if(file.upload.finishedChunkUpload=function(chunk){var allFinished=!0;chunk.status=Dropzone.SUCCESS,chunk.dataBlock=null;for(var i=0;i<file.upload.totalChunkCount;i++){if(void 0===file.upload.chunks[i])return handleNextChunk();file.upload.chunks[i].status!==Dropzone.SUCCESS&&(allFinished=!1)}allFinished&&_this15.options.chunksUploaded(file,function(){_this15._finished(files,"",null)})},_this15.options.parallelChunkUploads)for(var i=0;i<file.upload.totalChunkCount;i++)handleNextChunk();else handleNextChunk()}else{for(var dataBlocks=[],_i22=0;_i22<files.length;_i22++)dataBlocks[_i22]={name:_this15._getParamName(_i22),data:transformedFiles[_i22],filename:files[_i22].upload.filename};_this15._uploadData(files,dataBlocks)}})}},{key:"_getChunk",value:function(file,xhr){for(var i=0;i<file.upload.totalChunkCount;i++)if(void 0!==file.upload.chunks[i]&&file.upload.chunks[i].xhr===xhr)return file.upload.chunks[i]}},{key:"_uploadData",value:function(files,dataBlocks){for(var _this16=this,xhr=new XMLHttpRequest,_i23=0,_iterator21=_iterator21=files;;){if(_i23>=_iterator21.length)break;_iterator21[_i23++].xhr=xhr}files[0].upload.chunked&&(files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr=xhr);var method=this.resolveOption(this.options.method,files),url=this.resolveOption(this.options.url,files);xhr.open(method,url,!0),xhr.timeout=this.resolveOption(this.options.timeout,files),xhr.withCredentials=!!this.options.withCredentials,xhr.onload=function(e){_this16._finishedUploading(files,xhr,e)},xhr.onerror=function(){_this16._handleUploadError(files,xhr)},(null!=xhr.upload?xhr.upload:xhr).onprogress=function(e){return _this16._updateFilesUploadProgress(files,xhr,e)};var headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&Dropzone.extend(headers,this.options.headers);for(var headerName in headers){var headerValue=headers[headerName];headerValue&&xhr.setRequestHeader(headerName,headerValue)}var formData=new FormData;if(this.options.params){var additionalParams=this.options.params;"function"==typeof additionalParams&&(additionalParams=additionalParams.call(this,files,xhr,files[0].upload.chunked?this._getChunk(files[0],xhr):null));for(var key in additionalParams){var value=additionalParams[key];formData.append(key,value)}}for(var _i24=0,_iterator22=_iterator22=files;;){var _ref21;if(_i24>=_iterator22.length)break;var _file=_ref21=_iterator22[_i24++];this.emit("sending",_file,xhr,formData)}this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),this._addFormElementData(formData);for(var i=0;i<dataBlocks.length;i++){var dataBlock=dataBlocks[i];formData.append(dataBlock.name,dataBlock.data,dataBlock.filename)}this.submitRequest(xhr,formData,files)}},{key:"_transformFiles",value:function(files,done){for(var _this17=this,transformedFiles=[],doneCounter=0,i=0;i<files.length;i++)!function(i){_this17.options.transformFile.call(_this17,files[i],function(transformedFile){transformedFiles[i]=transformedFile,++doneCounter===files.length&&done(transformedFiles)})}(i)}},{key:"_addFormElementData",value:function(formData){if("FORM"===this.element.tagName)for(var _i25=0,_iterator23=_iterator23=this.element.querySelectorAll("input, textarea, select, button");;){var _ref22;if(_i25>=_iterator23.length)break;var input=_ref22=_iterator23[_i25++],inputName=input.getAttribute("name"),inputType=input.getAttribute("type");if(inputType&&(inputType=inputType.toLowerCase()),void 0!==inputName&&null!==inputName)if("SELECT"===input.tagName&&input.hasAttribute("multiple"))for(var _i26=0,_iterator24=_iterator24=input.options;;){var _ref23;if(_i26>=_iterator24.length)break;var option=_ref23=_iterator24[_i26++];option.selected&&formData.append(inputName,option.value)}else(!inputType||"checkbox"!==inputType&&"radio"!==inputType||input.checked)&&formData.append(inputName,input.value)}}},{key:"_updateFilesUploadProgress",value:function(files,xhr,e){var progress=void 0;if(void 0!==e){if(progress=100*e.loaded/e.total,files[0].upload.chunked){var file=files[0],chunk=this._getChunk(file,xhr);chunk.progress=progress,chunk.total=e.total,chunk.bytesSent=e.loaded;file.upload.progress=0,file.upload.total=0,file.upload.bytesSent=0;for(var i=0;i<file.upload.totalChunkCount;i++)void 0!==file.upload.chunks[i]&&void 0!==file.upload.chunks[i].progress&&(file.upload.progress+=file.upload.chunks[i].progress,file.upload.total+=file.upload.chunks[i].total,file.upload.bytesSent+=file.upload.chunks[i].bytesSent);file.upload.progress=file.upload.progress/file.upload.totalChunkCount}else for(var _i27=0,_iterator25=_iterator25=files;;){var _ref24;if(_i27>=_iterator25.length)break;var _file2=_ref24=_iterator25[_i27++];_file2.upload.progress=progress,_file2.upload.total=e.total,_file2.upload.bytesSent=e.loaded}for(var _i28=0,_iterator26=_iterator26=files;;){var _ref25;if(_i28>=_iterator26.length)break;var _file3=_ref25=_iterator26[_i28++];this.emit("uploadprogress",_file3,_file3.upload.progress,_file3.upload.bytesSent)}}else{var allFilesFinished=!0;progress=100;for(var _i29=0,_iterator27=_iterator27=files;;){var _ref26;if(_i29>=_iterator27.length)break;var _file4=_ref26=_iterator27[_i29++];100===_file4.upload.progress&&_file4.upload.bytesSent===_file4.upload.total||(allFilesFinished=!1),_file4.upload.progress=progress,_file4.upload.bytesSent=_file4.upload.total}if(allFilesFinished)return;for(var _i30=0,_iterator28=_iterator28=files;;){var _ref27;if(_i30>=_iterator28.length)break;var _file5=_ref27=_iterator28[_i30++];this.emit("uploadprogress",_file5,progress,_file5.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(files,xhr,e){var response=void 0;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if("arraybuffer"!==xhr.responseType&&"blob"!==xhr.responseType&&(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")))try{response=JSON.parse(response)}catch(error){e=error,response="Invalid JSON response from server."}this._updateFilesUploadProgress(files),200<=xhr.status&&xhr.status<300?files[0].upload.chunked?files[0].upload.finishedChunkUpload(this._getChunk(files[0],xhr)):this._finished(files,response,e):this._handleUploadError(files,xhr,response)}}},{key:"_handleUploadError",value:function(files,xhr,response){if(files[0].status!==Dropzone.CANCELED){if(files[0].upload.chunked&&this.options.retryChunks){var chunk=this._getChunk(files[0],xhr);if(chunk.retries++<this.options.retryChunksLimit)return void this._uploadData(files,[chunk.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var _i31=0,_iterator29=_iterator29=files;;){if(_i31>=_iterator29.length)break;_iterator29[_i31++];this._errorProcessing(files,response||this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr)}}}},{key:"submitRequest",value:function(xhr,formData,files){xhr.send(formData)}},{key:"_finished",value:function(files,responseText,e){for(var _i32=0,_iterator30=_iterator30=files;;){var _ref29;if(_i32>=_iterator30.length)break;var file=_ref29=_iterator30[_i32++];file.status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file)}if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(files,message,xhr){for(var _i33=0,_iterator31=_iterator31=files;;){var _ref30;if(_i33>=_iterator31.length)break;var file=_ref30=_iterator31[_i33++];file.status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file)}if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}}]),Dropzone}();Dropzone.initClass(),Dropzone.version="5.3.0",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var dropzones=void 0;if(document.querySelectorAll)dropzones=document.querySelectorAll(".dropzone");else{dropzones=[];var checkElements=function(elements){return function(){for(var result=[],_i34=0,_iterator32=_iterator32=elements;;){var _ref31;if(_i34>=_iterator32.length)break;var el=_ref31=_iterator32[_i34++];/(^| )dropzone($| )/.test(el.className)?result.push(dropzones.push(el)):result.push(void 0)}return result}()};checkElements(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))}return function(){for(var result=[],_i35=0,_iterator33=_iterator33=dropzones;;){var _ref32;if(_i35>=_iterator33.length)break;var dropzone=_ref32=_iterator33[_i35++];!1!==Dropzone.optionsForElement(dropzone)?result.push(new Dropzone(dropzone)):result.push(void 0)}return result}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var _i36=0,_iterator34=_iterator34=Dropzone.blacklistedBrowsers;;){if(_i36>=_iterator34.length)break;_iterator34[_i36++].test(navigator.userAgent)&&(capableBrowser=!1)}else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},Dropzone.dataURItoBlob=function(dataURI){for(var byteString=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab),i=0,end=byteString.length,asc=0<=end;asc?i<=end:i>=end;asc?i++:i--)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type:mimeString})};var without=function(list,rejectedItem){return list.filter(function(item){return item!==rejectedItem}).map(function(item){return item})},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})};Dropzone.createElement=function(string){var div=document.createElement("div");return div.innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element=void 0;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");return element},Dropzone.getElements=function(els,name){var el=void 0,elements=void 0;if(els instanceof Array){elements=[];try{for(var _i37=0,_iterator35=_iterator35=els;!(_i37>=_iterator35.length);)el=_iterator35[_i37++],elements.push(this.getElement(el,name))}catch(e){elements=null}}else if("string"==typeof els){elements=[];for(var _i38=0,_iterator36=_iterator36=document.querySelectorAll(els);!(_i38>=_iterator36.length);)el=_iterator36[_i38++],elements.push(el)}else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){if(!acceptedFiles)return!0;acceptedFiles=acceptedFiles.split(",");for(var mimeType=file.type,baseMimeType=mimeType.replace(/\/.*$/,""),_i39=0,_iterator37=_iterator37=acceptedFiles;;){var _ref34;if(_i39>=_iterator37.length)break;var validType=_ref34=_iterator37[_i39++];if("."===(validType=validType.trim()).charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(img){img.naturalWidth;var ih=img.naturalHeight,canvas=document.createElement("canvas");canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);for(var data=ctx.getImageData(1,0,1,ih).data,sy=0,ey=ih,py=ih;py>sy;)0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1;var ratio=py/ih;return 0===ratio?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},ExifRestore=function(){function ExifRestore(){_classCallCheck(this,ExifRestore)}return _createClass(ExifRestore,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(input){for(var output="",chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0;;)if(chr1=input[i++],chr2=input[i++],chr3=input[i++],enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this.KEY_STR.charAt(enc1)+this.KEY_STR.charAt(enc2)+this.KEY_STR.charAt(enc3)+this.KEY_STR.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",!(i<input.length))break;return output}},{key:"restore",value:function(origFileBase64,resizedFileBase64){if(!origFileBase64.match("data:image/jpeg;base64,"))return resizedFileBase64;var rawImage=this.decode64(origFileBase64.replace("data:image/jpeg;base64,","")),segments=this.slice2Segments(rawImage),image=this.exifManipulation(resizedFileBase64,segments);return"data:image/jpeg;base64,"+this.encode64(image)}},{key:"exifManipulation",value:function(resizedFileBase64,segments){var exifArray=this.getExifArray(segments),newImageArray=this.insertExif(resizedFileBase64,exifArray);return new Uint8Array(newImageArray)}},{key:"getExifArray",value:function(segments){for(var seg=void 0,x=0;x<segments.length;){if(255===(seg=segments[x])[0]&225===seg[1])return seg;x++}return[]}},{key:"insertExif",value:function(resizedFileBase64,exifArray){var imageData=resizedFileBase64.replace("data:image/jpeg;base64,",""),buf=this.decode64(imageData),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae;return array=array.concat(exifArray),array=array.concat(ato)}},{key:"slice2Segments",value:function(rawImageArray){for(var head=0,segments=[];;){var length;if(255===rawImageArray[head]&218===rawImageArray[head+1])break;if(255===rawImageArray[head]&216===rawImageArray[head+1])head+=2;else{var endPoint=head+(length=256*rawImageArray[head+2]+rawImageArray[head+3])+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg),head=endPoint}if(head>rawImageArray.length)break}return segments}},{key:"decode64",value:function(input){var chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0,buf=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(input)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");;)if(enc1=this.KEY_STR.indexOf(input.charAt(i++)),enc2=this.KEY_STR.indexOf(input.charAt(i++)),enc3=this.KEY_STR.indexOf(input.charAt(i++)),enc4=this.KEY_STR.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,buf.push(chr1),64!==enc3&&buf.push(chr2),64!==enc4&&buf.push(chr3),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",!(i<input.length))break;return buf}}]),ExifRestore}();ExifRestore.initClass();var contentLoaded=function(win,fn){var done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function init(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0};if("complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(error){}top&&function poll(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}return init("poll")}()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);