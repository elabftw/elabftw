window.jQuery&&function(a){if(!a.support.opacity&&!a.support.style)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(p){}a.fn.rating=function(d){if(0==this.length)return this;if("string"==typeof arguments[0]){if(1<this.length){var c=arguments;return this.each(function(){a.fn.rating.apply(a(this),c)})}a.fn.rating[arguments[0]].apply(this,a.makeArray(arguments).slice(1)||[]);return this}d=a.extend({},a.fn.rating.options,d||{});a.fn.rating.calls++;this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var b,
c=a(this),k=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),l=a(this.form||document.body),g=l.data("rating");g&&g.call==a.fn.rating.calls||(g={count:0,call:a.fn.rating.calls});var f=g[k]||l.data("rating"+k);f&&(b=f.data("rating"));if(f&&b)b.count++;else{b=a.extend({},d||{},(a.metadata?c.metadata():a.meta?c.data():null)||{},{count:0,stars:[],inputs:[]});b.serial=g.count++;f=a('<span class="star-rating-control"/>');c.before(f);f.addClass("rating-to-be-drawn");if(c.attr("disabled")||
c.hasClass("disabled"))b.readOnly=!0;c.hasClass("required")&&(b.required=!0);f.append(b.cancel=a('<div class="rating-cancel"><a title="'+b.cancel+'">'+b.cancelValue+"</a></div>").on("mouseover",function(){a(this).rating("drain");a(this).addClass("star-rating-hover")}).on("mouseout",function(){a(this).rating("draw");a(this).removeClass("star-rating-hover")}).on("click",function(){a(this).rating("select")}).data("rating",b))}var e=a('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+
b.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");f.append(e);this.id&&e.attr("id",this.id);this.className&&e.addClass(this.className);b.half&&(b.split=2);if("number"==typeof b.split&&0<b.split){var m=(a.fn.width?e.width():0)||b.starWidth,n=b.count%b.split,m=Math.floor(m/b.split);e.width(m).find("a").css({"margin-left":"-"+n*m+"px"})}if(b.readOnly)e.addClass("star-rating-readonly");else e.addClass("star-rating-live").on("mouseover",function(){a(this).rating("fill");a(this).rating("focus")}).on("mouseout",
function(){a(this).rating("draw");a(this).rating("blur")}).on("click",function(){a(this).rating("select")});this.checked&&(b.current=e);"A"==this.nodeName&&a(this).hasClass("selected")&&(b.current=e);c.hide();c.on("change.rating",function(b){if(b.selfTriggered)return!1;a(this).rating("select")});e.data("rating.input",c.data("rating.star",e));b.stars[b.stars.length]=e[0];b.inputs[b.inputs.length]=c[0];b.rater=g[k]=f;b.context=l;c.data("rating",b);f.data("rating",b);e.data("rating",b);l.data("rating",
g);l.data("rating"+k,f)});a(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};a.extend(a.fn.rating,{calls:0,focus:function(){var d=this.data("rating");if(!d||!d.focus)return this;var c=a(this).data("rating.input")||a("INPUT"==this.tagName?this:null);d.focus&&d.focus.apply(c[0],[c.val(),a("a",c.data("rating.star"))[0]])},blur:function(){var d=this.data("rating");if(!d||!d.blur)return this;var c=a(this).data("rating.input")||a("INPUT"==this.tagName?this:null);d.blur&&
d.blur.apply(c[0],[c.val(),a("a",c.data("rating.star"))[0]])},fill:function(){var a=this.data("rating");if(!a)return this;a.readOnly||(this.rating("drain"),this.prevAll().addBack().filter(".rater-"+a.serial).addClass("star-rating-hover"))},drain:function(){var a=this.data("rating");if(!a)return this;a.readOnly||a.rater.children().filter(".rater-"+a.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var d=this.data("rating");if(!d)return this;this.rating("drain");
var c=a(d.current);(c=c.length?c.prevAll().addBack().filter(".rater-"+d.serial):null)&&c.addClass("star-rating-on");d.cancel[d.readOnly||d.required?"hide":"show"]();this.siblings()[d.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(d,c){var b=this.data("rating");if(!b)return this;if(!b.readOnly){b.current=null;if("undefined"!=typeof d||1<this.length){if("number"==typeof d)return a(b.stars[d]).rating("select",void 0,c);if("string"==typeof d)return a.each(b.stars,function(){a(this).data("rating.input").val()==
d&&a(this).rating("select",void 0,c)}),this}else b.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+b.serial)?this:null;this.data("rating",b);this.rating("draw");var h=a(b.current?b.current.data("rating.input"):null),k=a(b.inputs).filter(":checked");a(b.inputs).not(h).prop("checked",!1);h.prop("checked",!0);a(h.length?h:k).trigger({type:"change",selfTriggered:!0});(c||void 0==c)&&b.callback&&b.callback.apply(h[0],[h.val(),a("a",b.current)[0]]);return this}},readOnly:function(d,
c){var b=this.data("rating");if(!b)return this;b.readOnly=d||void 0==d?!0:!1;c?a(b.inputs).attr("disabled","disabled"):a(b.inputs).removeAttr("disabled");this.data("rating",b);this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}});a.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};a(function(){a("input[type=radio].star").rating()})}(jQuery);