/*! elabftw 1.7.5 https://www.elabftw.net */

$(document).ready(function(){document.title=$("#entityInfos").data("title");var type=$("#entityInfos").data("type"),id=$("#entityInfos").data("id"),confirmText=$("#entityInfos").data("confirm");$(document).on("click","#lock",function(){$.post("app/controllers/EntityController.php",{lock:!0,type:type,id:id}).done(function(data){data.res?(notif(data.msg,"ok"),current=$("#lock").attr("src"),"app/img/lock-gray.png"===current?$("#lock").attr("src","app/img/unlock.png"):$("#lock").attr("src","app/img/lock-gray.png")):notif(data.msg,"ko")})}),$(document).on("click",".click2Edit",function(){window.location.href="?mode=edit&id="+id});var Comments={controller:"app/controllers/CommentsController.php",create:function(){if(document.getElementById("commentsCreateButton").disabled=!0,comment=$("#commentsCreateArea").val(),comment.length<2)return notif("Comment too short!"),document.getElementById("commentsCreateButton").disabled=!1,!1;$.post(this.controller,{create:!0,comment:comment,id:id}).done(function(data){data.res?(notif(data.msg,"ok"),$("#expcomment_container").load("experiments.php?mode=view&id="+id+" #expcomment")):notif(data.msg,"ko")})},destroy:function(comment){if(!confirm(confirmText))return!1;$.post(this.controller,{destroy:!0,id:comment}).done(function(data){data.res?(notif(data.msg,"ok"),$("#expcomment_container").load("experiments.php?mode=view&id="+id+" #expcomment")):notif(data.msg,"ko")})}};$("#commentsCreateButtonDiv").hide(),$(document).on("focus","#commentsCreateArea",function(){$("#commentsCreateButtonDiv").show()}),$(document).on("click","#commentsCreateButton",function(){Comments.create($(this).data("expid"))}),$(document).on("mouseover",".editable",function(){$("div#expcomment p.editable").editable(Comments.controller,{name:"update",tooltip:"Click to edit",indicator:$(this).data("indicator"),submit:$(this).data("submit"),cancel:$(this).data("cancel"),style:"display:inline",callback:function(){$("#expcomment_container").load("experiments.php?mode=view&id="+id+" #expcomment")}})}),$(document).on("click",".commentsDestroy",function(){Comments.destroy($(this).data("id"))}),$(document).on("click","#confirmTimestamp",function(){$("#confirmTimestampDiv").dialog({resizable:!1,height:"auto",width:400,modal:!0,buttons:{"Timestamp it":function(){$("#confirmTimestampDiv").text($(this).data("wait")),$.post("app/controllers/ExperimentsController.php",{timestamp:!0,id:id}).done(function(data){data.res?window.location.replace("experiments.php?mode=view&id="+id):notif(data.msg,"ko")})},Cancel:function(){$(this).dialog("close")}}})}),$("#confirmTimestampDiv").hide(),$("[data-fancybox]").fancybox(),key($("#shortcuts").data("create"),function(){window.location.href="app/controllers/EntityController.php?create=true"}),key($("#shortcuts").data("edit"),function(){window.location.href="?mode=edit&id="+id})}),function(window,document,$,undefined){"use strict";function _run(e){var target=e.currentTarget,opts=e.data?e.data.options:{},items=e.data?e.data.items:[],value=$(target).attr("data-fancybox")||"",index=0;e.preventDefault(),e.stopPropagation(),value?(index=(items=items.length?items.filter('[data-fancybox="'+value+'"]'):$('[data-fancybox="'+value+'"]')).index(target))<0&&(index=0):items=[target],$.fancybox.open(items,opts,index)}if($)if($.fn.fancybox)$.error("fancyBox already initialized");else{var defaults={loop:!1,margin:[44,0],gutter:50,keyboard:!0,arrows:!0,infobar:!1,toolbar:!0,buttons:["slideShow","fullScreen","thumbs","close"],idleTime:4,smallBtn:"auto",protect:!1,modal:!1,image:{preload:"auto"},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><button data-fancybox-prev title="{{PREV}}" class="fancybox-button fancybox-button--left"></button><div class="fancybox-infobar__body"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><button data-fancybox-next title="{{NEXT}}" class="fancybox-button fancybox-button--right"></button></div><div class="fancybox-toolbar">{{BUTTONS}}</div><div class="fancybox-navigation"><button data-fancybox-prev title="{{PREV}}" class="fancybox-arrow fancybox-arrow--left" /><button data-fancybox-next title="{{NEXT}}" class="fancybox-arrow fancybox-arrow--right" /></div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}<p></div>',btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"></button>',fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"></button>',thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"></button>',smallBtn:'<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>'},parentEl:"body",autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:4e3},thumbs:{autoStart:!1,hideOnClose:!0},onInit:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeClose:$.noop,afterClose:$.noop,onActivate:$.noop,onDeactivate:$.noop,clickContent:function(current,event){return"image"===current.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{clickContent:function(current,event){return"image"===current.type&&"toggleControls"},clickSlide:function(current,event){return"image"===current.type?"toggleControls":"close"},dblclickContent:function(current,event){return"image"===current.type&&"zoom"},dblclickSlide:function(current,event){return"image"===current.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails"},de:{CLOSE:"Schliessen",NEXT:"Weiter",PREV:"Zurück",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es später nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder"}}},$W=$(window),$D=$(document),called=0,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $},requestAFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)},transitionEnd=function(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}(),forceRedraw=function($el){return $el&&$el.length&&$el[0].offsetHeight},FancyBox=function(content,opts,index){var self=this;self.opts=$.extend(!0,{index:index},defaults,opts||{}),opts&&$.isArray(opts.buttons)&&(self.opts.buttons=opts.buttons),self.id=self.opts.id||++called,self.group=[],self.currIndex=parseInt(self.opts.index,10)||0,self.prevIndex=null,self.prevPos=null,self.currPos=0,self.firstRun=null,self.createGroup(content),self.group.length&&(self.$lastFocus=$(document.activeElement).blur(),self.slides={},self.init(content))};$.extend(FancyBox.prototype,{init:function(){var testWidth,$container,buttonStr,self=this,firstItemOpts=self.group[self.currIndex].opts;self.scrollTop=$D.scrollTop(),self.scrollLeft=$D.scrollLeft(),$.fancybox.getInstance()||$.fancybox.isMobile||"hidden"===$("body").css("overflow")||(testWidth=$("body").width(),$("html").addClass("fancybox-enabled"),(testWidth=$("body").width()-testWidth)>1&&$("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar, .fancybox-enabled body { margin-right: '+testWidth+"px; }</style>")),buttonStr="",$.each(firstItemOpts.buttons,function(index,value){buttonStr+=firstItemOpts.btnTpl[value]||""}),$container=$(self.translate(self,firstItemOpts.baseTpl.replace("{{BUTTONS}}",buttonStr))).addClass("fancybox-is-hidden").attr("id","fancybox-container-"+self.id).addClass(firstItemOpts.baseClass).data("FancyBox",self).prependTo(firstItemOpts.parentEl),self.$refs={container:$container},["bg","inner","infobar","toolbar","stage","caption"].forEach(function(item){self.$refs[item]=$container.find(".fancybox-"+item)}),(!firstItemOpts.arrows||self.group.length<2)&&$container.find(".fancybox-navigation").remove(),firstItemOpts.infobar||self.$refs.infobar.remove(),firstItemOpts.toolbar||self.$refs.toolbar.remove(),self.trigger("onInit"),self.activate(),self.jumpTo(self.currIndex)},translate:function(obj,str){var arr=obj.opts.i18n[obj.opts.lang];return str.replace(/\{\{(\w+)\}\}/g,function(match,n){var value=arr[n];return void 0===value?match:value})},createGroup:function(content){var self=this,items=$.makeArray(content);$.each(items,function(i,item){var $item,type,src,srcParts,obj={},opts={},data=[];$.isPlainObject(item)?(obj=item,opts=item.opts||item):"object"===$.type(item)&&$(item).length?($item=$(item),data=$item.data(),opts="options"in data?data.options:{},opts="object"===$.type(opts)?opts:{},obj.src="src"in data?data.src:opts.src||$item.attr("href"),["width","height","thumb","type","filter"].forEach(function(item){item in data&&(opts[item]=data[item])}),"srcset"in data&&(opts.image={srcset:data.srcset}),opts.$orig=$item,obj.type||obj.src||(obj.type="inline",obj.src=item)):obj={type:"html",src:item+""},obj.opts=$.extend(!0,{},self.opts,opts),$.fancybox.isMobile&&(obj.opts=$.extend(!0,{},obj.opts,obj.opts.mobile)),type=obj.type||obj.opts.type,src=obj.src||"",!type&&src&&(src.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?type="image":src.match(/\.(pdf)((\?|#).*)?$/i)?type="pdf":"#"===src.charAt(0)&&(type="inline")),obj.type=type,obj.index=self.group.length,obj.opts.$orig&&!obj.opts.$orig.length&&delete obj.opts.$orig,!obj.opts.$thumb&&obj.opts.$orig&&(obj.opts.$thumb=obj.opts.$orig.find("img:first")),obj.opts.$thumb&&!obj.opts.$thumb.length&&delete obj.opts.$thumb,"function"===$.type(obj.opts.caption)?obj.opts.caption=obj.opts.caption.apply(item,[self,obj]):"caption"in data&&(obj.opts.caption=data.caption),obj.opts.caption=void 0===obj.opts.caption?"":obj.opts.caption+"","ajax"===type&&(srcParts=src.split(/\s+/,2)).length>1&&(obj.src=srcParts.shift(),obj.opts.filter=srcParts.shift()),"auto"==obj.opts.smallBtn&&($.inArray(type,["html","inline","ajax"])>-1?(obj.opts.toolbar=!1,obj.opts.smallBtn=!0):obj.opts.smallBtn=!1),"pdf"===type&&(obj.type="iframe",obj.opts.iframe.preload=!1),obj.opts.modal&&(obj.opts=$.extend(!0,obj.opts,{infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),self.group.push(obj)})},addEvents:function(){var self=this;self.removeEvents(),self.$refs.container.on("click.fb-close","[data-fancybox-close]",function(e){e.stopPropagation(),e.preventDefault(),self.close(e)}).on("click.fb-prev touchend.fb-prev","[data-fancybox-prev]",function(e){e.stopPropagation(),e.preventDefault(),self.previous()}).on("click.fb-next touchend.fb-next","[data-fancybox-next]",function(e){e.stopPropagation(),e.preventDefault(),self.next()}),$W.on("orientationchange.fb resize.fb",function(e){e&&e.originalEvent&&"resize"===e.originalEvent.type?requestAFrame(function(){self.update()}):(self.$refs.stage.hide(),setTimeout(function(){self.$refs.stage.show(),self.update()},500))}),$D.on("focusin.fb",function(e){var instance=$.fancybox?$.fancybox.getInstance():null;instance.isClosing||!instance.current||!instance.current.opts.trapFocus||$(e.target).hasClass("fancybox-container")||$(e.target).is(document)||instance&&"fixed"!==$(e.target).css("position")&&!instance.$refs.container.has(e.target).length&&(e.stopPropagation(),instance.focus(),$W.scrollTop(self.scrollTop).scrollLeft(self.scrollLeft))}),$D.on("keydown.fb",function(e){var current=self.current,keycode=e.keyCode||e.which;if(current&&current.opts.keyboard&&!$(e.target).is("input")&&!$(e.target).is("textarea"))return 8===keycode||27===keycode?(e.preventDefault(),void self.close(e)):37===keycode||38===keycode?(e.preventDefault(),void self.previous()):39===keycode||40===keycode?(e.preventDefault(),void self.next()):void self.trigger("afterKeydown",e,keycode)}),self.group[self.currIndex].opts.idleTime&&(self.idleSecondsCounter=0,$D.on("mousemove.fb-idle mouseenter.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(){self.idleSecondsCounter=0,self.isIdle&&self.showControls(),self.isIdle=!1}),self.idleInterval=window.setInterval(function(){self.idleSecondsCounter++,self.idleSecondsCounter>=self.group[self.currIndex].opts.idleTime&&(self.isIdle=!0,self.idleSecondsCounter=0,self.hideControls())},1e3))},removeEvents:function(){var self=this;$W.off("orientationchange.fb resize.fb"),$D.off("focusin.fb keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),self.idleInterval&&(window.clearInterval(self.idleInterval),self.idleInterval=null)},previous:function(duration){return this.jumpTo(this.currPos-1,duration)},next:function(duration){return this.jumpTo(this.currPos+1,duration)},jumpTo:function(pos,duration,slide){var firstRun,loop,current,previous,canvasWidth,currentPos,transitionProps,self=this,groupLen=self.group.length;if(!(self.isSliding||self.isClosing||self.isAnimating&&self.firstRun)){if(pos=parseInt(pos,10),!(loop=self.current?self.current.opts.loop:self.opts.loop)&&(pos<0||pos>=groupLen))return!1;if(firstRun=self.firstRun=null===self.firstRun,!(groupLen<2&&!firstRun&&self.isSliding)){if(previous=self.current,self.prevIndex=self.currIndex,self.prevPos=self.currPos,current=self.createSlide(pos),groupLen>1&&((loop||current.index>0)&&self.createSlide(pos-1),(loop||current.index<groupLen-1)&&self.createSlide(pos+1)),self.current=current,self.currIndex=current.index,self.currPos=current.pos,self.trigger("beforeShow",firstRun),self.updateControls(),currentPos=$.fancybox.getTranslate(current.$slide),current.isMoved=(0!==currentPos.left||0!==currentPos.top)&&!current.$slide.hasClass("fancybox-animated"),current.forcedDuration=void 0,$.isNumeric(duration)?current.forcedDuration=duration:duration=current.opts[firstRun?"animationDuration":"transitionDuration"],duration=parseInt(duration,10),firstRun)return current.opts.animationEffect&&duration&&self.$refs.container.css("transition-duration",duration+"ms"),self.$refs.container.removeClass("fancybox-is-hidden"),forceRedraw(self.$refs.container),self.$refs.container.addClass("fancybox-is-open"),current.$slide.addClass("fancybox-slide--current"),self.loadSlide(current),void self.preload();$.each(self.slides,function(index,slide){$.fancybox.stop(slide.$slide)}),current.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current"),current.isMoved?(canvasWidth=Math.round(current.$slide.width()),$.each(self.slides,function(index,slide){var pos=slide.pos-current.pos;$.fancybox.animate(slide.$slide,{top:0,left:pos*canvasWidth+pos*slide.opts.gutter},duration,function(){slide.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous"),slide.pos===self.currPos&&(current.isMoved=!1,self.complete())})})):self.$refs.stage.children().removeAttr("style"),current.isLoaded?self.revealContent(current):self.loadSlide(current),self.preload(),previous.pos!==current.pos&&(transitionProps="fancybox-slide--"+(previous.pos>current.pos?"next":"previous"),previous.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous"),previous.isComplete=!1,duration&&(current.isMoved||current.opts.transitionEffect)&&(current.isMoved?previous.$slide.addClass(transitionProps):(transitionProps="fancybox-animated "+transitionProps+" fancybox-fx-"+current.opts.transitionEffect,$.fancybox.animate(previous.$slide,transitionProps,duration,function(){previous.$slide.removeClass(transitionProps).removeAttr("style")}))))}}},createSlide:function(pos){var $slide,index,self=this;return index=pos%self.group.length,index=index<0?self.group.length+index:index,!self.slides[pos]&&self.group[index]&&($slide=$('<div class="fancybox-slide"></div>').appendTo(self.$refs.stage),self.slides[pos]=$.extend(!0,{},self.group[index],{pos:pos,$slide:$slide,isLoaded:!1}),self.updateSlide(self.slides[pos])),self.slides[pos]},scaleToActual:function(x,y,duration){var imgPos,posX,posY,scaleX,scaleY,self=this,current=self.current,$what=current.$content,canvasWidth=parseInt(current.$slide.width(),10),canvasHeight=parseInt(current.$slide.height(),10),newImgWidth=current.width,newImgHeight=current.height;"image"!=current.type||current.hasError||!$what||self.isAnimating||($.fancybox.stop($what),self.isAnimating=!0,x=void 0===x?.5*canvasWidth:x,y=void 0===y?.5*canvasHeight:y,scaleX=newImgWidth/(imgPos=$.fancybox.getTranslate($what)).width,scaleY=newImgHeight/imgPos.height,posX=.5*canvasWidth-.5*newImgWidth,posY=.5*canvasHeight-.5*newImgHeight,newImgWidth>canvasWidth&&((posX=imgPos.left*scaleX-(x*scaleX-x))>0&&(posX=0),posX<canvasWidth-newImgWidth&&(posX=canvasWidth-newImgWidth)),newImgHeight>canvasHeight&&((posY=imgPos.top*scaleY-(y*scaleY-y))>0&&(posY=0),posY<canvasHeight-newImgHeight&&(posY=canvasHeight-newImgHeight)),self.updateCursor(newImgWidth,newImgHeight),$.fancybox.animate($what,{top:posY,left:posX,scaleX:scaleX,scaleY:scaleY},duration||330,function(){self.isAnimating=!1}),self.SlideShow&&self.SlideShow.isActive&&self.SlideShow.stop())},scaleToFit:function(duration){var end,self=this,current=self.current,$what=current.$content;"image"!=current.type||current.hasError||!$what||self.isAnimating||($.fancybox.stop($what),self.isAnimating=!0,end=self.getFitPos(current),self.updateCursor(end.width,end.height),$.fancybox.animate($what,{top:end.top,left:end.left,scaleX:end.width/$what.width(),scaleY:end.height/$what.height()},duration||330,function(){self.isAnimating=!1}))},getFitPos:function(slide){var canvasWidth,canvasHeight,minRatio,width,height,self=this,$what=slide.$content,imgWidth=slide.width,imgHeight=slide.height,margin=slide.opts.margin;return!(!$what||!$what.length||!imgWidth&&!imgHeight)&&("number"===$.type(margin)&&(margin=[margin,margin]),2==margin.length&&(margin=[margin[0],margin[1],margin[0],margin[1]]),$W.width()<800&&(margin=[0,0,0,0]),canvasWidth=parseInt(self.$refs.stage.width(),10)-(margin[1]+margin[3]),canvasHeight=parseInt(self.$refs.stage.height(),10)-(margin[0]+margin[2]),minRatio=Math.min(1,canvasWidth/imgWidth,canvasHeight/imgHeight),width=Math.floor(minRatio*imgWidth),height=Math.floor(minRatio*imgHeight),{top:Math.floor(.5*(canvasHeight-height))+margin[0],left:Math.floor(.5*(canvasWidth-width))+margin[3],width:width,height:height})},update:function(){var self=this;$.each(self.slides,function(key,slide){self.updateSlide(slide)})},updateSlide:function(slide){var self=this,$what=slide.$content;$what&&(slide.width||slide.height)&&($.fancybox.stop($what),$.fancybox.setTranslate($what,self.getFitPos(slide)),slide.pos===self.currPos&&self.updateCursor()),slide.$slide.trigger("refresh"),self.trigger("onUpdate",slide)},updateCursor:function(nextWidth,nextHeight){var self=this,$container=self.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");self.current&&!self.isClosing&&(self.isZoomable()?($container.addClass("fancybox-is-zoomable"),(void 0!==nextWidth&&void 0!==nextHeight?nextWidth<self.current.width&&nextHeight<self.current.height:self.isScaledDown())?$container.addClass("fancybox-can-zoomIn"):self.current.opts.touch?$container.addClass("fancybox-can-drag"):$container.addClass("fancybox-can-zoomOut")):self.current.opts.touch&&$container.addClass("fancybox-can-drag"))},isZoomable:function(){var fitPos,self=this,current=self.current;if(current&&!self.isClosing)return!!("image"===current.type&&current.isLoaded&&!current.hasError&&("zoom"===current.opts.clickContent||$.isFunction(current.opts.clickContent)&&"zoom"===current.opts.clickContent(current))&&(fitPos=self.getFitPos(current),current.width>fitPos.width||current.height>fitPos.height))},isScaledDown:function(){var current=this.current,$what=current.$content,rez=!1;return $what&&(rez=(rez=$.fancybox.getTranslate($what)).width<current.width||rez.height<current.height),rez},canPan:function(){var self=this,current=self.current,$what=current.$content,rez=!1;return $what&&(rez=self.getFitPos(current),rez=Math.abs($what.width()-rez.width)>1||Math.abs($what.height()-rez.height)>1),rez},loadSlide:function(slide){var type,$slide,ajaxLoad,self=this;if(!slide.isLoading&&!slide.isLoaded){switch(slide.isLoading=!0,self.trigger("beforeLoad",slide),type=slide.type,($slide=slide.$slide).off("refresh").trigger("onReset").addClass("fancybox-slide--"+(type||"unknown")).addClass(slide.opts.slideClass),type){case"image":self.setImage(slide);break;case"iframe":self.setIframe(slide);break;case"html":self.setContent(slide,slide.src||slide.content);break;case"inline":$(slide.src).length?self.setContent(slide,$(slide.src)):self.setError(slide);break;case"ajax":self.showLoading(slide),ajaxLoad=$.ajax($.extend({},slide.opts.ajax.settings,{url:slide.src,success:function(data,textStatus){"success"===textStatus&&self.setContent(slide,data)},error:function(jqXHR,textStatus){jqXHR&&"abort"!==textStatus&&self.setError(slide)}})),$slide.one("onReset",function(){ajaxLoad.abort()});break;default:self.setError(slide)}return!0}},setImage:function(slide){var found,temp,pxRatio,windowWidth,self=this,srcset=slide.opts.image.srcset;if(srcset){pxRatio=window.devicePixelRatio||1,windowWidth=window.innerWidth*pxRatio,(temp=srcset.split(",").map(function(el){var ret={};return el.trim().split(/\s+/).forEach(function(el,i){var value=parseInt(el.substring(0,el.length-1),10);if(0===i)return ret.url=el;value&&(ret.value=value,ret.postfix=el[el.length-1])}),ret})).sort(function(a,b){return a.value-b.value});for(var j=0;j<temp.length;j++){var el=temp[j];if("w"===el.postfix&&el.value>=windowWidth||"x"===el.postfix&&el.value>=pxRatio){found=el;break}}!found&&temp.length&&(found=temp[temp.length-1]),found&&(slide.src=found.url,slide.width&&slide.height&&"w"==found.postfix&&(slide.height=slide.width/slide.height*found.value,slide.width=found.value))}slide.$content=$('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(slide.$slide),!1!==slide.opts.preload&&slide.opts.width&&slide.opts.height&&(slide.opts.thumb||slide.opts.$thumb)?(slide.width=slide.opts.width,slide.height=slide.opts.height,slide.$ghost=$("<img />").one("error",function(){$(this).remove(),slide.$ghost=null,self.setBigImage(slide)}).one("load",function(){self.afterLoad(slide),self.setBigImage(slide)}).addClass("fancybox-image").appendTo(slide.$content).attr("src",slide.opts.thumb||slide.opts.$thumb.attr("src"))):self.setBigImage(slide)},setBigImage:function(slide){var self=this,$img=$("<img />");slide.$image=$img.one("error",function(){self.setError(slide)}).one("load",function(){clearTimeout(slide.timouts),slide.timouts=null,self.isClosing||(slide.width=this.naturalWidth,slide.height=this.naturalHeight,slide.opts.image.srcset&&$img.attr("sizes","100vw").attr("srcset",slide.opts.image.srcset),self.hideLoading(slide),slide.$ghost?slide.timouts=setTimeout(function(){slide.timouts=null,slide.$ghost.hide()},Math.min(300,Math.max(1e3,slide.height/1600))):self.afterLoad(slide))}).addClass("fancybox-image").attr("src",slide.src).appendTo(slide.$content),$img[0].complete?$img.trigger("load"):$img[0].error?$img.trigger("error"):slide.timouts=setTimeout(function(){$img[0].complete||slide.hasError||self.showLoading(slide)},100)},setIframe:function(slide){var $iframe,self=this,opts=slide.opts.iframe,$slide=slide.$slide;slide.$content=$('<div class="fancybox-content'+(opts.preload?" fancybox-is-hidden":"")+'"></div>').css(opts.css).appendTo($slide),$iframe=$(opts.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(opts.attr).appendTo(slide.$content),opts.preload?(self.showLoading(slide),$iframe.on("load.fb error.fb",function(e){this.isReady=1,slide.$slide.trigger("refresh"),self.afterLoad(slide)}),$slide.on("refresh.fb",function(){var $body,scrollWidth,frameWidth,frameHeight,$wrap=slide.$content;if(1===$iframe[0].isReady){try{$body=$iframe.contents().find("body")}catch(ignore){}$body&&$body.length&&(void 0===opts.css.width||void 0===opts.css.height)&&(scrollWidth=$iframe[0].contentWindow.document.documentElement.scrollWidth,frameWidth=Math.ceil($body.outerWidth(!0)+($wrap.width()-scrollWidth)),frameHeight=Math.ceil($body.outerHeight(!0)),$wrap.css({width:void 0===opts.css.width?frameWidth+($wrap.outerWidth()-$wrap.innerWidth()):opts.css.width,height:void 0===opts.css.height?frameHeight+($wrap.outerHeight()-$wrap.innerHeight()):opts.css.height})),$wrap.removeClass("fancybox-is-hidden")}})):this.afterLoad(slide),$iframe.attr("src",slide.src),!0===slide.opts.smallBtn&&slide.$content.prepend(self.translate(slide,slide.opts.btnTpl.smallBtn)),$slide.one("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank")}catch(ignore){}$(this).empty(),slide.isLoaded=!1})},setContent:function(slide,content){var self=this;self.isClosing||(self.hideLoading(slide),slide.$slide.empty(),isQuery(content)&&content.parent().length?(content.parent(".fancybox-slide--inline").trigger("onReset"),slide.$placeholder=$("<div></div>").hide().insertAfter(content),content.css("display","inline-block")):slide.hasError||("string"===$.type(content)&&3===(content=$("<div>").append($.trim(content)).contents())[0].nodeType&&(content=$("<div>").html(content)),slide.opts.filter&&(content=$("<div>").html(content).find(slide.opts.filter))),slide.$slide.one("onReset",function(){slide.$placeholder&&(slide.$placeholder.after(content.hide()).remove(),slide.$placeholder=null),slide.$smallBtn&&(slide.$smallBtn.remove(),slide.$smallBtn=null),slide.hasError||($(this).empty(),slide.isLoaded=!1)}),slide.$content=$(content).appendTo(slide.$slide),slide.opts.smallBtn&&!slide.$smallBtn&&(slide.$smallBtn=$(self.translate(slide,slide.opts.btnTpl.smallBtn)).appendTo(slide.$content)),this.afterLoad(slide))},setError:function(slide){slide.hasError=!0,slide.$slide.removeClass("fancybox-slide--"+slide.type),this.setContent(slide,this.translate(slide,slide.opts.errorTpl))},showLoading:function(slide){var self=this;(slide=slide||self.current)&&!slide.$spinner&&(slide.$spinner=$(self.opts.spinnerTpl).appendTo(slide.$slide))},hideLoading:function(slide){var self=this;(slide=slide||self.current)&&slide.$spinner&&(slide.$spinner.remove(),delete slide.$spinner)},afterLoad:function(slide){var self=this;self.isClosing||(slide.isLoading=!1,slide.isLoaded=!0,self.trigger("afterLoad",slide),self.hideLoading(slide),slide.opts.protect&&slide.$content&&!slide.hasError&&(slide.$content.on("contextmenu.fb",function(e){return 2==e.button&&e.preventDefault(),!0}),"image"===slide.type&&$('<div class="fancybox-spaceball"></div>').appendTo(slide.$content)),self.revealContent(slide))},revealContent:function(slide){var effect,effectClassName,duration,opacity,end,self=this,$slide=slide.$slide,start=!1;return effect=slide.opts[self.firstRun?"animationEffect":"transitionEffect"],duration=slide.opts[self.firstRun?"animationDuration":"transitionDuration"],duration=parseInt(void 0===slide.forcedDuration?duration:slide.forcedDuration,10),!slide.isMoved&&slide.pos===self.currPos&&duration||(effect=!1),"zoom"!==effect||slide.pos===self.currPos&&duration&&"image"===slide.type&&!slide.hasError&&(start=self.getThumbPos(slide))||(effect="fade"),"zoom"===effect?(end=self.getFitPos(slide),end.scaleX=Math.round(end.width/start.width*100)/100,end.scaleY=Math.round(end.height/start.height*100)/100,delete end.width,delete end.height,"auto"==(opacity=slide.opts.zoomOpacity)&&(opacity=Math.abs(slide.width/slide.height-start.width/start.height)>.1),opacity&&(start.opacity=.1,end.opacity=1),$.fancybox.setTranslate(slide.$content.removeClass("fancybox-is-hidden"),start),forceRedraw(slide.$content),void $.fancybox.animate(slide.$content,end,duration,function(){self.complete()})):(self.updateSlide(slide),effect?($.fancybox.stop($slide),effectClassName="fancybox-animated fancybox-slide--"+(slide.pos>self.prevPos?"next":"previous")+" fancybox-fx-"+effect,$slide.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(effectClassName),slide.$content.removeClass("fancybox-is-hidden"),forceRedraw($slide),void $.fancybox.animate($slide,"fancybox-slide--current",duration,function(e){$slide.removeClass(effectClassName).removeAttr("style"),slide.pos===self.currPos&&self.complete()},!0)):(forceRedraw($slide),slide.$content.removeClass("fancybox-is-hidden"),void(slide.pos===self.currPos&&self.complete())))},getThumbPos:function(slide){var slidePos,self=this,rez=!1,$thumb=slide.opts.$thumb,thumbPos=$thumb?$thumb.offset():0;return thumbPos&&$thumb[0].ownerDocument===document&&function($el){for(var element=$el[0],elementRect=element.getBoundingClientRect(),parentRects=[];null!==element.parentElement;)"hidden"!==$(element.parentElement).css("overflow")&&"auto"!==$(element.parentElement).css("overflow")||parentRects.push(element.parentElement.getBoundingClientRect()),element=element.parentElement;return parentRects.every(function(parentRect){var visiblePixelX=Math.min(elementRect.right,parentRect.right)-Math.max(elementRect.left,parentRect.left),visiblePixelY=Math.min(elementRect.bottom,parentRect.bottom)-Math.max(elementRect.top,parentRect.top);return visiblePixelX>0&&visiblePixelY>0})&&elementRect.bottom>0&&elementRect.right>0&&elementRect.left<$(window).width()&&elementRect.top<$(window).height()}($thumb)&&(slidePos=self.$refs.stage.offset(),rez={top:thumbPos.top-slidePos.top+parseFloat($thumb.css("border-top-width")||0),left:thumbPos.left-slidePos.left+parseFloat($thumb.css("border-left-width")||0),width:$thumb.width(),height:$thumb.height(),scaleX:1,scaleY:1}),rez},complete:function(){var self=this,current=self.current,slides={};current.isMoved||!current.isLoaded||current.isComplete||(current.isComplete=!0,current.$slide.siblings().trigger("onReset"),forceRedraw(current.$slide),current.$slide.addClass("fancybox-slide--complete"),$.each(self.slides,function(key,slide){slide.pos>=self.currPos-1&&slide.pos<=self.currPos+1?slides[slide.pos]=slide:slide&&($.fancybox.stop(slide.$slide),slide.$slide.unbind().remove())}),self.slides=slides,self.updateCursor(),self.trigger("afterShow"),($(document.activeElement).is("[disabled]")||current.opts.autoFocus&&"image"!=current.type&&"iframe"!==current.type)&&self.focus())},preload:function(){var next,prev,self=this;self.group.length<2||(next=self.slides[self.currPos+1],prev=self.slides[self.currPos-1],next&&"image"===next.type&&self.loadSlide(next),prev&&"image"===prev.type&&self.loadSlide(prev))},focus:function(){var $el,current=this.current;this.isClosing||($el=($el=current&&current.isComplete?current.$slide.find("button,:input,[tabindex],a").filter(":not([disabled]):visible:first"):null)&&$el.length?$el:this.$refs.container).focus()},activate:function(){var self=this;$(".fancybox-container").each(function(){var instance=$(this).data("FancyBox");instance&&instance.uid!==self.uid&&!instance.isClosing&&instance.trigger("onDeactivate")}),self.current&&(self.$refs.container.index()>0&&self.$refs.container.prependTo(document.body),self.updateControls()),self.trigger("onActivate"),self.addEvents()},close:function(e,d){var effect,duration,$what,opacity,start,end,self=this,current=self.current,done=function(){self.cleanUp(e)};return!self.isClosing&&(self.isClosing=!0,!1===self.trigger("beforeClose",e)?(self.isClosing=!1,requestAFrame(function(){self.update()}),!1):(self.removeEvents(),current.timouts&&clearTimeout(current.timouts),$what=current.$content,effect=current.opts.animationEffect,duration=$.isNumeric(d)?d:effect?current.opts.animationDuration:0,current.$slide.off(transitionEnd).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),current.$slide.siblings().trigger("onReset").remove(),duration&&self.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing"),self.hideLoading(current),self.hideControls(),self.updateCursor(),"zoom"!==effect||!0!==e&&$what&&duration&&"image"===current.type&&!current.hasError&&(end=self.getThumbPos(current))||(effect="fade"),"zoom"===effect?($.fancybox.stop($what),start=$.fancybox.getTranslate($what),start.width=start.width*start.scaleX,start.height=start.height*start.scaleY,"auto"==(opacity=current.opts.zoomOpacity)&&(opacity=Math.abs(current.width/current.height-end.width/end.height)>.1),opacity&&(end.opacity=0),start.scaleX=start.width/end.width,start.scaleY=start.height/end.height,start.width=end.width,start.height=end.height,$.fancybox.setTranslate(current.$content,start),$.fancybox.animate(current.$content,end,duration,done),!0):(effect&&duration?!0===e?setTimeout(done,duration):$.fancybox.animate(current.$slide.removeClass("fancybox-slide--current"),"fancybox-animated fancybox-slide--previous fancybox-fx-"+effect,duration,done):done(),!0)))},cleanUp:function(e){var instance,self=this;self.current.$slide.trigger("onReset"),self.$refs.container.empty().remove(),self.trigger("afterClose",e),self.$lastFocus&&!self.current.focusBack&&self.$lastFocus.focus(),self.current=null,(instance=$.fancybox.getInstance())?instance.activate():($W.scrollTop(self.scrollTop).scrollLeft(self.scrollLeft),$("html").removeClass("fancybox-enabled"),$("#fancybox-style-noscroll").remove())},trigger:function(name,slide){var rez,args=Array.prototype.slice.call(arguments,1),self=this,obj=slide&&slide.opts?slide:self.current;if(obj?args.unshift(obj):obj=self,args.unshift(self),$.isFunction(obj.opts[name])&&(rez=obj.opts[name].apply(obj,args)),!1===rez)return rez;"afterClose"===name?$D.trigger(name+".fb",args):self.$refs.container.trigger(name+".fb",args)},updateControls:function(force){var self=this,current=self.current,index=current.index,opts=current.opts,caption=opts.caption,$caption=self.$refs.caption;current.$slide.trigger("refresh"),self.$caption=caption&&caption.length?$caption.html(caption):null,self.isHiddenControls||self.showControls(),$("[data-fancybox-count]").html(self.group.length),$("[data-fancybox-index]").html(index+1),$("[data-fancybox-prev]").prop("disabled",!opts.loop&&index<=0),$("[data-fancybox-next]").prop("disabled",!opts.loop&&index>=self.group.length-1)},hideControls:function(){this.isHiddenControls=!0,this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")},showControls:function(){var self=this,opts=self.current?self.current.opts:self.opts,$container=self.$refs.container;self.isHiddenControls=!1,self.idleSecondsCounter=0,$container.toggleClass("fancybox-show-toolbar",!(!opts.toolbar||!opts.buttons)).toggleClass("fancybox-show-infobar",!!(opts.infobar&&self.group.length>1)).toggleClass("fancybox-show-nav",!!(opts.arrows&&self.group.length>1)).toggleClass("fancybox-is-modal",!!opts.modal),self.$caption?$container.addClass("fancybox-show-caption "):$container.removeClass("fancybox-show-caption")},toggleControls:function(){this.isHiddenControls?this.showControls():this.hideControls()}}),$.fancybox={version:"3.1.20",defaults:defaults,getInstance:function(command){var instance=$('.fancybox-container:not(".fancybox-is-closing"):first').data("FancyBox"),args=Array.prototype.slice.call(arguments,1);return instance instanceof FancyBox&&("string"===$.type(command)?instance[command].apply(instance,args):"function"===$.type(command)&&command.apply(instance,args),instance)},open:function(items,opts,index){return new FancyBox(items,opts,index)},close:function(all){var instance=this.getInstance();instance&&(instance.close(),!0===all&&this.close())},destroy:function(){this.close(!0),$D.off("click.fb-start")},isMobile:void 0!==document.createTouch&&/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),use3d:function(){var div=document.createElement("div");return window.getComputedStyle&&window.getComputedStyle(div).getPropertyValue("transform")&&!(document.documentMode&&document.documentMode<11)}(),getTranslate:function($el){var matrix;if(!$el||!$el.length)return!1;if(matrix=$el.eq(0).css("transform"),(matrix=matrix&&-1!==matrix.indexOf("matrix")?(matrix=(matrix=matrix.split("(")[1]).split(")")[0]).split(","):[]).length)matrix=(matrix=matrix.length>10?[matrix[13],matrix[12],matrix[0],matrix[5]]:[matrix[5],matrix[4],matrix[0],matrix[3]]).map(parseFloat);else{matrix=[0,0,1,1];var transRez=/\.*translate\((.*)px,(.*)px\)/i.exec($el.eq(0).attr("style"));transRez&&(matrix[0]=parseFloat(transRez[2]),matrix[1]=parseFloat(transRez[1]))}return{top:matrix[0],left:matrix[1],scaleX:matrix[2],scaleY:matrix[3],opacity:parseFloat($el.css("opacity")),width:$el.width(),height:$el.height()}},setTranslate:function($el,props){var str="",css={};if($el&&props)return void 0===props.left&&void 0===props.top||(str=(void 0===props.left?$el.position().left:props.left)+"px, "+(void 0===props.top?$el.position().top:props.top)+"px",str=this.use3d?"translate3d("+str+", 0px)":"translate("+str+")"),void 0!==props.scaleX&&void 0!==props.scaleY&&(str=(str.length?str+" ":"")+"scale("+props.scaleX+", "+props.scaleY+")"),str.length&&(css.transform=str),void 0!==props.opacity&&(css.opacity=props.opacity),void 0!==props.width&&(css.width=props.width),void 0!==props.height&&(css.height=props.height),$el.css(css)},animate:function($el,to,duration,callback,leaveAnimationName){var event=transitionEnd||"transitionend";$.isFunction(duration)&&(callback=duration,duration=null),$.isPlainObject(to)||$el.removeAttr("style"),$el.on(event,function(e){(!e||!e.originalEvent||$el.is(e.originalEvent.target)&&"z-index"!=e.originalEvent.propertyName)&&($el.off(event),$.isPlainObject(to)?void 0!==to.scaleX&&void 0!==to.scaleY&&($el.css("transition-duration","0ms"),to.width=$el.width()*to.scaleX,to.height=$el.height()*to.scaleY,to.scaleX=1,to.scaleY=1,$.fancybox.setTranslate($el,to)):!0!==leaveAnimationName&&$el.removeClass(to),$.isFunction(callback)&&callback(e))}),$.isNumeric(duration)&&$el.css("transition-duration",duration+"ms"),$.isPlainObject(to)?$.fancybox.setTranslate($el,to):$el.addClass(to),$el.data("timer",setTimeout(function(){$el.trigger("transitionend")},duration+16))},stop:function($el){clearTimeout($el.data("timer")),$el.off(transitionEnd)}},$.fn.fancybox=function(options){var selector;return options=options||{},(selector=options.selector||!1)?$("body").off("click.fb-start",selector).on("click.fb-start",selector,{items:$(selector),options:options},_run):this.off("click.fb-start").on("click.fb-start",{items:this,options:options},_run),this},$D.on("click.fb-start","[data-fancybox]",_run)}}(window,document,window.jQuery),function($){"use strict";var format=function(url,rez,params){if(url)return params=params||"","object"===$.type(params)&&(params=$.param(params,!0)),$.each(rez,function(key,value){url=url.replace("$"+key,value||"")}),params.length&&(url+=(url.indexOf("?")>0?"&":"?")+params),url},defaults={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"//www.youtube.com/embed/$4",thumb:"//img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},metacafe:{matcher:/metacafe.com\/watch\/(\d+)\/(.*)?/,type:"iframe",url:"//www.metacafe.com/embed/$1/?ap=1"},dailymotion:{matcher:/dailymotion.com\/video\/(.*)\/?(.*)/,params:{additionalInfos:0,autoStart:1},type:"iframe",url:"//www.dailymotion.com/embed/video/$1"},vine:{matcher:/vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,type:"iframe",url:"//vine.co/v/$1/embed/simple"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},google_maps:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(rez){return"//maps.google."+rez[2]+"/?ll="+(rez[9]?rez[9]+"&z="+Math.floor(rez[10])+(rez[12]?rez[12].replace(/^\//,"&"):""):rez[12])+"&output="+(rez[12]&&rez[12].indexOf("layer=c")>0?"svembed":"embed")}}};$(document).on("onInit.fb",function(e,instance){$.each(instance.group,function(i,item){var media,thumb,rez,params,urlParams,o,provider,url=item.src||"",type=!1;item.type||(media=$.extend(!0,{},defaults,item.opts.media),$.each(media,function(n,el){if(rez=url.match(el.matcher),o={},provider=n,rez){if(type=el.type,el.paramPlace&&rez[el.paramPlace]){"?"==(urlParams=rez[el.paramPlace])[0]&&(urlParams=urlParams.substring(1)),urlParams=urlParams.split("&");for(var m=0;m<urlParams.length;++m){var p=urlParams[m].split("=",2);2==p.length&&(o[p[0]]=decodeURIComponent(p[1].replace(/\+/g," ")))}}return params=$.extend(!0,{},el.params,item.opts[n],o),url="function"===$.type(el.url)?el.url.call(this,rez,params,item):format(el.url,rez,params),thumb="function"===$.type(el.thumb)?el.thumb.call(this,rez,params,item):format(el.thumb,rez),"vimeo"===provider&&(url=url.replace("&%23","#")),!1}}),type?(item.src=url,item.type=type,item.opts.thumb||item.opts.$thumb&&item.opts.$thumb.length||(item.opts.thumb=thumb),"iframe"===type&&($.extend(!0,item.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}}),item.contentProvider=provider,item.opts.slideClass+=" fancybox-slide--"+("google_maps"==provider?"map":"video"))):item.type="image")})})}(window.jQuery),function(window,document,$){"use strict";var requestAFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)},cancelAFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||function(id){window.clearTimeout(id)},pointers=function(e){var result=[];e=(e=e.originalEvent||e||window.e).touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var key in e)e[key].pageX?result.push({x:e[key].pageX,y:e[key].pageY}):e[key].clientX&&result.push({x:e[key].clientX,y:e[key].clientY});return result},distance=function(point2,point1,what){return point1&&point2?"x"===what?point2.x-point1.x:"y"===what?point2.y-point1.y:Math.sqrt(Math.pow(point2.x-point1.x,2)+Math.pow(point2.y-point1.y,2)):0},isClickable=function($el){if($el.is("a,button,input,select,textarea")||$.isFunction($el.get(0).onclick))return!0;for(var i=0,atts=$el[0].attributes,n=atts.length;i<n;i++)if("data-fancybox-"===atts[i].nodeName.substr(0,14))return!0;return!1},hasScrollbars=function(el){var overflowY=window.getComputedStyle(el)["overflow-y"],overflowX=window.getComputedStyle(el)["overflow-x"],vertical=("scroll"===overflowY||"auto"===overflowY)&&el.scrollHeight>el.clientHeight,horizontal=("scroll"===overflowX||"auto"===overflowX)&&el.scrollWidth>el.clientWidth;return vertical||horizontal},isScrollable=function($el){for(var rez=!1;;){if(rez=hasScrollbars($el.get(0)))break;if(!($el=$el.parent()).length||$el.hasClass("fancybox-stage")||$el.is("body"))break}return rez},Guestures=function(instance){var self=this;self.instance=instance,self.$bg=instance.$refs.bg,self.$stage=instance.$refs.stage,self.$container=instance.$refs.container,self.destroy(),self.$container.on("touchstart.fb.touch mousedown.fb.touch",$.proxy(self,"ontouchstart"))};Guestures.prototype.destroy=function(){this.$container.off(".fb.touch")},Guestures.prototype.ontouchstart=function(e){var self=this,$target=$(e.target),instance=self.instance,current=instance.current,$content=current.$content,isTouchDevice="touchstart"==e.type;if(isTouchDevice&&self.$container.off("mousedown.fb.touch"),!current||self.instance.isAnimating||self.instance.isClosing)return e.stopPropagation(),void e.preventDefault();e.originalEvent&&2==e.originalEvent.button||!$target.length||isClickable($target)||isClickable($target.parent())||e.originalEvent.clientX>$target[0].clientWidth+$target.offset().left||(self.startPoints=pointers(e),!self.startPoints||self.startPoints.length>1&&instance.isSliding||(self.$target=$target,self.$content=$content,self.canTap=!0,$(document).off(".fb.touch"),$(document).on(isTouchDevice?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",$.proxy(self,"ontouchend")),$(document).on(isTouchDevice?"touchmove.fb.touch":"mousemove.fb.touch",$.proxy(self,"ontouchmove")),e.stopPropagation(),(instance.current.opts.touch||instance.canPan())&&($target.is(self.$stage)||self.$stage.find($target).length)?($.fancybox.isMobile&&(isScrollable(self.$target)||isScrollable(self.$target.parent()))||e.preventDefault(),self.canvasWidth=Math.round(current.$slide[0].clientWidth),self.canvasHeight=Math.round(current.$slide[0].clientHeight),self.startTime=(new Date).getTime(),self.distanceX=self.distanceY=self.distance=0,self.isPanning=!1,self.isSwiping=!1,self.isZooming=!1,self.sliderStartPos=self.sliderLastPos||{top:0,left:0},self.contentStartPos=$.fancybox.getTranslate(self.$content),self.contentLastPos=null,1!==self.startPoints.length||self.isZooming||(self.canTap=!instance.isSliding,"image"===current.type&&(self.contentStartPos.width>self.canvasWidth+1||self.contentStartPos.height>self.canvasHeight+1)?($.fancybox.stop(self.$content),self.$content.css("transition-duration","0ms"),self.isPanning=!0):self.isSwiping=!0,self.$container.addClass("fancybox-controls--isGrabbing")),2!==self.startPoints.length||instance.isAnimating||current.hasError||"image"!==current.type||!current.isLoaded&&!current.$ghost||(self.isZooming=!0,self.isSwiping=!1,self.isPanning=!1,$.fancybox.stop(self.$content),self.$content.css("transition-duration","0ms"),self.centerPointStartX=.5*(self.startPoints[0].x+self.startPoints[1].x)-$(window).scrollLeft(),self.centerPointStartY=.5*(self.startPoints[0].y+self.startPoints[1].y)-$(window).scrollTop(),self.percentageOfImageAtPinchPointX=(self.centerPointStartX-self.contentStartPos.left)/self.contentStartPos.width,self.percentageOfImageAtPinchPointY=(self.centerPointStartY-self.contentStartPos.top)/self.contentStartPos.height,self.startDistanceBetweenFingers=distance(self.startPoints[0],self.startPoints[1]))):$target.is("img")&&e.preventDefault()))},Guestures.prototype.ontouchmove=function(e){var self=this;if(self.newPoints=pointers(e),$.fancybox.isMobile&&(isScrollable(self.$target)||isScrollable(self.$target.parent())))return e.stopPropagation(),void(self.canTap=!1);if((self.instance.current.opts.touch||self.instance.canPan())&&self.newPoints&&self.newPoints.length&&(self.distanceX=distance(self.newPoints[0],self.startPoints[0],"x"),self.distanceY=distance(self.newPoints[0],self.startPoints[0],"y"),self.distance=distance(self.newPoints[0],self.startPoints[0]),self.distance>0)){if(!self.$target.is(self.$stage)&&!self.$stage.find(self.$target).length)return;e.stopPropagation(),e.preventDefault(),self.isSwiping?self.onSwipe():self.isPanning?self.onPan():self.isZooming&&self.onZoom()}},Guestures.prototype.onSwipe=function(){var angle,self=this,swiping=self.isSwiping,left=self.sliderStartPos.left||0;!0===swiping?Math.abs(self.distance)>10&&(self.canTap=!1,self.instance.group.length<2&&self.instance.opts.touch.vertical?self.isSwiping="y":self.instance.isSliding||!1===self.instance.opts.touch.vertical||"auto"===self.instance.opts.touch.vertical&&$(window).width()>800?self.isSwiping="x":(angle=Math.abs(180*Math.atan2(self.distanceY,self.distanceX)/Math.PI),self.isSwiping=angle>45&&angle<135?"y":"x"),self.instance.isSliding=self.isSwiping,self.startPoints=self.newPoints,$.each(self.instance.slides,function(index,slide){$.fancybox.stop(slide.$slide),slide.$slide.css("transition-duration","0ms"),slide.inTransition=!1,slide.pos===self.instance.current.pos&&(self.sliderStartPos.left=$.fancybox.getTranslate(slide.$slide).left)}),self.instance.SlideShow&&self.instance.SlideShow.isActive&&self.instance.SlideShow.stop()):("x"==swiping&&(self.distanceX>0&&(self.instance.group.length<2||0===self.instance.current.index&&!self.instance.current.opts.loop)?left+=Math.pow(self.distanceX,.8):self.distanceX<0&&(self.instance.group.length<2||self.instance.current.index===self.instance.group.length-1&&!self.instance.current.opts.loop)?left-=Math.pow(-self.distanceX,.8):left+=self.distanceX),self.sliderLastPos={top:"x"==swiping?0:self.sliderStartPos.top+self.distanceY,left:left},self.requestId&&(cancelAFrame(self.requestId),self.requestId=null),self.requestId=requestAFrame(function(){self.sliderLastPos&&($.each(self.instance.slides,function(index,slide){var pos=slide.pos-self.instance.currPos;$.fancybox.setTranslate(slide.$slide,{top:self.sliderLastPos.top,left:self.sliderLastPos.left+pos*self.canvasWidth+pos*slide.opts.gutter})}),self.$container.addClass("fancybox-is-sliding"))}))},Guestures.prototype.onPan=function(){var newOffsetX,newOffsetY,newPos,self=this;self.canTap=!1,newOffsetX=self.contentStartPos.width>self.canvasWidth?self.contentStartPos.left+self.distanceX:self.contentStartPos.left,newOffsetY=self.contentStartPos.top+self.distanceY,(newPos=self.limitMovement(newOffsetX,newOffsetY,self.contentStartPos.width,self.contentStartPos.height)).scaleX=self.contentStartPos.scaleX,newPos.scaleY=self.contentStartPos.scaleY,self.contentLastPos=newPos,self.requestId&&(cancelAFrame(self.requestId),self.requestId=null),self.requestId=requestAFrame(function(){$.fancybox.setTranslate(self.$content,self.contentLastPos)})},Guestures.prototype.limitMovement=function(newOffsetX,newOffsetY,newWidth,newHeight){var minTranslateX,minTranslateY,maxTranslateX,maxTranslateY,self=this,canvasWidth=self.canvasWidth,canvasHeight=self.canvasHeight,currentOffsetX=self.contentStartPos.left,currentOffsetY=self.contentStartPos.top,distanceX=self.distanceX,distanceY=self.distanceY;return minTranslateX=Math.max(0,.5*canvasWidth-.5*newWidth),minTranslateY=Math.max(0,.5*canvasHeight-.5*newHeight),maxTranslateX=Math.min(canvasWidth-newWidth,.5*canvasWidth-.5*newWidth),maxTranslateY=Math.min(canvasHeight-newHeight,.5*canvasHeight-.5*newHeight),newWidth>canvasWidth&&(distanceX>0&&newOffsetX>minTranslateX&&(newOffsetX=minTranslateX-1+Math.pow(-minTranslateX+currentOffsetX+distanceX,.8)||0),distanceX<0&&newOffsetX<maxTranslateX&&(newOffsetX=maxTranslateX+1-Math.pow(maxTranslateX-currentOffsetX-distanceX,.8)||0)),newHeight>canvasHeight&&(distanceY>0&&newOffsetY>minTranslateY&&(newOffsetY=minTranslateY-1+Math.pow(-minTranslateY+currentOffsetY+distanceY,.8)||0),distanceY<0&&newOffsetY<maxTranslateY&&(newOffsetY=maxTranslateY+1-Math.pow(maxTranslateY-currentOffsetY-distanceY,.8)||0)),{top:newOffsetY,left:newOffsetX}},Guestures.prototype.limitPosition=function(newOffsetX,newOffsetY,newWidth,newHeight){var self=this,canvasWidth=self.canvasWidth,canvasHeight=self.canvasHeight;return newOffsetX=newWidth>canvasWidth?(newOffsetX=newOffsetX>0?0:newOffsetX)<canvasWidth-newWidth?canvasWidth-newWidth:newOffsetX:Math.max(0,canvasWidth/2-newWidth/2),newOffsetY=newHeight>canvasHeight?(newOffsetY=newOffsetY>0?0:newOffsetY)<canvasHeight-newHeight?canvasHeight-newHeight:newOffsetY:Math.max(0,canvasHeight/2-newHeight/2),{top:newOffsetY,left:newOffsetX}},Guestures.prototype.onZoom=function(){var self=this,currentWidth=self.contentStartPos.width,currentHeight=self.contentStartPos.height,currentOffsetX=self.contentStartPos.left,currentOffsetY=self.contentStartPos.top,pinchRatio=distance(self.newPoints[0],self.newPoints[1])/self.startDistanceBetweenFingers,newWidth=Math.floor(currentWidth*pinchRatio),newHeight=Math.floor(currentHeight*pinchRatio),translateFromZoomingX=(currentWidth-newWidth)*self.percentageOfImageAtPinchPointX,translateFromZoomingY=(currentHeight-newHeight)*self.percentageOfImageAtPinchPointY,centerPointEndX=(self.newPoints[0].x+self.newPoints[1].x)/2-$(window).scrollLeft(),centerPointEndY=(self.newPoints[0].y+self.newPoints[1].y)/2-$(window).scrollTop(),translateFromTranslatingX=centerPointEndX-self.centerPointStartX,newPos={top:currentOffsetY+(translateFromZoomingY+(centerPointEndY-self.centerPointStartY)),left:currentOffsetX+(translateFromZoomingX+translateFromTranslatingX),scaleX:self.contentStartPos.scaleX*pinchRatio,scaleY:self.contentStartPos.scaleY*pinchRatio};self.canTap=!1,self.newWidth=newWidth,self.newHeight=newHeight,self.contentLastPos=newPos,self.requestId&&(cancelAFrame(self.requestId),self.requestId=null),self.requestId=requestAFrame(function(){$.fancybox.setTranslate(self.$content,self.contentLastPos)})},Guestures.prototype.ontouchend=function(e){var self=this,dMs=Math.max((new Date).getTime()-self.startTime,1),swiping=self.isSwiping,panning=self.isPanning,zooming=self.isZooming;if(self.endPoints=pointers(e),self.$container.removeClass("fancybox-controls--isGrabbing"),$(document).off(".fb.touch"),self.requestId&&(cancelAFrame(self.requestId),self.requestId=null),self.isSwiping=!1,self.isPanning=!1,self.isZooming=!1,self.canTap)return self.onTap(e);self.speed=366,self.velocityX=self.distanceX/dMs*.5,self.velocityY=self.distanceY/dMs*.5,self.speedX=Math.max(.5*self.speed,Math.min(1.5*self.speed,1/Math.abs(self.velocityX)*self.speed)),panning?self.endPanning():zooming?self.endZooming():self.endSwiping(swiping)},Guestures.prototype.endSwiping=function(swiping){var self=this,ret=!1;self.instance.isSliding=!1,self.sliderLastPos=null,"y"==swiping&&Math.abs(self.distanceY)>50?($.fancybox.animate(self.instance.current.$slide,{top:self.sliderStartPos.top+self.distanceY+150*self.velocityY,opacity:0},150),ret=self.instance.close(!0,300)):"x"==swiping&&self.distanceX>50&&self.instance.group.length>1?ret=self.instance.previous(self.speedX):"x"==swiping&&self.distanceX<-50&&self.instance.group.length>1&&(ret=self.instance.next(self.speedX)),!1!==ret||"x"!=swiping&&"y"!=swiping||self.instance.jumpTo(self.instance.current.index,150),self.$container.removeClass("fancybox-is-sliding")},Guestures.prototype.endPanning=function(){var newOffsetX,newOffsetY,newPos,self=this;self.contentLastPos&&(!1===self.instance.current.opts.touch.momentum?(newOffsetX=self.contentLastPos.left,newOffsetY=self.contentLastPos.top):(newOffsetX=self.contentLastPos.left+self.velocityX*self.speed,newOffsetY=self.contentLastPos.top+self.velocityY*self.speed),(newPos=self.limitPosition(newOffsetX,newOffsetY,self.contentStartPos.width,self.contentStartPos.height)).width=self.contentStartPos.width,newPos.height=self.contentStartPos.height,$.fancybox.animate(self.$content,newPos,330))},Guestures.prototype.endZooming=function(){var newOffsetX,newOffsetY,newPos,reset,self=this,current=self.instance.current,newWidth=self.newWidth,newHeight=self.newHeight;self.contentLastPos&&(newOffsetX=self.contentLastPos.left,reset={top:newOffsetY=self.contentLastPos.top,left:newOffsetX,width:newWidth,height:newHeight,scaleX:1,scaleY:1},$.fancybox.setTranslate(self.$content,reset),newWidth<self.canvasWidth&&newHeight<self.canvasHeight?self.instance.scaleToFit(150):newWidth>current.width||newHeight>current.height?self.instance.scaleToActual(self.centerPointStartX,self.centerPointStartY,150):(newPos=self.limitPosition(newOffsetX,newOffsetY,newWidth,newHeight),$.fancybox.setTranslate(self.content,$.fancybox.getTranslate(self.$content)),$.fancybox.animate(self.$content,newPos,150)))},Guestures.prototype.onTap=function(e){var where,self=this,$target=$(e.target),instance=self.instance,current=instance.current,endPoints=e&&pointers(e)||self.startPoints,tapX=endPoints[0]?endPoints[0].x-self.$stage.offset().left:0,tapY=endPoints[0]?endPoints[0].y-self.$stage.offset().top:0,process=function(prefix){var action=current.opts[prefix];if($.isFunction(action)&&(action=action.apply(instance,[current,e])),action)switch(action){case"close":instance.close(self.startEvent);break;case"toggleControls":instance.toggleControls(!0);break;case"next":instance.next();break;case"nextOrClose":instance.group.length>1?instance.next():instance.close(self.startEvent);break;case"zoom":"image"==current.type&&(current.isLoaded||current.$ghost)&&(instance.canPan()?instance.scaleToFit():instance.isScaledDown()?instance.scaleToActual(tapX,tapY):instance.group.length<2&&instance.close(self.startEvent))}};if(!(e.originalEvent&&2==e.originalEvent.button||instance.isSliding||tapX>$target[0].clientWidth+$target.offset().left)){if($target.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))where="Outside";else if($target.is(".fancybox-slide"))where="Slide";else{if(!instance.current.$content||!instance.current.$content.has(e.target).length)return;where="Content"}if(self.tapped){if(clearTimeout(self.tapped),self.tapped=null,Math.abs(tapX-self.tapX)>50||Math.abs(tapY-self.tapY)>50||instance.isSliding)return this;process("dblclick"+where)}else self.tapX=tapX,self.tapY=tapY,current.opts["dblclick"+where]&&current.opts["dblclick"+where]!==current.opts["click"+where]?self.tapped=setTimeout(function(){self.tapped=null,process("click"+where)},300):process("click"+where);return this}},$(document).on("onActivate.fb",function(e,instance){instance&&!instance.Guestures&&(instance.Guestures=new Guestures(instance))}),$(document).on("beforeClose.fb",function(e,instance){instance&&instance.Guestures&&instance.Guestures.destroy()})}(window,document,window.jQuery),function(document,$){"use strict";var SlideShow=function(instance){this.instance=instance,this.init()};$.extend(SlideShow.prototype,{timer:null,isActive:!1,$button:null,speed:3e3,init:function(){var self=this;self.$button=self.instance.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){self.toggle()}),(self.instance.group.length<2||!self.instance.group[self.instance.currIndex].opts.slideShow)&&self.$button.hide()},set:function(){var self=this;self.instance&&self.instance.current&&(self.instance.current.opts.loop||self.instance.currIndex<self.instance.group.length-1)?self.timer=setTimeout(function(){self.instance.next()},self.instance.current.opts.slideShow.speed||self.speed):(self.stop(),self.instance.idleSecondsCounter=0,self.instance.showControls())},clear:function(){var self=this;clearTimeout(self.timer),self.timer=null},start:function(){var self=this,current=self.instance.current;self.instance&&current&&(current.opts.loop||current.index<self.instance.group.length-1)&&(self.isActive=!0,self.$button.attr("title",current.opts.i18n[current.opts.lang].PLAY_STOP).addClass("fancybox-button--pause"),current.isComplete&&self.set())},stop:function(){var self=this,current=self.instance.current;self.clear(),self.$button.attr("title",current.opts.i18n[current.opts.lang].PLAY_START).removeClass("fancybox-button--pause"),self.isActive=!1},toggle:function(){var self=this;self.isActive?self.stop():self.start()}}),$(document).on({"onInit.fb":function(e,instance){instance&&!instance.SlideShow&&(instance.SlideShow=new SlideShow(instance))},"beforeShow.fb":function(e,instance,current,firstRun){var SlideShow=instance&&instance.SlideShow;firstRun?SlideShow&&current.opts.slideShow.autoStart&&SlideShow.start():SlideShow&&SlideShow.isActive&&SlideShow.clear()},"afterShow.fb":function(e,instance,current){var SlideShow=instance&&instance.SlideShow;SlideShow&&SlideShow.isActive&&SlideShow.set()},"afterKeydown.fb":function(e,instance,current,keypress,keycode){var SlideShow=instance&&instance.SlideShow;!SlideShow||!current.opts.slideShow||80!==keycode&&32!==keycode||$(document.activeElement).is("button,a,input")||(keypress.preventDefault(),SlideShow.toggle())},"beforeClose.fb onDeactivate.fb":function(e,instance){var SlideShow=instance&&instance.SlideShow;SlideShow&&SlideShow.stop()}}),$(document).on("visibilitychange",function(){var instance=$.fancybox.getInstance(),SlideShow=instance&&instance.SlideShow;SlideShow&&SlideShow.isActive&&(document.hidden?SlideShow.clear():SlideShow.set())})}(document,window.jQuery),function(document,$){"use strict";var fn=function(){var val,i,j,fnMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ret={};for(i=0;i<fnMap.length;i++)if((val=fnMap[i])&&val[1]in document){for(j=0;j<val.length;j++)ret[fnMap[0][j]]=val[j];return ret}return!1}();if(fn){var FullScreen={request:function(elem){(elem=elem||document.documentElement)[fn.requestFullscreen](elem.ALLOW_KEYBOARD_INPUT)},exit:function(){document[fn.exitFullscreen]()},toggle:function(elem){elem=elem||document.documentElement,this.isFullscreen()?this.exit():this.request(elem)},isFullscreen:function(){return Boolean(document[fn.fullscreenElement])},enabled:function(){return Boolean(document[fn.fullscreenEnabled])}};$(document).on({"onInit.fb":function(e,instance){var $container,$button=instance.$refs.toolbar.find("[data-fancybox-fullscreen]");instance&&!instance.FullScreen&&instance.group[instance.currIndex].opts.fullScreen?(($container=instance.$refs.container).on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(e){e.stopPropagation(),e.preventDefault(),FullScreen.toggle($container[0])}),instance.opts.fullScreen&&!0===instance.opts.fullScreen.autoStart&&FullScreen.request($container[0]),instance.FullScreen=FullScreen):$button.hide()},"afterKeydown.fb":function(e,instance,current,keypress,keycode){instance&&instance.FullScreen&&70===keycode&&(keypress.preventDefault(),instance.FullScreen.toggle(instance.$refs.container[0]))},"beforeClose.fb":function(instance){instance&&instance.FullScreen&&FullScreen.exit()}}),$(document).on(fn.fullscreenchange,function(){var instance=$.fancybox.getInstance();instance.current&&"image"===instance.current.type&&instance.isAnimating&&(instance.current.$content.css("transition","none"),instance.isAnimating=!1,instance.update(!0,!0,0))})}else $.fancybox.defaults.btnTpl.fullScreen=!1}(document,window.jQuery),function(document,$){"use strict";var FancyThumbs=function(instance){this.instance=instance,this.init()};$.extend(FancyThumbs.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,init:function(){var self=this,first=self.instance.group[0],second=self.instance.group[1];self.$button=self.instance.$refs.toolbar.find("[data-fancybox-thumbs]"),self.instance.group.length>1&&self.instance.group[self.instance.currIndex].opts.thumbs&&("image"==first.type||first.opts.thumb||first.opts.$thumb)&&("image"==second.type||second.opts.thumb||second.opts.$thumb)?(self.$button.on("click",function(){self.toggle()}),self.isActive=!0):(self.$button.hide(),self.isActive=!1)},create:function(){var list,src,instance=this.instance;this.$grid=$('<div class="fancybox-thumbs"></div>').appendTo(instance.$refs.container),list="<ul>",$.each(instance.group,function(i,item){(src=item.opts.thumb||(item.opts.$thumb?item.opts.$thumb.attr("src"):null))||"image"!==item.type||(src=item.src),src&&src.length&&(list+='<li data-index="'+i+'"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="'+src+'" /></li>')}),list+="</ul>",this.$list=$(list).appendTo(this.$grid).on("click","li",function(){instance.jumpTo($(this).data("index"))}),this.$list.find("img").hide().one("load",function(){var width,height,widthRatio,heightRatio,$parent=$(this).parent().removeClass("fancybox-thumbs-loading"),thumbWidth=$parent.outerWidth(),thumbHeight=$parent.outerHeight();width=this.naturalWidth||this.width,heightRatio=(height=this.naturalHeight||this.height)/thumbHeight,(widthRatio=width/thumbWidth)>=1&&heightRatio>=1&&(widthRatio>heightRatio?(width/=heightRatio,height=thumbHeight):(width=thumbWidth,height/=widthRatio)),$(this).css({width:Math.floor(width),height:Math.floor(height),"margin-top":Math.min(0,Math.floor(.3*thumbHeight-.3*height)),"margin-left":Math.min(0,Math.floor(.5*thumbWidth-.5*width))}).show()}).each(function(){this.src=$(this).data("src")})},focus:function(){this.instance.current&&this.$list.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+this.instance.current.index+'"]').addClass("fancybox-thumbs-active").focus()},close:function(){this.$grid.hide()},update:function(){this.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),this.isVisible?(this.$grid||this.create(),this.instance.trigger("onThumbsShow"),this.focus()):this.$grid&&this.instance.trigger("onThumbsHide"),this.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),$(document).on({"onInit.fb":function(e,instance){instance&&!instance.Thumbs&&(instance.Thumbs=new FancyThumbs(instance))},"beforeShow.fb":function(e,instance,item,firstRun){var Thumbs=instance&&instance.Thumbs;if(Thumbs&&Thumbs.isActive){if(item.modal)return Thumbs.$button.hide(),void Thumbs.hide();firstRun&&!0===instance.opts.thumbs.autoStart&&Thumbs.show(),Thumbs.isVisible&&Thumbs.focus()}},"afterKeydown.fb":function(e,instance,current,keypress,keycode){var Thumbs=instance&&instance.Thumbs;Thumbs&&Thumbs.isActive&&71===keycode&&(keypress.preventDefault(),Thumbs.toggle())},"beforeClose.fb":function(e,instance){var Thumbs=instance&&instance.Thumbs;Thumbs&&Thumbs.isVisible&&!1!==instance.opts.thumbs.hideOnClose&&Thumbs.close()}})}(document,window.jQuery),function(document,window,$){"use strict";function parseUrl(){var hash=window.location.hash.substr(1),rez=hash.split("-"),index=rez.length>1&&/^\+?\d+$/.test(rez[rez.length-1])?parseInt(rez.pop(-1),10)||1:1,gallery=rez.join("-");return index<1&&(index=1),{hash:hash,index:index,gallery:gallery}}function triggerFromUrl(url){var $el;""!==url.gallery&&(($el=$("[data-fancybox='"+$.escapeSelector(url.gallery)+"']").eq(url.index-1)).length?$el.trigger("click"):$("#"+$.escapeSelector(url.gallery)).trigger("click"))}function getGallery(instance){var opts;return!!instance&&((opts=instance.current?instance.current.opts:instance.opts).$orig?opts.$orig.data("fancybox"):opts.hash||"")}$.escapeSelector||($.escapeSelector=function(sel){var rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;return(sel+"").replace(rcssescape,function(ch,asCodePoint){return asCodePoint?"\0"===ch?"�":ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" ":"\\"+ch})});var currentHash=null,timerID=null;$(function(){setTimeout(function(){!1!==$.fancybox.defaults.hash&&($(document).on({"onInit.fb":function(e,instance){var url,gallery;!1!==instance.group[instance.currIndex].opts.hash&&(url=parseUrl(),(gallery=getGallery(instance))&&url.gallery&&gallery==url.gallery&&(instance.currIndex=url.index-1))},"beforeShow.fb":function(e,instance,current,firstRun){var gallery;!1!==current.opts.hash&&(gallery=getGallery(instance))&&""!==gallery&&(window.location.hash.indexOf(gallery)<0&&(instance.opts.origHash=window.location.hash),currentHash=gallery+(instance.group.length>1?"-"+(current.index+1):""),"replaceState"in window.history?(timerID&&clearTimeout(timerID),timerID=setTimeout(function(){window.history[firstRun?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+"#"+currentHash),timerID=null},300)):window.location.hash=currentHash)},"beforeClose.fb":function(e,instance,current){var gallery,origHash;timerID&&clearTimeout(timerID),!1!==current.opts.hash&&(gallery=getGallery(instance),origHash=instance&&instance.opts.origHash?instance.opts.origHash:"",gallery&&""!==gallery&&("replaceState"in history?window.history.replaceState({},document.title,window.location.pathname+window.location.search+origHash):(window.location.hash=origHash,$(window).scrollTop(instance.scrollTop).scrollLeft(instance.scrollLeft))),currentHash=null)}}),$(window).on("hashchange.fb",function(){var url=parseUrl();$.fancybox.getInstance()?!currentHash||currentHash===url.gallery+"-"+url.index||1===url.index&&currentHash==url.gallery||(currentHash=null,$.fancybox.close()):""!==url.gallery&&triggerFromUrl(url)}),$(window).one("unload.fb popstate.fb",function(){$.fancybox.getInstance("close",!0,0)}),triggerFromUrl(parseUrl()))},50)})}(document,window,window.jQuery);