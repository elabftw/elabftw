/*! elabftw 1.5.0 https://www.elabftw.net */
var ChemDoodle=function(){"use strict";var c={};c.iChemLabs={},c.informatics={},c.io={},c.lib={},c.notations={},c.structures={},c.structures.d2={},c.structures.d3={};var VERSION="7.0.2";return c.getVersion=function(){return VERSION},c}();!function(window,lib,undefined){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||"function"!==type&&(0===length||"number"==typeof length&&length>0&&length-1 in obj)}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||data!==undefined||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=core_deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")),i=name.length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):jQuery.support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(isSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0!==not})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(1===content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!jQuery.support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&manipulation_rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==core_strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==core_strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){manipulation_rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName)))):values[index]||(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write("<!doctype html><html><body>"),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");return elem.remove(),display}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],"inline"===jQuery.css(elem,"display")&&"none"===jQuery.css(elem,"float")&&(jQuery.support.inlineBlockNeedsLayout&&"inline"!==css_defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",jQuery.support.shrinkWrapBlocks||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show"))continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}if(!jQuery.isEmptyObject(orig)){dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var readyList,rootjQuery,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="1.10.2",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()},completed=function(event){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())},detach=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.ready.promise().done(fn),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[1]||{},i=2),"object"==typeof target||jQuery.isFunction(target)||(target={}),length===i&&(target=this,--i);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready"))}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):"object"==typeof obj||"function"==typeof obj?class2type[core_toString.call(obj)]||"object":typeof obj},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(jQuery.support.ownLast)for(key in obj)return core_hasOwn.call(obj,key);for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))},parseJSON:function(data){return window.JSON&&window.JSON.parse?window.JSON.parse(data):null===data?data:"string"==typeof data&&(data=jQuery.trim(data),data&&rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))?new Function("return "+data)():void jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:core_trim&&!core_trim.call("\ufeffÂ ")?function(text){return null==text?"":core_trim.call(text)}:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):core_push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if("number"==typeof l)for(;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;for(inv=!!inv;length>i;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&(ret[ret.length]=value);return core_concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=core_slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):undefined},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(value!==undefined&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),rootjQuery=jQuery(document),function(window,undefined){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+=" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]));
})})}function setFilters(){}function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)if(outerCache=elem[expando]||(elem[expando]={}),(cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===!0||data===cachedruns)return data===!0}else if(cache=outerCache[dir]=[dirkey],cache[1]=matcher(elem,context,xml)||cachedruns,cache[1]===!0)return!0}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=null!=expandContext,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1;for(outermost&&(outermostContext=context!==document&&context,cachedruns=matcherCachedRuns);null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique,cachedruns=++matcherCachedRuns)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed&&1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)),results}var i,support,cachedruns,Expr,getText,isXML,compile,outermostContext,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=!1,sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;len>i;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rsibling=new RegExp(whitespace+"*[+~]"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},support=Sizzle.support={},setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),parent&&parent.attachEvent&&parent!==parent.top&&parent.attachEvent("onbeforeunload",function(){setDocument()}),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){return typeof context.getElementsByClassName!==strundefined&&documentIsHTML?context.getElementsByClassName(className):void 0},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select><option selected=''></option></select>",div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("t",""),div.querySelectorAll("[t^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),contains=rnative.test(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return compare?1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||contains(preferredDoc,a)?-1:b===doc||contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b)return hasDuplicate=!0,0;if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val===undefined?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[5]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]&&match[4]!==undefined?match[2]=match[4]:unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||3===elem.nodeType||4===elem.nodeType)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||attr.toLowerCase()===elem.type)},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(group||(group=tokenize(selector)),i=group.length;i--;)cached=matcherFromTokens(group[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){return isXML?void 0:elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){return isXML||"input"!==elem.nodeName.toLowerCase()?void 0:elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;return isXML?void 0:(val=elem.getAttributeNode(name))&&val.specified?val.value:elem[name]===!0?name.toLowerCase():null}),jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}(window);var optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?core_slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.support=function(support){var all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");if(div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*")||[],a=div.getElementsByTagName("a")[0],!a||!a.style||!all.length)return support;select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",support.getSetAttribute="t"!==div.className,support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.opacity=/^0.5/.test(a.style.opacity),support.cssFloat=!!a.style.cssFloat,support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,support.inlineBlockNeedsLayout=!1,support.shrinkWrapBlocks=!1,support.pixelPosition=!1,support.deleteExpando=!0,support.noCloneEvent=!0,support.reliableMarginRight=!0,support.boxSizingReliable=!0,input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","t"),input.setAttribute("name","t"),fragment=document.createDocumentFragment(),fragment.appendChild(input),support.appendChecked=input.checked,
support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click());for(i in{submit:!0,change:!0,focusin:!0})div.setAttribute(eventName="on"+i,"t"),support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===!1;div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip;for(i in jQuery(support))break;return support.ownLast="0"!==i,jQuery(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",body=document.getElementsByTagName("body")[0];body&&(container=document.createElement("div"),container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",body.appendChild(container).appendChild(div),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),tds[0].style.cssText="padding:0;margin:0;border:0;display:none",isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",jQuery.swap(body,null!=body.style.zoom?{zoom:1}:{},function(){support.boxSizing=4===div.offsetWidth}),window.getComputedStyle&&(support.pixelPosition="1%"!==(window.getComputedStyle(div,null)||{}).top,support.boxSizingReliable="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,marginDiv=div.appendChild(document.createElement("div")),marginDiv.style.cssText=div.style.cssText=divReset,marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)),typeof div.style.zoom!==core_strundefined&&(div.innerHTML="",div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1",support.inlineBlockNeedsLayout=3===div.offsetWidth,div.style.display="block",div.innerHTML="<div></div>",div.firstChild.style.width="5px",support.shrinkWrapBlocks=3!==div.offsetWidth,support.inlineBlockNeedsLayout&&(body.style.zoom=1)),body.removeChild(container),container=div=tds=marginDiv=null)}),all=select=fragment=opt=a=input=null,support}({});var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)},acceptData:function(elem){if(elem.nodeType&&1!==elem.nodeType&&9!==elem.nodeType)return!1;var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==!0&&elem.getAttribute("classid")===noData}}),jQuery.fn.extend({data:function(key,value){var attrs,name,data=null,i=0,elem=this[0];if(key===undefined){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(attrs=elem.attributes;i<attrs.length;i++)name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):null},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=undefined),type=type||"fx";i--;)tmp=jQuery._data(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var nodeHook,boolHook,rclass=/[\t\r\n\f]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,getSetInput=jQuery.support.input;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");elem.className=jQuery.trim(cur)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(core_rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");elem.className=value?jQuery.trim(cur):""}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(core_rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else(type===core_strundefined||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1},val:function(value){var ret,hooks,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:elem.text}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],(option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}},attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===core_strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),value===undefined?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?undefined:ret):null!==value?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=jQuery.expr.attrHandle[name]||jQuery.find.attr;jQuery.expr.attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var fn=jQuery.expr.attrHandle[name],ret=isXML?undefined:(jQuery.expr.attrHandle[name]=undefined)!=getter(elem,name,isXML)?name.toLowerCase():null;return jQuery.expr.attrHandle[name]=fn,ret}:function(elem,name,isXML){return isXML?undefined:elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){return jQuery.nodeName(elem,"input")?void(elem.defaultValue=value):nodeHook&&nodeHook.set(elem,value,name)}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:undefined}},jQuery.expr.attrHandle.id=jQuery.expr.attrHandle.name=jQuery.expr.attrHandle.coords=function(elem,name,isXML){var ret;return isXML?undefined:(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&ret.specified?ret.value:undefined},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}}})),jQuery.support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}}),jQuery.support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}},jQuery.support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery===core_strundefined||e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(core_rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=undefined,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===!1&&event.preventDefault();if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||special._default.apply(eventPath.pop(),data)===!1)&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=core_slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",matches[sel]===undefined&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||button===undefined||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===safeActiveElement()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){event.result!==undefined&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===core_strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){0===attaches++&&document.addEventListener(orig,handler,!0)},teardown:function(){0===--attaches&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=undefined):null==fn&&("string"==typeof selector?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=undefined),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});var isSimple=/^.[^:#\[\.,]*$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length},closest:function(selectors,context){for(var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){cur=ret.push(cur);break}return this.pushStack(ret.length>1?jQuery.unique(ret):ret)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1;
},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}}),jQuery.extend({filter:function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):undefined;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var args=jQuery.map(this,function(elem){return[elem.nextSibling,elem.parentNode]}),i=0;return this.domManip(arguments,function(elem){var next=args[i++],parent=args[i++];parent&&(next&&next.parentNode!==parent&&(next=this.nextSibling),jQuery(this).remove(),parent.insertBefore(elem,next))},!0),i?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback,allowIntersection){args=core_concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(1>=l||"string"!=typeof value||jQuery.support.checkClone)&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback,allowIntersection)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,!allowIntersection&&this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),core_push.apply(ret,elems.get());return this.pushStack(ret)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!jQuery.support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),jQuery.support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==core_strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,core_deletedIds.push(id))}},_evalUrl:function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}});var iframe,getStyles,curCSS,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var len,styles,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),!(null==value||"number"===type&&isNaN(value)||("number"!==type||jQuery.cssNumber[origName]||(value+="px"),jQuery.support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&(value=hooks.set(elem,value,extra))===undefined)))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),val===undefined&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val}}),window.getComputedStyle?(getStyles=function(elem){return window.getComputedStyle(elem,null)},curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),ret}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,_computed){var left,rs,rsLeft,computed=_computed||getStyles(elem),ret=computed?computed[name]:undefined,style=elem.style;return null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),""===ret?"auto":ret}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?0===elem.offsetWidth&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return off>=0&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=undefined):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=undefined),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(undefined,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=undefined}),"script"):void 0});var xhrCallbacks,xhrSupported,xhrId=0,xhrOnUnloadAbort=window.ActiveXObject&&function(){var key;for(key in xhrCallbacks)xhrCallbacks[key](undefined,!0)};jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,xhrSupported=jQuery.ajaxSettings.xhr(),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=jQuery.support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async),
s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),s.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(err){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,responseHeaders,statusText,responses;try{if(callback&&(isAbort||4===xhr.readyState))if(callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]),isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!s.isLocal||s.crossDomain?1223===status&&(status=204):status=responses.text?200:404}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},s.async?4===xhr.readyState?setTimeout(callback):(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback):callback()},abort:function(){callback&&callback(undefined,!0)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}),jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==core_strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},jQuery.offset={setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");"static"===position&&(elem.style.position="relative");var curTop,curLeft,curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={};calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);return val===undefined?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:void(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,lib.jQuery=jQuery}(window,ChemDoodle.lib),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(ChemDoodle.lib.jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}return absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,120===lowestDelta&&(oldMode=!0,lowestDelta/=40)),oldMode&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null,oldMode=null}var oldMode,nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.8",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null},getLineHeight:function(elem){return parseInt($(elem)["offsetParent"in $.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(elem){return $(elem).height()}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),function(root,factory){"object"==typeof exports?module.exports=factory(global):"function"==typeof define&&define.amd?define([],function(){return factory(root)}):factory(root)}(ChemDoodle.lib,function(root){"use strict";function setMatrixArrayType(type){return MatrixArray=type}function determineMatrixArrayType(){return MatrixArray="undefined"!=typeof Float32Array?Float32Array:Array}var FLOAT_EPSILON=1e-6,glMath={};!function(){if("undefined"!=typeof Float32Array){var y=new Float32Array(1),i=new Int32Array(y.buffer);glMath.invsqrt=function(number){var x2=.5*number;y[0]=number;var threehalfs=1.5;i[0]=1597463007-(i[0]>>1);var number2=y[0];return number2*(threehalfs-x2*number2*number2)}}else glMath.invsqrt=function(number){return 1/Math.sqrt(number)}}();var MatrixArray=null;determineMatrixArrayType();var vec3={};vec3.create=function(vec){var dest=new MatrixArray(3);return vec?(dest[0]=vec[0],dest[1]=vec[1],dest[2]=vec[2]):dest[0]=dest[1]=dest[2]=0,dest},vec3.createFrom=function(x,y,z){var dest=new MatrixArray(3);return dest[0]=x,dest[1]=y,dest[2]=z,dest},vec3.set=function(vec,dest){return dest[0]=vec[0],dest[1]=vec[1],dest[2]=vec[2],dest},vec3.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON&&Math.abs(a[2]-b[2])<FLOAT_EPSILON},vec3.add=function(vec,vec2,dest){return dest&&vec!==dest?(dest[0]=vec[0]+vec2[0],dest[1]=vec[1]+vec2[1],dest[2]=vec[2]+vec2[2],dest):(vec[0]+=vec2[0],vec[1]+=vec2[1],vec[2]+=vec2[2],vec)},vec3.subtract=function(vec,vec2,dest){return dest&&vec!==dest?(dest[0]=vec[0]-vec2[0],dest[1]=vec[1]-vec2[1],dest[2]=vec[2]-vec2[2],dest):(vec[0]-=vec2[0],vec[1]-=vec2[1],vec[2]-=vec2[2],vec)},vec3.multiply=function(vec,vec2,dest){return dest&&vec!==dest?(dest[0]=vec[0]*vec2[0],dest[1]=vec[1]*vec2[1],dest[2]=vec[2]*vec2[2],dest):(vec[0]*=vec2[0],vec[1]*=vec2[1],vec[2]*=vec2[2],vec)},vec3.negate=function(vec,dest){return dest||(dest=vec),dest[0]=-vec[0],dest[1]=-vec[1],dest[2]=-vec[2],dest},vec3.scale=function(vec,val,dest){return dest&&vec!==dest?(dest[0]=vec[0]*val,dest[1]=vec[1]*val,dest[2]=vec[2]*val,dest):(vec[0]*=val,vec[1]*=val,vec[2]*=val,vec)},vec3.normalize=function(vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1],z=vec[2],len=Math.sqrt(x*x+y*y+z*z);return len?1===len?(dest[0]=x,dest[1]=y,dest[2]=z,dest):(len=1/len,dest[0]=x*len,dest[1]=y*len,dest[2]=z*len,dest):(dest[0]=0,dest[1]=0,dest[2]=0,dest)},vec3.cross=function(vec,vec2,dest){dest||(dest=vec);var x=vec[0],y=vec[1],z=vec[2],x2=vec2[0],y2=vec2[1],z2=vec2[2];return dest[0]=y*z2-z*y2,dest[1]=z*x2-x*z2,dest[2]=x*y2-y*x2,dest},vec3.length=function(vec){var x=vec[0],y=vec[1],z=vec[2];return Math.sqrt(x*x+y*y+z*z)},vec3.squaredLength=function(vec){var x=vec[0],y=vec[1],z=vec[2];return x*x+y*y+z*z},vec3.dot=function(vec,vec2){return vec[0]*vec2[0]+vec[1]*vec2[1]+vec[2]*vec2[2]},vec3.direction=function(vec,vec2,dest){dest||(dest=vec);var x=vec[0]-vec2[0],y=vec[1]-vec2[1],z=vec[2]-vec2[2],len=Math.sqrt(x*x+y*y+z*z);return len?(len=1/len,dest[0]=x*len,dest[1]=y*len,dest[2]=z*len,dest):(dest[0]=0,dest[1]=0,dest[2]=0,dest)},vec3.lerp=function(vec,vec2,lerp,dest){return dest||(dest=vec),dest[0]=vec[0]+lerp*(vec2[0]-vec[0]),dest[1]=vec[1]+lerp*(vec2[1]-vec[1]),dest[2]=vec[2]+lerp*(vec2[2]-vec[2]),dest},vec3.dist=function(vec,vec2){var x=vec2[0]-vec[0],y=vec2[1]-vec[1],z=vec2[2]-vec[2];return Math.sqrt(x*x+y*y+z*z)};var unprojectMat=null,unprojectVec=new MatrixArray(4);vec3.unproject=function(vec,view,proj,viewport,dest){dest||(dest=vec),unprojectMat||(unprojectMat=mat4.create());var m=unprojectMat,v=unprojectVec;return v[0]=2*(vec[0]-viewport[0])/viewport[2]-1,v[1]=2*(vec[1]-viewport[1])/viewport[3]-1,v[2]=2*vec[2]-1,v[3]=1,mat4.multiply(proj,view,m),mat4.inverse(m)?(mat4.multiplyVec4(m,v),0===v[3]?null:(dest[0]=v[0]/v[3],dest[1]=v[1]/v[3],dest[2]=v[2]/v[3],dest)):null};var xUnitVec3=vec3.createFrom(1,0,0),yUnitVec3=vec3.createFrom(0,1,0),zUnitVec3=vec3.createFrom(0,0,1),tmpvec3=vec3.create();vec3.rotationTo=function(a,b,dest){dest||(dest=quat4.create());var d=vec3.dot(a,b),axis=tmpvec3;if(d>=1)quat4.set(identityQuat4,dest);else if(1e-6-1>d)vec3.cross(xUnitVec3,a,axis),vec3.length(axis)<1e-6&&vec3.cross(yUnitVec3,a,axis),vec3.length(axis)<1e-6&&vec3.cross(zUnitVec3,a,axis),vec3.normalize(axis),quat4.fromAngleAxis(Math.PI,axis,dest);else{var s=Math.sqrt(2*(1+d)),sInv=1/s;vec3.cross(a,b,axis),dest[0]=axis[0]*sInv,dest[1]=axis[1]*sInv,dest[2]=axis[2]*sInv,dest[3]=.5*s,quat4.normalize(dest)}return dest[3]>1?dest[3]=1:dest[3]<-1&&(dest[3]=-1),dest},vec3.str=function(vec){return"["+vec[0]+", "+vec[1]+", "+vec[2]+"]"};var mat3={};mat3.create=function(mat){var dest=new MatrixArray(9);return mat?(dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest[4]=mat[4],dest[5]=mat[5],dest[6]=mat[6],dest[7]=mat[7],dest[8]=mat[8]):dest[0]=dest[1]=dest[2]=dest[3]=dest[4]=dest[5]=dest[6]=dest[7]=dest[8]=0,dest},mat3.createFrom=function(m00,m01,m02,m10,m11,m12,m20,m21,m22){var dest=new MatrixArray(9);return dest[0]=m00,dest[1]=m01,dest[2]=m02,dest[3]=m10,dest[4]=m11,dest[5]=m12,dest[6]=m20,dest[7]=m21,dest[8]=m22,dest},mat3.determinant=function(mat){var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[3],a11=mat[4],a12=mat[5],a20=mat[6],a21=mat[7],a22=mat[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)},mat3.inverse=function(mat,dest){var id,a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[3],a11=mat[4],a12=mat[5],a20=mat[6],a21=mat[7],a22=mat[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,d=a00*b01+a01*b11+a02*b21;return d?(id=1/d,dest||(dest=mat3.create()),dest[0]=b01*id,dest[1]=(-a22*a01+a02*a21)*id,dest[2]=(a12*a01-a02*a11)*id,dest[3]=b11*id,dest[4]=(a22*a00-a02*a20)*id,dest[5]=(-a12*a00+a02*a10)*id,dest[6]=b21*id,dest[7]=(-a21*a00+a01*a20)*id,dest[8]=(a11*a00-a01*a10)*id,dest):null},mat3.multiply=function(mat,mat2,dest){dest||(dest=mat);var a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[3],a11=mat[4],a12=mat[5],a20=mat[6],a21=mat[7],a22=mat[8],b00=mat2[0],b01=mat2[1],b02=mat2[2],b10=mat2[3],b11=mat2[4],b12=mat2[5],b20=mat2[6],b21=mat2[7],b22=mat2[8];return dest[0]=b00*a00+b01*a10+b02*a20,dest[1]=b00*a01+b01*a11+b02*a21,dest[2]=b00*a02+b01*a12+b02*a22,dest[3]=b10*a00+b11*a10+b12*a20,dest[4]=b10*a01+b11*a11+b12*a21,dest[5]=b10*a02+b11*a12+b12*a22,dest[6]=b20*a00+b21*a10+b22*a20,dest[7]=b20*a01+b21*a11+b22*a21,dest[8]=b20*a02+b21*a12+b22*a22,dest},mat3.multiplyVec2=function(matrix,vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1];return dest[0]=x*matrix[0]+y*matrix[3]+matrix[6],dest[1]=x*matrix[1]+y*matrix[4]+matrix[7],dest},mat3.multiplyVec3=function(matrix,vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1],z=vec[2];return dest[0]=x*matrix[0]+y*matrix[3]+z*matrix[6],dest[1]=x*matrix[1]+y*matrix[4]+z*matrix[7],dest[2]=x*matrix[2]+y*matrix[5]+z*matrix[8],dest},mat3.set=function(mat,dest){return dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest[4]=mat[4],dest[5]=mat[5],dest[6]=mat[6],dest[7]=mat[7],dest[8]=mat[8],dest},mat3.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON&&Math.abs(a[2]-b[2])<FLOAT_EPSILON&&Math.abs(a[3]-b[3])<FLOAT_EPSILON&&Math.abs(a[4]-b[4])<FLOAT_EPSILON&&Math.abs(a[5]-b[5])<FLOAT_EPSILON&&Math.abs(a[6]-b[6])<FLOAT_EPSILON&&Math.abs(a[7]-b[7])<FLOAT_EPSILON&&Math.abs(a[8]-b[8])<FLOAT_EPSILON},mat3.identity=function(dest){return dest||(dest=mat3.create()),dest[0]=1,dest[1]=0,dest[2]=0,dest[3]=0,dest[4]=1,dest[5]=0,dest[6]=0,dest[7]=0,dest[8]=1,dest},mat3.transpose=function(mat,dest){if(!dest||mat===dest){var a01=mat[1],a02=mat[2],a12=mat[5];return mat[1]=mat[3],mat[2]=mat[6],mat[3]=a01,mat[5]=mat[7],mat[6]=a02,mat[7]=a12,mat}return dest[0]=mat[0],dest[1]=mat[3],dest[2]=mat[6],dest[3]=mat[1],dest[4]=mat[4],dest[5]=mat[7],dest[6]=mat[2],dest[7]=mat[5],dest[8]=mat[8],dest},mat3.toMat4=function(mat,dest){return dest||(dest=mat4.create()),dest[15]=1,dest[14]=0,dest[13]=0,dest[12]=0,dest[11]=0,dest[10]=mat[8],dest[9]=mat[7],dest[8]=mat[6],dest[7]=0,dest[6]=mat[5],dest[5]=mat[4],dest[4]=mat[3],dest[3]=0,dest[2]=mat[2],dest[1]=mat[1],dest[0]=mat[0],dest},mat3.str=function(mat){return"["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+", "+mat[4]+", "+mat[5]+", "+mat[6]+", "+mat[7]+", "+mat[8]+"]"};var mat4={};mat4.create=function(mat){var dest=new MatrixArray(16);return mat&&(dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest[4]=mat[4],dest[5]=mat[5],dest[6]=mat[6],dest[7]=mat[7],dest[8]=mat[8],dest[9]=mat[9],dest[10]=mat[10],dest[11]=mat[11],dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15]),dest},mat4.createFrom=function(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var dest=new MatrixArray(16);return dest[0]=m00,dest[1]=m01,dest[2]=m02,dest[3]=m03,dest[4]=m10,dest[5]=m11,dest[6]=m12,dest[7]=m13,dest[8]=m20,dest[9]=m21,dest[10]=m22,dest[11]=m23,dest[12]=m30,dest[13]=m31,dest[14]=m32,dest[15]=m33,dest},mat4.set=function(mat,dest){return dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest[4]=mat[4],dest[5]=mat[5],dest[6]=mat[6],dest[7]=mat[7],dest[8]=mat[8],dest[9]=mat[9],dest[10]=mat[10],dest[11]=mat[11],dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15],dest},mat4.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON&&Math.abs(a[2]-b[2])<FLOAT_EPSILON&&Math.abs(a[3]-b[3])<FLOAT_EPSILON&&Math.abs(a[4]-b[4])<FLOAT_EPSILON&&Math.abs(a[5]-b[5])<FLOAT_EPSILON&&Math.abs(a[6]-b[6])<FLOAT_EPSILON&&Math.abs(a[7]-b[7])<FLOAT_EPSILON&&Math.abs(a[8]-b[8])<FLOAT_EPSILON&&Math.abs(a[9]-b[9])<FLOAT_EPSILON&&Math.abs(a[10]-b[10])<FLOAT_EPSILON&&Math.abs(a[11]-b[11])<FLOAT_EPSILON&&Math.abs(a[12]-b[12])<FLOAT_EPSILON&&Math.abs(a[13]-b[13])<FLOAT_EPSILON&&Math.abs(a[14]-b[14])<FLOAT_EPSILON&&Math.abs(a[15]-b[15])<FLOAT_EPSILON},mat4.identity=function(dest){return dest||(dest=mat4.create()),dest[0]=1,dest[1]=0,dest[2]=0,dest[3]=0,dest[4]=0,dest[5]=1,dest[6]=0,dest[7]=0,dest[8]=0,dest[9]=0,dest[10]=1,dest[11]=0,dest[12]=0,dest[13]=0,dest[14]=0,dest[15]=1,dest},mat4.transpose=function(mat,dest){if(!dest||mat===dest){var a01=mat[1],a02=mat[2],a03=mat[3],a12=mat[6],a13=mat[7],a23=mat[11];return mat[1]=mat[4],mat[2]=mat[8],mat[3]=mat[12],mat[4]=a01,mat[6]=mat[9],mat[7]=mat[13],mat[8]=a02,mat[9]=a12,mat[11]=mat[14],mat[12]=a03,mat[13]=a13,mat[14]=a23,mat}return dest[0]=mat[0],dest[1]=mat[4],dest[2]=mat[8],dest[3]=mat[12],dest[4]=mat[1],dest[5]=mat[5],dest[6]=mat[9],dest[7]=mat[13],dest[8]=mat[2],dest[9]=mat[6],dest[10]=mat[10],dest[11]=mat[14],dest[12]=mat[3],dest[13]=mat[7],dest[14]=mat[11],dest[15]=mat[15],dest},mat4.determinant=function(mat){var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15];return a30*a21*a12*a03-a20*a31*a12*a03-a30*a11*a22*a03+a10*a31*a22*a03+a20*a11*a32*a03-a10*a21*a32*a03-a30*a21*a02*a13+a20*a31*a02*a13+a30*a01*a22*a13-a00*a31*a22*a13-a20*a01*a32*a13+a00*a21*a32*a13+a30*a11*a02*a23-a10*a31*a02*a23-a30*a01*a12*a23+a00*a31*a12*a23+a10*a01*a32*a23-a00*a11*a32*a23-a20*a11*a02*a33+a10*a21*a02*a33+a20*a01*a12*a33-a00*a21*a12*a33-a10*a01*a22*a33+a00*a11*a22*a33},mat4.inverse=function(mat,dest){dest||(dest=mat);var invDet,a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,d=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return d?(invDet=1/d,dest[0]=(a11*b11-a12*b10+a13*b09)*invDet,dest[1]=(-a01*b11+a02*b10-a03*b09)*invDet,dest[2]=(a31*b05-a32*b04+a33*b03)*invDet,dest[3]=(-a21*b05+a22*b04-a23*b03)*invDet,dest[4]=(-a10*b11+a12*b08-a13*b07)*invDet,dest[5]=(a00*b11-a02*b08+a03*b07)*invDet,dest[6]=(-a30*b05+a32*b02-a33*b01)*invDet,dest[7]=(a20*b05-a22*b02+a23*b01)*invDet,dest[8]=(a10*b10-a11*b08+a13*b06)*invDet,dest[9]=(-a00*b10+a01*b08-a03*b06)*invDet,dest[10]=(a30*b04-a31*b02+a33*b00)*invDet,dest[11]=(-a20*b04+a21*b02-a23*b00)*invDet,dest[12]=(-a10*b09+a11*b07-a12*b06)*invDet,dest[13]=(a00*b09-a01*b07+a02*b06)*invDet,dest[14]=(-a30*b03+a31*b01-a32*b00)*invDet,dest[15]=(a20*b03-a21*b01+a22*b00)*invDet,dest):null},mat4.toRotationMat=function(mat,dest){return dest||(dest=mat4.create()),dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest[4]=mat[4],dest[5]=mat[5],dest[6]=mat[6],dest[7]=mat[7],dest[8]=mat[8],dest[9]=mat[9],dest[10]=mat[10],dest[11]=mat[11],dest[12]=0,dest[13]=0,dest[14]=0,dest[15]=1,dest},mat4.toMat3=function(mat,dest){return dest||(dest=mat3.create()),dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[4],dest[4]=mat[5],dest[5]=mat[6],dest[6]=mat[8],dest[7]=mat[9],dest[8]=mat[10],dest},mat4.toInverseMat3=function(mat,dest){var id,a00=mat[0],a01=mat[1],a02=mat[2],a10=mat[4],a11=mat[5],a12=mat[6],a20=mat[8],a21=mat[9],a22=mat[10],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,d=a00*b01+a01*b11+a02*b21;return d?(id=1/d,dest||(dest=mat3.create()),dest[0]=b01*id,dest[1]=(-a22*a01+a02*a21)*id,dest[2]=(a12*a01-a02*a11)*id,dest[3]=b11*id,dest[4]=(a22*a00-a02*a20)*id,dest[5]=(-a12*a00+a02*a10)*id,dest[6]=b21*id,dest[7]=(-a21*a00+a01*a20)*id,dest[8]=(a11*a00-a01*a10)*id,dest):null},mat4.multiply=function(mat,mat2,dest){dest||(dest=mat);var a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],a30=mat[12],a31=mat[13],a32=mat[14],a33=mat[15],b0=mat2[0],b1=mat2[1],b2=mat2[2],b3=mat2[3];return dest[0]=b0*a00+b1*a10+b2*a20+b3*a30,dest[1]=b0*a01+b1*a11+b2*a21+b3*a31,dest[2]=b0*a02+b1*a12+b2*a22+b3*a32,dest[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=mat2[4],b1=mat2[5],b2=mat2[6],b3=mat2[7],dest[4]=b0*a00+b1*a10+b2*a20+b3*a30,dest[5]=b0*a01+b1*a11+b2*a21+b3*a31,dest[6]=b0*a02+b1*a12+b2*a22+b3*a32,dest[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=mat2[8],b1=mat2[9],b2=mat2[10],b3=mat2[11],dest[8]=b0*a00+b1*a10+b2*a20+b3*a30,dest[9]=b0*a01+b1*a11+b2*a21+b3*a31,dest[10]=b0*a02+b1*a12+b2*a22+b3*a32,dest[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=mat2[12],b1=mat2[13],b2=mat2[14],b3=mat2[15],dest[12]=b0*a00+b1*a10+b2*a20+b3*a30,dest[13]=b0*a01+b1*a11+b2*a21+b3*a31,dest[14]=b0*a02+b1*a12+b2*a22+b3*a32,dest[15]=b0*a03+b1*a13+b2*a23+b3*a33,dest},mat4.multiplyVec3=function(mat,vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1],z=vec[2];return dest[0]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12],dest[1]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13],dest[2]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14],dest},mat4.multiplyVec4=function(mat,vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1],z=vec[2],w=vec[3];return dest[0]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12]*w,dest[1]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13]*w,dest[2]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14]*w,dest[3]=mat[3]*x+mat[7]*y+mat[11]*z+mat[15]*w,dest},mat4.translate=function(mat,vec,dest){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=vec[0],y=vec[1],z=vec[2];return dest&&mat!==dest?(a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],dest[0]=a00,dest[1]=a01,dest[2]=a02,dest[3]=a03,dest[4]=a10,dest[5]=a11,dest[6]=a12,dest[7]=a13,dest[8]=a20,dest[9]=a21,dest[10]=a22,dest[11]=a23,dest[12]=a00*x+a10*y+a20*z+mat[12],dest[13]=a01*x+a11*y+a21*z+mat[13],dest[14]=a02*x+a12*y+a22*z+mat[14],dest[15]=a03*x+a13*y+a23*z+mat[15],dest):(mat[12]=mat[0]*x+mat[4]*y+mat[8]*z+mat[12],mat[13]=mat[1]*x+mat[5]*y+mat[9]*z+mat[13],mat[14]=mat[2]*x+mat[6]*y+mat[10]*z+mat[14],mat[15]=mat[3]*x+mat[7]*y+mat[11]*z+mat[15],mat)},mat4.scale=function(mat,vec,dest){var x=vec[0],y=vec[1],z=vec[2];return dest&&mat!==dest?(dest[0]=mat[0]*x,dest[1]=mat[1]*x,dest[2]=mat[2]*x,dest[3]=mat[3]*x,dest[4]=mat[4]*y,dest[5]=mat[5]*y,dest[6]=mat[6]*y,dest[7]=mat[7]*y,dest[8]=mat[8]*z,dest[9]=mat[9]*z,dest[10]=mat[10]*z,dest[11]=mat[11]*z,dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15],dest):(mat[0]*=x,mat[1]*=x,mat[2]*=x,mat[3]*=x,mat[4]*=y,mat[5]*=y,mat[6]*=y,mat[7]*=y,mat[8]*=z,mat[9]*=z,mat[10]*=z,mat[11]*=z,mat)},mat4.rotate=function(mat,angle,axis,dest){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);return len?(1!==len&&(len=1/len,x*=len,y*=len,z*=len),s=Math.sin(angle),c=Math.cos(angle),t=1-c,a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,dest?mat!==dest&&(dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15]):dest=mat,dest[0]=a00*b00+a10*b01+a20*b02,dest[1]=a01*b00+a11*b01+a21*b02,dest[2]=a02*b00+a12*b01+a22*b02,dest[3]=a03*b00+a13*b01+a23*b02,dest[4]=a00*b10+a10*b11+a20*b12,dest[5]=a01*b10+a11*b11+a21*b12,dest[6]=a02*b10+a12*b11+a22*b12,dest[7]=a03*b10+a13*b11+a23*b12,dest[8]=a00*b20+a10*b21+a20*b22,dest[9]=a01*b20+a11*b21+a21*b22,dest[10]=a02*b20+a12*b21+a22*b22,dest[11]=a03*b20+a13*b21+a23*b22,dest):null},mat4.rotateX=function(mat,angle,dest){
var s=Math.sin(angle),c=Math.cos(angle),a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11];return dest?mat!==dest&&(dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15]):dest=mat,dest[4]=a10*c+a20*s,dest[5]=a11*c+a21*s,dest[6]=a12*c+a22*s,dest[7]=a13*c+a23*s,dest[8]=a10*-s+a20*c,dest[9]=a11*-s+a21*c,dest[10]=a12*-s+a22*c,dest[11]=a13*-s+a23*c,dest},mat4.rotateY=function(mat,angle,dest){var s=Math.sin(angle),c=Math.cos(angle),a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a20=mat[8],a21=mat[9],a22=mat[10],a23=mat[11];return dest?mat!==dest&&(dest[4]=mat[4],dest[5]=mat[5],dest[6]=mat[6],dest[7]=mat[7],dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15]):dest=mat,dest[0]=a00*c+a20*-s,dest[1]=a01*c+a21*-s,dest[2]=a02*c+a22*-s,dest[3]=a03*c+a23*-s,dest[8]=a00*s+a20*c,dest[9]=a01*s+a21*c,dest[10]=a02*s+a22*c,dest[11]=a03*s+a23*c,dest},mat4.rotateZ=function(mat,angle,dest){var s=Math.sin(angle),c=Math.cos(angle),a00=mat[0],a01=mat[1],a02=mat[2],a03=mat[3],a10=mat[4],a11=mat[5],a12=mat[6],a13=mat[7];return dest?mat!==dest&&(dest[8]=mat[8],dest[9]=mat[9],dest[10]=mat[10],dest[11]=mat[11],dest[12]=mat[12],dest[13]=mat[13],dest[14]=mat[14],dest[15]=mat[15]):dest=mat,dest[0]=a00*c+a10*s,dest[1]=a01*c+a11*s,dest[2]=a02*c+a12*s,dest[3]=a03*c+a13*s,dest[4]=a00*-s+a10*c,dest[5]=a01*-s+a11*c,dest[6]=a02*-s+a12*c,dest[7]=a03*-s+a13*c,dest},mat4.frustum=function(left,right,bottom,top,near,far,dest){dest||(dest=mat4.create());var rl=right-left,tb=top-bottom,fn=far-near;return dest[0]=2*near/rl,dest[1]=0,dest[2]=0,dest[3]=0,dest[4]=0,dest[5]=2*near/tb,dest[6]=0,dest[7]=0,dest[8]=(right+left)/rl,dest[9]=(top+bottom)/tb,dest[10]=-(far+near)/fn,dest[11]=-1,dest[12]=0,dest[13]=0,dest[14]=-(far*near*2)/fn,dest[15]=0,dest},mat4.perspective=function(fovy,aspect,near,far,dest){var top=near*Math.tan(fovy*Math.PI/360),right=top*aspect;return mat4.frustum(-right,right,-top,top,near,far,dest)},mat4.ortho=function(left,right,bottom,top,near,far,dest){dest||(dest=mat4.create());var rl=right-left,tb=top-bottom,fn=far-near;return dest[0]=2/rl,dest[1]=0,dest[2]=0,dest[3]=0,dest[4]=0,dest[5]=2/tb,dest[6]=0,dest[7]=0,dest[8]=0,dest[9]=0,dest[10]=-2/fn,dest[11]=0,dest[12]=-(left+right)/rl,dest[13]=-(top+bottom)/tb,dest[14]=-(far+near)/fn,dest[15]=1,dest},mat4.lookAt=function(eye,center,up,dest){dest||(dest=mat4.create());var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return eyex===centerx&&eyey===centery&&eyez===centerz?mat4.identity(dest):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,len=1/Math.sqrt(z0*z0+z1*z1+z2*z2),z0*=len,z1*=len,z2*=len,x0=upy*z2-upz*z1,x1=upz*z0-upx*z2,x2=upx*z1-upy*z0,len=Math.sqrt(x0*x0+x1*x1+x2*x2),len?(len=1/len,x0*=len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,len=Math.sqrt(y0*y0+y1*y1+y2*y2),len?(len=1/len,y0*=len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),dest[0]=x0,dest[1]=y0,dest[2]=z0,dest[3]=0,dest[4]=x1,dest[5]=y1,dest[6]=z1,dest[7]=0,dest[8]=x2,dest[9]=y2,dest[10]=z2,dest[11]=0,dest[12]=-(x0*eyex+x1*eyey+x2*eyez),dest[13]=-(y0*eyex+y1*eyey+y2*eyez),dest[14]=-(z0*eyex+z1*eyey+z2*eyez),dest[15]=1,dest)},mat4.fromRotationTranslation=function(quat,vec,dest){dest||(dest=mat4.create());var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return dest[0]=1-(yy+zz),dest[1]=xy+wz,dest[2]=xz-wy,dest[3]=0,dest[4]=xy-wz,dest[5]=1-(xx+zz),dest[6]=yz+wx,dest[7]=0,dest[8]=xz+wy,dest[9]=yz-wx,dest[10]=1-(xx+yy),dest[11]=0,dest[12]=vec[0],dest[13]=vec[1],dest[14]=vec[2],dest[15]=1,dest},mat4.str=function(mat){return"["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+", "+mat[4]+", "+mat[5]+", "+mat[6]+", "+mat[7]+", "+mat[8]+", "+mat[9]+", "+mat[10]+", "+mat[11]+", "+mat[12]+", "+mat[13]+", "+mat[14]+", "+mat[15]+"]"};var quat4={};quat4.create=function(quat){var dest=new MatrixArray(4);return quat?(dest[0]=quat[0],dest[1]=quat[1],dest[2]=quat[2],dest[3]=quat[3]):dest[0]=dest[1]=dest[2]=dest[3]=0,dest},quat4.createFrom=function(x,y,z,w){var dest=new MatrixArray(4);return dest[0]=x,dest[1]=y,dest[2]=z,dest[3]=w,dest},quat4.set=function(quat,dest){return dest[0]=quat[0],dest[1]=quat[1],dest[2]=quat[2],dest[3]=quat[3],dest},quat4.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON&&Math.abs(a[2]-b[2])<FLOAT_EPSILON&&Math.abs(a[3]-b[3])<FLOAT_EPSILON},quat4.identity=function(dest){return dest||(dest=quat4.create()),dest[0]=0,dest[1]=0,dest[2]=0,dest[3]=1,dest};var identityQuat4=quat4.identity();quat4.calculateW=function(quat,dest){var x=quat[0],y=quat[1],z=quat[2];return dest&&quat!==dest?(dest[0]=x,dest[1]=y,dest[2]=z,dest[3]=-Math.sqrt(Math.abs(1-x*x-y*y-z*z)),dest):(quat[3]=-Math.sqrt(Math.abs(1-x*x-y*y-z*z)),quat)},quat4.dot=function(quat,quat2){return quat[0]*quat2[0]+quat[1]*quat2[1]+quat[2]*quat2[2]+quat[3]*quat2[3]},quat4.inverse=function(quat,dest){var q0=quat[0],q1=quat[1],q2=quat[2],q3=quat[3],dot=q0*q0+q1*q1+q2*q2+q3*q3,invDot=dot?1/dot:0;return dest&&quat!==dest?(dest[0]=-quat[0]*invDot,dest[1]=-quat[1]*invDot,dest[2]=-quat[2]*invDot,dest[3]=quat[3]*invDot,dest):(quat[0]*=-invDot,quat[1]*=-invDot,quat[2]*=-invDot,quat[3]*=invDot,quat)},quat4.conjugate=function(quat,dest){return dest&&quat!==dest?(dest[0]=-quat[0],dest[1]=-quat[1],dest[2]=-quat[2],dest[3]=quat[3],dest):(quat[0]*=-1,quat[1]*=-1,quat[2]*=-1,quat)},quat4.length=function(quat){var x=quat[0],y=quat[1],z=quat[2],w=quat[3];return Math.sqrt(x*x+y*y+z*z+w*w)},quat4.normalize=function(quat,dest){dest||(dest=quat);var x=quat[0],y=quat[1],z=quat[2],w=quat[3],len=Math.sqrt(x*x+y*y+z*z+w*w);return 0===len?(dest[0]=0,dest[1]=0,dest[2]=0,dest[3]=0,dest):(len=1/len,dest[0]=x*len,dest[1]=y*len,dest[2]=z*len,dest[3]=w*len,dest)},quat4.add=function(quat,quat2,dest){return dest&&quat!==dest?(dest[0]=quat[0]+quat2[0],dest[1]=quat[1]+quat2[1],dest[2]=quat[2]+quat2[2],dest[3]=quat[3]+quat2[3],dest):(quat[0]+=quat2[0],quat[1]+=quat2[1],quat[2]+=quat2[2],quat[3]+=quat2[3],quat)},quat4.multiply=function(quat,quat2,dest){dest||(dest=quat);var qax=quat[0],qay=quat[1],qaz=quat[2],qaw=quat[3],qbx=quat2[0],qby=quat2[1],qbz=quat2[2],qbw=quat2[3];return dest[0]=qax*qbw+qaw*qbx+qay*qbz-qaz*qby,dest[1]=qay*qbw+qaw*qby+qaz*qbx-qax*qbz,dest[2]=qaz*qbw+qaw*qbz+qax*qby-qay*qbx,dest[3]=qaw*qbw-qax*qbx-qay*qby-qaz*qbz,dest},quat4.multiplyVec3=function(quat,vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1],z=vec[2],qx=quat[0],qy=quat[1],qz=quat[2],qw=quat[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return dest[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,dest[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,dest[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,dest},quat4.scale=function(quat,val,dest){return dest&&quat!==dest?(dest[0]=quat[0]*val,dest[1]=quat[1]*val,dest[2]=quat[2]*val,dest[3]=quat[3]*val,dest):(quat[0]*=val,quat[1]*=val,quat[2]*=val,quat[3]*=val,quat)},quat4.toMat3=function(quat,dest){dest||(dest=mat3.create());var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return dest[0]=1-(yy+zz),dest[1]=xy+wz,dest[2]=xz-wy,dest[3]=xy-wz,dest[4]=1-(xx+zz),dest[5]=yz+wx,dest[6]=xz+wy,dest[7]=yz-wx,dest[8]=1-(xx+yy),dest},quat4.toMat4=function(quat,dest){dest||(dest=mat4.create());var x=quat[0],y=quat[1],z=quat[2],w=quat[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return dest[0]=1-(yy+zz),dest[1]=xy+wz,dest[2]=xz-wy,dest[3]=0,dest[4]=xy-wz,dest[5]=1-(xx+zz),dest[6]=yz+wx,dest[7]=0,dest[8]=xz+wy,dest[9]=yz-wx,dest[10]=1-(xx+yy),dest[11]=0,dest[12]=0,dest[13]=0,dest[14]=0,dest[15]=1,dest},quat4.slerp=function(quat,quat2,slerp,dest){dest||(dest=quat);var halfTheta,sinHalfTheta,ratioA,ratioB,cosHalfTheta=quat[0]*quat2[0]+quat[1]*quat2[1]+quat[2]*quat2[2]+quat[3]*quat2[3];return Math.abs(cosHalfTheta)>=1?(dest!==quat&&(dest[0]=quat[0],dest[1]=quat[1],dest[2]=quat[2],dest[3]=quat[3]),dest):(halfTheta=Math.acos(cosHalfTheta),sinHalfTheta=Math.sqrt(1-cosHalfTheta*cosHalfTheta),Math.abs(sinHalfTheta)<.001?(dest[0]=.5*quat[0]+.5*quat2[0],dest[1]=.5*quat[1]+.5*quat2[1],dest[2]=.5*quat[2]+.5*quat2[2],dest[3]=.5*quat[3]+.5*quat2[3],dest):(ratioA=Math.sin((1-slerp)*halfTheta)/sinHalfTheta,ratioB=Math.sin(slerp*halfTheta)/sinHalfTheta,dest[0]=quat[0]*ratioA+quat2[0]*ratioB,dest[1]=quat[1]*ratioA+quat2[1]*ratioB,dest[2]=quat[2]*ratioA+quat2[2]*ratioB,dest[3]=quat[3]*ratioA+quat2[3]*ratioB,dest))},quat4.fromRotationMatrix=function(mat,dest){dest||(dest=quat4.create());var fRoot,fTrace=mat[0]+mat[4]+mat[8];if(fTrace>0)fRoot=Math.sqrt(fTrace+1),dest[3]=.5*fRoot,fRoot=.5/fRoot,dest[0]=(mat[7]-mat[5])*fRoot,dest[1]=(mat[2]-mat[6])*fRoot,dest[2]=(mat[3]-mat[1])*fRoot;else{var s_iNext=quat4.fromRotationMatrix.s_iNext=quat4.fromRotationMatrix.s_iNext||[1,2,0],i=0;mat[4]>mat[0]&&(i=1),mat[8]>mat[3*i+i]&&(i=2);var j=s_iNext[i],k=s_iNext[j];fRoot=Math.sqrt(mat[3*i+i]-mat[3*j+j]-mat[3*k+k]+1),dest[i]=.5*fRoot,fRoot=.5/fRoot,dest[3]=(mat[3*k+j]-mat[3*j+k])*fRoot,dest[j]=(mat[3*j+i]+mat[3*i+j])*fRoot,dest[k]=(mat[3*k+i]+mat[3*i+k])*fRoot}return dest},mat3.toQuat4=quat4.fromRotationMatrix,function(){var mat=mat3.create();quat4.fromAxes=function(view,right,up,dest){return mat[0]=right[0],mat[3]=right[1],mat[6]=right[2],mat[1]=up[0],mat[4]=up[1],mat[7]=up[2],mat[2]=view[0],mat[5]=view[1],mat[8]=view[2],quat4.fromRotationMatrix(mat,dest)}}(),quat4.identity=function(dest){return dest||(dest=quat4.create()),dest[0]=0,dest[1]=0,dest[2]=0,dest[3]=1,dest},quat4.fromAngleAxis=function(angle,axis,dest){dest||(dest=quat4.create());var half=.5*angle,s=Math.sin(half);return dest[3]=Math.cos(half),dest[0]=s*axis[0],dest[1]=s*axis[1],dest[2]=s*axis[2],dest},quat4.toAngleAxis=function(src,dest){dest||(dest=src);var sqrlen=src[0]*src[0]+src[1]*src[1]+src[2]*src[2];if(sqrlen>0){dest[3]=2*Math.acos(src[3]);var invlen=glMath.invsqrt(sqrlen);dest[0]=src[0]*invlen,dest[1]=src[1]*invlen,dest[2]=src[2]*invlen}else dest[3]=0,dest[0]=1,dest[1]=0,dest[2]=0;return dest},quat4.str=function(quat){return"["+quat[0]+", "+quat[1]+", "+quat[2]+", "+quat[3]+"]"};var vec2={};vec2.create=function(vec){var dest=new MatrixArray(2);return vec?(dest[0]=vec[0],dest[1]=vec[1]):(dest[0]=0,dest[1]=0),dest},vec2.createFrom=function(x,y){var dest=new MatrixArray(2);return dest[0]=x,dest[1]=y,dest},vec2.add=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]+vecB[0],dest[1]=vecA[1]+vecB[1],dest},vec2.subtract=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]-vecB[0],dest[1]=vecA[1]-vecB[1],dest},vec2.multiply=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]*vecB[0],dest[1]=vecA[1]*vecB[1],dest},vec2.divide=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]/vecB[0],dest[1]=vecA[1]/vecB[1],dest},vec2.scale=function(vecA,scalar,dest){return dest||(dest=vecA),dest[0]=vecA[0]*scalar,dest[1]=vecA[1]*scalar,dest},vec2.dist=function(vecA,vecB){var x=vecB[0]-vecA[0],y=vecB[1]-vecA[1];return Math.sqrt(x*x+y*y)},vec2.set=function(vec,dest){return dest[0]=vec[0],dest[1]=vec[1],dest},vec2.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON},vec2.negate=function(vec,dest){return dest||(dest=vec),dest[0]=-vec[0],dest[1]=-vec[1],dest},vec2.normalize=function(vec,dest){dest||(dest=vec);var mag=vec[0]*vec[0]+vec[1]*vec[1];return mag>0?(mag=Math.sqrt(mag),dest[0]=vec[0]/mag,dest[1]=vec[1]/mag):dest[0]=dest[1]=0,dest},vec2.cross=function(vecA,vecB,dest){var z=vecA[0]*vecB[1]-vecA[1]*vecB[0];return dest?(dest[0]=dest[1]=0,dest[2]=z,dest):z},vec2.length=function(vec){var x=vec[0],y=vec[1];return Math.sqrt(x*x+y*y)},vec2.squaredLength=function(vec){var x=vec[0],y=vec[1];return x*x+y*y},vec2.dot=function(vecA,vecB){return vecA[0]*vecB[0]+vecA[1]*vecB[1]},vec2.direction=function(vecA,vecB,dest){dest||(dest=vecA);var x=vecA[0]-vecB[0],y=vecA[1]-vecB[1],len=x*x+y*y;return len?(len=1/Math.sqrt(len),dest[0]=x*len,dest[1]=y*len,dest):(dest[0]=0,dest[1]=0,dest[2]=0,dest)},vec2.lerp=function(vecA,vecB,lerp,dest){return dest||(dest=vecA),dest[0]=vecA[0]+lerp*(vecB[0]-vecA[0]),dest[1]=vecA[1]+lerp*(vecB[1]-vecA[1]),dest},vec2.str=function(vec){return"["+vec[0]+", "+vec[1]+"]"};var mat2={};mat2.create=function(src){var dest=new MatrixArray(4);return src?(dest[0]=src[0],dest[1]=src[1],dest[2]=src[2],dest[3]=src[3]):dest[0]=dest[1]=dest[2]=dest[3]=0,dest},mat2.createFrom=function(m00,m01,m10,m11){var dest=new MatrixArray(4);return dest[0]=m00,dest[1]=m01,dest[2]=m10,dest[3]=m11,dest},mat2.set=function(mat,dest){return dest[0]=mat[0],dest[1]=mat[1],dest[2]=mat[2],dest[3]=mat[3],dest},mat2.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON&&Math.abs(a[2]-b[2])<FLOAT_EPSILON&&Math.abs(a[3]-b[3])<FLOAT_EPSILON},mat2.identity=function(dest){return dest||(dest=mat2.create()),dest[0]=1,dest[1]=0,dest[2]=0,dest[3]=1,dest},mat2.transpose=function(mat,dest){if(!dest||mat===dest){var a00=mat[1];return mat[1]=mat[2],mat[2]=a00,mat}return dest[0]=mat[0],dest[1]=mat[2],dest[2]=mat[1],dest[3]=mat[3],dest},mat2.determinant=function(mat){return mat[0]*mat[3]-mat[2]*mat[1]},mat2.inverse=function(mat,dest){dest||(dest=mat);var a0=mat[0],a1=mat[1],a2=mat[2],a3=mat[3],det=a0*a3-a2*a1;return det?(det=1/det,dest[0]=a3*det,dest[1]=-a1*det,dest[2]=-a2*det,dest[3]=a0*det,dest):null},mat2.multiply=function(matA,matB,dest){dest||(dest=matA);var a11=matA[0],a12=matA[1],a21=matA[2],a22=matA[3];return dest[0]=a11*matB[0]+a12*matB[2],dest[1]=a11*matB[1]+a12*matB[3],dest[2]=a21*matB[0]+a22*matB[2],dest[3]=a21*matB[1]+a22*matB[3],dest},mat2.rotate=function(mat,angle,dest){dest||(dest=mat);var a11=mat[0],a12=mat[1],a21=mat[2],a22=mat[3],s=Math.sin(angle),c=Math.cos(angle);return dest[0]=a11*c+a12*s,dest[1]=a11*-s+a12*c,dest[2]=a21*c+a22*s,dest[3]=a21*-s+a22*c,dest},mat2.multiplyVec2=function(matrix,vec,dest){dest||(dest=vec);var x=vec[0],y=vec[1];return dest[0]=x*matrix[0]+y*matrix[1],dest[1]=x*matrix[2]+y*matrix[3],dest},mat2.scale=function(matrix,vec,dest){dest||(dest=matrix);var a11=matrix[0],a12=matrix[1],a21=matrix[2],a22=matrix[3],b11=vec[0],b22=vec[1];return dest[0]=a11*b11,dest[1]=a12*b22,dest[2]=a21*b11,dest[3]=a22*b22,dest},mat2.str=function(mat){return"["+mat[0]+", "+mat[1]+", "+mat[2]+", "+mat[3]+"]"};var vec4={};return vec4.create=function(vec){var dest=new MatrixArray(4);return vec?(dest[0]=vec[0],dest[1]=vec[1],dest[2]=vec[2],dest[3]=vec[3]):(dest[0]=0,dest[1]=0,dest[2]=0,dest[3]=0),dest},vec4.createFrom=function(x,y,z,w){var dest=new MatrixArray(4);return dest[0]=x,dest[1]=y,dest[2]=z,dest[3]=w,dest},vec4.add=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]+vecB[0],dest[1]=vecA[1]+vecB[1],dest[2]=vecA[2]+vecB[2],dest[3]=vecA[3]+vecB[3],dest},vec4.subtract=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]-vecB[0],dest[1]=vecA[1]-vecB[1],dest[2]=vecA[2]-vecB[2],dest[3]=vecA[3]-vecB[3],dest},vec4.multiply=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]*vecB[0],dest[1]=vecA[1]*vecB[1],dest[2]=vecA[2]*vecB[2],dest[3]=vecA[3]*vecB[3],dest},vec4.divide=function(vecA,vecB,dest){return dest||(dest=vecB),dest[0]=vecA[0]/vecB[0],dest[1]=vecA[1]/vecB[1],dest[2]=vecA[2]/vecB[2],dest[3]=vecA[3]/vecB[3],dest},vec4.scale=function(vecA,scalar,dest){return dest||(dest=vecA),dest[0]=vecA[0]*scalar,dest[1]=vecA[1]*scalar,dest[2]=vecA[2]*scalar,dest[3]=vecA[3]*scalar,dest},vec4.set=function(vec,dest){return dest[0]=vec[0],dest[1]=vec[1],dest[2]=vec[2],dest[3]=vec[3],dest},vec4.equal=function(a,b){return a===b||Math.abs(a[0]-b[0])<FLOAT_EPSILON&&Math.abs(a[1]-b[1])<FLOAT_EPSILON&&Math.abs(a[2]-b[2])<FLOAT_EPSILON&&Math.abs(a[3]-b[3])<FLOAT_EPSILON},vec4.negate=function(vec,dest){return dest||(dest=vec),dest[0]=-vec[0],dest[1]=-vec[1],dest[2]=-vec[2],dest[3]=-vec[3],dest},vec4.length=function(vec){var x=vec[0],y=vec[1],z=vec[2],w=vec[3];return Math.sqrt(x*x+y*y+z*z+w*w)},vec4.squaredLength=function(vec){var x=vec[0],y=vec[1],z=vec[2],w=vec[3];return x*x+y*y+z*z+w*w},vec4.lerp=function(vecA,vecB,lerp,dest){return dest||(dest=vecA),dest[0]=vecA[0]+lerp*(vecB[0]-vecA[0]),dest[1]=vecA[1]+lerp*(vecB[1]-vecA[1]),dest[2]=vecA[2]+lerp*(vecB[2]-vecA[2]),dest[3]=vecA[3]+lerp*(vecB[3]-vecA[3]),dest},vec4.str=function(vec){return"["+vec[0]+", "+vec[1]+", "+vec[2]+", "+vec[3]+"]"},root&&(root.glMatrixArrayType=MatrixArray,root.MatrixArray=MatrixArray,root.setMatrixArrayType=setMatrixArrayType,root.determineMatrixArrayType=determineMatrixArrayType,root.glMath=glMath,root.vec2=vec2,root.vec3=vec3,root.vec4=vec4,root.mat2=mat2,root.mat3=mat3,root.mat4=mat4,root.quat4=quat4),{glMatrixArrayType:MatrixArray,MatrixArray:MatrixArray,setMatrixArrayType:setMatrixArrayType,determineMatrixArrayType:determineMatrixArrayType,glMath:glMath,vec2:vec2,vec3:vec3,vec4:vec4,mat2:mat2,mat3:mat3,mat4:mat4,quat4:quat4}}),ChemDoodle.animations=function(window){"use strict";var ext={};return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1e3/60)}}(),ext.requestInterval=function(fn,delay){function loop(){var current=(new Date).getTime(),delta=current-start;delta>=delay&&(fn.call(),start=(new Date).getTime()),handle.value=window.requestAnimFrame(loop)}if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(fn,delay);var start=(new Date).getTime(),handle=new Object;return handle.value=window.requestAnimFrame(loop),handle},ext.clearRequestInterval=function(handle){window.cancelAnimationFrame?window.cancelAnimationFrame(handle.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(handle.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(handle.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(handle.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(handle.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(handle.value):clearInterval(handle)},ext.requestTimeout=function(fn,delay){function loop(){var current=(new Date).getTime(),delta=current-start;delta>=delay?fn.call():handle.value=window.requestAnimFrame(loop)}if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(fn,delay);var start=(new Date).getTime(),handle=new Object;return handle.value=window.requestAnimFrame(loop),handle},ext.clearRequestTimeout=function(handle){window.cancelAnimationFrame?window.cancelAnimationFrame(handle.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(handle.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(handle.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(handle.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(handle.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(handle.value):clearTimeout(handle)},ext}(window),ChemDoodle.extensions=function(structures,v3,m){"use strict";var ext={};return ext.stringStartsWith=function(str,match){return str.slice(0,match.length)===match},ext.vec3AngleFrom=function(v1,v2){var length1=v3.length(v1),length2=v3.length(v2),dot=v3.dot(v1,v2),cosine=dot/length1/length2;return m.acos(cosine)},ext.contextHashTo=function(ctx,xs,ys,xt,yt,width,spacing){for(var travelled=0,dist=new structures.Point(xs,ys).distance(new structures.Point(xt,yt)),space=!1,lastX=xs,lastY=ys,difX=xt-xs,difY=yt-ys;dist>travelled;){if(space){if(travelled+spacing>dist){ctx.moveTo(xt,yt);break}var percent=spacing/dist;lastX+=percent*difX,lastY+=percent*difY,ctx.moveTo(lastX,lastY),travelled+=spacing}else{if(travelled+width>dist){ctx.lineTo(xt,yt);break}var percent=width/dist;lastX+=percent*difX,lastY+=percent*difY,ctx.lineTo(lastX,lastY),travelled+=width}space=!space}},ext.contextRoundRect=function(ctx,x,y,width,height,radius){ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath()},ext.contextEllipse=function(ctx,x,y,w,h){var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;ctx.beginPath(),ctx.moveTo(x,ym),ctx.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),ctx.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),ctx.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),ctx.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),ctx.closePath()},ext.getFontString=function(size,families,bold,italic){var sb=[];bold&&sb.push("bold "),italic&&sb.push("italic "),sb.push(size+"px ");for(var i=0,ii=families.length;ii>i;i++){var use=families[i];-1!==use.indexOf(" ")&&(use='"'+use+'"'),sb.push((0!==i?",":"")+use)}return sb.join("")},ext}(ChemDoodle.structures,ChemDoodle.lib.vec3,Math),ChemDoodle.math=function(c,extensions,structures,q,m){"use strict";var pack={},namedColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return pack.angleBetweenLargest=function(angles){if(0===angles.length)return{angle:0,largest:2*m.PI};if(1===angles.length)return{angle:angles[0]+m.PI,largest:2*m.PI};for(var largest=0,angle=0,i=0,ii=angles.length-1;ii>i;i++){var dif=angles[i+1]-angles[i];dif>largest&&(largest=dif,angle=(angles[i+1]+angles[i])/2)}var last=angles[0]+2*m.PI-angles[angles.length-1];return last>largest&&(angle=angles[0]-last/2,largest=last,0>angle&&(angle+=2*m.PI)),{angle:angle,largest:largest}},pack.isBetween=function(x,left,right){if(left>right){var tmp=left;left=right,right=tmp}return x>=left&&right>=x},q(document).ready(function(){c&&c.iChemLabs&&c.iChemLabs.checkForUpdates&&c.iChemLabs.checkForUpdates({})}),pack.getRGB=function(color,multiplier){var err=[0,0,0];if(namedColors[color.toLowerCase()]&&(color=namedColors[color.toLowerCase()]),"#"===color.charAt(0))return 4===color.length&&(color="#"+color.charAt(1)+color.charAt(1)+color.charAt(2)+color.charAt(2)+color.charAt(3)+color.charAt(3)),[parseInt(color.substring(1,3),16)/255*multiplier,parseInt(color.substring(3,5),16)/255*multiplier,parseInt(color.substring(5,7),16)/255*multiplier];if(extensions.stringStartsWith(color,"rgb")){var cs=color.replace(/rgb\(|\)/g,"").split(",");return 3!==cs.length?err:[parseInt(cs[0])/255*multiplier,parseInt(cs[1])/255*multiplier,parseInt(cs[2])/255*multiplier]}return err},pack.idx2color=function(value){for(var hex=value.toString(16),i=0,ii=6-hex.length;ii>i;i++)hex="0"+hex;return"#"+hex},pack.distanceFromPointToLineInclusive=function(p,l1,l2){var length=l1.distance(l2),angle=l1.angle(l2),angleDif=m.PI/2-angle,newAngleP=l1.angle(p)+angleDif,pDist=l1.distance(p),pcopRot=new structures.Point(pDist*m.cos(newAngleP),-pDist*m.sin(newAngleP));return pack.isBetween(-pcopRot.y,0,length)?m.abs(pcopRot.x):-1},pack.calculateDistanceInterior=function(to,from,r){if(this.isBetween(from.x,r.x,r.x+r.w)&&this.isBetween(from.y,r.y,r.y+r.w))return to.distance(from);var lines=[];lines.push({x1:r.x,y1:r.y,x2:r.x+r.w,y2:r.y}),lines.push({x1:r.x,y1:r.y+r.h,x2:r.x+r.w,y2:r.y+r.h}),lines.push({x1:r.x,y1:r.y,x2:r.x,y2:r.y+r.h}),lines.push({x1:r.x+r.w,y1:r.y,x2:r.x+r.w,y2:r.y+r.h});for(var intersections=[],i=0;4>i;i++){var l=lines[i],p=this.intersectLines(from.x,from.y,to.x,to.y,l.x1,l.y1,l.x2,l.y2);p&&intersections.push(p)}if(0===intersections.length)return 0;for(var max=0,i=0,ii=intersections.length;ii>i;i++){var p=intersections[i],dx=to.x-p.x,dy=to.y-p.y;max=m.max(max,m.sqrt(dx*dx+dy*dy))}return max},pack.intersectLines=function(ax,ay,bx,by,cx,cy,dx,dy){bx-=ax,by-=ay,dx-=cx,dy-=cy;var denominator=by*dx-bx*dy;if(0===denominator)return!1;var r=(dy*(ax-cx)-dx*(ay-cy))/denominator,s=(by*(ax-cx)-bx*(ay-cy))/denominator;return s>=0&&1>=s&&r>=0&&1>=r?{x:ax+r*bx,y:ay+r*by}:!1},pack.hsl2rgb=function(h,s,l){var r,g,b,hue2rgb=function(p,q,t){return 0>t?t+=1:t>1&&(t-=1),1/6>t?p+6*(q-p)*t:.5>t?q:2/3>t?p+(q-p)*(2/3-t)*6:p};if(0===s)r=g=b=l;else{var q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return[255*r,255*g,255*b]},pack.isPointInPoly=function(poly,pt){for(var c=!1,i=-1,l=poly.length,j=l-1;++i<l;j=i)(poly[i].y<=pt.y&&pt.y<poly[j].y||poly[j].y<=pt.y&&pt.y<poly[i].y)&&pt.x<(poly[j].x-poly[i].x)*(pt.y-poly[i].y)/(poly[j].y-poly[i].y)+poly[i].x&&(c=!c);return c},pack.clamp=function(value,min,max){return min>value?min:value>max?max:value},pack.rainbowAt=function(i,ii,colors){colors.length<1?colors.push("#000000","#FFFFFF"):colors.length<2&&colors.push("#FFFFFF");var step=ii/(colors.length-1),j=m.floor(i/step),t=(i-j*step)/step,startColor=pack.getRGB(colors[j],1),endColor=pack.getRGB(colors[j+1],1),lerpColor=[255*(startColor[0]+(endColor[0]-startColor[0])*t),255*(startColor[1]+(endColor[1]-startColor[1])*t),255*(startColor[2]+(endColor[2]-startColor[2])*t)];return"rgb("+lerpColor.join(",")+")"},pack.angleBounds=function(angle,convertToDegrees,limitToPi){for(var full=2*m.PI;0>angle;)angle+=full;for(;angle>full;)angle-=full;return limitToPi&&angle>m.PI&&(angle=2*m.PI-angle),convertToDegrees&&(angle=180*angle/m.PI),angle},pack}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.lib.jQuery,Math),function(math,m){"use strict";math.Bounds=function(){};var _=math.Bounds.prototype;_.minX=_.minY=_.minZ=1/0,_.maxX=_.maxY=_.maxZ=-(1/0),_.expand=function(x1,y1,x2,y2){x1 instanceof math.Bounds?(this.minX=m.min(this.minX,x1.minX),this.minY=m.min(this.minY,x1.minY),this.maxX=m.max(this.maxX,x1.maxX),this.maxY=m.max(this.maxY,x1.maxY),x1.maxZ!==1/0&&(this.minZ=m.min(this.minZ,x1.minZ),this.maxZ=m.max(this.maxZ,x1.maxZ))):(this.minX=m.min(this.minX,x1),this.maxX=m.max(this.maxX,x1),this.minY=m.min(this.minY,y1),this.maxY=m.max(this.maxY,y1),void 0!==x2&&void 0!==y2&&(this.minX=m.min(this.minX,x2),this.maxX=m.max(this.maxX,x2),this.minY=m.min(this.minY,y2),this.maxY=m.max(this.maxY,y2)))},_.expand3D=function(x1,y1,z1,x2,y2,z2){this.minX=m.min(this.minX,x1),this.maxX=m.max(this.maxX,x1),this.minY=m.min(this.minY,y1),this.maxY=m.max(this.maxY,y1),this.minZ=m.min(this.minZ,z1),this.maxZ=m.max(this.maxZ,z1),void 0!==x2&&void 0!==y2&&void 0!==z2&&(this.minX=m.min(this.minX,x2),this.maxX=m.max(this.maxX,x2),this.minY=m.min(this.minY,y2),this.maxY=m.max(this.maxY,y2),this.minZ=m.min(this.minZ,z2),this.maxZ=m.max(this.maxZ,z2))}}(ChemDoodle.math,Math),function(math){"use strict";function sgn(x){return 0==x?0:x>0?1:-1}var Vectors={subtract:function(v1,v2){return{x:v1.x-v2.x,y:v1.y-v2.y}},dotProduct:function(v1,v2){return v1.x*v2.x+v1.y*v2.y},square:function(v){return Math.sqrt(v.x*v.x+v.y*v.y)},scale:function(v,s){return{x:v.x*s,y:v.y*s}}},maxRecursion=64,flatnessTolerance=Math.pow(2,-maxRecursion-1),_distanceFromCurve=function(point,curve){for(var candidates=[],w=_convertToBezier(point,curve),degree=curve.length-1,higherDegree=2*degree-1,numSolutions=_findRoots(w,higherDegree,candidates,0),v=Vectors.subtract(point,curve[0]),dist=Vectors.square(v),t=0,i=0;numSolutions>i;i++){v=Vectors.subtract(point,_bezier(curve,degree,candidates[i],null,null));var newDist=Vectors.square(v);dist>newDist&&(dist=newDist,t=candidates[i])}return v=Vectors.subtract(point,curve[degree]),newDist=Vectors.square(v),dist>newDist&&(dist=newDist,t=1),{location:t,distance:dist}},_nearestPointOnCurve=function(point,curve){var td=_distanceFromCurve(point,curve);return{point:_bezier(curve,curve.length-1,td.location,null,null),location:td.location}},_convertToBezier=function(point,curve){for(var degree=curve.length-1,higherDegree=2*degree-1,c=[],d=[],cdTable=[],w=[],z=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],i=0;degree>=i;i++)c[i]=Vectors.subtract(curve[i],point);for(var i=0;degree-1>=i;i++)d[i]=Vectors.subtract(curve[i+1],curve[i]),d[i]=Vectors.scale(d[i],3);for(var row=0;degree-1>=row;row++)for(var column=0;degree>=column;column++)cdTable[row]||(cdTable[row]=[]),cdTable[row][column]=Vectors.dotProduct(d[row],c[column]);for(i=0;higherDegree>=i;i++)w[i]||(w[i]=[]),w[i].y=0,w[i].x=parseFloat(i)/higherDegree;for(var n=degree,m=degree-1,k=0;n+m>=k;k++){var lb=Math.max(0,k-m),ub=Math.min(k,n);for(i=lb;ub>=i;i++){var j=k-i;w[i+j].y+=cdTable[j][i]*z[j][i]}}return w},_findRoots=function(w,degree,t,depth){var left_count,right_count,left=[],right=[],left_t=[],right_t=[];switch(_getCrossingCount(w,degree)){case 0:return 0;case 1:if(depth>=maxRecursion)return t[0]=(w[0].x+w[degree].x)/2,1;if(_isFlatEnough(w,degree))return t[0]=_computeXIntercept(w,degree),1}_bezier(w,degree,.5,left,right),left_count=_findRoots(left,degree,left_t,depth+1),
right_count=_findRoots(right,degree,right_t,depth+1);for(var i=0;left_count>i;i++)t[i]=left_t[i];for(var i=0;right_count>i;i++)t[i+left_count]=right_t[i];return left_count+right_count},_getCrossingCount=function(curve,degree){var sign,old_sign,n_crossings=0;sign=old_sign=sgn(curve[0].y);for(var i=1;degree>=i;i++)sign=sgn(curve[i].y),sign!=old_sign&&n_crossings++,old_sign=sign;return n_crossings},_isFlatEnough=function(curve,degree){var error,intercept_1,intercept_2,left_intercept,right_intercept,a,b,c,det,dInv,a1,b1,c1,a2,b2,c2;a=curve[0].y-curve[degree].y,b=curve[degree].x-curve[0].x,c=curve[0].x*curve[degree].y-curve[degree].x*curve[0].y;for(var max_distance_above=0,max_distance_below=0,i=1;degree>i;i++){var value=a*curve[i].x+b*curve[i].y+c;value>max_distance_above?max_distance_above=value:max_distance_below>value&&(max_distance_below=value)}return a1=0,b1=1,c1=0,a2=a,b2=b,c2=c-max_distance_above,det=a1*b2-a2*b1,dInv=1/det,intercept_1=(b1*c2-b2*c1)*dInv,a2=a,b2=b,c2=c-max_distance_below,det=a1*b2-a2*b1,dInv=1/det,intercept_2=(b1*c2-b2*c1)*dInv,left_intercept=Math.min(intercept_1,intercept_2),right_intercept=Math.max(intercept_1,intercept_2),error=right_intercept-left_intercept,flatnessTolerance>error?1:0},_computeXIntercept=function(curve,degree){var XLK=1,YLK=0,XNM=curve[degree].x-curve[0].x,YNM=curve[degree].y-curve[0].y,XMK=curve[0].x-0,YMK=curve[0].y-0,det=XNM*YLK-YNM*XLK,detInv=1/det,S=(XNM*YMK-YNM*XMK)*detInv;return 0+XLK*S},_bezier=function(curve,degree,t,left,right){for(var temp=[[]],j=0;degree>=j;j++)temp[0][j]=curve[j];for(var i=1;degree>=i;i++)for(var j=0;degree-i>=j;j++)temp[i]||(temp[i]=[]),temp[i][j]||(temp[i][j]={}),temp[i][j].x=(1-t)*temp[i-1][j].x+t*temp[i-1][j+1].x,temp[i][j].y=(1-t)*temp[i-1][j].y+t*temp[i-1][j+1].y;if(null!=left)for(j=0;degree>=j;j++)left[j]=temp[j][0];if(null!=right)for(j=0;degree>=j;j++)right[j]=temp[degree-j][j];return temp[degree][0]},_curveFunctionCache={},_getCurveFunctions=function(order){var fns=_curveFunctionCache[order];if(!fns){fns=[];var f_term=function(){return function(t){return Math.pow(t,order)}},l_term=function(){return function(t){return Math.pow(1-t,order)}},c_term=function(c){return function(t){return c}},t_term=function(){return function(t){return t}},one_minus_t_term=function(){return function(t){return 1-t}},_termFunc=function(terms){return function(t){for(var p=1,i=0;i<terms.length;i++)p*=terms[i](t);return p}};fns.push(new f_term);for(var i=1;order>i;i++){for(var terms=[new c_term(order)],j=0;order-i>j;j++)terms.push(new t_term);for(var j=0;i>j;j++)terms.push(new one_minus_t_term);fns.push(new _termFunc(terms))}fns.push(new l_term),_curveFunctionCache[order]=fns}return fns},_pointOnPath=function(curve,location){for(var cc=_getCurveFunctions(curve.length-1),_x=0,_y=0,i=0;i<curve.length;i++)_x+=curve[i].x*cc[i](location),_y+=curve[i].y*cc[i](location);return{x:_x,y:_y}},_dist=function(p1,p2){return Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2))},_pointAlongPath=function(curve,location,distance){for(var prev=_pointOnPath(curve,location),tally=0,curLoc=location,direction=distance>0?1:-1,cur=null;tally<Math.abs(distance);)curLoc+=.005*direction,cur=_pointOnPath(curve,curLoc),tally+=_dist(cur,prev),prev=cur;return{point:cur,location:curLoc}},_length=function(curve){for(var prev=_pointOnPath(curve,0),tally=0,curLoc=0,direction=1,cur=null;1>curLoc;)curLoc+=.005*direction,cur=_pointOnPath(curve,curLoc),tally+=_dist(cur,prev),prev=cur;return tally},_pointAlongPathFrom=function(curve,location,distance){return _pointAlongPath(curve,location,distance).point},_locationAlongPathFrom=function(curve,location,distance){return _pointAlongPath(curve,location,distance).location},_gradientAtPoint=function(curve,location){var p1=_pointOnPath(curve,location),p2=_pointOnPath(curve.slice(0,curve.length-1),location),dy=p2.y-p1.y,dx=p2.x-p1.x;return 0==dy?1/0:Math.atan(dy/dx)},_gradientAtPointAlongPathFrom=function(curve,location,distance){var p=_pointAlongPath(curve,location,distance);return p.location>1&&(p.location=1),p.location<0&&(p.location=0),_gradientAtPoint(curve,p.location)},_perpendicularToPathAt=function(curve,location,length,distance){distance=null==distance?0:distance;var p=_pointAlongPath(curve,location,distance),m=_gradientAtPoint(curve,p.location),_theta2=Math.atan(-1/m),y=length/2*Math.sin(_theta2),x=length/2*Math.cos(_theta2);return[{x:p.point.x+x,y:p.point.y+y},{x:p.point.x-x,y:p.point.y-y}]};ChemDoodle.math.jsBezier={distanceFromCurve:_distanceFromCurve,gradientAtPoint:_gradientAtPoint,gradientAtPointAlongCurveFrom:_gradientAtPointAlongPathFrom,nearestPointOnCurve:_nearestPointOnCurve,pointOnCurve:_pointOnPath,pointAlongCurveFrom:_pointAlongPathFrom,perpendicularToCurveAt:_perpendicularToPathAt,locationAlongCurveFrom:_locationAlongPathFrom,getLength:_length}}(ChemDoodle.math),ChemDoodle.featureDetection=function(iChemLabs,q,document,window){"use strict";var features={};return features.supports_canvas=function(){return!!document.createElement("canvas").getContext},features.supports_canvas_text=function(){if(!features.supports_canvas())return!1;var dummy_canvas=document.createElement("canvas"),context=dummy_canvas.getContext("2d");return"function"==typeof context.fillText},features.supports_webgl=function(){var dummy_canvas=document.createElement("canvas");try{if(dummy_canvas.getContext("webgl"))return!0;if(dummy_canvas.getContext("experimental-webgl"))return!0}catch(b){}return!1},features.supports_xhr2=function(){return q.support.cors},features.supports_touch=function(){return"ontouchstart"in window&&navigator.userAgent.match(/iPhone|iPad|iPod|Android|BlackBerry|BB10/i)},features.supports_gesture=function(){return"ongesturestart"in window},features}(ChemDoodle.iChemLabs,ChemDoodle.lib.jQuery,document,window),ChemDoodle.SYMBOLS=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Uut","Uuq","Uup","Uuh","Uus","Uuo"],ChemDoodle.ELEMENT=function(SYMBOLS){"use strict";function Element(symbol,name,atomicNumber,addH,color,covalentRadius,vdWRadius,valency,mass){this.symbol=symbol,this.name=name,this.atomicNumber=atomicNumber,this.addH=addH,this.jmolColor=this.pymolColor=color,this.covalentRadius=covalentRadius,this.vdWRadius=vdWRadius,this.valency=valency,this.mass=mass}var E=[];return E.H=new Element("H","Hydrogen",1,!1,"#FFFFFF",.31,1.2,1,1),E.He=new Element("He","Helium",2,!1,"#D9FFFF",.28,1.4,0,4),E.Li=new Element("Li","Lithium",3,!1,"#CC80FF",1.28,1.82,1,7),E.Be=new Element("Be","Beryllium",4,!1,"#C2FF00",.96,0,2,9),E.B=new Element("B","Boron",5,!0,"#FFB5B5",.84,0,3,11),E.C=new Element("C","Carbon",6,!0,"#909090",.76,1.7,4,12),E.N=new Element("N","Nitrogen",7,!0,"#3050F8",.71,1.55,3,14),E.O=new Element("O","Oxygen",8,!0,"#FF0D0D",.66,1.52,2,16),E.F=new Element("F","Fluorine",9,!0,"#90E050",.57,1.47,1,19),E.Ne=new Element("Ne","Neon",10,!1,"#B3E3F5",.58,1.54,0,20),E.Na=new Element("Na","Sodium",11,!1,"#AB5CF2",1.66,2.27,1,23),E.Mg=new Element("Mg","Magnesium",12,!1,"#8AFF00",1.41,1.73,0,24),E.Al=new Element("Al","Aluminum",13,!1,"#BFA6A6",1.21,0,0,27),E.Si=new Element("Si","Silicon",14,!0,"#F0C8A0",1.11,2.1,4,28),E.P=new Element("P","Phosphorus",15,!0,"#FF8000",1.07,1.8,3,31),E.S=new Element("S","Sulfur",16,!0,"#FFFF30",1.05,1.8,2,32),E.Cl=new Element("Cl","Chlorine",17,!0,"#1FF01F",1.02,1.75,1,35),E.Ar=new Element("Ar","Argon",18,!1,"#80D1E3",1.06,1.88,0,40),E.K=new Element("K","Potassium",19,!1,"#8F40D4",2.03,2.75,0,39),E.Ca=new Element("Ca","Calcium",20,!1,"#3DFF00",1.76,0,0,40),E.Sc=new Element("Sc","Scandium",21,!1,"#E6E6E6",1.7,0,0,45),E.Ti=new Element("Ti","Titanium",22,!1,"#BFC2C7",1.6,0,1,48),E.V=new Element("V","Vanadium",23,!1,"#A6A6AB",1.53,0,1,51),E.Cr=new Element("Cr","Chromium",24,!1,"#8A99C7",1.39,0,2,52),E.Mn=new Element("Mn","Manganese",25,!1,"#9C7AC7",1.39,0,3,55),E.Fe=new Element("Fe","Iron",26,!1,"#E06633",1.32,0,2,56),E.Co=new Element("Co","Cobalt",27,!1,"#F090A0",1.26,0,1,59),E.Ni=new Element("Ni","Nickel",28,!1,"#50D050",1.24,1.63,1,58),E.Cu=new Element("Cu","Copper",29,!1,"#C88033",1.32,1.4,0,63),E.Zn=new Element("Zn","Zinc",30,!1,"#7D80B0",1.22,1.39,0,64),E.Ga=new Element("Ga","Gallium",31,!1,"#C28F8F",1.22,1.87,0,69),E.Ge=new Element("Ge","Germanium",32,!1,"#668F8F",1.2,0,4,74),E.As=new Element("As","Arsenic",33,!0,"#BD80E3",1.19,1.85,3,75),E.Se=new Element("Se","Selenium",34,!0,"#FFA100",1.2,1.9,2,80),E.Br=new Element("Br","Bromine",35,!0,"#A62929",1.2,1.85,1,79),E.Kr=new Element("Kr","Krypton",36,!1,"#5CB8D1",1.16,2.02,0,84),E.Rb=new Element("Rb","Rubidium",37,!1,"#702EB0",2.2,0,0,85),E.Sr=new Element("Sr","Strontium",38,!1,"#00FF00",1.95,0,0,88),E.Y=new Element("Y","Yttrium",39,!1,"#94FFFF",1.9,0,0,89),E.Zr=new Element("Zr","Zirconium",40,!1,"#94E0E0",1.75,0,0,90),E.Nb=new Element("Nb","Niobium",41,!1,"#73C2C9",1.64,0,1,93),E.Mo=new Element("Mo","Molybdenum",42,!1,"#54B5B5",1.54,0,2,98),E.Tc=new Element("Tc","Technetium",43,!1,"#3B9E9E",1.47,0,3,0),E.Ru=new Element("Ru","Ruthenium",44,!1,"#248F8F",1.46,0,2,102),E.Rh=new Element("Rh","Rhodium",45,!1,"#0A7D8C",1.42,0,1,103),E.Pd=new Element("Pd","Palladium",46,!1,"#006985",1.39,1.63,0,106),E.Ag=new Element("Ag","Silver",47,!1,"#C0C0C0",1.45,1.72,0,107),E.Cd=new Element("Cd","Cadmium",48,!1,"#FFD98F",1.44,1.58,0,114),E.In=new Element("In","Indium",49,!1,"#A67573",1.42,1.93,0,115),E.Sn=new Element("Sn","Tin",50,!1,"#668080",1.39,2.17,4,120),E.Sb=new Element("Sb","Antimony",51,!1,"#9E63B5",1.39,0,3,121),E.Te=new Element("Te","Tellurium",52,!0,"#D47A00",1.38,2.06,2,130),E.I=new Element("I","Iodine",53,!0,"#940094",1.39,1.98,1,127),E.Xe=new Element("Xe","Xenon",54,!1,"#429EB0",1.4,2.16,0,132),E.Cs=new Element("Cs","Cesium",55,!1,"#57178F",2.44,0,0,133),E.Ba=new Element("Ba","Barium",56,!1,"#00C900",2.15,0,0,138),E.La=new Element("La","Lanthanum",57,!1,"#70D4FF",2.07,0,0,139),E.Ce=new Element("Ce","Cerium",58,!1,"#FFFFC7",2.04,0,0,140),E.Pr=new Element("Pr","Praseodymium",59,!1,"#D9FFC7",2.03,0,0,141),E.Nd=new Element("Nd","Neodymium",60,!1,"#C7FFC7",2.01,0,0,142),E.Pm=new Element("Pm","Promethium",61,!1,"#A3FFC7",1.99,0,0,0),E.Sm=new Element("Sm","Samarium",62,!1,"#8FFFC7",1.98,0,0,152),E.Eu=new Element("Eu","Europium",63,!1,"#61FFC7",1.98,0,0,153),E.Gd=new Element("Gd","Gadolinium",64,!1,"#45FFC7",1.96,0,0,158),E.Tb=new Element("Tb","Terbium",65,!1,"#30FFC7",1.94,0,0,159),E.Dy=new Element("Dy","Dysprosium",66,!1,"#1FFFC7",1.92,0,0,164),E.Ho=new Element("Ho","Holmium",67,!1,"#00FF9C",1.92,0,0,165),E.Er=new Element("Er","Erbium",68,!1,"#00E675",1.89,0,0,166),E.Tm=new Element("Tm","Thulium",69,!1,"#00D452",1.9,0,0,169),E.Yb=new Element("Yb","Ytterbium",70,!1,"#00BF38",1.87,0,0,174),E.Lu=new Element("Lu","Lutetium",71,!1,"#00AB24",1.87,0,0,175),E.Hf=new Element("Hf","Hafnium",72,!1,"#4DC2FF",1.75,0,0,180),E.Ta=new Element("Ta","Tantalum",73,!1,"#4DA6FF",1.7,0,1,181),E.W=new Element("W","Tungsten",74,!1,"#2194D6",1.62,0,2,184),E.Re=new Element("Re","Rhenium",75,!1,"#267DAB",1.51,0,3,187),E.Os=new Element("Os","Osmium",76,!1,"#266696",1.44,0,2,192),E.Ir=new Element("Ir","Iridium",77,!1,"#175487",1.41,0,3,193),E.Pt=new Element("Pt","Platinum",78,!1,"#D0D0E0",1.36,1.75,0,195),E.Au=new Element("Au","Gold",79,!1,"#FFD123",1.36,1.66,1,197),E.Hg=new Element("Hg","Mercury",80,!1,"#B8B8D0",1.32,1.55,0,202),E.Tl=new Element("Tl","Thallium",81,!1,"#A6544D",1.45,1.96,0,205),E.Pb=new Element("Pb","Lead",82,!1,"#575961",1.46,2.02,4,208),E.Bi=new Element("Bi","Bismuth",83,!1,"#9E4FB5",1.48,0,3,209),E.Po=new Element("Po","Polonium",84,!1,"#AB5C00",1.4,0,2,0),E.At=new Element("At","Astatine",85,!0,"#754F45",1.5,0,1,0),E.Rn=new Element("Rn","Radon",86,!1,"#428296",1.5,0,0,0),E.Fr=new Element("Fr","Francium",87,!1,"#420066",2.6,0,0,0),E.Ra=new Element("Ra","Radium",88,!1,"#007D00",2.21,0,0,0),E.Ac=new Element("Ac","Actinium",89,!1,"#70ABFA",2.15,0,0,0),E.Th=new Element("Th","Thorium",90,!1,"#00BAFF",2.06,0,0,232),E.Pa=new Element("Pa","Protactinium",91,!1,"#00A1FF",2,0,0,231),E.U=new Element("U","Uranium",92,!1,"#008FFF",1.96,1.86,0,238),E.Np=new Element("Np","Neptunium",93,!1,"#0080FF",1.9,0,0,0),E.Pu=new Element("Pu","Plutonium",94,!1,"#006BFF",1.87,0,0,0),E.Am=new Element("Am","Americium",95,!1,"#545CF2",1.8,0,0,0),E.Cm=new Element("Cm","Curium",96,!1,"#785CE3",1.69,0,0,0),E.Bk=new Element("Bk","Berkelium",97,!1,"#8A4FE3",0,0,0,0),E.Cf=new Element("Cf","Californium",98,!1,"#A136D4",0,0,0,0),E.Es=new Element("Es","Einsteinium",99,!1,"#B31FD4",0,0,0,0),E.Fm=new Element("Fm","Fermium",100,!1,"#B31FBA",0,0,0,0),E.Md=new Element("Md","Mendelevium",101,!1,"#B30DA6",0,0,0,0),E.No=new Element("No","Nobelium",102,!1,"#BD0D87",0,0,0,0),E.Lr=new Element("Lr","Lawrencium",103,!1,"#C70066",0,0,0,0),E.Rf=new Element("Rf","Rutherfordium",104,!1,"#CC0059",0,0,0,0),E.Db=new Element("Db","Dubnium",105,!1,"#D1004F",0,0,0,0),E.Sg=new Element("Sg","Seaborgium",106,!1,"#D90045",0,0,0,0),E.Bh=new Element("Bh","Bohrium",107,!1,"#E00038",0,0,0,0),E.Hs=new Element("Hs","Hassium",108,!1,"#E6002E",0,0,0,0),E.Mt=new Element("Mt","Meitnerium",109,!1,"#EB0026",0,0,0,0),E.Ds=new Element("Ds","Darmstadtium",110,!1,"#000000",0,0,0,0),E.Rg=new Element("Rg","Roentgenium",111,!1,"#000000",0,0,0,0),E.Cn=new Element("Cn","Copernicium",112,!1,"#000000",0,0,0,0),E.Uut=new Element("Uut","Ununtrium",113,!1,"#000000",0,0,0,0),E.Uuq=new Element("Uuq","Ununquadium",114,!1,"#000000",0,0,0,0),E.Uup=new Element("Uup","Ununpentium",115,!1,"#000000",0,0,0,0),E.Uuh=new Element("Uuh","Ununhexium",116,!1,"#000000",0,0,0,0),E.Uus=new Element("Uus","Ununseptium",117,!1,"#000000",0,0,0,0),E.Uuo=new Element("Uuo","Ununoctium",118,!1,"#000000",0,0,0,0),E.H.pymolColor="#E6E6E6",E.C.pymolColor="#33FF33",E.N.pymolColor="#3333FF",E.O.pymolColor="#FF4D4D",E.F.pymolColor="#B3FFFF",E.S.pymolColor="#E6C640",E}(ChemDoodle.SYMBOLS),ChemDoodle.RESIDUE=function(){"use strict";function Residue(symbol,name,polar,aminoColor,shapelyColor,acidity){this.symbol=symbol,this.name=name,this.polar=polar,this.aminoColor=aminoColor,this.shapelyColor=shapelyColor,this.acidity=acidity}var R=[];return R.Ala=new Residue("Ala","Alanine",!1,"#C8C8C8","#8CFF8C",0),R.Arg=new Residue("Arg","Arginine",!0,"#145AFF","#00007C",1),R.Asn=new Residue("Asn","Asparagine",!0,"#00DCDC","#FF7C70",0),R.Asp=new Residue("Asp","Aspartic Acid",!0,"#E60A0A","#A00042",-1),R.Cys=new Residue("Cys","Cysteine",!0,"#E6E600","#FFFF70",0),R.Gln=new Residue("Gln","Glutamine",!0,"#00DCDC","#FF4C4C",0),R.Glu=new Residue("Glu","Glutamic Acid",!0,"#E60A0A","#660000",-1),R.Gly=new Residue("Gly","Glycine",!1,"#EBEBEB","#FFFFFF",0),R.His=new Residue("His","Histidine",!0,"#8282D2","#7070FF",1),R.Ile=new Residue("Ile","Isoleucine",!1,"#0F820F","#004C00",0),R.Leu=new Residue("Leu","Leucine",!1,"#0F820F","#455E45",0),R.Lys=new Residue("Lys","Lysine",!0,"#145AFF","#4747B8",1),R.Met=new Residue("Met","Methionine",!1,"#E6E600","#B8A042",0),R.Phe=new Residue("Phe","Phenylalanine",!1,"#3232AA","#534C52",0),R.Pro=new Residue("Pro","Proline",!1,"#DC9682","#525252",0),R.Ser=new Residue("Ser","Serine",!0,"#FA9600","#FF7042",0),R.Thr=new Residue("Thr","Threonine",!0,"#FA9600","#B84C00",0),R.Trp=new Residue("Trp","Tryptophan",!0,"#B45AB4","#4F4600",0),R.Tyr=new Residue("Tyr","Tyrosine",!0,"#3232AA","#8C704C",0),R.Val=new Residue("Val","Valine",!1,"#0F820F","#FF8CFF",0),R.Asx=new Residue("Asx","Asparagine/Aspartic Acid",!0,"#FF69B4","#FF00FF",0),R.Glx=new Residue("Glx","Glutamine/Glutamic Acid",!0,"#FF69B4","#FF00FF",0),R["*"]=new Residue("*","Other",!1,"#BEA06E","#FF00FF",0),R.A=new Residue("A","Adenine",!1,"#BEA06E","#A0A0FF",0),R.G=new Residue("G","Guanine",!1,"#BEA06E","#FF7070",0),R.I=new Residue("I","",!1,"#BEA06E","#80FFFF",0),R.C=new Residue("C","Cytosine",!1,"#BEA06E","#FF8C4B",0),R.T=new Residue("T","Thymine",!1,"#BEA06E","#A0FFA0",0),R.U=new Residue("U","Uracil",!1,"#BEA06E","#FF8080",0),R}(),function(structures){"use strict";structures.Queue=function(){this.queue=[]};var _=structures.Queue.prototype;_.queueSpace=0,_.getSize=function(){return this.queue.length-this.queueSpace},_.isEmpty=function(){return 0===this.queue.length},_.enqueue=function(element){this.queue.push(element)},_.dequeue=function(){var element;return this.queue.length&&(element=this.queue[this.queueSpace],2*++this.queueSpace>=this.queue.length&&(this.queue=this.queue.slice(this.queueSpace),this.queueSpace=0)),element},_.getOldestElement=function(){var element;return this.queue.length&&(element=this.queue[this.queueSpace]),element}}(ChemDoodle.structures),function(structures,m){"use strict";structures.Point=function(x,y){this.x=x?x:0,this.y=y?y:0};var _=structures.Point.prototype;_.sub=function(p){this.x-=p.x,this.y-=p.y},_.add=function(p){this.x+=p.x,this.y+=p.y},_.distance=function(p){var dx=p.x-this.x,dy=p.y-this.y;return m.sqrt(dx*dx+dy*dy)},_.angleForStupidCanvasArcs=function(p){var dx=p.x-this.x,dy=p.y-this.y,angle=0;for(angle=0===dx?0===dy?0:dy>0?m.PI/2:3*m.PI/2:0===dy?dx>0?0:m.PI:0>dx?m.atan(dy/dx)+m.PI:0>dy?m.atan(dy/dx)+2*m.PI:m.atan(dy/dx);0>angle;)angle+=2*m.PI;return angle%=2*m.PI},_.angle=function(p){var dx=p.x-this.x,dy=this.y-p.y,angle=0;for(angle=0===dx?0===dy?0:dy>0?m.PI/2:3*m.PI/2:0===dy?dx>0?0:m.PI:0>dx?m.atan(dy/dx)+m.PI:0>dy?m.atan(dy/dx)+2*m.PI:m.atan(dy/dx);0>angle;)angle+=2*m.PI;return angle%=2*m.PI}}(ChemDoodle.structures,Math),function(extensions,structures,m){"use strict";var COMMA_SPACE_REGEX=/[ ,]+/,COMMA_DASH_REGEX=/\-+/,FONTS=["Helvetica","Arial","Dialog"];structures.Query=function(type){this.type=type,this.elements={v:[],not:!1},this.charge=void 0,this.chirality=void 0,this.connectivity=void 0,this.connectivityNoH=void 0,this.hydrogens=void 0,this.saturation=void 0,this.orders={v:[],not:!1},this.stereo=void 0,this.aromatic=void 0,this.ringCount=void 0,this.cache=void 0},structures.Query.TYPE_ATOM=0,structures.Query.TYPE_BOND=1;var _=structures.Query.prototype;_.parseRange=function(range){for(var points=[],splits=range.split(COMMA_SPACE_REGEX),i=0,ii=splits.length;ii>i;i++){var t=splits[i],neg=!1,neg2=!1;if("-"===t.charAt(0)&&(neg=!0,t=t.substring(1)),-1!=t.indexOf("--")&&(neg2=!0),-1!=t.indexOf("-")){var parts=t.split(COMMA_DASH_REGEX),p={x:parseInt(parts[0])*(neg?-1:1),y:parseInt(parts[1])*(neg2?-1:1)};if(p.y<p.x){var tmp=p.y;p.y=p.x,p.x=tmp}points.push(p)}else points.push({x:parseInt(t)*(neg?-1:1)})}return points},_.draw=function(ctx,specs,pos){this.cache||(this.cache=this.toString());var top=this.cache,bottom=void 0,split=top.indexOf("(");-1!=split&&(top=this.cache.substring(0,split),bottom=this.cache.substring(split,this.cache.length)),ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=extensions.getFontString(12,FONTS,!0,!1);var tw=ctx.measureText(top).width;ctx.fillStyle=specs.backgroundColor,ctx.fillRect(pos.x-tw/2,pos.y-6,tw,12),ctx.fillStyle="black",ctx.fillText(top,pos.x,pos.y),bottom&&(ctx.font=extensions.getFontString(10,FONTS,!1,!0),tw=ctx.measureText(bottom).width,ctx.fillStyle=specs.backgroundColor,ctx.fillRect(pos.x-tw/2,pos.y+6,tw,11),ctx.fillStyle="black",ctx.fillText(bottom,pos.x,pos.y+11))},_.outputRange=function(array){for(var comma=!1,sb=[],i=0,ii=array.length;ii>i;i++){comma&&sb.push(","),comma=!0;var p=array[i];p.y?(sb.push(p.x),sb.push("-"),sb.push(p.y)):sb.push(p.x)}return sb.join("")},_.toString=function(){var sb=[],attributes=[];return this.type===structures.Query.TYPE_ATOM?(this.elements&&0!==this.elements.v.length?(this.elements.not&&sb.push("!"),sb.push("["),sb.push(this.elements.v.join(",")),sb.push("]")):sb.push("[a]"),this.chirality&&attributes.push((this.chirality.not?"!":"")+"@="+this.chirality.v),this.aromatic&&attributes.push((this.aromatic.not?"!":"")+"A"),this.charge&&attributes.push((this.charge.not?"!":"")+"C="+this.outputRange(this.charge.v)),this.hydrogens&&attributes.push((this.hydrogens.not?"!":"")+"H="+this.outputRange(this.hydrogens.v)),this.ringCount&&attributes.push((this.ringCount.not?"!":"")+"R="+this.outputRange(this.ringCount.v)),this.saturation&&attributes.push((this.saturation.not?"!":"")+"S"),this.connectivity&&attributes.push((this.connectivity.not?"!":"")+"X="+this.outputRange(this.connectivity.v)),this.connectivityNoH&&attributes.push((this.connectivityNoH.not?"!":"")+"x="+this.outputRange(this.connectivityNoH.v))):this.type===structures.Query.TYPE_BOND&&(this.orders&&0!==this.orders.v.length?(this.orders.not&&sb.push("!"),sb.push("["),sb.push(this.orders.v.join(",")),sb.push("]")):sb.push("[a]"),this.stereo&&attributes.push((this.stereo.not?"!":"")+"@="+this.stereo.v),this.aromatic&&attributes.push((this.aromatic.not?"!":"")+"A"),this.ringCount&&attributes.push((this.ringCount.not?"!":"")+"R="+this.outputRange(this.ringCount.v))),attributes.length>0&&(sb.push("("),sb.push(attributes.join(",")),sb.push(")")),sb.join("")}}(ChemDoodle.extensions,ChemDoodle.structures,Math),function(ELEMENT,extensions,math,structures,m,m4){"use strict";structures.Atom=function(label,x,y,z){this.label=label?label.replace(/\s/g,""):"C",ELEMENT[this.label]||(this.label="C"),this.x=x?x:0,this.y=y?y:0,this.z=z?z:0};var _=structures.Atom.prototype=new structures.Point(0,0);_.charge=0,_.numLonePair=0,_.numRadical=0,_.mass=-1,_.coordinationNumber=0,_.bondNumber=0,_.angleOfLeastInterference=0,_.isHidden=!1,_.altLabel=void 0,_.isLone=!1,_.isHover=!1,_.isSelected=!1,_.add3D=function(p){this.x+=p.x,this.y+=p.y,this.z+=p.z},_.sub3D=function(p){this.x-=p.x,this.y-=p.y,this.z-=p.z},_.distance3D=function(p){var dx=p.x-this.x,dy=p.y-this.y,dz=p.z-this.z;return m.sqrt(dx*dx+dy*dy+dz*dz)},_.draw=function(ctx,specs){if(this.isLassoed){var grd=ctx.createRadialGradient(this.x-1,this.y-1,0,this.x,this.y,7);grd.addColorStop(0,"rgba(212, 99, 0, 0)"),grd.addColorStop(.7,"rgba(212, 99, 0, 0.8)"),ctx.fillStyle=grd,ctx.beginPath(),ctx.arc(this.x,this.y,5,0,2*m.PI,!1),ctx.fill()}if(!this.query){this.textBounds=[],this.specs&&(specs=this.specs);var font=extensions.getFontString(specs.atoms_font_size_2D,specs.atoms_font_families_2D,specs.atoms_font_bold_2D,specs.atoms_font_italic_2D);ctx.font=font,ctx.fillStyle=this.getElementColor(specs.atoms_useJMOLColors,specs.atoms_usePYMOLColors,specs.atoms_color,2),"H"===this.label&&specs.atoms_HBlack_2D&&(ctx.fillStyle="black");var hAngle;if(this.isLone&&!specs.atoms_displayAllCarbonLabels_2D||specs.atoms_circles_2D)ctx.beginPath(),ctx.arc(this.x,this.y,specs.atoms_circleDiameter_2D/2,0,2*m.PI,!1),ctx.fill(),specs.atoms_circleBorderWidth_2D>0&&(ctx.lineWidth=specs.atoms_circleBorderWidth_2D,ctx.strokeStyle="black",ctx.stroke());else if(this.isLabelVisible(specs))if(ctx.textAlign="center",ctx.textBaseline="middle",void 0!==this.altLabel){ctx.fillText(this.altLabel,this.x,this.y);var symbolWidth=ctx.measureText(this.altLabel).width;this.textBounds.push({x:this.x-symbolWidth/2,y:this.y-specs.atoms_font_size_2D/2+1,w:symbolWidth,h:specs.atoms_font_size_2D-2})}else{ctx.fillText(this.label,this.x,this.y);var symbolWidth=ctx.measureText(this.label).width;this.textBounds.push({x:this.x-symbolWidth/2,y:this.y-specs.atoms_font_size_2D/2+1,w:symbolWidth,h:specs.atoms_font_size_2D-2});var massWidth=0;if(-1!==this.mass){var fontSave=ctx.font;ctx.font=extensions.getFontString(.7*specs.atoms_font_size_2D,specs.atoms_font_families_2D,specs.atoms_font_bold_2D,specs.atoms_font_italic_2D),massWidth=ctx.measureText(this.mass).width,ctx.fillText(this.mass,this.x-massWidth-.5,this.y-specs.atoms_font_size_2D/2+1),this.textBounds.push({x:this.x-symbolWidth/2-massWidth-.5,y:this.y-1.7*specs.atoms_font_size_2D/2+1,w:massWidth,h:specs.atoms_font_size_2D/2-1}),ctx.font=fontSave}var chargeOffset=symbolWidth/2,numHs=this.getImplicitHydrogenCount();if(specs.atoms_implicitHydrogens_2D&&numHs>0){hAngle=0;var hWidth=ctx.measureText("H").width,moveCharge=!0;if(numHs>1){var xoffset=symbolWidth/2+hWidth/2,yoffset=0,subFont=extensions.getFontString(.8*specs.atoms_font_size_2D,specs.atoms_font_families_2D,specs.atoms_font_bold_2D,specs.atoms_font_italic_2D);ctx.font=subFont;var numWidth=ctx.measureText(numHs).width;1===this.bondNumber?this.angleOfLeastInterference>m.PI/2&&this.angleOfLeastInterference<3*m.PI/2&&(xoffset=-symbolWidth/2-numWidth-hWidth/2-massWidth/2,moveCharge=!1,hAngle=m.PI):this.angleOfLeastInterference<=m.PI/4||(this.angleOfLeastInterference<3*m.PI/4?(xoffset=0,yoffset=.9*-specs.atoms_font_size_2D,0!==this.charge&&(yoffset-=.3*specs.atoms_font_size_2D),moveCharge=!1,hAngle=m.PI/2):this.angleOfLeastInterference<=5*m.PI/4?(xoffset=-symbolWidth/2-numWidth-hWidth/2-massWidth/2,moveCharge=!1,hAngle=m.PI):this.angleOfLeastInterference<7*m.PI/4&&(xoffset=0,yoffset=.9*specs.atoms_font_size_2D,moveCharge=!1,hAngle=3*m.PI/2)),ctx.font=font,ctx.fillText("H",this.x+xoffset,this.y+yoffset),ctx.font=subFont,ctx.fillText(numHs,this.x+xoffset+hWidth/2+numWidth/2,this.y+yoffset+.3*specs.atoms_font_size_2D),this.textBounds.push({x:this.x+xoffset-hWidth/2,y:this.y+yoffset-specs.atoms_font_size_2D/2+1,w:hWidth,h:specs.atoms_font_size_2D-2}),this.textBounds.push({x:this.x+xoffset+hWidth/2,y:this.y+yoffset+.3*specs.atoms_font_size_2D-specs.atoms_font_size_2D/2+1,w:numWidth,h:.8*specs.atoms_font_size_2D-2})}else{var xoffset=symbolWidth/2+hWidth/2,yoffset=0;1===this.bondNumber?this.angleOfLeastInterference>m.PI/2&&this.angleOfLeastInterference<3*m.PI/2&&(xoffset=-symbolWidth/2-hWidth/2-massWidth/2,moveCharge=!1,hAngle=m.PI):this.angleOfLeastInterference<=m.PI/4||(this.angleOfLeastInterference<3*m.PI/4?(xoffset=0,yoffset=.9*-specs.atoms_font_size_2D,moveCharge=!1,hAngle=m.PI/2):this.angleOfLeastInterference<=5*m.PI/4?(xoffset=-symbolWidth/2-hWidth/2-massWidth/2,moveCharge=!1,hAngle=m.PI):this.angleOfLeastInterference<7*m.PI/4&&(xoffset=0,yoffset=.9*specs.atoms_font_size_2D,moveCharge=!1,hAngle=3*m.PI/2)),ctx.fillText("H",this.x+xoffset,this.y+yoffset),this.textBounds.push({x:this.x+xoffset-hWidth/2,y:this.y+yoffset-specs.atoms_font_size_2D/2+1,w:hWidth,h:specs.atoms_font_size_2D-2})}moveCharge&&(chargeOffset+=hWidth)}if(0!==this.charge){var s=this.charge.toFixed(0);"1"===s?s="+":"-1"===s?s="â":extensions.stringStartsWith(s,"-")?s=s.substring(1)+"â":s+="+";var chargeWidth=ctx.measureText(s).width;chargeOffset+=chargeWidth/2,ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=extensions.getFontString(m.floor(.8*specs.atoms_font_size_2D),specs.atoms_font_families_2D,specs.atoms_font_bold_2D,specs.atoms_font_italic_2D),ctx.fillText(s,this.x+chargeOffset-1,this.y-specs.atoms_font_size_2D/2+1),this.textBounds.push({x:this.x+chargeOffset-chargeWidth/2-1,y:this.y-1.8*specs.atoms_font_size_2D/2+5,w:chargeWidth,h:specs.atoms_font_size_2D/2-1})}}if(this.numLonePair>0||this.numRadical>0){ctx.fillStyle="black";var as=this.angles.slice(0),ali=this.angleOfLeastInterference,la=this.largestAngle;if(void 0!==hAngle){as.push(hAngle),as.sort();var angleData=math.angleBetweenLargest(as);ali=angleData.angle%(2*m.PI),la=angleData.largest}for(var things=[],i=0;i<this.numLonePair;i++)things.push({t:2});for(var i=0;i<this.numRadical;i++)things.push({t:1});if(void 0===hAngle&&m.abs(la-2*m.PI/as.length)<m.PI/60)for(var mid=m.ceil(things.length/as.length),i=0,ii=things.length;ii>i;i+=mid,ali+=la)this.drawElectrons(ctx,specs,things.slice(i,m.min(things.length,i+mid)),ali,la,hAngle);else this.drawElectrons(ctx,specs,things,ali,la,hAngle)}}},_.drawElectrons=function(ctx,specs,things,angle,largest,hAngle){for(var segment=largest/(things.length+(0===this.bonds.length&&void 0===hAngle?0:1)),angleStart=angle-largest/2+segment,i=0;i<things.length;i++){var t=things[i],angle=angleStart+i*segment,p1x=this.x+Math.cos(angle)*specs.atoms_lonePairDistance_2D,p1y=this.y-Math.sin(angle)*specs.atoms_lonePairDistance_2D;if(2===t.t){var perp=angle+Math.PI/2,difx=Math.cos(perp)*specs.atoms_lonePairSpread_2D/2,dify=-Math.sin(perp)*specs.atoms_lonePairSpread_2D/2;ctx.beginPath(),ctx.arc(p1x+difx,p1y+dify,specs.atoms_lonePairDiameter_2D,0,2*m.PI,!1),ctx.fill(),ctx.beginPath(),ctx.arc(p1x-difx,p1y-dify,specs.atoms_lonePairDiameter_2D,0,2*m.PI,!1),ctx.fill()}else 1===t.t&&(ctx.beginPath(),ctx.arc(p1x,p1y,specs.atoms_lonePairDiameter_2D,0,2*m.PI,!1),ctx.fill())}},_.drawDecorations=function(ctx){if(this.isHover||this.isSelected){ctx.strokeStyle=this.isHover?"#885110":"#0060B2",ctx.lineWidth=1.2,ctx.beginPath();var radius=this.isHover?7:15;ctx.arc(this.x,this.y,radius,0,2*m.PI,!1),ctx.stroke()}this.isOverlap&&(ctx.strokeStyle="#C10000",ctx.lineWidth=1.2,ctx.beginPath(),ctx.arc(this.x,this.y,7,0,2*m.PI,!1),ctx.stroke())},_.render=function(gl,specs,noColor){this.specs&&(specs=this.specs);var transform=m4.translate(gl.modelViewMatrix,[this.x,this.y,this.z],[]),radius=specs.atoms_useVDWDiameters_3D?ELEMENT[this.label].vdWRadius*specs.atoms_vdwMultiplier_3D:specs.atoms_sphereDiameter_3D/2;if(0===radius&&(radius=1),m4.scale(transform,[radius,radius,radius]),!noColor){var color=specs.atoms_color;specs.atoms_useJMOLColors?color=ELEMENT[this.label].jmolColor:specs.atoms_usePYMOLColors&&(color=ELEMENT[this.label].pymolColor),gl.material.setDiffuseColor(color)}gl.setMatrixUniforms(transform);var buffer=this.renderAsStar?gl.starBuffer:gl.sphereBuffer;gl.drawElements(gl.TRIANGLES,buffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)},_.renderHighlight=function(gl,specs){if(this.isSelected||this.isHover){this.specs&&(specs=this.specs);var transform=m4.translate(gl.modelViewMatrix,[this.x,this.y,this.z],[]),radius=specs.atoms_useVDWDiameters_3D?ELEMENT[this.label].vdWRadius*specs.atoms_vdwMultiplier_3D:specs.atoms_sphereDiameter_3D/2;0===radius&&(radius=1),radius*=1.3,m4.scale(transform,[radius,radius,radius]),gl.setMatrixUniforms(transform),gl.material.setDiffuseColor(this.isHover?"#885110":"#0060B2");var buffer=this.renderAsStar?gl.starBuffer:gl.sphereBuffer;gl.drawElements(gl.TRIANGLES,buffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}},_.isLabelVisible=function(specs){return specs.atoms_displayAllCarbonLabels_2D?!0:"C"!==this.label?!0:this.altLabel?!0:-1!==this.mass||0!==this.charge?!0:!specs.atoms_showAttributedCarbons_2D||0===this.numRadical&&0===this.numLonePair?this.isHidden&&specs.atoms_showHiddenCarbons_2D?!0:specs.atoms_displayTerminalCarbonLabels_2D&&1===this.bondNumber?!0:!1:!0},_.getImplicitHydrogenCount=function(){if("H"===this.label||!ELEMENT[this.label]||!ELEMENT[this.label].addH)return 0;var valence=ELEMENT[this.label].valency,dif=valence-this.coordinationNumber;if(this.numRadical>0&&(dif=m.max(0,dif-this.numRadical)),this.charge>0){var vdif=4-valence;this.charge<=vdif?dif+=this.charge:dif=4-this.coordinationNumber-this.charge+vdif}else dif+=this.charge;return 0>dif?0:m.floor(dif)},_.getBounds=function(){var bounds=new math.Bounds;if(bounds.expand(this.x,this.y),this.textBounds)for(var i=0,ii=this.textBounds.length;ii>i;i++){var tb=this.textBounds[i];bounds.expand(tb.x,tb.y,tb.x+tb.w,tb.y+tb.h)}return bounds},_.getBounds3D=function(){var bounds=new math.Bounds;return bounds.expand3D(this.x,this.y,this.z),bounds},_.getElementColor=function(useJMOLColors,usePYMOLColors,color,dim){return useJMOLColors?color=ELEMENT[this.label].jmolColor:usePYMOLColors&&(color=ELEMENT[this.label].pymolColor),color}}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,Math,ChemDoodle.lib.mat4),function(ELEMENT,extensions,structures,math,m,m4,v3){"use strict";structures.Bond=function(a1,a2,bondOrder){this.a1=a1,this.a2=a2,this.bondOrder=void 0!==bondOrder?bondOrder:1},structures.Bond.STEREO_NONE="none",structures.Bond.STEREO_PROTRUDING="protruding",structures.Bond.STEREO_RECESSED="recessed",structures.Bond.STEREO_AMBIGUOUS="ambiguous";var _=structures.Bond.prototype;_.stereo=structures.Bond.STEREO_NONE,_.isHover=!1,_.ring=void 0,_.getCenter=function(){
return new structures.Point((this.a1.x+this.a2.x)/2,(this.a1.y+this.a2.y)/2)},_.getLength=function(){return this.a1.distance(this.a2)},_.getLength3D=function(){return this.a1.distance3D(this.a2)},_.contains=function(a){return a===this.a1||a===this.a2},_.getNeighbor=function(a){return a===this.a1?this.a2:a===this.a2?this.a1:void 0},_.draw=function(ctx,specs){if(this.a1.x!==this.a2.x||this.a1.y!==this.a2.y){this.specs&&(specs=this.specs);var x1=this.a1.x,x2=this.a2.x,y1=this.a1.y,y2=this.a2.y,dist=this.a1.distance(this.a2),difX=x2-x1,difY=y2-y1;if(this.a1.isLassoed&&this.a2.isLassoed){var grd=ctx.createLinearGradient(x1,y1,x2,y2);grd.addColorStop(0,"rgba(212, 99, 0, 0)"),grd.addColorStop(.5,"rgba(212, 99, 0, 0.8)"),grd.addColorStop(1,"rgba(212, 99, 0, 0)");var useDist=2.5,perpendicular=this.a1.angle(this.a2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=x1-mcosp*useDist,cy1=y1+msinp*useDist,cx2=x1+mcosp*useDist,cy2=y1-msinp*useDist,cx3=x2+mcosp*useDist,cy3=y2-msinp*useDist,cx4=x2-mcosp*useDist,cy4=y2+msinp*useDist;ctx.fillStyle=grd,ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(cx2,cy2),ctx.lineTo(cx3,cy3),ctx.lineTo(cx4,cy4),ctx.closePath(),ctx.fill()}if(specs.atoms_display&&!specs.atoms_circles_2D&&this.a1.isLabelVisible(specs)&&this.a1.textBounds){for(var distShrink=0,i=0,ii=this.a1.textBounds.length;ii>i;i++)distShrink=Math.max(distShrink,math.calculateDistanceInterior(this.a1,this.a2,this.a1.textBounds[i]));distShrink+=specs.bonds_atomLabelBuffer_2D;var perc=distShrink/dist;x1+=difX*perc,y1+=difY*perc}if(specs.atoms_display&&!specs.atoms_circles_2D&&this.a2.isLabelVisible(specs)&&this.a2.textBounds){for(var distShrink=0,i=0,ii=this.a2.textBounds.length;ii>i;i++)distShrink=Math.max(distShrink,math.calculateDistanceInterior(this.a2,this.a1,this.a2.textBounds[i]));distShrink+=specs.bonds_atomLabelBuffer_2D;var perc=distShrink/dist;x2-=difX*perc,y2-=difY*perc}if(specs.bonds_clearOverlaps_2D){var xs=x1+.15*difX,ys=y1+.15*difY,xf=x2-.15*difX,yf=y2-.15*difY;ctx.strokeStyle=specs.backgroundColor,ctx.lineWidth=specs.bonds_width_2D+2*specs.bonds_overlapClearWidth_2D,ctx.lineCap="round",ctx.beginPath(),ctx.moveTo(xs,ys),ctx.lineTo(xf,yf),ctx.closePath(),ctx.stroke()}if(ctx.strokeStyle=specs.bonds_color,ctx.fillStyle=specs.bonds_color,ctx.lineWidth=specs.bonds_width_2D,ctx.lineCap=specs.bonds_ends_2D,specs.bonds_useJMOLColors||specs.bonds_usePYMOLColors){var linearGradient=ctx.createLinearGradient(x1,y1,x2,y2),color1=this.a1.getElementColor(specs.bonds_useJMOLColors,specs.bonds_usePYMOLColors,specs.atoms_color,2),color2=this.a2.getElementColor(specs.bonds_useJMOLColors,specs.bonds_usePYMOLColors,specs.atoms_color,2);linearGradient.addColorStop(0,color1),specs.bonds_colorGradient||(linearGradient.addColorStop(.5,color1),linearGradient.addColorStop(.51,color2)),linearGradient.addColorStop(1,color2),ctx.strokeStyle=linearGradient,ctx.fillStyle=linearGradient}if(specs.bonds_lewisStyle_2D&&this.bondOrder%1===0)this.drawLewisStyle(ctx,specs,x1,y1,x2,y2);else switch(this.query?1:this.bondOrder){case 0:var dx=x2-x1,dy=y2-y1,innerDist=m.sqrt(dx*dx+dy*dy),num=m.floor(innerDist/specs.bonds_dotSize_2D),remainder=(innerDist-(num-1)*specs.bonds_dotSize_2D)/2;num%2===1?remainder+=specs.bonds_dotSize_2D/4:(remainder-=specs.bonds_dotSize_2D/4,num+=2),num/=2;var angle=this.a1.angle(this.a2),xs=x1+remainder*Math.cos(angle),ys=y1-remainder*Math.sin(angle);ctx.beginPath();for(var i=0;num>i;i++)ctx.arc(xs,ys,specs.bonds_dotSize_2D/2,0,2*m.PI,!1),xs+=2*specs.bonds_dotSize_2D*Math.cos(angle),ys-=2*specs.bonds_dotSize_2D*Math.sin(angle);ctx.fill();break;case.5:ctx.beginPath(),ctx.moveTo(x1,y1),extensions.contextHashTo(ctx,x1,y1,x2,y2,specs.bonds_hashSpacing_2D,specs.bonds_hashSpacing_2D),ctx.stroke();break;case 1:if(this.query||this.stereo!==structures.Bond.STEREO_PROTRUDING&&this.stereo!==structures.Bond.STEREO_RECESSED){if(!this.query&&this.stereo===structures.Bond.STEREO_AMBIGUOUS){ctx.beginPath(),ctx.moveTo(x1,y1);for(var cpx1,cpx2,cpy1,cpy2,curves=m.floor(m.sqrt(difX*difX+difY*difY)/specs.bonds_wavyLength_2D),x=x1,y=y1,perpendicular=this.a1.angle(this.a2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),curveX=difX/curves,curveY=difY/curves,i=0,ii=curves;ii>i;i++)x+=curveX,y+=curveY,cpx1=specs.bonds_wavyLength_2D*mcosp+x-.5*curveX,cpy1=specs.bonds_wavyLength_2D*-msinp+y-.5*curveY,cpx2=specs.bonds_wavyLength_2D*-mcosp+x-.5*curveX,cpy2=specs.bonds_wavyLength_2D*msinp+y-.5*curveY,i%2===0?ctx.quadraticCurveTo(cpx1,cpy1,x,y):ctx.quadraticCurveTo(cpx2,cpy2,x,y);ctx.stroke();break}ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke(),this.query&&this.query.draw(ctx,specs,this.getCenter())}else{var thinSpread=specs.bonds_width_2D/2,useDist=this.a1.distance(this.a2)*specs.bonds_wedgeThickness_2D/2,perpendicular=this.a1.angle(this.a2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=x1-mcosp*thinSpread,cy1=y1+msinp*thinSpread,cx2=x1+mcosp*thinSpread,cy2=y1-msinp*thinSpread,cx3=x2+mcosp*useDist,cy3=y2-msinp*useDist,cx4=x2-mcosp*useDist,cy4=y2+msinp*useDist;ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(cx2,cy2),ctx.lineTo(cx3,cy3),ctx.lineTo(cx4,cy4),ctx.closePath(),this.stereo===structures.Bond.STEREO_PROTRUDING?ctx.fill():(ctx.save(),ctx.clip(),ctx.lineWidth=2*useDist,ctx.lineCap="butt",ctx.beginPath(),ctx.moveTo(x1,y1),extensions.contextHashTo(ctx,x1,y1,x2,y2,specs.bonds_hashWidth_2D,specs.bonds_hashSpacing_2D),ctx.stroke(),ctx.restore())}break;case 1.5:case 2:if(this.stereo===structures.Bond.STEREO_AMBIGUOUS){var useDist=this.a1.distance(this.a2)*specs.bonds_saturationWidth_2D/2,perpendicular=this.a1.angle(this.a2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=x1-mcosp*useDist,cy1=y1+msinp*useDist,cx2=x1+mcosp*useDist,cy2=y1-msinp*useDist,cx3=x2+mcosp*useDist,cy3=y2-msinp*useDist,cx4=x2-mcosp*useDist,cy4=y2+msinp*useDist;ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(cx3,cy3),ctx.moveTo(cx2,cy2),ctx.lineTo(cx4,cy4),ctx.stroke()}else if(!specs.bonds_symmetrical_2D&&(this.ring||"C"===this.a1.label&&"C"===this.a2.label)){ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2);var clip=0,dist=this.a1.distance(this.a2),angle=this.a1.angle(this.a2),perpendicular=angle+m.PI/2,useDist=dist*specs.bonds_saturationWidth_2D,clipAngle=specs.bonds_saturationAngle_2D;if(clipAngle<m.PI/2&&(clip=-(useDist/m.tan(clipAngle))),m.abs(clip)<dist/2){var xuse1=x1-m.cos(angle)*clip,xuse2=x2+m.cos(angle)*clip,yuse1=y1+m.sin(angle)*clip,yuse2=y2-m.sin(angle)*clip,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=xuse1-mcosp*useDist,cy1=yuse1+msinp*useDist,cx2=xuse1+mcosp*useDist,cy2=yuse1-msinp*useDist,cx3=xuse2-mcosp*useDist,cy3=yuse2+msinp*useDist,cx4=xuse2+mcosp*useDist,cy4=yuse2-msinp*useDist,flip=!this.ring||this.ring.center.angle(this.a1)>this.ring.center.angle(this.a2)&&!(this.ring.center.angle(this.a1)-this.ring.center.angle(this.a2)>m.PI)||this.ring.center.angle(this.a1)-this.ring.center.angle(this.a2)<-m.PI;flip?(ctx.moveTo(cx1,cy1),2===this.bondOrder?ctx.lineTo(cx3,cy3):extensions.contextHashTo(ctx,cx1,cy1,cx3,cy3,specs.bonds_hashSpacing_2D,specs.bonds_hashSpacing_2D)):(ctx.moveTo(cx2,cy2),2===this.bondOrder?ctx.lineTo(cx4,cy4):extensions.contextHashTo(ctx,cx2,cy2,cx4,cy4,specs.bonds_hashSpacing_2D,specs.bonds_hashSpacing_2D)),ctx.stroke()}}else{var useDist=this.a1.distance(this.a2)*specs.bonds_saturationWidth_2D/2,perpendicular=this.a1.angle(this.a2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=x1-mcosp*useDist,cy1=y1+msinp*useDist,cx2=x1+mcosp*useDist,cy2=y1-msinp*useDist,cx3=x2+mcosp*useDist,cy3=y2-msinp*useDist,cx4=x2-mcosp*useDist,cy4=y2+msinp*useDist;ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(cx4,cy4),ctx.moveTo(cx2,cy2),2===this.bondOrder?ctx.lineTo(cx3,cy3):extensions.contextHashTo(ctx,cx2,cy2,cx3,cy3,specs.bonds_hashSpacing_2D,specs.bonds_hashSpacing_2D),ctx.stroke()}break;case 3:var useDist=this.a1.distance(this.a2)*specs.bonds_saturationWidth_2D,perpendicular=this.a1.angle(this.a2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=x1-mcosp*useDist,cy1=y1+msinp*useDist,cx2=x1+mcosp*useDist,cy2=y1-msinp*useDist,cx3=x2+mcosp*useDist,cy3=y2-msinp*useDist,cx4=x2-mcosp*useDist,cy4=y2+msinp*useDist;ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(cx4,cy4),ctx.moveTo(cx2,cy2),ctx.lineTo(cx3,cy3),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke()}}},_.drawDecorations=function(ctx){if(this.isHover||this.isSelected){var pi2=2*m.PI,angle=(this.a1.angleForStupidCanvasArcs(this.a2)+m.PI/2)%pi2;ctx.strokeStyle=this.isHover?"#885110":"#0060B2",ctx.lineWidth=1.2,ctx.beginPath();var angleTo=(angle+m.PI)%pi2;angleTo%=2*m.PI,ctx.arc(this.a1.x,this.a1.y,7,angle,angleTo,!1),ctx.stroke(),ctx.beginPath(),angle+=m.PI,angleTo=(angle+m.PI)%pi2,ctx.arc(this.a2.x,this.a2.y,7,angle,angleTo,!1),ctx.stroke()}},_.drawLewisStyle=function(ctx,specs,x1,y1,x2,y2){for(var angle=this.a1.angle(this.a2),perp=angle+m.PI/2,difx=x2-x1,dify=y2-y1,increment=m.sqrt(difx*difx+dify*dify)/(this.bondOrder+1),xi=increment*m.cos(angle),yi=-increment*m.sin(angle),x=x1+xi,y=y1+yi,i=0;i<this.bondOrder;i++){var sep=specs.atoms_lonePairSpread_2D/2,cx1=x-m.cos(perp)*sep,cy1=y+m.sin(perp)*sep,cx2=x+m.cos(perp)*sep,cy2=y-m.sin(perp)*sep;ctx.beginPath(),ctx.arc(cx1-specs.atoms_lonePairDiameter_2D/2,cy1-specs.atoms_lonePairDiameter_2D/2,specs.atoms_lonePairDiameter_2D,0,2*m.PI,!1),ctx.fill(),ctx.beginPath(),ctx.arc(cx2-specs.atoms_lonePairDiameter_2D/2,cy2-specs.atoms_lonePairDiameter_2D/2,specs.atoms_lonePairDiameter_2D,0,2*m.PI,!1),ctx.fill(),x+=xi,y+=yi}},_.render=function(gl,specs,asSegments){this.specs&&(specs=this.specs);var height=this.a1.distance3D(this.a2);if(0!==height){var a2Color,transformOpposite,axis,radiusScale=specs.bonds_cylinderDiameter_3D/2,a1Color=specs.bonds_color,transform=m4.translate(gl.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),a2b=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],y=[0,1,0],ang=0;this.a1.x===this.a2.x&&this.a1.z===this.a2.z?(axis=[0,0,1],this.a2.y<this.a1.y&&(ang=m.PI)):(ang=extensions.vec3AngleFrom(y,a2b),axis=v3.cross(y,a2b,[]));var useJMOLColors=specs.bonds_useJMOLColors,usePYMOLColors=specs.bonds_usePYMOLColors;(useJMOLColors||usePYMOLColors)&&(a1Color=this.a1.getElementColor(useJMOLColors,usePYMOLColors,a1Color),a2Color=this.a2.getElementColor(useJMOLColors,usePYMOLColors,specs.bonds_color),a1Color!=a2Color&&(transformOpposite=m4.translate(gl.modelViewMatrix,[this.a2.x,this.a2.y,this.a2.z],[])));var saturatedCross,others=[0];if(asSegments){if(specs.bonds_showBondOrders_3D&&this.bondOrder>1){others=[specs.bonds_cylinderDiameter_3D];var z=[0,0,1],inverse=m4.inverse(gl.rotationMatrix,[]);m4.multiplyVec3(inverse,z),saturatedCross=v3.cross(a2b,z,[]),v3.normalize(saturatedCross)}var segmentScale=1,spaceBetweenPill=specs.bonds_pillSpacing_3D,pillHeight=specs.bonds_pillHeight_3D;0==this.bondOrder&&(specs.bonds_renderAsLines_3D?pillHeight=spaceBetweenPill:(pillHeight=specs.bonds_pillDiameter_3D,pillHeight<specs.bonds_cylinderDiameter_3D&&(pillHeight/=2),segmentScale=pillHeight/2,height/=segmentScale,spaceBetweenPill/=segmentScale/2));var totalSpaceForPill=pillHeight+spaceBetweenPill,totalPillsPerBond=height/totalSpaceForPill,pillsPerBond=m.floor(totalPillsPerBond),extraSegmentedSpace=height-totalSpaceForPill*pillsPerBond,paddingSpace=(spaceBetweenPill+specs.bonds_pillDiameter_3D+extraSegmentedSpace)/2,pillSegmentsLength=pillsPerBond;transformOpposite&&(pillSegmentsLength=m.floor(pillsPerBond/2));for(var i=0,ii=others.length;ii>i;i++){var transformUse=m4.set(transform,[]);0!==others[i]&&m4.translate(transformUse,v3.scale(saturatedCross,others[i],[])),0!==ang&&m4.rotate(transformUse,ang,axis),1!=segmentScale&&m4.scale(transformUse,[segmentScale,segmentScale,segmentScale]),a1Color&&gl.material.setDiffuseColor(a1Color),m4.translate(transformUse,[0,paddingSpace,0]);for(var j=0;pillSegmentsLength>j;j++)specs.bonds_renderAsLines_3D?0==this.bondOrder?(gl.setMatrixUniforms(transformUse),gl.drawArrays(gl.POINTS,0,1)):(m4.scale(transformUse,[1,pillHeight,1]),gl.setMatrixUniforms(transformUse),gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems),m4.scale(transformUse,[1,1/pillHeight,1])):(gl.setMatrixUniforms(transformUse),0==this.bondOrder?gl.drawElements(gl.TRIANGLES,gl.sphereBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0):gl.drawElements(gl.TRIANGLES,gl.pillBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)),m4.translate(transformUse,[0,totalSpaceForPill,0]);if(transformOpposite){var scaleY,halfOneMinScaleY;specs.bonds_renderAsLines_3D?(scaleY=pillHeight,scaleY/=2,halfOneMinScaleY=0):(scaleY=2/3,halfOneMinScaleY=(1-scaleY)/2),pillsPerBond%2!=0&&(m4.scale(transformUse,[1,scaleY,1]),gl.setMatrixUniforms(transformUse),specs.bonds_renderAsLines_3D?0==this.bondOrder?gl.drawArrays(gl.POINTS,0,1):gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems):0==this.bondOrder?gl.drawElements(gl.TRIANGLES,gl.sphereBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0):gl.drawElements(gl.TRIANGLES,gl.pillBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),m4.translate(transformUse,[0,totalSpaceForPill*(1+halfOneMinScaleY),0]),m4.scale(transformUse,[1,1/scaleY,1])),m4.set(transformOpposite,transformUse),0!==others[i]&&m4.translate(transformUse,v3.scale(saturatedCross,others[i],[])),m4.rotate(transformUse,ang+m.PI,axis),1!=segmentScale&&m4.scale(transformUse,[segmentScale,segmentScale,segmentScale]),a2Color&&gl.material.setDiffuseColor(a2Color),m4.translate(transformUse,[0,paddingSpace,0]);for(var j=0;pillSegmentsLength>j;j++)specs.bonds_renderAsLines_3D?0==this.bondOrder?(gl.setMatrixUniforms(transformUse),gl.drawArrays(gl.POINTS,0,1)):(m4.scale(transformUse,[1,pillHeight,1]),gl.setMatrixUniforms(transformUse),gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems),m4.scale(transformUse,[1,1/pillHeight,1])):(gl.setMatrixUniforms(transformUse),0==this.bondOrder?gl.drawElements(gl.TRIANGLES,gl.sphereBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0):gl.drawElements(gl.TRIANGLES,gl.pillBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)),m4.translate(transformUse,[0,totalSpaceForPill,0]);pillsPerBond%2!=0&&(m4.scale(transformUse,[1,scaleY,1]),gl.setMatrixUniforms(transformUse),specs.bonds_renderAsLines_3D?0==this.bondOrder?gl.drawArrays(gl.POINTS,0,1):gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems):0==this.bondOrder?gl.drawElements(gl.TRIANGLES,gl.sphereBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0):gl.drawElements(gl.TRIANGLES,gl.pillBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),m4.translate(transformUse,[0,totalSpaceForPill*(1+halfOneMinScaleY),0]),m4.scale(transformUse,[1,1/scaleY,1]))}}}else{if(specs.bonds_showBondOrders_3D){switch(this.bondOrder){case 1.5:others=[-specs.bonds_cylinderDiameter_3D];break;case 2:others=[-specs.bonds_cylinderDiameter_3D,specs.bonds_cylinderDiameter_3D];break;case 3:others=[-1.2*specs.bonds_cylinderDiameter_3D,0,1.2*specs.bonds_cylinderDiameter_3D]}if(this.bondOrder>1){var z=[0,0,1],inverse=m4.inverse(gl.rotationMatrix,[]);m4.multiplyVec3(inverse,z),saturatedCross=v3.cross(a2b,z,[]),v3.normalize(saturatedCross)}}else switch(this.bondOrder){case 0:radiusScale*=.25;break;case.5:case 1.5:radiusScale*=.5}transformOpposite&&(height/=2);for(var scaleVector=[radiusScale,height,radiusScale],i=0,ii=others.length;ii>i;i++){var transformUse=m4.set(transform,[]);0!==others[i]&&m4.translate(transformUse,v3.scale(saturatedCross,others[i],[])),0!==ang&&m4.rotate(transformUse,ang,axis),m4.scale(transformUse,scaleVector),a1Color&&gl.material.setDiffuseColor(a1Color),gl.setMatrixUniforms(transformUse),specs.bonds_renderAsLines_3D?gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems):gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.cylinderBuffer.vertexPositionBuffer.numItems),transformOpposite&&(m4.set(transformOpposite,transformUse),0!==others[i]&&m4.translate(transformUse,v3.scale(saturatedCross,others[i],[])),m4.rotate(transformUse,ang+m.PI,axis),m4.scale(transformUse,scaleVector),a2Color&&gl.material.setDiffuseColor(a2Color),gl.setMatrixUniforms(transformUse),specs.bonds_renderAsLines_3D?gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems):gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.cylinderBuffer.vertexPositionBuffer.numItems))}}}},_.renderHighlight=function(gl,specs){if(this.isSelected||this.isHover){this.specs&&(specs=this.specs),this.specs&&(specs=this.specs);var height=this.a1.distance3D(this.a2);if(0===height)return;var axis,radiusScale=specs.bonds_cylinderDiameter_3D/1.2,transform=m4.translate(gl.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),a2b=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],y=[0,1,0],ang=0;this.a1.x===this.a2.x&&this.a1.z===this.a2.z?(axis=[0,0,1],this.a2.y<this.a1.y&&(ang=m.PI)):(ang=extensions.vec3AngleFrom(y,a2b),axis=v3.cross(y,a2b,[]));var scaleVector=[radiusScale,height,radiusScale];0!==ang&&m4.rotate(transform,ang,axis),m4.scale(transform,scaleVector),gl.setMatrixUniforms(transform),gl.material.setDiffuseColor(this.isHover?"#885110":"#0060B2"),gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.cylinderBuffer.vertexPositionBuffer.numItems)}},_.renderPicker=function(gl,specs){this.specs&&(specs=this.specs);var height=this.a1.distance3D(this.a2);if(0!==height){var axis,radiusScale=specs.bonds_cylinderDiameter_3D/2,transform=m4.translate(gl.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),a2b=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],y=[0,1,0],ang=0;this.a1.x===this.a2.x&&this.a1.z===this.a2.z?(axis=[0,0,1],this.a2.y<this.a1.y&&(ang=m.PI)):(ang=extensions.vec3AngleFrom(y,a2b),axis=v3.cross(y,a2b,[]));var saturatedCross,others=[0];if(specs.bonds_showBondOrders_3D)if(specs.bonds_renderAsLines_3D){switch(this.bondOrder){case 1.5:case 2:others=[-specs.bonds_cylinderDiameter_3D,specs.bonds_cylinderDiameter_3D];break;case 3:others=[-1.2*specs.bonds_cylinderDiameter_3D,0,1.2*specs.bonds_cylinderDiameter_3D]}if(this.bondOrder>1){var z=[0,0,1],inverse=m4.inverse(gl.rotationMatrix,[]);m4.multiplyVec3(inverse,z),saturatedCross=v3.cross(a2b,z,[]),v3.normalize(saturatedCross)}}else switch(this.bondOrder){case 1.5:case 2:radiusScale*=3;break;case 3:radiusScale*=3.4}else switch(this.bondOrder){case 0:radiusScale*=.25;break;case.5:case 1.5:radiusScale*=.5}for(var scaleVector=[radiusScale,height,radiusScale],i=0,ii=others.length;ii>i;i++){var transformUse=m4.set(transform,[]);0!==others[i]&&m4.translate(transformUse,v3.scale(saturatedCross,others[i],[])),0!==ang&&m4.rotate(transformUse,ang,axis),m4.scale(transformUse,scaleVector),gl.setMatrixUniforms(transformUse),specs.bonds_renderAsLines_3D?gl.drawArrays(gl.LINES,0,gl.lineBuffer.vertexPositionBuffer.numItems):gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.cylinderBuffer.vertexPositionBuffer.numItems)}}}}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.math,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(structures,m){"use strict";structures.Ring=function(){this.atoms=[],this.bonds=[]};var _=structures.Ring.prototype;_.center=void 0,_.setupBonds=function(){for(var i=0,ii=this.bonds.length;ii>i;i++)this.bonds[i].ring=this;this.center=this.getCenter()},_.getCenter=function(){for(var minX=1/0,minY=1/0,maxX=-(1/0),maxY=-(1/0),i=0,ii=this.atoms.length;ii>i;i++)minX=m.min(this.atoms[i].x,minX),minY=m.min(this.atoms[i].y,minY),maxX=m.max(this.atoms[i].x,maxX),maxY=m.max(this.atoms[i].y,maxY);return new structures.Point((maxX+minX)/2,(maxY+minY)/2)}}(ChemDoodle.structures,Math),function(c,math,structures,RESIDUE,m){"use strict";structures.Molecule=function(){this.atoms=[],this.bonds=[],this.rings=[]};var _=structures.Molecule.prototype;_.findRings=!0,_.draw=function(ctx,specs){if(this.specs&&(specs=this.specs),specs.atoms_display&&!specs.atoms_circles_2D)for(var i=0,ii=this.atoms.length;ii>i;i++)this.atoms[i].draw(ctx,specs);if(specs.bonds_display)for(var i=0,ii=this.bonds.length;ii>i;i++)this.bonds[i].draw(ctx,specs);if(specs.atoms_display)for(var i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];specs.atoms_circles_2D&&a.draw(ctx,specs),a.query&&a.query.draw(ctx,specs,a)}},_.render=function(gl,specs){this.specs&&(specs=this.specs);var isMacro=this.atoms.length>0&&void 0!==this.atoms[0].hetatm;if(isMacro){if(specs.macro_displayBonds){this.bonds.length>0&&(specs.bonds_renderAsLines_3D&&!this.residueSpecs||this.residueSpecs&&this.residueSpecs.bonds_renderAsLines_3D?(gl.lineWidth(this.residueSpecs?this.residueSpecs.bonds_width_2D:specs.bonds_width_2D),gl.lineBuffer.bindBuffers(gl)):gl.cylinderBuffer.bindBuffers(gl),gl.material.setTempColors(specs.bonds_materialAmbientColor_3D,void 0,specs.bonds_materialSpecularColor_3D,specs.bonds_materialShininess_3D));for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];!b.a1.hetatm&&(-1===specs.macro_atomToLigandDistance||void 0!==b.a1.closestDistance&&specs.macro_atomToLigandDistance>=b.a1.closestDistance&&specs.macro_atomToLigandDistance>=b.a2.closestDistance)&&b.render(gl,this.residueSpecs?this.residueSpecs:specs)}}if(specs.macro_displayAtoms){this.atoms.length>0&&(gl.sphereBuffer.bindBuffers(gl),gl.material.setTempColors(specs.atoms_materialAmbientColor_3D,void 0,specs.atoms_materialSpecularColor_3D,specs.atoms_materialShininess_3D));for(var i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];!a.hetatm&&(-1===specs.macro_atomToLigandDistance||void 0!==a.closestDistance&&specs.macro_atomToLigandDistance>=a.closestDistance)&&a.render(gl,this.residueSpecs?this.residueSpecs:specs)}}}if(specs.bonds_display){var asPills=[],asSpheres=[];this.bonds.length>0&&(specs.bonds_renderAsLines_3D?(gl.lineWidth(specs.bonds_width_2D),gl.lineBuffer.bindBuffers(gl)):gl.cylinderBuffer.bindBuffers(gl),gl.material.setTempColors(specs.bonds_materialAmbientColor_3D,void 0,specs.bonds_materialSpecularColor_3D,specs.bonds_materialShininess_3D));for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];(!isMacro||b.a1.hetatm)&&(specs.bonds_showBondOrders_3D?0==b.bondOrder?asSpheres.push(b):.5==b.bondOrder?asPills.push(b):(1.5==b.bondOrder&&asPills.push(b),b.render(gl,specs)):b.render(gl,specs))}if(asPills.length>0){specs.bonds_renderAsLines_3D||gl.pillBuffer.bindBuffers(gl);for(var i=0,ii=asPills.length;ii>i;i++)asPills[i].render(gl,specs,!0)}if(asSpheres.length>0){specs.bonds_renderAsLines_3D||gl.sphereBuffer.bindBuffers(gl);for(var i=0,ii=asSpheres.length;ii>i;i++)asSpheres[i].render(gl,specs,!0)}}if(specs.atoms_display){for(var i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];a.bondNumber=0,a.renderAsStar=!1}for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];b.a1.bondNumber++,b.a2.bondNumber++}this.atoms.length>0&&(gl.sphereBuffer.bindBuffers(gl),gl.material.setTempColors(specs.atoms_materialAmbientColor_3D,void 0,specs.atoms_materialSpecularColor_3D,specs.atoms_materialShininess_3D));for(var asStars=[],i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];(!isMacro||a.hetatm&&(specs.macro_showWater||!a.isWater))&&(specs.atoms_nonBondedAsStars_3D&&0===a.bondNumber?(a.renderAsStar=!0,asStars.push(a)):a.render(gl,specs))}if(asStars.length>0){gl.starBuffer.bindBuffers(gl);for(var i=0,ii=asStars.length;ii>i;i++)asStars[i].render(gl,specs)}}if(this.chains){if(gl.setMatrixUniforms(gl.modelViewMatrix),specs.proteins_displayRibbon){gl.material.setTempColors(specs.proteins_materialAmbientColor_3D,void 0,specs.proteins_materialSpecularColor_3D,specs.proteins_materialShininess_3D);for(var uses=specs.proteins_ribbonCartoonize?this.cartoons:this.ribbons,j=0,jj=uses.length;jj>j;j++){var use=uses[j];if("none"!==specs.proteins_residueColor){use.front.bindBuffers(gl);for(var rainbow="rainbow"===specs.proteins_residueColor,i=0,ii=use.front.segments.length;ii>i;i++)rainbow&&gl.material.setDiffuseColor(math.rainbowAt(i,ii,specs.macro_rainbowColors)),use.front.segments[i].render(gl,specs);use.back.bindBuffers(gl);for(var i=0,ii=use.back.segments.length;ii>i;i++)rainbow&&gl.material.setDiffuseColor(math.rainbowAt(i,ii,specs.macro_rainbowColors)),use.back.segments[i].render(gl,specs)}else use.front.render(gl,specs),use.back.render(gl,specs)}}if(specs.proteins_displayPipePlank)for(var j=0,jj=this.pipePlanks.length;jj>j;j++)this.pipePlanks[j].render(gl,specs);if(specs.proteins_displayBackbone){if(!this.alphaCarbonTrace){this.alphaCarbonTrace={nodes:[],edges:[]};for(var j=0,jj=this.chains.length;jj>j;j++){var rs=this.chains[j],isNucleotide=rs.length>2&&RESIDUE[rs[2].name]&&"#BEA06E"===RESIDUE[rs[2].name].aminoColor;if(!isNucleotide&&rs.length>0)for(var i=0,ii=rs.length-2;ii>i;i++){var n=rs[i].cp1;n.chainColor=rs.chainColor,this.alphaCarbonTrace.nodes.push(n);var b=new structures.Bond(rs[i].cp1,rs[i+1].cp1);b.residueName=rs[i].name,b.chainColor=rs.chainColor,this.alphaCarbonTrace.edges.push(b),i===rs.length-3&&(n=rs[i+1].cp1,n.chainColor=rs.chainColor,this.alphaCarbonTrace.nodes.push(n))}}}if(this.alphaCarbonTrace.nodes.length>0){var traceSpecs=new structures.VisualSpecifications;traceSpecs.atoms_display=!0,traceSpecs.bonds_display=!0,traceSpecs.atoms_sphereDiameter_3D=specs.proteins_backboneThickness,traceSpecs.bonds_cylinderDiameter_3D=specs.proteins_backboneThickness,traceSpecs.bonds_useJMOLColors=!1,traceSpecs.atoms_color=specs.proteins_backboneColor,traceSpecs.bonds_color=specs.proteins_backboneColor,traceSpecs.atoms_useVDWDiameters_3D=!1,gl.material.setTempColors(specs.proteins_materialAmbientColor_3D,void 0,specs.proteins_materialSpecularColor_3D,specs.proteins_materialShininess_3D),gl.material.setDiffuseColor(specs.proteins_backboneColor);for(var i=0,ii=this.alphaCarbonTrace.nodes.length;ii>i;i++){var n=this.alphaCarbonTrace.nodes[i];specs.macro_colorByChain&&(traceSpecs.atoms_color=n.chainColor),gl.sphereBuffer.bindBuffers(gl),n.render(gl,traceSpecs)}for(var i=0,ii=this.alphaCarbonTrace.edges.length;ii>i;i++){var color,e=this.alphaCarbonTrace.edges[i],r=RESIDUE[e.residueName]?RESIDUE[e.residueName]:RESIDUE["*"];specs.macro_colorByChain?color=e.chainColor:"shapely"===specs.proteins_residueColor?color=r.shapelyColor:"amino"===specs.proteins_residueColor?color=r.aminoColor:"polarity"===specs.proteins_residueColor?color=r.polar?"#C10000":"#FFFFFF":"acidity"===specs.proteins_residueColor?color=1===r.acidity?"#0000FF":-1===r.acidity?"#FF0000":r.polar?"#FFFFFF":"#773300":"rainbow"===specs.proteins_residueColor&&(color=math.rainbowAt(i,ii,specs.macro_rainbowColors)),color&&(traceSpecs.bonds_color=color),gl.cylinderBuffer.bindBuffers(gl),e.render(gl,traceSpecs)}}}if(specs.nucleics_display){gl.material.setTempColors(specs.nucleics_materialAmbientColor_3D,void 0,specs.nucleics_materialSpecularColor_3D,specs.nucleics_materialShininess_3D);for(var j=0,jj=this.tubes.length;jj>j;j++){gl.setMatrixUniforms(gl.modelViewMatrix);var use=this.tubes[j];use.render(gl,specs)}}}if(specs.atoms_display){for(var highlight=!1,i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];if(a.isHover||a.isSelected){highlight=!0;break}}if(!highlight)for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];if(b.isHover||b.isSelected){highlight=!0;break}}if(highlight){gl.sphereBuffer.bindBuffers(gl),gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.material.setTempColors(specs.atoms_materialAmbientColor_3D,void 0,"#000000",0),gl.enable(gl.BLEND),gl.depthMask(!1),gl.material.setAlpha(.4),gl.sphereBuffer.bindBuffers(gl);for(var i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];(a.isHover||a.isSelected)&&a.renderHighlight(gl,specs)}gl.cylinderBuffer.bindBuffers(gl);for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];(b.isHover||b.isSelected)&&b.renderHighlight(gl,specs)}gl.depthMask(!0),gl.disable(gl.BLEND),gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA)}}this.surface&&specs.surfaces_display&&(gl.setMatrixUniforms(gl.modelViewMatrix),this.surface.bindBuffers(gl),gl.material.setTempColors(specs.surfaces_materialAmbientColor_3D,specs.surfaces_color,specs.surfaces_materialSpecularColor_3D,specs.surfaces_materialShininess_3D),"Dot"===specs.surfaces_style?gl.drawArrays(gl.POINTS,0,this.surface.vertexPositionBuffer.numItems):gl.drawElements(gl.TRIANGLES,this.surface.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0))},_.renderPickFrame=function(gl,specs,objects,includeAtoms,includeBonds){this.specs&&(specs=this.specs);var isMacro=this.atoms.length>0&&void 0!==this.atoms[0].hetatm;if(includeBonds&&specs.bonds_display){this.bonds.length>0&&(specs.bonds_renderAsLines_3D?(gl.lineWidth(specs.bonds_width_2D),gl.lineBuffer.bindBuffers(gl)):gl.cylinderBuffer.bindBuffers(gl));for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];(!isMacro||b.a1.hetatm)&&(gl.material.setDiffuseColor(math.idx2color(objects.length)),b.renderPicker(gl,specs),objects.push(b))}}if(includeAtoms&&specs.atoms_display){for(var i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];a.bondNumber=0,a.renderAsStar=!1}for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];b.a1.bondNumber++,b.a2.bondNumber++}this.atoms.length>0&&gl.sphereBuffer.bindBuffers(gl);for(var asStars=[],i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];(!isMacro||a.hetatm&&(specs.macro_showWater||!a.isWater))&&(specs.atoms_nonBondedAsStars_3D&&0===a.bondNumber?(a.renderAsStar=!0,asStars.push(a)):(gl.material.setDiffuseColor(math.idx2color(objects.length)),a.render(gl,specs,!0),objects.push(a)))}if(asStars.length>0){gl.starBuffer.bindBuffers(gl);for(var i=0,ii=asStars.length;ii>i;i++){var a=asStars[i];gl.material.setDiffuseColor(math.idx2color(objects.length)),a.render(gl,specs,!0),objects.push(a)}}}},_.getCenter3D=function(){if(1===this.atoms.length)return new structures.Atom("C",this.atoms[0].x,this.atoms[0].y,this.atoms[0].z);var minX=1/0,minY=1/0,minZ=1/0,maxX=-(1/0),maxY=-(1/0),maxZ=-(1/0);if(this.chains)for(var i=0,ii=this.chains.length;ii>i;i++)for(var chain=this.chains[i],j=0,jj=chain.length;jj>j;j++){var residue=chain[j];minX=m.min(residue.cp1.x,residue.cp2.x,minX),minY=m.min(residue.cp1.y,residue.cp2.y,minY),minZ=m.min(residue.cp1.z,residue.cp2.z,minZ),maxX=m.max(residue.cp1.x,residue.cp2.x,maxX),maxY=m.max(residue.cp1.y,residue.cp2.y,maxY),maxZ=m.max(residue.cp1.z,residue.cp2.z,maxZ)}for(var i=0,ii=this.atoms.length;ii>i;i++)minX=m.min(this.atoms[i].x,minX),minY=m.min(this.atoms[i].y,minY),minZ=m.min(this.atoms[i].z,minZ),maxX=m.max(this.atoms[i].x,maxX),maxY=m.max(this.atoms[i].y,maxY),maxZ=m.max(this.atoms[i].z,maxZ);return new structures.Atom("C",(maxX+minX)/2,(maxY+minY)/2,(maxZ+minZ)/2)},_.getCenter=function(){if(1===this.atoms.length)return new structures.Point(this.atoms[0].x,this.atoms[0].y);for(var minX=1/0,minY=1/0,maxX=-(1/0),maxY=-(1/0),i=0,ii=this.atoms.length;ii>i;i++)minX=m.min(this.atoms[i].x,minX),minY=m.min(this.atoms[i].y,minY),maxX=m.max(this.atoms[i].x,maxX),maxY=m.max(this.atoms[i].y,maxY);return new structures.Point((maxX+minX)/2,(maxY+minY)/2)},_.getDimension=function(){if(1===this.atoms.length)return new structures.Point(0,0);var minX=1/0,minY=1/0,maxX=-(1/0),maxY=-(1/0);if(this.chains){for(var i=0,ii=this.chains.length;ii>i;i++)for(var chain=this.chains[i],j=0,jj=chain.length;jj>j;j++){var residue=chain[j];minX=m.min(residue.cp1.x,residue.cp2.x,minX),minY=m.min(residue.cp1.y,residue.cp2.y,minY),maxX=m.max(residue.cp1.x,residue.cp2.x,maxX),maxY=m.max(residue.cp1.y,residue.cp2.y,maxY)}minX-=30,minY-=30,maxX+=30,maxY+=30}for(var i=0,ii=this.atoms.length;ii>i;i++)minX=m.min(this.atoms[i].x,minX),minY=m.min(this.atoms[i].y,minY),maxX=m.max(this.atoms[i].x,maxX),maxY=m.max(this.atoms[i].y,maxY);return new structures.Point(maxX-minX,maxY-minY)},_.check=function(force){if(force&&this.doChecks){if(this.findRings)if(this.bonds.length-this.atoms.length!==this.fjNumCache){this.rings=new c.informatics.SSSRFinder(this).rings;for(var i=0,ii=this.bonds.length;ii>i;i++)this.bonds[i].ring=void 0;for(var i=0,ii=this.rings.length;ii>i;i++)this.rings[i].setupBonds()}else for(var i=0,ii=this.rings.length;ii>i;i++){var r=this.rings[i];r.center=r.getCenter()}for(var i=0,ii=this.atoms.length;ii>i;i++)if(this.atoms[i].isLone=!1,
"C"===this.atoms[i].label){for(var counter=0,j=0,jj=this.bonds.length;jj>j;j++)(this.bonds[j].a1===this.atoms[i]||this.bonds[j].a2===this.atoms[i])&&counter++;0===counter&&(this.atoms[i].isLone=!0)}for(var sort=!1,i=0,ii=this.atoms.length;ii>i;i++)0!==this.atoms[i].z&&(sort=!0);sort&&(this.sortAtomsByZ(),this.sortBondsByZ()),this.setupMetaData(),this.atomNumCache=this.atoms.length,this.bondNumCache=this.bonds.length,this.fjNumCache=this.bonds.length-this.atoms.length}this.doChecks=!force},_.getAngles=function(a){for(var angles=[],i=0,ii=this.bonds.length;ii>i;i++)this.bonds[i].contains(a)&&angles.push(a.angle(this.bonds[i].getNeighbor(a)));return angles.sort(),angles},_.getCoordinationNumber=function(bs){for(var coordinationNumber=0,i=0,ii=bs.length;ii>i;i++)coordinationNumber+=bs[i].bondOrder;return coordinationNumber},_.getBonds=function(a){for(var bonds=[],i=0,ii=this.bonds.length;ii>i;i++)this.bonds[i].contains(a)&&bonds.push(this.bonds[i]);return bonds},_.sortAtomsByZ=function(){for(var i=1,ii=this.atoms.length;ii>i;i++)for(var index=i;index>0&&this.atoms[index].z<this.atoms[index-1].z;){var hold=this.atoms[index];this.atoms[index]=this.atoms[index-1],this.atoms[index-1]=hold,index--}},_.sortBondsByZ=function(){for(var i=1,ii=this.bonds.length;ii>i;i++)for(var index=i;index>0&&this.bonds[index].a1.z+this.bonds[index].a2.z<this.bonds[index-1].a1.z+this.bonds[index-1].a2.z;){var hold=this.bonds[index];this.bonds[index]=this.bonds[index-1],this.bonds[index-1]=hold,index--}},_.setupMetaData=function(){for(var center=this.getCenter(),i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];a.bonds=this.getBonds(a),a.angles=this.getAngles(a),a.isHidden=2===a.bonds.length&&m.abs(m.abs(a.angles[1]-a.angles[0])-m.PI)<m.PI/30&&a.bonds[0].bondOrder===a.bonds[1].bondOrder;var angleData=math.angleBetweenLargest(a.angles);a.angleOfLeastInterference=angleData.angle%(2*m.PI),a.largestAngle=angleData.largest,a.coordinationNumber=this.getCoordinationNumber(a.bonds),a.bondNumber=a.bonds.length,a.molCenter=center}for(var i=0,ii=this.bonds.length;ii>i;i++){var b=this.bonds[i];b.molCenter=center}},_.scaleToAverageBondLength=function(length){var avBondLength=this.getAverageBondLength();if(0!==avBondLength)for(var scale=length/avBondLength,i=0,ii=this.atoms.length;ii>i;i++)this.atoms[i].x*=scale,this.atoms[i].y*=scale},_.getAverageBondLength=function(){if(0===this.bonds.length)return 0;for(var tot=0,i=0,ii=this.bonds.length;ii>i;i++)tot+=this.bonds[i].getLength();return tot/=this.bonds.length},_.getBounds=function(){for(var bounds=new math.Bounds,i=0,ii=this.atoms.length;ii>i;i++)bounds.expand(this.atoms[i].getBounds());if(this.chains){for(var i=0,ii=this.chains.length;ii>i;i++)for(var chain=this.chains[i],j=0,jj=chain.length;jj>j;j++){var residue=chain[j];bounds.expand(residue.cp1.x,residue.cp1.y),bounds.expand(residue.cp2.x,residue.cp2.y)}bounds.minX-=30,bounds.minY-=30,bounds.maxX+=30,bounds.maxY+=30}return bounds},_.getBounds3D=function(){for(var bounds=new math.Bounds,i=0,ii=this.atoms.length;ii>i;i++)bounds.expand(this.atoms[i].getBounds3D());if(this.chains)for(var i=0,ii=this.chains.length;ii>i;i++)for(var chain=this.chains[i],j=0,jj=chain.length;jj>j;j++){var residue=chain[j];bounds.expand3D(residue.cp1.x,residue.cp1.y,residue.cp1.z),bounds.expand3D(residue.cp2.x,residue.cp2.y,residue.cp2.z)}return bounds}}(ChemDoodle,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.RESIDUE,Math),function(structures,m,m4,v3){"use strict";function setupMatrices(verticalResolution){var n2=verticalResolution*verticalResolution,n3=verticalResolution*verticalResolution*verticalResolution,S=[6/n3,0,0,0,6/n3,2/n2,0,0,1/n3,1/n2,1/verticalResolution,0,0,0,0,1],Bm=[-1/6,.5,-0.5,1/6,.5,-1,.5,0,-0.5,0,.5,0,1/6,2/3,1/6,0];SB=m4.multiply(Bm,S,[]),lastVerticalResolution=verticalResolution}var SB,lastVerticalResolution=-1;structures.Residue=function(resSeq){this.resSeq=resSeq};var _=structures.Residue.prototype;_.setup=function(nextAlpha,horizontalResolution){this.horizontalResolution=horizontalResolution;var A=[nextAlpha.x-this.cp1.x,nextAlpha.y-this.cp1.y,nextAlpha.z-this.cp1.z],B=[this.cp2.x-this.cp1.x,this.cp2.y-this.cp1.y,this.cp2.z-this.cp1.z],C=v3.cross(A,B,[]);this.D=v3.cross(C,A,[]),v3.normalize(C),v3.normalize(this.D),this.guidePointsSmall=[],this.guidePointsLarge=[];var P=[(nextAlpha.x+this.cp1.x)/2,(nextAlpha.y+this.cp1.y)/2,(nextAlpha.z+this.cp1.z)/2];this.helix&&(v3.scale(C,1.5),v3.add(P,C)),this.guidePointsSmall[0]=new structures.Atom("",P[0]-this.D[0]/2,P[1]-this.D[1]/2,P[2]-this.D[2]/2);for(var i=1;horizontalResolution>i;i++)this.guidePointsSmall[i]=new structures.Atom("",this.guidePointsSmall[0].x+this.D[0]*i/horizontalResolution,this.guidePointsSmall[0].y+this.D[1]*i/horizontalResolution,this.guidePointsSmall[0].z+this.D[2]*i/horizontalResolution);v3.scale(this.D,4),this.guidePointsLarge[0]=new structures.Atom("",P[0]-this.D[0]/2,P[1]-this.D[1]/2,P[2]-this.D[2]/2);for(var i=1;horizontalResolution>i;i++)this.guidePointsLarge[i]=new structures.Atom("",this.guidePointsLarge[0].x+this.D[0]*i/horizontalResolution,this.guidePointsLarge[0].y+this.D[1]*i/horizontalResolution,this.guidePointsLarge[0].z+this.D[2]*i/horizontalResolution)},_.getGuidePointSet=function(type){return 0===type?this.helix||this.sheet?this.guidePointsLarge:this.guidePointsSmall:1===type?this.guidePointsSmall:2===type?this.guidePointsLarge:void 0},_.computeLineSegments=function(b2,b1,a1,doCartoon,verticalResolution){this.setVerticalResolution(verticalResolution),this.split=a1.helix!==this.helix||a1.sheet!==this.sheet,this.lineSegments=this.innerCompute(0,b2,b1,a1,!1,verticalResolution),doCartoon&&(this.lineSegmentsCartoon=this.innerCompute(this.helix||this.sheet?2:1,b2,b1,a1,!0,verticalResolution))},_.innerCompute=function(set,b2,b1,a1,useArrows,verticalResolution){for(var segments=[],use=this.getGuidePointSet(set),useb2=b2.getGuidePointSet(set),useb1=b1.getGuidePointSet(set),usea1=a1.getGuidePointSet(set),l=0,ll=use.length;ll>l;l++){for(var G=[useb2[l].x,useb2[l].y,useb2[l].z,1,useb1[l].x,useb1[l].y,useb1[l].z,1,use[l].x,use[l].y,use[l].z,1,usea1[l].x,usea1[l].y,usea1[l].z,1],M=m4.multiply(G,SB,[]),strand=[],k=0;verticalResolution>k;k++){for(var i=3;i>0;i--)for(var j=0;4>j;j++)M[4*i+j]+=M[4*(i-1)+j];strand[k]=new structures.Atom("",M[12]/M[15],M[13]/M[15],M[14]/M[15])}segments[l]=strand}if(useArrows&&this.arrow)for(var i=0,ii=verticalResolution;ii>i;i++)for(var mult=1.5-1.3*i/verticalResolution,mid=m.floor(this.horizontalResolution/2),center=segments[mid],j=0,jj=segments.length;jj>j;j++)if(j!==mid){var o=center[i],f=segments[j][i],vec=[f.x-o.x,f.y-o.y,f.z-o.z];v3.scale(vec,mult),f.x=o.x+vec[0],f.y=o.y+vec[1],f.z=o.z+vec[2]}return segments},_.setVerticalResolution=function(verticalResolution){verticalResolution!==lastVerticalResolution&&setupMatrices(verticalResolution)}}(ChemDoodle.structures,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(extensions,structures,math,q,m){"use strict";structures.Spectrum=function(){this.data=[],this.metadata=[],this.dataDisplay=[],this.memory={offsetTop:0,offsetLeft:0,offsetBottom:0,flipXAxis:!1,scale:1,width:0,height:0}};var _=structures.Spectrum.prototype;_.title=void 0,_.xUnit=void 0,_.yUnit=void 0,_.continuous=!0,_.integrationSensitivity=.01,_.draw=function(ctx,specs,width,height){this.specs&&(specs=this.specs);var offsetTop=5,offsetLeft=0,offsetBottom=0;ctx.fillStyle=specs.text_color,ctx.textAlign="center",ctx.textBaseline="alphabetic",ctx.font=extensions.getFontString(specs.text_font_size,specs.text_font_families),this.xUnit&&(offsetBottom+=specs.text_font_size,ctx.fillText(this.xUnit,width/2,height-2)),this.yUnit&&specs.plots_showYAxis&&(offsetLeft+=specs.text_font_size,ctx.save(),ctx.translate(specs.text_font_size,height/2),ctx.rotate(-m.PI/2),ctx.fillText(this.yUnit,0,0),ctx.restore()),this.title&&(offsetTop+=specs.text_font_size,ctx.fillText(this.title,width/2,specs.text_font_size)),ctx.lineCap="square",offsetBottom+=5+specs.text_font_size,specs.plots_showYAxis&&(offsetLeft+=5+ctx.measureText("1000").width),specs.plots_showGrid&&(ctx.strokeStyle=specs.plots_gridColor,ctx.lineWidth=specs.plots_gridLineWidth,ctx.strokeRect(offsetLeft,offsetTop,width-offsetLeft,height-offsetBottom-offsetTop)),ctx.textAlign="center",ctx.textBaseline="top";for(var span=this.maxX-this.minX,t=span/100,major=.001;t>major||span/major>25;)major*=10;for(var counter=0,overlapX=specs.plots_flipXAxis?width:0,i=m.round(this.minX/major)*major;i<=this.maxX;i+=major/2){var x=this.getTransformedX(i,specs,width,offsetLeft);if(x>offsetLeft)if(ctx.strokeStyle="black",ctx.lineWidth=1,counter%2===0){ctx.beginPath(),ctx.moveTo(x,height-offsetBottom),ctx.lineTo(x,height-offsetBottom+2),ctx.stroke();for(var s=i.toFixed(5);"0"===s.charAt(s.length-1);)s=s.substring(0,s.length-1);"."===s.charAt(s.length-1)&&(s=s.substring(0,s.length-1));var numWidth=ctx.measureText(s).width;specs.plots_flipXAxis&&(numWidth*=-1);var ls=x-numWidth/2;(specs.plots_flipXAxis?overlapX>ls:ls>overlapX)&&(ctx.fillText(s,x,height-offsetBottom+2),overlapX=x+numWidth/2),specs.plots_showGrid&&(ctx.strokeStyle=specs.plots_gridColor,ctx.lineWidth=specs.plots_gridLineWidth,ctx.beginPath(),ctx.moveTo(x,height-offsetBottom),ctx.lineTo(x,offsetTop),ctx.stroke())}else ctx.beginPath(),ctx.moveTo(x,height-offsetBottom),ctx.lineTo(x,height-offsetBottom+2),ctx.stroke();counter++}if(specs.plots_showYAxis||specs.plots_showGrid){var spany=1/specs.scale;ctx.textAlign="right",ctx.textBaseline="middle";for(var i=0;10>=i;i++){var yval=spany/10*i,y=offsetTop+(height-offsetBottom-offsetTop)*(1-yval*specs.scale);if(specs.plots_showGrid&&(ctx.strokeStyle=specs.plots_gridColor,ctx.lineWidth=specs.plots_gridLineWidth,ctx.beginPath(),ctx.moveTo(offsetLeft,y),ctx.lineTo(width,y),ctx.stroke()),specs.plots_showYAxis){ctx.strokeStyle="black",ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(offsetLeft,y),ctx.lineTo(offsetLeft-3,y),ctx.stroke();var val=100*yval,cutoff=m.max(0,3-m.floor(val).toString().length),s=val.toFixed(cutoff);if(cutoff>0)for(;"0"===s.charAt(s.length-1);)s=s.substring(0,s.length-1);"."===s.charAt(s.length-1)&&(s=s.substring(0,s.length-1)),ctx.fillText(s,offsetLeft-3,y)}}}if(ctx.strokeStyle="black",ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(width,height-offsetBottom),ctx.lineTo(offsetLeft,height-offsetBottom),specs.plots_showYAxis&&ctx.lineTo(offsetLeft,offsetTop),ctx.stroke(),this.dataDisplay.length>0){ctx.textAlign="left",ctx.textBaseline="top";for(var mcount=0,i=0,ii=this.dataDisplay.length;ii>i;i++)if(this.dataDisplay[i].value)ctx.fillText([this.dataDisplay[i].display,": ",this.dataDisplay[i].value].join(""),offsetLeft+10,offsetTop+10+mcount*(specs.text_font_size+5)),mcount++;else if(this.dataDisplay[i].tag)for(var j=0,jj=this.metadata.length;jj>j;j++)if(extensions.stringStartsWith(this.metadata[j],this.dataDisplay[i].tag)){var draw=this.metadata[j];if(this.dataDisplay[i].display){var index=this.metadata[j].indexOf("=");draw=[this.dataDisplay[i].display,": ",index>-1?this.metadata[j].substring(index+2):this.metadata[j]].join("")}ctx.fillText(draw,offsetLeft+10,offsetTop+10+mcount*(specs.text_font_size+5)),mcount++;break}}this.drawPlot(ctx,specs,width,height,offsetTop,offsetLeft,offsetBottom),this.memory.offsetTop=offsetTop,this.memory.offsetLeft=offsetLeft,this.memory.offsetBottom=offsetBottom,this.memory.flipXAxis=specs.plots_flipXAxis,this.memory.scale=specs.scale,this.memory.width=width,this.memory.height=height},_.drawPlot=function(ctx,specs,width,height,offsetTop,offsetLeft,offsetBottom){this.specs&&(specs=this.specs),ctx.strokeStyle=specs.plots_color,ctx.lineWidth=specs.plots_width;var integration=[];if(ctx.save(),ctx.rect(offsetLeft,offsetTop,width-offsetLeft,height-offsetBottom-offsetTop),ctx.clip(),ctx.beginPath(),this.continuous)for(var started=!1,counter=0,stop=!1,i=0,ii=this.data.length;ii>i;i++){var xnext,x=this.getTransformedX(this.data[i].x,specs,width,offsetLeft);if(ii>i&&!started&&this.data[i+1]&&(xnext=this.getTransformedX(this.data[i+1].x,specs,width,offsetLeft)),x>=offsetLeft&&width>x||void 0!==xnext&&xnext>=offsetLeft&&width>xnext){var y=this.getTransformedY(this.data[i].y,specs,height,offsetBottom,offsetTop);if(specs.plots_showIntegration&&m.abs(this.data[i].y)>this.integrationSensitivity&&integration.push(new structures.Point(this.data[i].x,this.data[i].y)),started||(ctx.moveTo(x,y),started=!0),ctx.lineTo(x,y),counter++,counter%1e3===0&&(ctx.stroke(),ctx.beginPath(),ctx.moveTo(x,y)),stop)break}else started&&(stop=!0)}else for(var i=0,ii=this.data.length;ii>i;i++){var x=this.getTransformedX(this.data[i].x,specs,width,offsetLeft);x>=offsetLeft&&width>x&&(ctx.moveTo(x,height-offsetBottom),ctx.lineTo(x,this.getTransformedY(this.data[i].y,specs,height,offsetBottom,offsetTop)))}if(ctx.stroke(),specs.plots_showIntegration&&integration.length>1){ctx.strokeStyle=specs.plots_integrationColor,ctx.lineWidth=specs.plots_integrationLineWidth,ctx.beginPath();var max,ascending=integration[1].x>integration[0].x;if(this.flipXAxis&&!ascending||!this.flipXAxis&&ascending){for(var i=integration.length-2;i>=0;i--)integration[i].y=integration[i].y+integration[i+1].y;max=integration[0].y}else{for(var i=1,ii=integration.length;ii>i;i++)integration[i].y=integration[i].y+integration[i-1].y;max=integration[integration.length-1].y}for(var i=0,ii=integration.length;ii>i;i++){var x=this.getTransformedX(integration[i].x,specs,width,offsetLeft),y=this.getTransformedY(integration[i].y/specs.scale/max,specs,height,offsetBottom,offsetTop);0===i?ctx.moveTo(x,y):ctx.lineTo(x,y)}ctx.stroke()}ctx.restore()},_.getTransformedY=function(y,specs,height,offsetBottom,offsetTop){return offsetTop+(height-offsetBottom-offsetTop)*(1-y*specs.scale)},_.getInverseTransformedY=function(y){return(1-(y-this.memory.offsetTop)/(this.memory.height-this.memory.offsetBottom-this.memory.offsetTop))/this.memory.scale*100},_.getTransformedX=function(x,specs,width,offsetLeft){var returning=offsetLeft+(x-this.minX)/(this.maxX-this.minX)*(width-offsetLeft);return specs.plots_flipXAxis&&(returning=width+offsetLeft-returning),returning},_.getInverseTransformedX=function(x){return this.memory.flipXAxis&&(x=this.memory.width+this.memory.offsetLeft-x),(x-this.memory.offsetLeft)*(this.maxX-this.minX)/(this.memory.width-this.memory.offsetLeft)+this.minX},_.setup=function(){for(var xmin=Number.MAX_VALUE,xmax=Number.MIN_VALUE,ymax=Number.MIN_VALUE,i=0,ii=this.data.length;ii>i;i++)xmin=m.min(xmin,this.data[i].x),xmax=m.max(xmax,this.data[i].x),ymax=m.max(ymax,this.data[i].y);this.continuous?(this.minX=xmin,this.maxX=xmax):(this.minX=xmin-1,this.maxX=xmax+1);for(var i=0,ii=this.data.length;ii>i;i++)this.data[i].y/=ymax},_.zoom=function(pixel1,pixel2,width,rescaleY){var p1=this.getInverseTransformedX(pixel1),p2=this.getInverseTransformedX(pixel2);if(this.minX=m.min(p1,p2),this.maxX=m.max(p1,p2),rescaleY){for(var ymax=Number.MIN_VALUE,i=0,ii=this.data.length;ii>i;i++)math.isBetween(this.data[i].x,this.minX,this.maxX)&&(ymax=m.max(ymax,this.data[i].y));return 1/ymax}},_.translate=function(dif,width){var dist=dif/(width-this.memory.offsetLeft)*(this.maxX-this.minX)*(this.memory.flipXAxis?1:-1);this.minX+=dist,this.maxX+=dist},_.alertMetadata=function(){alert(this.metadata.join("\n"))},_.getInternalCoordinates=function(x,y){return new ChemDoodle.structures.Point(this.getInverseTransformedX(x),this.getInverseTransformedY(y))},_.getClosestPlotInternalCoordinates=function(x){var xtl=this.getInverseTransformedX(x-1),xtr=this.getInverseTransformedX(x+1);if(xtl>xtr){var temp=xtl;xtl=xtr,xtr=temp}for(var highest=-1,max=-(1/0),inRange=!1,i=0,ii=this.data.length;ii>i;i++){var p=this.data[i];if(math.isBetween(p.x,xtl,xtr))p.y>max&&(inRange=!0,max=p.y,highest=i);else if(inRange)break}if(-1!==highest){var p=this.data[highest];return new ChemDoodle.structures.Point(p.x,100*p.y)}},_.getClosestPeakInternalCoordinates=function(x){for(var xt=this.getInverseTransformedX(x),closest=0,dif=1/0,i=0,ii=this.data.length;ii>i;i++){var sub=m.abs(this.data[i].x-xt);if(!(dif>=sub))break;dif=sub,closest=i}for(var highestLeft=closest,highestRight=closest,maxLeft=this.data[closest].y,maxRight=this.data[closest].y,i=closest+1,ii=this.data.length;ii>i&&this.data[i].y+.05>maxRight;i++)maxRight=this.data[i].y,highestRight=i;for(var i=closest-1;i>=0&&this.data[i].y+.05>maxLeft;i--)maxLeft=this.data[i].y,highestLeft=i;var p=this.data[highestLeft-closest>highestRight-closest?highestRight:highestLeft];return new ChemDoodle.structures.Point(p.x,100*p.y)}}(ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.math,ChemDoodle.lib.jQuery,Math),function(math,d2,m){"use strict";d2._Shape=function(){};var _=d2._Shape.prototype;_.drawDecorations=function(ctx,specs){if(this.isHover)for(var ps=this.getPoints(),i=0,ii=ps.length;ii>i;i++){var p=ps[i];this.drawAnchor(ctx,specs,p,p===this.hoverPoint)}},_.getBounds=function(){for(var bounds=new math.Bounds,ps=this.getPoints(),i=0,ii=ps.length;ii>i;i++){var p=ps[i];bounds.expand(p.x,p.y)}return bounds},_.drawAnchor=function(ctx,specs,p,hovered){ctx.save(),ctx.translate(p.x,p.y),ctx.rotate(m.PI/4),ctx.scale(1/specs.scale,1/specs.scale);var boxRadius=4,innerRadius=boxRadius/2;ctx.beginPath(),ctx.moveTo(-boxRadius,-boxRadius),ctx.lineTo(boxRadius,-boxRadius),ctx.lineTo(boxRadius,boxRadius),ctx.lineTo(-boxRadius,boxRadius),ctx.closePath(),hovered?ctx.fillStyle="#885110":ctx.fillStyle="white",ctx.fill(),ctx.beginPath(),ctx.moveTo(-boxRadius,-innerRadius),ctx.lineTo(-boxRadius,-boxRadius),ctx.lineTo(-innerRadius,-boxRadius),ctx.moveTo(innerRadius,-boxRadius),ctx.lineTo(boxRadius,-boxRadius),ctx.lineTo(boxRadius,-innerRadius),ctx.moveTo(boxRadius,innerRadius),ctx.lineTo(boxRadius,boxRadius),ctx.lineTo(innerRadius,boxRadius),ctx.moveTo(-innerRadius,boxRadius),ctx.lineTo(-boxRadius,boxRadius),ctx.lineTo(-boxRadius,innerRadius),ctx.moveTo(-boxRadius,-innerRadius),ctx.strokeStyle="rgba(0,0,0,.2)",ctx.lineWidth=5,ctx.stroke(),ctx.strokeStyle="blue",ctx.lineWidth=1,ctx.stroke(),ctx.restore()}}(ChemDoodle.math,ChemDoodle.structures.d2,Math),function(extensions,math,structures,d2,m){"use strict";d2.Bracket=function(p1,p2){this.p1=p1?p1:new structures.Point,this.p2=p2?p2:new structures.Point};var _=d2.Bracket.prototype=new d2._Shape;_.charge=0,_.mult=0,_.repeat=0,_.draw=function(ctx,specs){var minX=m.min(this.p1.x,this.p2.x),maxX=m.max(this.p1.x,this.p2.x),minY=m.min(this.p1.y,this.p2.y),maxY=m.max(this.p1.y,this.p2.y),h=maxY-minY,lip=h/10;if(ctx.beginPath(),ctx.moveTo(minX+lip,minY),ctx.lineTo(minX,minY),ctx.lineTo(minX,maxY),ctx.lineTo(minX+lip,maxY),ctx.moveTo(maxX-lip,maxY),ctx.lineTo(maxX,maxY),ctx.lineTo(maxX,minY),ctx.lineTo(maxX-lip,minY),this.isLassoed){var grd=ctx.createLinearGradient(this.p1.x,this.p1.y,this.p2.x,this.p2.y);grd.addColorStop(0,"rgba(212, 99, 0, 0)"),grd.addColorStop(.5,"rgba(212, 99, 0, 0.8)"),grd.addColorStop(1,"rgba(212, 99, 0, 0)"),ctx.lineWidth=specs.shapes_lineWidth+5,ctx.strokeStyle=grd,ctx.lineJoin="miter",ctx.lineCap="square",ctx.stroke()}if(ctx.strokeStyle=specs.shapes_color,ctx.lineWidth=specs.shapes_lineWidth,ctx.lineJoin="miter",ctx.lineCap="butt",ctx.stroke(),0!==this.charge){ctx.fillStyle=specs.text_color,ctx.textAlign="left",ctx.textBaseline="alphabetic",ctx.font=extensions.getFontString(specs.text_font_size,specs.text_font_families);var s=this.charge.toFixed(0);"1"===s?s="+":"-1"===s?s="â":extensions.stringStartsWith(s,"-")?s=s.substring(1)+"â":s+="+",ctx.fillText(s,maxX+5,minY+5)}if(0!==this.mult&&(ctx.fillStyle=specs.text_color,ctx.textAlign="right",ctx.textBaseline="middle",ctx.font=extensions.getFontString(specs.text_font_size,specs.text_font_families),ctx.fillText(this.mult.toFixed(0),minX-5,minY+h/2)),0!==this.repeat){ctx.fillStyle=specs.text_color,ctx.textAlign="left",ctx.textBaseline="top",ctx.font=extensions.getFontString(specs.text_font_size,specs.text_font_families);var s=this.repeat.toFixed(0);ctx.fillText(s,maxX+5,maxY-5)}},_.getPoints=function(){return[this.p1,this.p2]},_.isOver=function(p,barrier){return math.isBetween(p.x,this.p1.x,this.p2.x)&&math.isBetween(p.y,this.p1.y,this.p2.y)}}(ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.structures.d2,Math),function(math,structures,d2,m){"use strict";d2.Line=function(p1,p2){this.p1=p1?p1:new structures.Point,this.p2=p2?p2:new structures.Point},d2.Line.ARROW_SYNTHETIC="synthetic",d2.Line.ARROW_RETROSYNTHETIC="retrosynthetic",d2.Line.ARROW_RESONANCE="resonance",d2.Line.ARROW_EQUILIBRIUM="equilibrium";var _=d2.Line.prototype=new d2._Shape;_.arrowType=void 0,_.topText=void 0,_.bottomText=void 0,_.draw=function(ctx,specs){if(this.isLassoed){var grd=ctx.createLinearGradient(this.p1.x,this.p1.y,this.p2.x,this.p2.y);grd.addColorStop(0,"rgba(212, 99, 0, 0)"),grd.addColorStop(.5,"rgba(212, 99, 0, 0.8)"),grd.addColorStop(1,"rgba(212, 99, 0, 0)");var useDist=2.5,perpendicular=this.p1.angle(this.p2)+m.PI/2,mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=this.p1.x-mcosp*useDist,cy1=this.p1.y+msinp*useDist,cx2=this.p1.x+mcosp*useDist,cy2=this.p1.y-msinp*useDist,cx3=this.p2.x+mcosp*useDist,cy3=this.p2.y-msinp*useDist,cx4=this.p2.x-mcosp*useDist,cy4=this.p2.y+msinp*useDist;ctx.fillStyle=grd,ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(cx2,cy2),ctx.lineTo(cx3,cy3),ctx.lineTo(cx4,cy4),ctx.closePath(),ctx.fill()}if(ctx.strokeStyle=specs.shapes_color,ctx.fillStyle=specs.shapes_color,ctx.lineWidth=specs.shapes_lineWidth,ctx.lineJoin="miter",ctx.lineCap="butt",this.p1.x!==this.p2.x||this.p1.y!==this.p2.y){if(this.arrowType===d2.Line.ARROW_RETROSYNTHETIC){var r2=2*m.sqrt(2),useDist=specs.shapes_arrowLength_2D/r2,angle=this.p1.angle(this.p2),perpendicular=angle+m.PI/2,retract=specs.shapes_arrowLength_2D/r2,mcosa=m.cos(angle),msina=m.sin(angle),mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=this.p1.x-mcosp*useDist,cy1=this.p1.y+msinp*useDist,cx2=this.p1.x+mcosp*useDist,cy2=this.p1.y-msinp*useDist,cx3=this.p2.x+mcosp*useDist-mcosa*retract,cy3=this.p2.y-msinp*useDist+msina*retract,cx4=this.p2.x-mcosp*useDist-mcosa*retract,cy4=this.p2.y+msinp*useDist+msina*retract,ax1=this.p2.x+mcosp*useDist*2-mcosa*retract*2,ay1=this.p2.y-msinp*useDist*2+msina*retract*2,ax2=this.p2.x-mcosp*useDist*2-mcosa*retract*2,ay2=this.p2.y+msinp*useDist*2+msina*retract*2;ctx.beginPath(),ctx.moveTo(cx2,cy2),ctx.lineTo(cx3,cy3),ctx.moveTo(ax1,ay1),ctx.lineTo(this.p2.x,this.p2.y),ctx.lineTo(ax2,ay2),ctx.moveTo(cx4,cy4),ctx.lineTo(cx1,cy1),ctx.stroke()}else if(this.arrowType===d2.Line.ARROW_EQUILIBRIUM){var r2=2*m.sqrt(2),useDist=specs.shapes_arrowLength_2D/r2/2,angle=this.p1.angle(this.p2),perpendicular=angle+m.PI/2,retract=2*specs.shapes_arrowLength_2D/m.sqrt(3),mcosa=m.cos(angle),msina=m.sin(angle),mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular),cx1=this.p1.x-mcosp*useDist,cy1=this.p1.y+msinp*useDist,cx2=this.p1.x+mcosp*useDist,cy2=this.p1.y-msinp*useDist,cx3=this.p2.x+mcosp*useDist,cy3=this.p2.y-msinp*useDist,cx4=this.p2.x-mcosp*useDist,cy4=this.p2.y+msinp*useDist;ctx.beginPath(),ctx.moveTo(cx2,cy2),ctx.lineTo(cx3,cy3),ctx.moveTo(cx4,cy4),ctx.lineTo(cx1,cy1),ctx.stroke();var rx1=cx3-mcosa*retract*.8,ry1=cy3+msina*retract*.8,ax1=cx3+mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,ay1=cy3-msinp*specs.shapes_arrowLength_2D/3+msina*retract;ctx.beginPath(),ctx.moveTo(cx3,cy3),ctx.lineTo(ax1,ay1),ctx.lineTo(rx1,ry1),ctx.closePath(),ctx.fill(),ctx.stroke(),rx1=cx1+mcosa*retract*.8,ry1=cy1-msina*retract*.8,ax1=cx1-mcosp*specs.shapes_arrowLength_2D/3+mcosa*retract,ay1=cy1+msinp*specs.shapes_arrowLength_2D/3-msina*retract,ctx.beginPath(),ctx.moveTo(cx1,cy1),ctx.lineTo(ax1,ay1),ctx.lineTo(rx1,ry1),ctx.closePath(),ctx.fill(),ctx.stroke()}else if(this.arrowType===d2.Line.ARROW_SYNTHETIC){var angle=this.p1.angle(this.p2),perpendicular=angle+m.PI/2,retract=2*specs.shapes_arrowLength_2D/m.sqrt(3),mcosa=m.cos(angle),msina=m.sin(angle),mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular);ctx.beginPath(),ctx.moveTo(this.p1.x,this.p1.y),ctx.lineTo(this.p2.x-mcosa*retract/2,this.p2.y+msina*retract/2),ctx.stroke();var rx1=this.p2.x-mcosa*retract*.8,ry1=this.p2.y+msina*retract*.8,ax1=this.p2.x+mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,ay1=this.p2.y-msinp*specs.shapes_arrowLength_2D/3+msina*retract,ax2=this.p2.x-mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,ay2=this.p2.y+msinp*specs.shapes_arrowLength_2D/3+msina*retract;ctx.beginPath(),ctx.moveTo(this.p2.x,this.p2.y),ctx.lineTo(ax2,ay2),ctx.lineTo(rx1,ry1),ctx.lineTo(ax1,ay1),ctx.closePath(),ctx.fill(),ctx.stroke()}else if(this.arrowType===d2.Line.ARROW_RESONANCE){var angle=this.p1.angle(this.p2),perpendicular=angle+m.PI/2,retract=2*specs.shapes_arrowLength_2D/m.sqrt(3),mcosa=m.cos(angle),msina=m.sin(angle),mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular);ctx.beginPath(),ctx.moveTo(this.p1.x+mcosa*retract/2,this.p1.y-msina*retract/2),ctx.lineTo(this.p2.x-mcosa*retract/2,this.p2.y+msina*retract/2),ctx.stroke();var rx1=this.p2.x-mcosa*retract*.8,ry1=this.p2.y+msina*retract*.8,ax1=this.p2.x+mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,ay1=this.p2.y-msinp*specs.shapes_arrowLength_2D/3+msina*retract,ax2=this.p2.x-mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,ay2=this.p2.y+msinp*specs.shapes_arrowLength_2D/3+msina*retract;ctx.beginPath(),ctx.moveTo(this.p2.x,this.p2.y),ctx.lineTo(ax2,ay2),ctx.lineTo(rx1,ry1),ctx.lineTo(ax1,ay1),ctx.closePath(),ctx.fill(),ctx.stroke(),rx1=this.p1.x+mcosa*retract*.8,ry1=this.p1.y-msina*retract*.8,ax1=this.p1.x-mcosp*specs.shapes_arrowLength_2D/3+mcosa*retract,ay1=this.p1.y+msinp*specs.shapes_arrowLength_2D/3-msina*retract,ax2=this.p1.x+mcosp*specs.shapes_arrowLength_2D/3+mcosa*retract,ay2=this.p1.y-msinp*specs.shapes_arrowLength_2D/3-msina*retract,ctx.beginPath(),ctx.moveTo(this.p1.x,this.p1.y),ctx.lineTo(ax2,ay2),ctx.lineTo(rx1,ry1),ctx.lineTo(ax1,ay1),ctx.closePath(),ctx.fill(),ctx.stroke()}else ctx.beginPath(),ctx.moveTo(this.p1.x,this.p1.y),ctx.lineTo(this.p2.x,this.p2.y),ctx.stroke();this.topText&&(ctx.textAlign="center",ctx.textBaseline="bottom",ctx.fillText(this.topText,(this.p1.x+this.p2.x)/2,this.p1.y-5)),this.bottomText&&(ctx.textAlign="center",ctx.textBaseline="top",ctx.fillText(this.bottomText,(this.p1.x+this.p2.x)/2,this.p1.y+5))}},_.getPoints=function(){return[this.p1,this.p2]},_.isOver=function(p,barrier){var dist=math.distanceFromPointToLineInclusive(p,this.p1,this.p2);return-1!==dist&&barrier>dist}}(ChemDoodle.math,ChemDoodle.structures,ChemDoodle.structures.d2,Math),function(math,jsb,structures,d2,m){"use strict";var getPossibleAngles=function(o){var as=[];if(o instanceof structures.Atom){if(0===o.bondNumber)as.push(m.PI);else if(o.angles){if(1===o.angles.length)as.push(o.angles[0]+m.PI);else{for(var i=1,ii=o.angles.length;ii>i;i++)as.push(o.angles[i-1]+(o.angles[i]-o.angles[i-1])/2);var firstIncreased=o.angles[0]+2*m.PI,last=o.angles[o.angles.length-1];as.push(last+(firstIncreased-last)/2)}if(o.largestAngle>m.PI&&(as=[o.angleOfLeastInterference]),o.bonds)for(var i=0,ii=o.bonds.length;ii>i;i++){var b=o.bonds[i];if(2===b.bondOrder){var n=b.getNeighbor(o);if("O"===n.label){as=[n.angle(o)];break}}}}}else{var angle=o.a1.angle(o.a2);as.push(angle+m.PI/2),as.push(angle+3*m.PI/2)}for(var i=0,ii=as.length;ii>i;i++){for(;as[i]>2*m.PI;)as[i]-=2*m.PI;for(;as[i]<0;)as[i]+=2*m.PI}return as},getPullBack=function(o,specs){var pullback=3;return o instanceof structures.Atom?(o.isLabelVisible(specs)&&(pullback=8),(0!==o.charge||0!==o.numRadical||0!==o.numLonePair)&&(pullback=13)):o instanceof structures.Point?pullback=0:o.bondOrder>1&&(pullback=5),pullback},drawPusher=function(ctx,specs,o1,o2,p1,c1,c2,p2,numElectron,caches){var angle1=c1.angle(p1),angle2=c2.angle(p2),mcosa=m.cos(angle1),msina=m.sin(angle1),pullBack=getPullBack(o1,specs);p1.x-=mcosa*pullBack,p1.y+=msina*pullBack;var perpendicular=angle2+m.PI/2,retract=2*specs.shapes_arrowLength_2D/m.sqrt(3),mcosa=m.cos(angle2),msina=m.sin(angle2),mcosp=m.cos(perpendicular),msinp=m.sin(perpendicular);p2.x-=5*mcosa,p2.y+=5*msina;var nap=new structures.Point(p2.x,p2.y);pullBack=getPullBack(o2,specs)/3,nap.x-=mcosa*pullBack,nap.y+=msina*pullBack,p2.x-=mcosa*(.8*retract+pullBack),p2.y+=msina*(.8*retract+pullBack);var rx1=nap.x-mcosa*retract*.8,ry1=nap.y+msina*retract*.8,a1=new structures.Point(nap.x+mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,nap.y-msinp*specs.shapes_arrowLength_2D/3+msina*retract),a2=new structures.Point(nap.x-mcosp*specs.shapes_arrowLength_2D/3-mcosa*retract,nap.y+msinp*specs.shapes_arrowLength_2D/3+msina*retract),include1=!0,include2=!0;1===numElectron&&(a1.distance(c1)>a2.distance(c1)?include2=!1:include1=!1),ctx.beginPath(),ctx.moveTo(nap.x,nap.y),include2&&ctx.lineTo(a2.x,a2.y),ctx.lineTo(rx1,ry1),include1&&ctx.lineTo(a1.x,a1.y),ctx.closePath(),ctx.fill(),ctx.stroke(),ctx.beginPath(),ctx.moveTo(p1.x,p1.y),ctx.bezierCurveTo(c1.x,c1.y,c2.x,c2.y,p2.x,p2.y),ctx.stroke(),caches.push([p1,c1,c2,p2])};d2.Pusher=function(o1,o2,numElectron){this.o1=o1,this.o2=o2,this.numElectron=numElectron?numElectron:1};var _=d2.Pusher.prototype=new d2._Shape;_.drawDecorations=function(ctx,specs){if(this.isHover)for(var p1=this.o1 instanceof structures.Atom?new structures.Point(this.o1.x,this.o1.y):this.o1.getCenter(),p2=this.o2 instanceof structures.Atom?new structures.Point(this.o2.x,this.o2.y):this.o2.getCenter(),ps=[p1,p2],i=0,ii=ps.length;ii>i;i++){var p=ps[i];this.drawAnchor(ctx,specs,p,p===this.hoverPoint)}},_.draw=function(ctx,specs){if(this.o1&&this.o2){ctx.strokeStyle=specs.shapes_color,ctx.fillStyle=specs.shapes_color,ctx.lineWidth=specs.shapes_lineWidth,ctx.lineJoin="miter",ctx.lineCap="butt";for(var c1,c2,p1=this.o1 instanceof structures.Atom?new structures.Point(this.o1.x,this.o1.y):this.o1.getCenter(),p2=this.o2 instanceof structures.Atom?new structures.Point(this.o2.x,this.o2.y):this.o2.getCenter(),controlDist=35,as1=getPossibleAngles(this.o1),as2=getPossibleAngles(this.o2),minDif=1/0,i=0,ii=as1.length;ii>i;i++)for(var j=0,jj=as2.length;jj>j;j++){var c1c=new structures.Point(p1.x+controlDist*m.cos(as1[i]),p1.y-controlDist*m.sin(as1[i])),c2c=new structures.Point(p2.x+controlDist*m.cos(as2[j]),p2.y-controlDist*m.sin(as2[j])),dif=c1c.distance(c2c);minDif>dif&&(minDif=dif,c1=c1c,c2=c2c)}if(this.caches=[],-1===this.numElectron){var dist=p1.distance(p2)/2,angle=p1.angle(p2),perp=angle+m.PI/2,mcosa=m.cos(angle),msina=m.sin(angle),m1=new structures.Point(p1.x+(dist-1)*mcosa,p1.y-(dist-1)*msina),cm1=new structures.Point(m1.x+m.cos(perp+m.PI/6)*controlDist,m1.y-m.sin(perp+m.PI/6)*controlDist),m2=new structures.Point(p1.x+(dist+1)*mcosa,p1.y-(dist+1)*msina),cm2=new structures.Point(m2.x+m.cos(perp-m.PI/6)*controlDist,m2.y-m.sin(perp-m.PI/6)*controlDist);drawPusher(ctx,specs,this.o1,m1,p1,c1,cm1,m1,1,this.caches),drawPusher(ctx,specs,this.o2,m2,p2,c2,cm2,m2,1,this.caches)}else{if(math.intersectLines(p1.x,p1.y,c1.x,c1.y,p2.x,p2.y,c2.x,c2.y)){var tmp=c1;c1=c2,c2=tmp}var angle1=c1.angle(p1),angle2=c2.angle(p2),angleDif=m.max(angle1,angle2)-m.min(angle1,angle2);m.abs(angleDif-m.PI)<.001&&this.o1.molCenter===this.o2.molCenter&&(angle1+=m.PI/2,angle2-=m.PI/2,c1.x=p1.x+controlDist*m.cos(angle1+m.PI),c1.y=p1.y-controlDist*m.sin(angle1+m.PI),c2.x=p2.x+controlDist*m.cos(angle2+m.PI),c2.y=p2.y-controlDist*m.sin(angle2+m.PI)),drawPusher(ctx,specs,this.o1,this.o2,p1,c1,c2,p2,this.numElectron,this.caches)}}},_.getPoints=function(){return[]},_.isOver=function(p,barrier){for(var i=0,ii=this.caches.length;ii>i;i++){var r=jsb.distanceFromCurve(p,this.caches[i]);if(r.distance<barrier)return!0}return!1}}(ChemDoodle.math,ChemDoodle.math.jsBezier,ChemDoodle.structures,ChemDoodle.structures.d2,Math),function(d3,m){"use strict";d3._Mesh=function(){};var _=d3._Mesh.prototype;_.storeData=function(positionData,normalData,indexData){this.positionData=positionData,this.normalData=normalData,this.indexData=indexData},_.setupBuffers=function(gl){if(this.vertexPositionBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexPositionBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.positionData),gl.STATIC_DRAW),this.vertexPositionBuffer.itemSize=3,
this.vertexPositionBuffer.numItems=this.positionData.length/3,this.vertexNormalBuffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexNormalBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.normalData),gl.STATIC_DRAW),this.vertexNormalBuffer.itemSize=3,this.vertexNormalBuffer.numItems=this.normalData.length/3,this.indexData&&(this.vertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexData),gl.STATIC_DRAW),this.vertexIndexBuffer.itemSize=1,this.vertexIndexBuffer.numItems=this.indexData.length),this.partitions)for(var i=0,ii=this.partitions.length;ii>i;i++){var p=this.partitions[i],buffers=this.generateBuffers(gl,p.positionData,p.normalData,p.indexData);p.vertexPositionBuffer=buffers[0],p.vertexNormalBuffer=buffers[1],p.vertexIndexBuffer=buffers[2]}},_.generateBuffers=function(gl,positionData,normalData,indexData){var vertexPositionBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexPositionBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(positionData),gl.STATIC_DRAW),vertexPositionBuffer.itemSize=3,vertexPositionBuffer.numItems=positionData.length/3;var vertexNormalBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexNormalBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(normalData),gl.STATIC_DRAW),vertexNormalBuffer.itemSize=3,vertexNormalBuffer.numItems=normalData.length/3;var vertexIndexBuffer;return indexData&&(vertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,vertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(indexData),gl.STATIC_DRAW),vertexIndexBuffer.itemSize=1,vertexIndexBuffer.numItems=indexData.length),[vertexPositionBuffer,vertexNormalBuffer,vertexIndexBuffer]},_.bindBuffers=function(gl){this.vertexPositionBuffer||this.setupBuffers(gl),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexPositionBuffer),gl.vertexAttribPointer(gl.shader.vertexPositionAttribute,this.vertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexNormalBuffer),gl.vertexAttribPointer(gl.shader.vertexNormalAttribute,this.vertexNormalBuffer.itemSize,gl.FLOAT,!1,0,0),this.vertexIndexBuffer&&gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)}}(ChemDoodle.structures.d3,Math),function(d3){"use strict";d3._Measurement=function(){};var _=d3._Measurement.prototype=new d3._Mesh;_.render=function(gl,specs){if(gl.setMatrixUniforms(gl.modelViewMatrix),specs.measurement_update_3D&&(this.vertexPositionBuffer=void 0,this.text=void 0),this.vertexPositionBuffer||this.calculateData(specs),this.bindBuffers(gl),gl.material.setDiffuseColor(specs.shapes_color),gl.lineWidth(specs.shapes_lineWidth),gl.drawElements(gl.LINES,this.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),specs.measurement_displayText_3D){this.text||(this.text=this.getText(specs));var vertexData={position:[],texCoord:[],translation:[]};gl.textImage.pushVertexData(this.text.value,this.text.pos,1,vertexData),gl.textMesh.storeData(gl,vertexData.position,vertexData.texCoord,vertexData.translation),gl.enable(gl.BLEND),gl.depthMask(!1),gl.enableVertexAttribArray(gl.shader.vertexTexCoordAttribute),gl.textImage.useTexture(gl),gl.textMesh.render(gl),gl.disableVertexAttribArray(gl.shader.vertexTexCoordAttribute),gl.disable(gl.BLEND),gl.depthMask(!0)}}}(ChemDoodle.structures.d3),function(ELEMENT,extensions,d3,math,m,m4,v3){"use strict";d3.Angle=function(a1,a2,a3){this.a1=a1,this.a2=a2,this.a3=a3};var _=d3.Angle.prototype=new d3._Measurement;_.calculateData=function(specs){var positionData=[],normalData=[],indexData=[],dist1=this.a2.distance3D(this.a1),dist2=this.a2.distance3D(this.a3);this.distUse=m.min(dist1,dist2)/2,this.vec1=v3.normalize([this.a1.x-this.a2.x,this.a1.y-this.a2.y,this.a1.z-this.a2.z]),this.vec2=v3.normalize([this.a3.x-this.a2.x,this.a3.y-this.a2.y,this.a3.z-this.a2.z]),this.angle=extensions.vec3AngleFrom(this.vec1,this.vec2);for(var axis=v3.normalize(v3.cross(this.vec1,this.vec2,[])),vec3=v3.normalize(v3.cross(axis,this.vec1,[])),bands=specs.measurement_angleBands_3D,i=0;bands>=i;++i){var theta=this.angle*i/bands,vecCos=v3.scale(this.vec1,m.cos(theta),[]),vecSin=v3.scale(vec3,m.sin(theta),[]),norm=v3.scale(v3.normalize(v3.add(vecCos,vecSin,[])),this.distUse);positionData.push(this.a2.x+norm[0],this.a2.y+norm[1],this.a2.z+norm[2]),normalData.push(0,0,0),bands>i&&indexData.push(i,i+1)}this.storeData(positionData,normalData,indexData)},_.getText=function(specs){var vecCenter=v3.scale(v3.normalize(v3.add(this.vec1,this.vec2,[])),this.distUse+.3);return{pos:[this.a2.x+vecCenter[0],this.a2.y+vecCenter[1],this.a2.z+vecCenter[2]],value:[math.angleBounds(this.angle,!0).toFixed(2)," Â°"].join("")}}}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.structures.d3,ChemDoodle.math,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(d3,m){"use strict";d3.Arrow=function(radius,longitudeBands){for(var positionData=[],normalData=[],longNumber=0;longitudeBands>=longNumber;longNumber++){var theta=2*longNumber*m.PI/longitudeBands,sinTheta=m.sin(theta),cosTheta=m.cos(theta),x=cosTheta,y=sinTheta;normalData.push(0,0,-1,0,0,-1,x,y,0,x,y,0,0,0,-1,0,0,-1,x,y,1,x,y,1),positionData.push(0,0,0,radius*x,radius*y,0,radius*x,radius*y,0,radius*x,radius*y,2,radius*x,radius*y,2,radius*x*2,radius*y*2,2,radius*x*2,radius*y*2,2,0,0,3)}for(var indexData=[],i=0;longitudeBands>i;i++)for(var offset=8*i,j=0,jj=7;jj>j;j++){var first=j+offset,second=first+1,third=first+jj+2,forth=third-1;indexData.push(first,third,second,third,first,forth)}this.storeData(positionData,normalData,indexData)},d3.Arrow.prototype=new d3._Mesh}(ChemDoodle.structures.d3,Math),function(d3,m){"use strict";d3.Box=function(width,height,depth){width/=2,depth/=2;var positionData=[],normalData=[];positionData.push(width,height,-depth),positionData.push(width,height,-depth),positionData.push(-width,height,-depth),positionData.push(width,height,depth),positionData.push(-width,height,depth),positionData.push(-width,height,depth);for(var i=6;i--;normalData.push(0,1,0));positionData.push(-width,height,depth),positionData.push(-width,height,depth),positionData.push(-width,0,depth),positionData.push(width,height,depth),positionData.push(width,0,depth),positionData.push(width,0,depth);for(var i=6;i--;normalData.push(0,0,1));positionData.push(width,height,depth),positionData.push(width,height,depth),positionData.push(width,0,depth),positionData.push(width,height,-depth),positionData.push(width,0,-depth),positionData.push(width,0,-depth);for(var i=6;i--;normalData.push(1,0,0));positionData.push(width,height,-depth),positionData.push(width,height,-depth),positionData.push(width,0,-depth),positionData.push(-width,height,-depth),positionData.push(-width,0,-depth),positionData.push(-width,0,-depth);for(var i=6;i--;normalData.push(0,0,-1));positionData.push(-width,height,-depth),positionData.push(-width,height,-depth),positionData.push(-width,0,-depth),positionData.push(-width,height,depth),positionData.push(-width,0,depth),positionData.push(-width,0,depth);for(var i=6;i--;normalData.push(-1,0,0));positionData.push(-width,0,depth),positionData.push(-width,0,depth),positionData.push(-width,0,-depth),positionData.push(width,0,depth),positionData.push(width,0,-depth),positionData.push(width,0,-depth);for(var i=6;i--;normalData.push(0,-1,0));this.storeData(positionData,normalData)},d3.Box.prototype=new d3._Mesh}(ChemDoodle.structures.d3,Math),function(d3,m,m4){"use strict";d3.LineArrow=function(){var d=2.8,w=.1;this.storeData([0,0,-3,w,0,-d,0,0,-3,-w,0,-d,0,0,-3,0,0,3,0,0,3,w,0,d,0,0,3,-w,0,d],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},d3.LineArrow.prototype=new d3._Mesh,d3.Compass=function(gl,specs){this.textImage=new d3.TextImage,this.textImage.init(gl),this.textImage.updateFont(gl,specs.text_font_size,specs.text_font_families,specs.text_font_bold,specs.text_font_italic,specs.text_font_stroke_3D),this.textMesh=new d3.TextMesh,this.textMesh.init(gl);var fnProjection,z,screenRatioHeight=specs.compass_size_3D/gl.canvas.clientHeight,height=3/screenRatioHeight,tanTheta=m.tan(specs.projectionPerspectiveVerticalFieldOfView_3D/360*m.PI),depth=height/tanTheta,near=m.max(depth-height,.1),far=depth+height,aspec=gl.canvas.clientWidth/gl.canvas.clientHeight;specs.projectionPerspective_3D?(z=near,fnProjection=m4.frustum):(z=depth,fnProjection=m4.ortho);var nearRatio=z/gl.canvas.clientHeight*2*tanTheta,top=tanTheta*z,bottom=-top,left=aspec*bottom,right=aspec*top;if(0===specs.compass_type_3D){var deltaX=-(gl.canvas.clientWidth-specs.compass_size_3D)/2+this.textImage.charHeight,deltaY=-(gl.canvas.clientHeight-specs.compass_size_3D)/2+this.textImage.charHeight,x=deltaX*nearRatio,y=deltaY*nearRatio;left-=x,right-=x,bottom-=y,top-=y}this.projectionMatrix=fnProjection(left,right,bottom,top,near,far),this.translationMatrix=m4.translate(m4.identity([]),[0,0,-depth]);var vertexData={position:[],texCoord:[],translation:[]},textPos=3.5;this.textImage.pushVertexData("X",[textPos,0,0],0,vertexData),this.textImage.pushVertexData("Y",[0,textPos,0],0,vertexData),this.textImage.pushVertexData("Z",[0,0,textPos],0,vertexData),this.textMesh.storeData(gl,vertexData.position,vertexData.texCoord,vertexData.translation)};var _=d3.Compass.prototype;_.renderArrow=function(gl,type,color,mvMatrix){gl.material.setDiffuseColor(color),gl.setMatrixUniforms(mvMatrix),1===type?gl.drawArrays(gl.LINES,0,gl.lineArrowBuffer.vertexPositionBuffer.numItems):gl.drawElements(gl.TRIANGLES,gl.arrowBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)},_.render=function(gl,specs){1===specs.compass_type_3D?gl.lineArrowBuffer.bindBuffers(gl):gl.arrowBuffer.bindBuffers(gl),gl.material.setTempColors(specs.bonds_materialAmbientColor_3D,void 0,specs.bonds_materialSpecularColor_3D,specs.bonds_materialShininess_3D);var modelMatrix=m4.multiply(this.translationMatrix,gl.rotationMatrix,[]),angle=m.PI/2;gl.fogging.setMode(0),this.renderArrow(gl,specs.compass_type_3D,specs.compass_axisXColor_3D,m4.rotateY(modelMatrix,angle,[])),this.renderArrow(gl,specs.compass_type_3D,specs.compass_axisYColor_3D,m4.rotateX(modelMatrix,-angle,[])),this.renderArrow(gl,specs.compass_type_3D,specs.compass_axisZColor_3D,modelMatrix)},_.renderAxis=function(gl){var modelMatrix=m4.multiply(this.translationMatrix,gl.rotationMatrix,[]);gl.setMatrixUniforms(modelMatrix),this.textImage.useTexture(gl),this.textMesh.render(gl)}}(ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4),function(d3,m){"use strict";d3.Cylinder=function(radius,height,bands,closed){var positionData=[],normalData=[];if(closed){for(var i=0;bands>=i;i++){var theta=i%bands*2*m.PI/bands,cosTheta=m.cos(theta),sinTheta=m.sin(theta);normalData.push(0,-1,0),positionData.push(0,0,0),normalData.push(0,-1,0),positionData.push(radius*cosTheta,0,radius*sinTheta)}for(var i=0;bands>=i;i++){var theta=i%bands*2*m.PI/bands,cosTheta=m.cos(theta),sinTheta=m.sin(theta);normalData.push(cosTheta,0,sinTheta),positionData.push(radius*cosTheta,0,radius*sinTheta),normalData.push(cosTheta,0,sinTheta),positionData.push(radius*cosTheta,height,radius*sinTheta)}for(var i=0;bands>=i;i++){var theta=i%bands*2*m.PI/bands,cosTheta=m.cos(theta),sinTheta=m.sin(theta);normalData.push(0,1,0),positionData.push(radius*cosTheta,height,radius*sinTheta),normalData.push(0,1,0),positionData.push(0,height,0)}}else{for(var i=0;bands>i;i++){var theta=2*i*m.PI/bands,cosTheta=m.cos(theta),sinTheta=m.sin(theta);normalData.push(cosTheta,0,sinTheta),positionData.push(radius*cosTheta,0,radius*sinTheta),normalData.push(cosTheta,0,sinTheta),positionData.push(radius*cosTheta,height,radius*sinTheta)}normalData.push(1,0,0),positionData.push(radius,0,0),normalData.push(1,0,0),positionData.push(radius,height,0)}this.storeData(positionData,normalData)},d3.Cylinder.prototype=new d3._Mesh}(ChemDoodle.structures.d3,Math),function(ELEMENT,d3,m,v3){"use strict";d3.Distance=function(a1,a2,node,offset){this.a1=a1,this.a2=a2,this.node=node,this.offset=offset?offset:0};var _=d3.Distance.prototype=new d3._Measurement;_.calculateData=function(specs){var positionData=[this.a1.x,this.a1.y,this.a1.z,this.a2.x,this.a2.y,this.a2.z];if(this.node){var r1=specs.atoms_useVDWDiameters_3D?ELEMENT[this.a1.label].vdWRadius*specs.atoms_vdwMultiplier_3D:specs.atoms_sphereDiameter_3D/2,r2=specs.atoms_useVDWDiameters_3D?ELEMENT[this.a2.label].vdWRadius*specs.atoms_vdwMultiplier_3D:specs.atoms_sphereDiameter_3D/2;this.move=this.offset+m.max(r1,r2),this.displacement=[(this.a1.x+this.a2.x)/2-this.node.x,(this.a1.y+this.a2.y)/2-this.node.y,(this.a1.z+this.a2.z)/2-this.node.z],v3.normalize(this.displacement);var change=v3.scale(this.displacement,this.move,[]);positionData[0]+=change[0],positionData[1]+=change[1],positionData[2]+=change[2],positionData[3]+=change[0],positionData[4]+=change[1],positionData[5]+=change[2]}var normalData=[0,0,0,0,0,0],indexData=[0,1];this.storeData(positionData,normalData,indexData)},_.getText=function(specs){var dist=this.a1.distance3D(this.a2),center=[(this.a1.x+this.a2.x)/2,(this.a1.y+this.a2.y)/2,(this.a1.z+this.a2.z)/2];if(this.node){var change=v3.scale(this.displacement,this.move+.1,[]);center[0]+=change[0],center[1]+=change[1],center[2]+=change[2]}return{pos:center,value:[dist.toFixed(2)," â«"].join("")}}}(ChemDoodle.ELEMENT,ChemDoodle.structures.d3,Math,ChemDoodle.lib.vec3),function(math,d3,v3){"use strict";d3.Fog=function(gl){this.gl=gl;var prefix="u_fog_";this.mUL=gl.getUniformLocation(gl.program,prefix+"mode"),this.cUL=gl.getUniformLocation(gl.program,prefix+"color"),this.sUL=gl.getUniformLocation(gl.program,prefix+"start"),this.eUL=gl.getUniformLocation(gl.program,prefix+"end"),this.dUL=gl.getUniformLocation(gl.program,prefix+"density")};var _=d3.Fog.prototype;_.setTempParameter=function(color,fogStart,fogEnd,density){if(!this.cCache||this.cCache!==color){this.cCache=color;var cs=math.getRGB(color,1);this.gl.uniform3f(this.cUL,cs[0],cs[1],cs[2])}this.sCache&&this.sCache===fogStart||(this.sCache=fogStart,this.gl.uniform1f(this.sUL,fogStart)),this.eCache&&this.eCache===fogEnd||(this.eCache=fogEnd,this.gl.uniform1f(this.eUL,fogEnd)),this.dCache&&this.dCache===density||(this.dCache=density,this.gl.uniform1f(this.dUL,density))},_.setMode=function(mode){this.mCache&&this.mCache===mode||(this.mCache=mode,this.gl.uniform1i(this.mUL,mode))}}(ChemDoodle.math,ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(ELEMENT,d3){d3.Label=function(){this.textImage=new d3.TextImage};var _=d3.Label.prototype;_.init=function(gl,specs){this.textImage.init(gl),this.textImage.updateFont(gl,specs.atoms_font_size_2D,specs.atoms_font_families_2D,specs.atoms_font_bold_2D,specs.atoms_font_italic_2D,specs.text_font_stroke_3D)},_.updateVerticesBuffer=function(gl,molecules,specs){for(var i=0,ii=molecules.length;ii>i;i++){for(var molecule=molecules[i],moleculeLabel=molecule.labelMesh,atoms=molecule.atoms,textImage=this.textImage,vertexData={position:[],texCoord:[],translation:[]},isMacro=atoms.length>0&&void 0!=atoms[0].hetatm,j=0,jj=atoms.length;jj>j;j++){var atom=atoms[j],atomLabel=atom.label,zDepth=.05;if(specs.atoms_useVDWDiameters_3D){var add=ELEMENT[atomLabel].vdWRadius*specs.atoms_vdwMultiplier_3D;0===add&&(add=1),zDepth+=add}else specs.atoms_sphereDiameter_3D&&(zDepth+=specs.atoms_sphereDiameter_3D/2*1.5);if(isMacro)if(atom.hetatm){if(atom.isWater&&!specs.macro_showWaters)continue}else if(!specs.macro_displayAtoms)continue;textImage.pushVertexData(atom.altLabel?atom.altLabel:atom.label,[atom.x,atom.y,atom.z],zDepth,vertexData)}var chains=molecule.chains;if(chains&&(specs.proteins_displayRibbon||specs.proteins_displayBackbone))for(var j=0,jj=chains.length;jj>j;j++)for(var chain=chains[j],k=0,kk=chain.length;kk>k;k++){var residue=chain[k];if(residue.name){var atom=residue.cp1;textImage.pushVertexData(residue.name,[atom.x,atom.y,atom.z],2,vertexData)}}moleculeLabel.storeData(gl,vertexData.position,vertexData.texCoord,vertexData.translation,vertexData.zDepth)}},_.render=function(gl,specs,molecules){gl.setMatrixUniforms(gl.modelViewMatrix),this.textImage.useTexture(gl);for(var i=0,ii=molecules.length;ii>i;i++)molecules[i].labelMesh&&molecules[i].labelMesh.render(gl)}}(ChemDoodle.ELEMENT,ChemDoodle.structures.d3),function(d3,m){"use strict";d3.Sphere=function(radius,latitudeBands,longitudeBands){for(var positionData=[],normalData=[],latNumber=0;latitudeBands>=latNumber;latNumber++)for(var theta=latNumber*m.PI/latitudeBands,sinTheta=m.sin(theta),cosTheta=m.cos(theta),longNumber=0;longitudeBands>=longNumber;longNumber++){var phi=2*longNumber*m.PI/longitudeBands,sinPhi=m.sin(phi),cosPhi=m.cos(phi),x=cosPhi*sinTheta,y=cosTheta,z=sinPhi*sinTheta;normalData.push(x,y,z),positionData.push(radius*x,radius*y,radius*z)}var indexData=[];longitudeBands+=1;for(var latNumber=0;latitudeBands>latNumber;latNumber++)for(var longNumber=0;longitudeBands>longNumber;longNumber++){var first=latNumber*longitudeBands+longNumber%longitudeBands,second=first+longitudeBands;indexData.push(first,first+1,second),longitudeBands-1>longNumber&&indexData.push(second,first+1,second+1)}this.storeData(positionData,normalData,indexData)},d3.Sphere.prototype=new d3._Mesh}(ChemDoodle.structures.d3,Math),function(RESIDUE,d3,m,v3){"use strict";function SubRibbon(entire,name,indexes,pi){this.entire=entire,this.name=name,this.indexes=indexes,this.pi=pi}var loadPartition=function(gl,p){gl.bindBuffer(gl.ARRAY_BUFFER,p.vertexPositionBuffer),gl.vertexAttribPointer(gl.shader.vertexPositionAttribute,p.vertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,p.vertexNormalBuffer),gl.vertexAttribPointer(gl.shader.vertexNormalAttribute,p.vertexNormalBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,p.vertexIndexBuffer)},_2=SubRibbon.prototype;_2.getColor=function(specs){return specs.macro_colorByChain?this.entire.chainColor:this.name?this.getResidueColor(RESIDUE[this.name]?this.name:"*",specs):this.helix?this.entire.front?specs.proteins_ribbonCartoonHelixPrimaryColor:specs.proteins_ribbonCartoonHelixSecondaryColor:this.sheet?specs.proteins_ribbonCartoonSheetColor:this.entire.front?specs.proteins_primaryColor:specs.proteins_secondaryColor},_2.getResidueColor=function(name,specs){var r=RESIDUE[name];return"shapely"===specs.proteins_residueColor?r.shapelyColor:"amino"===specs.proteins_residueColor?r.aminoColor:"polarity"===specs.proteins_residueColor?r.polar?"#C10000":"#FFFFFF":"acidity"===specs.proteins_residueColor?1===r.acidity?"#0000FF":-1===r.acidity?"#FF0000":r.polar?"#FFFFFF":"#773300":"#FFFFFF"},_2.render=function(gl,specs,noColor){this.entire.partitions&&this.pi!==this.entire.partitions.lastRender&&(loadPartition(gl,this.entire.partitions[this.pi]),this.entire.partitions.lastRender=this.pi),this.vertexIndexBuffer||(this.vertexIndexBuffer=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexes),gl.STATIC_DRAW),this.vertexIndexBuffer.itemSize=1,this.vertexIndexBuffer.numItems=this.indexes.length),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),noColor||"rainbow"===specs.proteins_residueColor||gl.material.setDiffuseColor(this.getColor(specs)),gl.drawElements(gl.TRIANGLES,this.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)},d3.Ribbon=function(chain,offset,cartoon){var lineSegmentNum=chain[0].lineSegments.length,lineSegmentLength=chain[0].lineSegments[0].length;this.partitions=[],this.partitions.lastRender=0;var currentPartition;this.front=offset>0;for(var i=0,ii=chain.length;ii>i;i++){(!currentPartition||currentPartition.positionData.length>65e3)&&(this.partitions.length>0&&i--,currentPartition={count:0,positionData:[],normalData:[]},this.partitions.push(currentPartition));var residue=chain[i];currentPartition.count++;for(var j=0;lineSegmentNum>j;j++)for(var lineSegment=cartoon?residue.lineSegmentsCartoon[j]:residue.lineSegments[j],doSide1=0===j,doSide2=!1,k=0;lineSegmentLength>k;k++){var a=lineSegment[k],abovei=i,abovek=k+1;i===chain.length-1&&k===lineSegmentLength-1?abovek--:k===lineSegmentLength-1&&(abovei++,abovek=0);var above=cartoon?chain[abovei].lineSegmentsCartoon[j][abovek]:chain[abovei].lineSegments[j][abovek],negate=!1,nextj=j+1;j===lineSegmentNum-1&&(nextj-=2,negate=!0);var side=cartoon?residue.lineSegmentsCartoon[nextj][k]:residue.lineSegments[nextj][k],toAbove=[above.x-a.x,above.y-a.y,above.z-a.z],toSide=[side.x-a.x,side.y-a.y,side.z-a.z],normal=v3.cross(toAbove,toSide,[]);0===k&&(v3.normalize(toAbove),v3.scale(toAbove,-1),currentPartition.normalData.push(toAbove[0],toAbove[1],toAbove[2]),currentPartition.positionData.push(a.x,a.y,a.z)),doSide1||doSide2?(v3.normalize(toSide),v3.scale(toSide,-1),currentPartition.normalData.push(toSide[0],toSide[1],toSide[2]),currentPartition.positionData.push(a.x,a.y,a.z),doSide1&&k===lineSegmentLength-1&&(doSide1=!1,k=-1)):(v3.normalize(normal),(negate&&!this.front||!negate&&this.front)&&v3.scale(normal,-1),currentPartition.normalData.push(normal[0],normal[1],normal[2]),v3.scale(normal,m.abs(offset)),currentPartition.positionData.push(a.x+normal[0],a.y+normal[1],a.z+normal[2]),j===lineSegmentNum-1&&k===lineSegmentLength-1&&(doSide2=!0,k=-1)),(-1===k||k===lineSegmentLength-1)&&(v3.normalize(toAbove),currentPartition.normalData.push(toAbove[0],toAbove[1],toAbove[2]),currentPartition.positionData.push(a.x,a.y,a.z))}}lineSegmentNum+=2,lineSegmentLength+=2,this.segments=[],this.partitionSegments=[];for(var n=0,nn=this.partitions.length;nn>n;n++){for(var currentPartition=this.partitions[n],partitionSegmentIndexData=[],i=0,ii=currentPartition.count-1;ii>i;i++){for(var chainIndex=i,j=0;n>j;j++)chainIndex+=this.partitions[j].count-1;for(var c=chain[chainIndex],residueIndexStart=i*lineSegmentNum*lineSegmentLength,individualIndexData=[],j=0,jj=lineSegmentNum-1;jj>j;j++)for(var segmentIndexStart=residueIndexStart+j*lineSegmentLength,k=0;lineSegmentLength>k;k++){var nextRes=1;i===ii?nextRes=0:k===lineSegmentLength-1&&(nextRes=lineSegmentNum*lineSegmentLength-k);var add=[segmentIndexStart+k,segmentIndexStart+lineSegmentLength+k,segmentIndexStart+lineSegmentLength+k+nextRes,segmentIndexStart+k,segmentIndexStart+k+nextRes,segmentIndexStart+lineSegmentLength+k+nextRes];if(k!==lineSegmentLength-1&&(this.front?individualIndexData.push(add[0],add[1],add[2],add[3],add[5],add[4]):individualIndexData.push(add[0],add[2],add[1],add[3],add[4],add[5])),k===lineSegmentLength-2&&ii>i){var jump=lineSegmentNum*lineSegmentLength-k;add[2]+=jump,add[4]+=jump,add[5]+=jump}this.front?partitionSegmentIndexData.push(add[0],add[1],add[2],add[3],add[5],add[4]):partitionSegmentIndexData.push(add[0],add[2],add[1],add[3],add[4],add[5])}if(cartoon&&c.split){var sr=new SubRibbon(this,void 0,partitionSegmentIndexData,n);sr.helix=c.helix,sr.sheet=c.sheet,this.partitionSegments.push(sr),partitionSegmentIndexData=[]}this.segments.push(new SubRibbon(this,c.name,individualIndexData,n))}var sr=new SubRibbon(this,void 0,partitionSegmentIndexData,n);sr.helix=c.helix,sr.sheet=c.sheet,this.partitionSegments.push(sr)}this.storeData(this.partitions[0].positionData,this.partitions[0].normalData),1===this.partitions.length&&(this.partitions=void 0)};var _=d3.Ribbon.prototype=new d3._Mesh;_.render=function(gl,specs){this.bindBuffers(gl);var color=specs.macro_colorByChain?this.chainColor:void 0;color||(color=this.front?specs.proteins_primaryColor:specs.proteins_secondaryColor),gl.material.setDiffuseColor(color);for(var i=0,ii=this.partitionSegments.length;ii>i;i++)this.partitionSegments[i].render(gl,specs,!specs.proteins_ribbonCartoonize)}}(ChemDoodle.RESIDUE,ChemDoodle.structures.d3,Math,ChemDoodle.lib.vec3),function(math,d3,v3){"use strict";d3.Light=function(diffuseColor,specularColor,direction){this.diffuseRGB=math.getRGB(diffuseColor,1),this.specularRGB=math.getRGB(specularColor,1),this.direction=direction};var _=d3.Light.prototype;_.lightScene=function(gl){var prefix="u_light_";gl.uniform3f(gl.getUniformLocation(gl.program,prefix+"diffuse_color"),this.diffuseRGB[0],this.diffuseRGB[1],this.diffuseRGB[2]),gl.uniform3f(gl.getUniformLocation(gl.program,prefix+"specular_color"),this.specularRGB[0],this.specularRGB[1],this.specularRGB[2]);var lightingDirection=v3.create(this.direction);v3.normalize(lightingDirection),v3.negate(lightingDirection),gl.uniform3f(gl.getUniformLocation(gl.program,prefix+"direction"),lightingDirection[0],lightingDirection[1],lightingDirection[2]);var eyeVector=[0,0,0],halfVector=[eyeVector[0]+lightingDirection[0],eyeVector[1]+lightingDirection[1],eyeVector[2]+lightingDirection[2]],length=v3.length(halfVector);0===length?halfVector=[0,0,1]:v3.scale(halfVector,1/length),gl.uniform3f(gl.getUniformLocation(gl.program,prefix+"half_vector"),halfVector[0],halfVector[1],halfVector[2])}}(ChemDoodle.math,ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(d3){"use strict";d3.Line=function(){this.storeData([0,0,0,0,1,0],[0,0,0,0,0,0])},d3.Line.prototype=new d3._Mesh}(ChemDoodle.structures.d3),function(math,d3){"use strict";d3.Material=function(gl){this.gl=gl;var prefix="u_material_";this.aUL=gl.getUniformLocation(gl.program,prefix+"ambient_color"),this.dUL=gl.getUniformLocation(gl.program,prefix+"diffuse_color"),this.sUL=gl.getUniformLocation(gl.program,prefix+"specular_color"),this.snUL=gl.getUniformLocation(gl.program,prefix+"shininess"),this.alUL=gl.getUniformLocation(gl.program,prefix+"alpha")};var _=d3.Material.prototype;_.setTempColors=function(ambientColor,diffuseColor,specularColor,shininess){if(!this.aCache||this.aCache!==ambientColor){this.aCache=ambientColor;var cs=math.getRGB(ambientColor,1);this.gl.uniform3f(this.aUL,cs[0],cs[1],cs[2])}if(diffuseColor&&(!this.dCache||this.dCache!==diffuseColor)){this.dCache=diffuseColor;var cs=math.getRGB(diffuseColor,1);this.gl.uniform3f(this.dUL,cs[0],cs[1],cs[2])}if(!this.sCache||this.sCache!==specularColor){this.sCache=specularColor;var cs=math.getRGB(specularColor,1);this.gl.uniform3f(this.sUL,cs[0],cs[1],cs[2])}this.snCache&&this.snCache===shininess||(this.snCache=shininess,this.gl.uniform1f(this.snUL,shininess)),this.alCache=1,this.gl.uniform1f(this.alUL,1)},_.setDiffuseColor=function(diffuseColor){if(!this.dCache||this.dCache!==diffuseColor){this.dCache=diffuseColor;var cs=math.getRGB(diffuseColor,1);this.gl.uniform3f(this.dUL,cs[0],cs[1],cs[2])}},_.setAlpha=function(alpha){this.alCache&&this.alCache===alpha||(this.alCache=alpha,this.gl.uniform1f(this.alUL,alpha))}}(ChemDoodle.math,ChemDoodle.structures.d3),function(structures,d3,ELEMENT,m){"use strict";d3.MolecularSurface=function(molecule,latitudeBands,longitudeBands,probeRadius,atomRadius){function findClosestPoint(pNotContained,checks,exclude1,exclude2){var index=pNotContained.index;if(pNotContained.contained){index=-1;for(var dist=1/0,k=0,kk=checks.length;kk>k;k++)for(var check=checks[k],l=0,ll=check.length;ll>l;l++){var p=check[l];if(!p.contained&&p.index!==exclude1&&p.index!==exclude2){var distCheck=p.distance3D(pNotContained);dist>distCheck&&(index=p.index,dist=distCheck)}}}return index}for(var positionData=[],normalData=[],indexData=[],genericSurface=[],latNumber=0;latitudeBands>=latNumber;latNumber++)for(var theta=latNumber*m.PI/latitudeBands,sinTheta=m.sin(theta),cosTheta=m.cos(theta),longNumber=0;longitudeBands>=longNumber;longNumber++){var phi=2*longNumber*m.PI/longitudeBands;genericSurface.push(m.cos(phi)*sinTheta,cosTheta,m.sin(phi)*sinTheta)}for(var atomSurfaces=[],i=0,ii=molecule.atoms.length;ii>i;i++){for(var atomSurface=[],atom=molecule.atoms[i],radius=ELEMENT[atom.label][atomRadius]+probeRadius,checks=[],j=0,jj=molecule.atoms.length;jj>j;j++)if(j!==i){var check=molecule.atoms[j];check.index=j,atom.distance3D(check)<radius+ELEMENT[check.label][atomRadius]+probeRadius&&checks.push(check)}for(var j=0,jj=genericSurface.length;jj>j;j+=3){for(var p=new structures.Atom("C",atom.x+radius*genericSurface[j],atom.y+radius*genericSurface[j+1],atom.z+radius*genericSurface[j+2]),k=0,kk=checks.length;kk>k;k++){var check=checks[k];if(p.distance3D(check)<ELEMENT[check.label][atomRadius]+probeRadius){p.contained=!0;break}}atomSurface.push(p)}atomSurfaces.push(atomSurface)}var genericIndexes=[];longitudeBands++;for(var latNumber=0;latitudeBands>latNumber;latNumber++)for(var longNumber=0;longitudeBands>longNumber;longNumber++){var first=latNumber*longitudeBands+longNumber%longitudeBands,second=first+longitudeBands;genericIndexes.push(first),genericIndexes.push(second),genericIndexes.push(first+1),longitudeBands-1>longNumber&&(genericIndexes.push(second),genericIndexes.push(second+1),genericIndexes.push(first+1))}for(var indexCounter=0,i=0,ii=atomSurfaces.length;ii>i;i++){for(var atomSurface=atomSurfaces[i],j=0,jj=atomSurface.length;jj>j;j++){var p=atomSurface[j];p.contained||(p.index=indexCounter,indexCounter++,positionData.push(p.x,p.y,p.z),normalData.push(genericSurface[3*j],genericSurface[3*j+1],genericSurface[3*j+2]))}for(var j=0,jj=genericIndexes.length;jj>j;j+=3){var first=atomSurface[genericIndexes[j]],second=atomSurface[genericIndexes[j+1]],third=atomSurface[genericIndexes[j+2]];first.contained||second.contained||third.contained||indexData.push(first.index,second.index,third.index)}}for(var seams=[],i=0,ii=atomSurfaces.length;ii>i;i++)for(var atomSurface=atomSurfaces[i],j=0,jj=genericIndexes.length;jj>j;j+=3){for(var first=atomSurface[genericIndexes[j]],second=atomSurface[genericIndexes[j+1]],third=atomSurface[genericIndexes[j+2]],checks=[],k=0,kk=atomSurfaces.length;kk>k;k++)k!==i&&checks.push(atomSurfaces[k]);if(!(first.contained&&second.contained&&third.contained)&&(first.contained||second.contained||third.contained)){var fi=findClosestPoint(first,checks,-1,-1),si=findClosestPoint(second,checks,fi,-1),ti=findClosestPoint(third,checks,fi,si);if(-1!==fi&&-1!==si&&-1!==ti){for(var already=!1,k=0,kk=seams.length;kk>k;k+=3){var already1=seams[k],already2=seams[k+1],already3=seams[k+2],f1=fi===already1||fi===already2||fi===already3,f2=si===already1||si===already2||si===already3,f3=ti===already1||ti===already2||ti===already3;if(f1&&f2&&f3){already=!0;break}}already||seams.push(fi,si,ti)}}}indexData=indexData.concat(seams),this.storeData(positionData,normalData,indexData)},d3.MolecularSurface.prototype=new d3._Mesh}(ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.ELEMENT,Math),function(d3,math,document){"use strict";d3.Picker=function(){};var _=d3.Picker.prototype;_.init=function(gl){this.framebuffer=gl.createFramebuffer();var texture2D=gl.createTexture(),renderbuffer=gl.createRenderbuffer();gl.bindTexture(gl.TEXTURE_2D,texture2D),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.bindRenderbuffer(gl.RENDERBUFFER,renderbuffer),gl.bindFramebuffer(gl.FRAMEBUFFER,this.framebuffer),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,texture2D,0),gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,renderbuffer),gl.bindTexture(gl.TEXTURE_2D,null),gl.bindRenderbuffer(gl.RENDERBUFFER,null),gl.bindFramebuffer(gl.FRAMEBUFFER,null)},_.setDimension=function(gl,width,height){gl.bindFramebuffer(gl.FRAMEBUFFER,this.framebuffer);var renderbuffer=gl.getFramebufferAttachmentParameter(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);gl.isRenderbuffer(renderbuffer)&&(gl.bindRenderbuffer(gl.RENDERBUFFER,renderbuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,width,height),gl.bindRenderbuffer(gl.RENDERBUFFER,null));var texture2D=gl.getFramebufferAttachmentParameter(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);gl.isTexture(texture2D)&&(gl.bindTexture(gl.TEXTURE_2D,texture2D),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width,height,0,gl.RGBA,gl.UNSIGNED_BYTE,null),gl.bindTexture(gl.TEXTURE_2D,null)),gl.bindFramebuffer(gl.FRAMEBUFFER,null)},_.pick=function(gl,molecules,specs,x,y,includeAtoms,includeBonds){
var object=void 0,cs=gl.getParameter(gl.COLOR_CLEAR_VALUE);gl.bindFramebuffer(gl.FRAMEBUFFER,this.framebuffer),gl.clearColor(1,1,1,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.fogging.setMode(0),gl.disableVertexAttribArray(gl.shader.vertexNormalAttribute);var objects=[];gl.material.setAlpha(255);for(var i=0,ii=molecules.length;ii>i;i++)molecules[i].renderPickFrame(gl,specs,objects,includeAtoms,includeBonds);gl.flush();var rgba=new Uint8Array(4);gl.readPixels(x-2,y+2,1,1,gl.RGBA,gl.UNSIGNED_BYTE,rgba);var idxMolecule=rgba[3];if(idxMolecule>0){var idxAtom=rgba[2]|rgba[1]<<8|rgba[0]<<16;object=objects[idxAtom]}return objects=void 0,gl.enableVertexAttribArray(gl.shader.vertexNormalAttribute),gl.fogging.setMode(specs.fog_mode_3D),gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.clearColor(cs[0],cs[1],cs[2],cs[3]),object}}(ChemDoodle.structures.d3,ChemDoodle.math,document),function(d3,m){"use strict";d3.Pill=function(radius,height,latitudeBands,longitudeBands){var capHeightScale=1,capDiameter=2*radius;height-=capDiameter,0>height?(capHeightScale=0,height+=capDiameter):capDiameter>height&&(capHeightScale=height/capDiameter,height=capDiameter);for(var positionData=[],normalData=[],latNumber=0;latitudeBands>=latNumber;latNumber++)for(var theta=latNumber*m.PI/latitudeBands,sinTheta=m.sin(theta),cosTheta=m.cos(theta)*capHeightScale,longNumber=0;longitudeBands>=longNumber;longNumber++){var phi=2*longNumber*m.PI/longitudeBands,sinPhi=m.sin(phi),cosPhi=m.cos(phi),x=cosPhi*sinTheta,y=cosTheta,z=sinPhi*sinTheta;normalData.push(x,y,z),positionData.push(radius*x,radius*y+(latitudeBands/2>latNumber?height:0),radius*z)}var indexData=[];longitudeBands+=1;for(var latNumber=0;latitudeBands>latNumber;latNumber++)for(var longNumber=0;longitudeBands>longNumber;longNumber++){var first=latNumber*longitudeBands+longNumber%longitudeBands,second=first+longitudeBands;indexData.push(first,first+1,second),longitudeBands-1>longNumber&&indexData.push(second,first+1,second+1)}this.storeData(positionData,normalData,indexData)},d3.Pill.prototype=new d3._Mesh}(ChemDoodle.structures.d3,Math),function(extensions,RESIDUE,structures,d3,m,m4,v3,math){"use strict";function createDummyResidue(x,y,z){var dummyRes=new structures.Residue(-1);return dummyRes.cp1=dummyRes.cp2=new structures.Atom("",x,y,z),dummyRes}function Pipe(a1,a2){this.a1=a1,this.a2=a2}function Plank(a1,a2,vx){this.a1=a1,this.a2=a2,this.vx=vx}var _=Pipe.prototype;_.render=function(gl,specs){var axis,p1=this.a1,p2=this.a2,height=1.001*p1.distance3D(p2),radiusScale=specs.proteins_cylinderHelixDiameter/2,scaleVector=[radiusScale,height,radiusScale],transform=m4.translate(gl.modelViewMatrix,[p1.x,p1.y,p1.z],[]),y=[0,1,0],ang=0;if(p1.x===p2.x&&p1.z===p2.z)axis=[0,0,1],p2.y<p1.y&&(ang=m.PI);else{var a2b=[p2.x-p1.x,p2.y-p1.y,p2.z-p1.z];ang=extensions.vec3AngleFrom(y,a2b),axis=v3.cross(y,a2b,[])}0!==ang&&m4.rotate(transform,ang,axis),m4.scale(transform,scaleVector),gl.setMatrixUniforms(transform),gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.cylinderClosedBuffer.vertexPositionBuffer.numItems)};var _=Plank.prototype;_.render=function(gl,specs){this.specs&&(specs=this.specs);var height=1.001*this.a1.distance3D(this.a2),diry=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],dirz=v3.cross(diry,this.vx,[]),dirx=v3.cross(dirz,diry,[]);v3.normalize(dirx),v3.normalize(diry),v3.normalize(dirz);var modelMatrix=[dirx[0],dirx[1],dirx[2],0,diry[0],diry[1],diry[2],0,dirz[0],dirz[1],dirz[2],0,this.a1.x,this.a1.y,this.a1.z,1],scaleVector=[specs.proteins_plankSheetWidth,height,specs.proteins_tubeThickness],transform=m4.multiply(gl.modelViewMatrix,modelMatrix,[]);m4.scale(transform,scaleVector),gl.setMatrixUniforms(transform),gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.boxBuffer.vertexPositionBuffer.numItems)},d3.PipePlank=function(rs,specs){this.tubes=[],this.helixCylinders=[],this.sheetPlanks=[],this.chainColor=rs.chainColor;var chainNoSS=[],noSSResidues=[],helixResidues=[],sheetResidues=[];if(rs.length>1){var r0=rs[0],r1=rs[1];r1.helix?helixResidues.push(r0):r1.sheet?sheetResidues.push(r0):noSSResidues.push(r0)}for(var i=1,ii=rs.length-1;ii>=i;i++){var residue=rs[i];if(residue.helix){if(helixResidues.push(residue),residue.arrow){var startPoint=v3.create(),endPoint=v3.create();if(2==helixResidues.length)startPoint=[helixResidues[0].cp1.x,helixResidues[0].cp1.y,helixResidues[0].cp1.z],endPoint=[helixResidues[1].cp1.x,helixResidues[1].cp1.y,helixResidues[1].cp1.z];else{3==helixResidues.length&&helixResidues.unshift(rs[m.max(i-3,0)]);for(var Ps=[],Vs=[],h=1,hh=helixResidues.length-1;hh>h;h++){var cai=[helixResidues[h].cp1.x,helixResidues[h].cp1.y,helixResidues[h].cp1.z],A=[helixResidues[h-1].cp1.x,helixResidues[h-1].cp1.y,helixResidues[h-1].cp1.z],B=[helixResidues[h+1].cp1.x,helixResidues[h+1].cp1.y,helixResidues[h+1].cp1.z];v3.subtract(A,cai),v3.subtract(B,cai);var Al=v3.scale(A,v3.length(B),[]),Bl=v3.scale(B,v3.length(A),[]),V=v3.normalize(v3.add(Al,Bl,[]));Ps.push(cai),Vs.push(V)}for(var axes=[],h=0,hh=Ps.length-1;hh>h;h++){var P1=Ps[h],V1=Vs[h],P2=Ps[h+1],V2=Vs[h+1],H=v3.normalize(v3.cross(V1,V2,[])),P2subP1=v3.subtract(P2,P1,[]),d=v3.dot(P2subP1,H),dH=v3.scale(H,d,[]),dHl=v3.length(dH),P2subP1l=v3.length(P2subP1),r=-(dHl*dHl-P2subP1l*P2subP1l)/(2*v3.dot(v3.subtract(P1,P2,[]),V2)),H1=v3.add(P1,v3.scale(V1,r,[]),[]),H2=v3.add(P2,v3.scale(V2,r,[]),[]);axes.push([H1,H2])}var firstPoint=axes[0][0],secondPoint=axes[0][1],secondToFirst=v3.subtract(firstPoint,secondPoint,[]);v3.add(firstPoint,secondToFirst,startPoint);var firstPoint=axes[axes.length-1][1],secondPoint=axes[axes.length-1][0],secondToFirst=v3.subtract(firstPoint,secondPoint,[]);v3.add(firstPoint,secondToFirst,endPoint)}var startAtom=new structures.Atom("",startPoint[0],startPoint[1],startPoint[2]),endAtom=new structures.Atom("",endPoint[0],endPoint[1],endPoint[2]);this.helixCylinders.push(new Pipe(startAtom,endAtom)),helixResidues=[];var helixDir=v3.subtract(startPoint,endPoint,[]);if(v3.normalize(helixDir),v3.scale(helixDir,.5),noSSResidues.length>0){var additionCp=v3.add(startPoint,helixDir,[]),prevResCp=noSSResidues[noSSResidues.length-1].cp1,helixDirToPrevRes=v3.subtract([prevResCp.x,prevResCp.y,prevResCp.z],additionCp,[]);v3.normalize(helixDirToPrevRes),v3.scale(helixDirToPrevRes,.5),v3.add(additionCp,helixDirToPrevRes);var dummyRes=new structures.Residue(-1);dummyRes.cp1=dummyRes.cp2=new structures.Atom("",additionCp[0],additionCp[1],additionCp[2]),noSSResidues.push(dummyRes);var dummyRes=createDummyResidue(startPoint[0],startPoint[1],startPoint[2]);noSSResidues.push(dummyRes),chainNoSS.push(noSSResidues)}if(noSSResidues=[],ii>i){var dummyRes=createDummyResidue(endPoint[0],endPoint[1],endPoint[2]);noSSResidues.push(dummyRes);var rm=rs[i+1];if(rm.sheet)noSSResidues.push(residue),noSSResidues.push(residue),chainNoSS.push(noSSResidues),noSSResidues=[],sheetResidues.push(residue);else{v3.scale(helixDir,-1);var additionCp=v3.add(endPoint,helixDir,[]),nextResCp=rm.cp1,helixDirToNextRes=v3.subtract([nextResCp.x,nextResCp.y,nextResCp.z],additionCp,[]);v3.normalize(helixDirToNextRes),v3.scale(helixDirToNextRes,.5),v3.add(additionCp,helixDirToNextRes);var dummyRes=createDummyResidue(additionCp[0],additionCp[1],additionCp[2]);noSSResidues.push(dummyRes)}}}}else if(residue.sheet){if(sheetResidues.push(residue),residue.arrow){for(var p1=[0,0,0],p2=[0,0,0],h=0,hh=sheetResidues.length;hh>h;h++){var guidePoints=sheetResidues[h].guidePointsLarge,gp1=guidePoints[0],gp2=guidePoints[guidePoints.length-1];v3.add(p1,[gp1.x,gp1.y,gp1.z]),v3.add(p2,[gp2.x,gp2.y,gp2.z])}v3.scale(p1,1/hh),v3.scale(p2,1/hh);var dirx=v3.subtract(p1,p2),firstRs=sheetResidues[0],lastRs=sheetResidues[sheetResidues.length-1],firstGuidePoints=firstRs.guidePointsSmall[0],lastGuidePoints=lastRs.guidePointsSmall[0];if(this.sheetPlanks.push(new Plank(firstGuidePoints,lastGuidePoints,dirx)),sheetResidues=[],ii>i){var rm=rs[i+1];if(rm.sheet)sheetResidues.push(residue);else{var dummyRes=createDummyResidue(lastGuidePoints.x,lastGuidePoints.y,lastGuidePoints.z);noSSResidues.push(dummyRes)}}}}else if(noSSResidues.push(residue),ii>i){var rm=rs[i+1];if(rm.sheet){var guidePoints=residue.guidePointsSmall[0],dummyRes=createDummyResidue(guidePoints.x,guidePoints.y,guidePoints.z);noSSResidues.push(dummyRes),chainNoSS.push(noSSResidues),noSSResidues=[],sheetResidues.push(residue)}}}noSSResidues.length>1&&(2==noSSResidues.length&&noSSResidues.push(noSSResidues[noSSResidues.length-1]),chainNoSS.push(noSSResidues)),noSSResidues=[];for(var chainSegments=[],n=0,nn=chainNoSS.length;nn>n;n++){for(var nhs=chainNoSS[n],lineSegmentsList=[],i=0,ii=nhs.length-1;ii>=i;i++)lineSegmentsList.push(nhs[i].cp1);chainSegments.push(lineSegmentsList)}for(var i=0,ii=chainSegments.length;ii>i;i++){var t=new d3.CatmullTube(chainSegments[i],specs.proteins_tubeThickness,specs.proteins_tubeResolution_3D,specs.proteins_horizontalResolution);t.chainColor=rs.chainColor,this.tubes.push(t)}};var _=d3.PipePlank.prototype=new d3._Mesh;_.render=function(gl,specs){gl.material.setTempColors(specs.proteins_materialAmbientColor_3D,void 0,specs.proteins_materialSpecularColor_3D,specs.proteins_materialShininess_3D),gl.material.setDiffuseColor(specs.macro_colorByChain?this.chainColor:specs.proteins_tubeColor);for(var j=0,jj=this.tubes.length;jj>j;j++)gl.setMatrixUniforms(gl.modelViewMatrix),this.tubes[j].render(gl,specs);specs.macro_colorByChain||gl.material.setDiffuseColor(specs.proteins_ribbonCartoonHelixSecondaryColor),gl.cylinderClosedBuffer.bindBuffers(gl);for(var j=0,jj=this.helixCylinders.length;jj>j;j++)this.helixCylinders[j].render(gl,specs);specs.macro_colorByChain||gl.material.setDiffuseColor(specs.proteins_ribbonCartoonSheetColor),gl.boxBuffer.bindBuffers(gl);for(var j=0,jj=this.sheetPlanks.length;jj>j;j++)this.sheetPlanks[j].render(gl,specs)}}(ChemDoodle.extensions,ChemDoodle.RESIDUE,ChemDoodle.structures,ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3,ChemDoodle.math),function(d3,document){"use strict";d3.Shader=function(){};var _=d3.Shader.prototype;_.init=function(gl){var vertexShader=this.getShader(gl,"vertex-shader");vertexShader||(vertexShader=this.loadDefaultVertexShader(gl));var fragmentShader=this.getShader(gl,"fragment-shader");fragmentShader||(fragmentShader=this.loadDefaultFragmentShader(gl)),gl.attachShader(gl.program,vertexShader),gl.attachShader(gl.program,fragmentShader),this.vertexPositionAttribute=0,gl.bindAttribLocation(gl.program,this.vertexPositionAttribute,"a_vertex_position"),gl.linkProgram(gl.program),gl.getProgramParameter(gl.program,gl.LINK_STATUS)||alert("Could not initialize shaders: "+gl.getProgramInfoLog(gl.program)),gl.useProgram(gl.program),gl.enableVertexAttribArray(this.vertexPositionAttribute),this.vertexTexCoordAttribute=gl.getAttribLocation(gl.program,"a_vertex_texcoord"),this.vertexNormalAttribute=gl.getAttribLocation(gl.program,"a_vertex_normal"),gl.enableVertexAttribArray(this.vertexNormalAttribute),this.dimensionUniform=gl.getUniformLocation(gl.program,"u_dimension")},_.getShader=function(gl,id){var shaderScript=document.getElementById(id);if(shaderScript){for(var sb=[],k=shaderScript.firstChild;k;)3===k.nodeType&&sb.push(k.textContent),k=k.nextSibling;var shader;if("x-shader/x-fragment"===shaderScript.type)shader=gl.createShader(gl.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==shaderScript.type)return;shader=gl.createShader(gl.VERTEX_SHADER)}return gl.shaderSource(shader,sb.join("")),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:void alert(shaderScript.type+" "+gl.getShaderInfoLog(shader))}},_.loadDefaultVertexShader=function(gl){var sb=["precision mediump float;","attribute vec3 a_vertex_position;","attribute vec3 a_vertex_normal;","attribute vec2 a_vertex_texcoord;","uniform vec3 u_light_diffuse_color;","uniform vec3 u_material_ambient_color;","uniform vec3 u_material_diffuse_color;","uniform mat4 u_model_view_matrix;","uniform mat4 u_projection_matrix;","uniform mat3 u_normal_matrix;","uniform vec2 u_dimension;","varying vec2 v_texcoord;","varying vec3 v_diffuse;","varying vec4 v_ambient;","varying vec3 v_normal;","void main() {","v_texcoord = a_vertex_texcoord;","if(length(a_vertex_texcoord) != 0.) {","gl_Position = u_model_view_matrix * vec4(a_vertex_position, 1.);","vec4 depth_pos = vec4(gl_Position);","depth_pos.z += a_vertex_normal.z;","gl_Position = u_projection_matrix * gl_Position;","depth_pos = u_projection_matrix * depth_pos;","gl_Position /= gl_Position.w;","gl_Position.xy += a_vertex_normal.xy / u_dimension * 2.;","gl_Position.z = depth_pos.z / depth_pos.w;","} else {","v_normal = length(a_vertex_normal)==0. ? a_vertex_normal : normalize(u_normal_matrix * a_vertex_normal);","v_ambient = vec4(u_material_ambient_color, 1.);","v_diffuse = u_material_diffuse_color * u_light_diffuse_color;","gl_Position = u_projection_matrix * u_model_view_matrix * vec4(a_vertex_position, 1.);","gl_Position /= gl_Position.w;","}","}"].join(""),shader=gl.createShader(gl.VERTEX_SHADER);return gl.shaderSource(shader,sb),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:void alert("Vertex shader failed to compile: "+gl.getShaderInfoLog(shader))},_.loadDefaultFragmentShader=function(gl){var sb=["precision mediump float;\n","uniform vec3 u_light_specular_color;","uniform vec3 u_light_direction;","uniform vec3 u_light_half_vector;","uniform vec3 u_material_specular_color;","uniform float u_material_shininess;","uniform float u_material_alpha;","uniform int u_fog_mode;","uniform vec3 u_fog_color;","uniform float u_fog_density;","uniform float u_fog_start;","uniform float u_fog_end;","uniform sampler2D u_image;","varying vec2 v_texcoord;","varying vec3 v_diffuse;","varying vec4 v_ambient;","varying vec3 v_normal;","void main(void)","{","if(length(v_texcoord)!=0.) {","gl_FragColor = texture2D(u_image, v_texcoord);","return;","}","if(length(v_normal)==0.){","gl_FragColor = vec4(v_diffuse, u_material_alpha);","}else{","float nDotL = max(dot(v_normal, u_light_direction), 0.);","vec4 color = vec4(v_diffuse*nDotL, 1.);","float nDotHV = max(dot(v_normal, u_light_half_vector), 0.);","vec3 specular = u_material_specular_color * u_light_specular_color;","color+=vec4(specular * pow(nDotHV, u_material_shininess), 1.);","gl_FragColor = color+v_ambient;","gl_FragColor.a*=u_material_alpha;","}","float fogCoord = 1.-clamp((u_fog_end - gl_FragCoord.z/gl_FragCoord.w) / (u_fog_end - u_fog_start), 0., 1.);","float fogFactor = 1.;","if(u_fog_mode == 1){","fogFactor = 1.-fogCoord;","}","else if(u_fog_mode == 2) {","fogFactor = clamp(exp(-u_fog_density*fogCoord), 0., 1.);","}","else if(u_fog_mode == 3) {","fogFactor = clamp(exp(-pow(u_fog_density*fogCoord, 2.)), 0., 1.);","}","gl_FragColor = mix(vec4(u_fog_color, 1.), gl_FragColor, fogFactor);","}"].join(""),shader=gl.createShader(gl.FRAGMENT_SHADER);return gl.shaderSource(shader,sb),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:void alert("Fragment shader failed to compile: "+gl.getShaderInfoLog(shader))}}(ChemDoodle.structures.d3,document),function(structures,d3,v3){"use strict";d3.Shape=function(points,thickness){for(var numPoints=points.length,positionData=[],normalData=[],center=new structures.Point,i=0,ii=numPoints;ii>i;i++){var next=i+1;i===ii-1&&(next=0);for(var z=[0,0,1],currentPoint=points[i],nextPoint=points[next],v=[nextPoint.x-currentPoint.x,nextPoint.y-currentPoint.y,0],normal=v3.cross(z,v),j=0;2>j;j++)positionData.push(currentPoint.x,currentPoint.y,thickness/2),positionData.push(currentPoint.x,currentPoint.y,-thickness/2),positionData.push(nextPoint.x,nextPoint.y,thickness/2),positionData.push(nextPoint.x,nextPoint.y,-thickness/2);for(var j=0;4>j;j++)normalData.push(normal[0],normal[1],normal[2]);normalData.push(0,0,1),normalData.push(0,0,-1),normalData.push(0,0,1),normalData.push(0,0,-1),center.add(currentPoint)}center.x/=numPoints,center.y/=numPoints,normalData.push(0,0,1),positionData.push(center.x,center.y,thickness/2),normalData.push(0,0,-1),positionData.push(center.x,center.y,-thickness/2);for(var indexData=[],centerIndex=8*numPoints,i=0,ii=numPoints;ii>i;i++){var start=8*i;indexData.push(start),indexData.push(start+3),indexData.push(start+1),indexData.push(start),indexData.push(start+2),indexData.push(start+3),indexData.push(start+4),indexData.push(centerIndex),indexData.push(start+6),indexData.push(start+5),indexData.push(start+7),indexData.push(centerIndex+1)}this.storeData(positionData,normalData,indexData)},d3.Shape.prototype=new d3._Mesh}(ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(d3,m,v3){"use strict";d3.Star=function(){for(var ps=[.8944,.4472,0,.2764,.4472,.8506,.2764,.4472,-.8506,-.7236,.4472,.5257,-.7236,.4472,-.5257,-.3416,.4472,0,-.1056,.4472,.3249,-.1056,.4472,-.3249,.2764,.4472,.2008,.2764,.4472,-.2008,-.8944,-.4472,0,-.2764,-.4472,.8506,-.2764,-.4472,-.8506,.7236,-.4472,.5257,.7236,-.4472,-.5257,.3416,-.4472,0,.1056,-.4472,.3249,.1056,-.4472,-.3249,-.2764,-.4472,.2008,-.2764,-.4472,-.2008,-.5527,.1058,0,-.1708,.1058,.5527,-.1708,.1058,-.5527,.4471,.1058,.3249,.4471,.1058,-.3249,.5527,-.1058,0,.1708,-.1058,.5527,.1708,-.1058,-.5527,-.4471,-.1058,.3249,-.4471,-.1058,-.3249,0,1,0,0,-1,0],is=[0,9,8,2,7,9,4,5,7,3,6,5,1,8,6,0,8,23,30,6,8,3,21,6,11,26,21,13,23,26,2,9,24,30,8,9,1,23,8,13,25,23,14,24,25,4,7,22,30,9,7,0,24,9,14,27,24,12,22,27,3,5,20,30,7,5,2,22,7,12,29,22,10,20,29,1,6,21,30,5,6,4,20,5,10,28,20,11,21,28,10,19,18,12,17,19,14,15,17,13,16,15,11,18,16,31,19,17,14,17,27,2,27,22,4,22,29,10,29,19,31,18,19,12,19,29,4,29,20,3,20,28,11,28,18,31,16,18,10,18,28,3,28,21,1,21,26,13,26,16,31,15,16,11,16,26,1,26,23,0,23,25,14,25,15,31,17,15,13,15,25,0,25,24,2,24,27,12,27,17],positionData=[],normalData=[],indexData=[],i=0,ii=is.length;ii>i;i+=3){var j1=3*is[i],j2=3*is[i+1],j3=3*is[i+2],p1=[ps[j1],ps[j1+1],ps[j1+2]],p2=[ps[j2],ps[j2+1],ps[j2+2]],p3=[ps[j3],ps[j3+1],ps[j3+2]],toAbove=[p1[0]-p2[0],p1[1]-p2[1],p1[2]-p2[2]],toSide=[p3[0]-p2[0],p3[1]-p2[1],p3[2]-p2[2]],normal=v3.cross(toSide,toAbove,[]);v3.normalize(normal),positionData.push(p1[0],p1[1],p1[2],p2[0],p2[1],p2[2],p3[0],p3[1],p3[2]),normalData.push(normal[0],normal[1],normal[2],normal[0],normal[1],normal[2],normal[0],normal[1],normal[2]),indexData.push(i,i+1,i+2)}this.storeData(positionData,normalData,indexData)},d3.Star.prototype=new d3._Mesh}(ChemDoodle.structures.d3,Math,ChemDoodle.lib.vec3),function(d3,extensions,document,window){"use strict";var ratio=1;window.devicePixelRatio&&(ratio=window.devicePixelRatio),d3.TextImage=function(){this.ctx=document.createElement("canvas").getContext("2d"),this.data=[],this.text="",this.charHeight=0};var _=d3.TextImage.prototype;_.init=function(gl){this.textureImage=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,this.textureImage),gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,!1),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.bindTexture(gl.TEXTURE_2D,null),this.updateFont(gl,12,["Sans-serif"],!1,!1,!1)},_.charData=function(character){var index=this.text.indexOf(character);return index>=0?this.data[index]:null},_.updateFont=function(gl,fontSize,fontFamilies,fontBold,fontItalic,fontStroke){var ctx=this.ctx,canvas=this.ctx.canvas,data=[],text="";fontSize*=ratio;var contextFont=extensions.getFontString(fontSize,fontFamilies,fontBold,fontItalic);ctx.font=contextFont,ctx.save();for(var totalWidth=0,charHeight=1.5*fontSize,i=32,ii=127;ii>i;i++){var character=String.fromCharCode(i),width=ctx.measureText(character).width;data.push({text:character,width:width,height:charHeight}),totalWidth+=2*width}for(var chars="Â°â«Â®".split(""),i=0,ii=chars.length;ii>i;i++){var character=chars[i],width=ctx.measureText(character).width;data.push({text:character,width:width,height:charHeight}),totalWidth+=2*width}var areaImage=totalWidth*charHeight,sqrtArea=Math.sqrt(areaImage),totalRows=Math.ceil(sqrtArea/charHeight),maxWidth=Math.ceil(totalWidth/(totalRows-1));canvas.width=maxWidth,canvas.height=totalRows*charHeight,ctx.font=contextFont,ctx.textAlign="left",ctx.textBaseline="middle",ctx.strokeStyle="#000",ctx.lineWidth=1.4,ctx.fillStyle="#fff";for(var offsetRow=0,posX=0,i=0,ii=data.length;ii>i;i++){var charData=data[i],charWidth=2*charData.width,charHeight=charData.height,charText=charData.text,willWidth=posX+charWidth;willWidth>maxWidth&&(offsetRow++,posX=0);var posY=offsetRow*charHeight;fontStroke&&ctx.strokeText(charText,posX,posY+charHeight/2),ctx.fillText(charText,posX,posY+charHeight/2),charData.x=posX,charData.y=posY,text+=charText,posX+=charWidth}this.text=text,this.data=data,this.charHeight=charHeight,gl.bindTexture(gl.TEXTURE_2D,this.textureImage),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,canvas),gl.bindTexture(gl.TEXTURE_2D,null)},_.pushVertexData=function(text,position,zDepth,data){for(var textPiece=text.toString().split(""),heightImage=this.getHeight(),widthImage=this.getWidth(),x1=-this.textWidth(text)/2/ratio,y1=-this.charHeight/2/ratio,j=0,jj=textPiece.length;jj>j;j++){var charData=this.charData(textPiece[j]),width=charData.width,left=charData.x/widthImage,right=left+1.8*charData.width/widthImage,top=charData.y/heightImage,bottom=top+charData.height/heightImage,x2=x1+1.8*width/ratio,y2=this.charHeight/2/ratio;data.position.push(position[0],position[1],position[2],position[0],position[1],position[2],position[0],position[1],position[2],position[0],position[1],position[2],position[0],position[1],position[2],position[0],position[1],position[2]),data.texCoord.push(left,top,right,bottom,right,top,left,top,left,bottom,right,bottom),data.translation.push(x1,y2,zDepth,x2,y1,zDepth,x2,y2,zDepth,x1,y2,zDepth,x1,y1,zDepth,x2,y1,zDepth),x1=x2+(width-1.8*width)/ratio}},_.getCanvas=function(){return this.ctx.canvas},_.getHeight=function(){return this.getCanvas().height},_.getWidth=function(){return this.getCanvas().width},_.textWidth=function(text){return this.ctx.measureText(text).width},_.test=function(){document.body.appendChild(this.getCanvas())},_.useTexture=function(gl){gl.bindTexture(gl.TEXTURE_2D,this.textureImage)}}(ChemDoodle.structures.d3,ChemDoodle.extensions,document,window),function(d3,m){"use strict";d3.TextMesh=function(){};var _=d3.TextMesh.prototype;_.init=function(gl){this.vertexPositionBuffer=gl.createBuffer(),this.vertexTexCoordBuffer=gl.createBuffer(),this.vertexTranslationBuffer=gl.createBuffer()},_.setVertexData=function(gl,vertexBuffer,bufferData,itemSize){gl.bindBuffer(gl.ARRAY_BUFFER,vertexBuffer),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(bufferData),gl.STATIC_DRAW),vertexBuffer.itemSize=itemSize,vertexBuffer.numItems=bufferData.length/itemSize},_.storeData=function(gl,vertexPositionData,vertexTexCoordData,vertexTranslationData){this.setVertexData(gl,this.vertexPositionBuffer,vertexPositionData,3),this.setVertexData(gl,this.vertexTexCoordBuffer,vertexTexCoordData,2),this.setVertexData(gl,this.vertexTranslationBuffer,vertexTranslationData,3)},_.bindBuffers=function(gl){gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexPositionBuffer),gl.vertexAttribPointer(gl.shader.vertexPositionAttribute,this.vertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexTexCoordBuffer),gl.vertexAttribPointer(gl.shader.vertexTexCoordAttribute,this.vertexTexCoordBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexTranslationBuffer),gl.vertexAttribPointer(gl.shader.vertexNormalAttribute,this.vertexTranslationBuffer.itemSize,gl.FLOAT,!1,0,0)},_.render=function(gl){var numItems=this.vertexPositionBuffer.numItems;numItems&&(this.bindBuffers(gl),gl.drawArrays(gl.TRIANGLES,0,numItems))}}(ChemDoodle.structures.d3,Math),function(ELEMENT,math,extensions,d3,m,m4,v3){"use strict";d3.Torsion=function(a1,a2,a3,a4){this.a1=a1,this.a2=a2,this.a3=a3,this.a4=a4};var _=d3.Torsion.prototype=new d3._Measurement;_.calculateData=function(specs){var positionData=[],normalData=[],indexData=[],dist1=this.a2.distance3D(this.a1),dist2=this.a2.distance3D(this.a3);this.distUse=m.min(dist1,dist2)/2;var b1=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],b2=[this.a3.x-this.a2.x,this.a3.y-this.a2.y,this.a3.z-this.a2.z],b3=[this.a4.x-this.a3.x,this.a4.y-this.a3.y,this.a4.z-this.a3.z],cross12=v3.cross(b1,b2,[]),cross23=v3.cross(b2,b3,[]);v3.scale(b1,v3.length(b2)),this.torsion=m.atan2(v3.dot(b1,cross23),v3.dot(cross12,cross23));var vec1=v3.normalize(v3.cross(cross12,b2,[])),vec3=v3.normalize(v3.cross(b2,vec1,[]));this.pos=v3.add([this.a2.x,this.a2.y,this.a2.z],v3.scale(v3.normalize(b2,[]),this.distUse));for(var vec0=[],bands=specs.measurement_angleBands_3D,i=0;bands>=i;++i){var theta=this.torsion*i/bands,vecCos=v3.scale(vec1,m.cos(theta),[]),vecSin=v3.scale(vec3,m.sin(theta),[]),norm=v3.scale(v3.normalize(v3.add(vecCos,vecSin,[])),this.distUse);0==i&&(vec0=norm),positionData.push(this.pos[0]+norm[0],this.pos[1]+norm[1],this.pos[2]+norm[2]),normalData.push(0,0,0),bands>i&&indexData.push(i,i+1)}this.vecText=v3.normalize(v3.add(vec0,norm,[]));var arrowLength=.25,b2Norm=v3.normalize(b2,[]);v3.scale(b2Norm,arrowLength/4);var theta=this.torsion-2*m.asin(arrowLength/2)*this.torsion/m.abs(this.torsion),vecCos=v3.scale(vec1,m.cos(theta),[]),vecSin=v3.scale(vec3,m.sin(theta),[]),norm=v3.scale(v3.normalize(v3.add(vecCos,vecSin,[])),this.distUse);positionData.push(this.pos[0]+b2Norm[0]+norm[0],this.pos[1]+b2Norm[1]+norm[1],this.pos[2]+b2Norm[2]+norm[2]),normalData.push(0,0,0),positionData.push(this.pos[0]-b2Norm[0]+norm[0],this.pos[1]-b2Norm[1]+norm[1],this.pos[2]-b2Norm[2]+norm[2]),normalData.push(0,0,0),indexData.push(--i,i+1,i,i+2),this.storeData(positionData,normalData,indexData)},_.getText=function(specs){return v3.add(this.pos,v3.scale(this.vecText,this.distUse+.3,[])),{pos:this.pos,value:[math.angleBounds(this.torsion,!0,!0).toFixed(2)," Â°"].join("")}}}(ChemDoodle.ELEMENT,ChemDoodle.math,ChemDoodle.extensions,ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(extensions,RESIDUE,structures,d3,m,m4,v3,math){"use strict";var loadPartition=function(gl,p){gl.bindBuffer(gl.ARRAY_BUFFER,p.vertexPositionBuffer),gl.vertexAttribPointer(gl.shader.vertexPositionAttribute,p.vertexPositionBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,p.vertexNormalBuffer),gl.vertexAttribPointer(gl.shader.vertexNormalAttribute,p.vertexNormalBuffer.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,p.vertexIndexBuffer)},PointRotator=function(point,axis,angle){var d=m.sqrt(axis[1]*axis[1]+axis[2]*axis[2]),Rx=[1,0,0,0,0,axis[2]/d,-axis[1]/d,0,0,axis[1]/d,axis[2]/d,0,0,0,0,1],RxT=[1,0,0,0,0,axis[2]/d,axis[1]/d,0,0,-axis[1]/d,axis[2]/d,0,0,0,0,1],Ry=[d,0,-axis[0],0,0,1,0,0,axis[0],0,d,0,0,0,0,1],RyT=[d,0,axis[0],0,0,1,0,0,-axis[0],0,d,0,0,0,0,1],Rz=[m.cos(angle),-m.sin(angle),0,0,m.sin(angle),m.cos(angle),0,0,0,0,1,0,0,0,0,1],matrix=m4.multiply(Rx,m4.multiply(Ry,m4.multiply(Rz,m4.multiply(RyT,RxT,[]))));this.rotate=function(){return m4.multiplyVec3(matrix,point)}};d3.Tube=function(chain,thickness,cylinderResolution){var lineSegmentNum=chain[0].lineSegments[0].length;this.partitions=[];var currentPartition;this.ends=[],this.ends.push(chain[0].lineSegments[0][0]),this.ends.push(chain[chain.length-1].lineSegments[0][0]);for(var last=[1,0,0],i=0,ii=chain.length;ii>i;i++){(!currentPartition||currentPartition.positionData.length>65e3)&&(this.partitions.length>0&&i--,currentPartition={count:0,positionData:[],normalData:[],indexData:[]},this.partitions.push(currentPartition));var residue=chain[i];currentPartition.count++;for(var min=1/0,p=new structures.Atom("",chain[i].cp1.x,chain[i].cp1.y,chain[i].cp1.z),j=0;lineSegmentNum>j;j++){var nextPoint,currentPoint=residue.lineSegments[0][j];nextPoint=j===lineSegmentNum-1?i===chain.length-1?residue.lineSegments[0][j-1]:chain[i+1].lineSegments[0][0]:residue.lineSegments[0][j+1];var axis=[nextPoint.x-currentPoint.x,nextPoint.y-currentPoint.y,nextPoint.z-currentPoint.z];v3.normalize(axis),i===chain.length-1&&j===lineSegmentNum-1&&v3.scale(axis,-1);var startVector=v3.cross(axis,last,[]);v3.normalize(startVector),v3.scale(startVector,thickness/2);for(var rotator=new PointRotator(startVector,axis,2*Math.PI/cylinderResolution),k=0,kk=cylinderResolution;kk>k;k++){var use=rotator.rotate();k===m.floor(cylinderResolution/4)&&(last=[use[0],use[1],use[2]]),currentPartition.normalData.push(use[0],use[1],use[2]),currentPartition.positionData.push(currentPoint.x+use[0],currentPoint.y+use[1],currentPoint.z+use[2])}if(p){var dist=currentPoint.distance3D(p);min>dist&&(min=dist,chain[i].pPoint=currentPoint)}}}for(var n=0,nn=this.partitions.length;nn>n;n++)for(var currentPartition=this.partitions[n],i=0,ii=currentPartition.count-1;ii>i;i++)for(var indexStart=i*lineSegmentNum*cylinderResolution,j=0,jj=lineSegmentNum;jj>j;j++)for(var segmentIndexStart=indexStart+j*cylinderResolution,k=0;cylinderResolution>k;k++){var next=1,sk=segmentIndexStart+k;currentPartition.indexData.push(sk),currentPartition.indexData.push(sk+cylinderResolution),currentPartition.indexData.push(sk+cylinderResolution+next),currentPartition.indexData.push(sk),currentPartition.indexData.push(sk+cylinderResolution+next),currentPartition.indexData.push(sk+next)}this.storeData(this.partitions[0].positionData,this.partitions[0].normalData,this.partitions[0].indexData);for(var ps=[new structures.Point(2,0)],i=0;60>i;i++){var ang=i/60*m.PI;ps.push(new structures.Point(2*m.cos(ang),-2*m.sin(ang)))}ps.push(new structures.Point(-2,0),new structures.Point(-2,4),new structures.Point(2,4));var platform=new structures.d3.Shape(ps,1);this.render=function(gl,specs){if(this.bindBuffers(gl),gl.material.setDiffuseColor(specs.macro_colorByChain?this.chainColor:specs.nucleics_tubeColor),gl.drawElements(gl.TRIANGLES,this.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0),this.partitions)for(var i=1,ii=this.partitions.length;ii>i;i++){var p=this.partitions[i];loadPartition(gl,p),gl.drawElements(gl.TRIANGLES,p.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}gl.sphereBuffer.bindBuffers(gl);for(var i=0;2>i;i++){var p=this.ends[i],transform=m4.translate(gl.modelViewMatrix,[p.x,p.y,p.z],[]),radius=thickness/2;m4.scale(transform,[radius,radius,radius]),gl.setMatrixUniforms(transform),gl.drawElements(gl.TRIANGLES,gl.sphereBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}gl.cylinderBuffer.bindBuffers(gl);for(var i=0,ii=chain.length-1;ii>i;i++){var axis,residue=chain[i],p1=residue.pPoint,p2=new structures.Atom("",residue.cp2.x,residue.cp2.y,residue.cp2.z),height=1.001*p1.distance3D(p2),scaleVector=[thickness/4,height,thickness/4],transform=m4.translate(gl.modelViewMatrix,[p1.x,p1.y,p1.z],[]),y=[0,1,0],ang=0,a2b=[p2.x-p1.x,p2.y-p1.y,p2.z-p1.z];p1.x===p2.x&&p1.z===p2.z?(axis=[0,0,1],p1.y<p1.y&&(ang=m.PI)):(ang=extensions.vec3AngleFrom(y,a2b),axis=v3.cross(y,a2b,[])),0!==ang&&m4.rotate(transform,ang,axis),m4.scale(transform,scaleVector),gl.setMatrixUniforms(transform),gl.drawArrays(gl.TRIANGLE_STRIP,0,gl.cylinderBuffer.vertexPositionBuffer.numItems)}platform.bindBuffers(gl),"none"!==specs.nucleics_residueColor||specs.macro_colorByChain||gl.material.setDiffuseColor(specs.nucleics_baseColor);for(var i=0,ii=chain.length-1;ii>i;i++){var axis,residue=chain[i],p2=residue.cp2,transform=m4.translate(gl.modelViewMatrix,[p2.x,p2.y,p2.z],[]),y=[0,1,0],ang=0,p3=residue.cp3;if(p3){var a2b=[p3.x-p2.x,p3.y-p2.y,p3.z-p2.z];p2.x===p3.x&&p2.z===p3.z?(axis=[0,0,1],p2.y<p2.y&&(ang=m.PI)):(ang=extensions.vec3AngleFrom(y,a2b),axis=v3.cross(y,a2b,[])),0!==ang&&m4.rotate(transform,ang,axis);var x=[1,0,0],rM=m4.rotate(m4.identity([]),ang,axis);m4.multiplyVec3(rM,x);var p4=residue.cp4,p5=residue.cp5;if(p4.y!==p5.y||p4.z!==p5.z){var pivot=[p5.x-p4.x,p5.y-p4.y,p5.z-p4.z],ang2=extensions.vec3AngleFrom(x,pivot);v3.dot(a2b,v3.cross(x,pivot))<0&&(ang2*=-1),m4.rotateY(transform,ang2)}specs.macro_colorByChain||("shapely"===specs.nucleics_residueColor?RESIDUE[residue.name]?gl.material.setDiffuseColor(RESIDUE[residue.name].shapelyColor):gl.material.setDiffuseColor(RESIDUE["*"].shapelyColor):"rainbow"===specs.nucleics_residueColor&&gl.material.setDiffuseColor(math.rainbowAt(i,ii,specs.macro_rainbowColors))),
gl.setMatrixUniforms(transform),gl.drawElements(gl.TRIANGLES,platform.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}}}},d3.Tube.prototype=new d3._Mesh,d3.CatmullTube=function(chains,thickness,cylinderResolution,horizontalResolution){var chain=[];chains.push(chains[chains.length-1]);for(var i=0,ii=chains.length-2;ii>=i;i++){for(var p0=chains[0==i?0:i-1],p1=chains[i+0],p2=chains[i+1],p3=chains[i==ii?i+1:i+2],segments=[],j=0;horizontalResolution>j;j++){var t=j/horizontalResolution;i==ii&&(t=j/(horizontalResolution-1));var x=.5*(2*p1.x+(p2.x-p0.x)*t+(2*p0.x-5*p1.x+4*p2.x-p3.x)*t*t+(3*p1.x-p0.x-3*p2.x+p3.x)*t*t*t),y=.5*(2*p1.y+(p2.y-p0.y)*t+(2*p0.y-5*p1.y+4*p2.y-p3.y)*t*t+(3*p1.y-p0.y-3*p2.y+p3.y)*t*t*t),z=.5*(2*p1.z+(p2.z-p0.z)*t+(2*p0.z-5*p1.z+4*p2.z-p3.z)*t*t+(3*p1.z-p0.z-3*p2.z+p3.z)*t*t*t),o=new structures.Atom("C",x,y,z);segments.push(o)}chain.push(segments)}var lineSegmentNum=chain[0].length;this.partitions=[];var currentPartition;this.ends=[],this.ends.push(chain[0][0]),this.ends.push(chain[chain.length-1][0]);for(var last=[1,0,0],i=0,ii=chain.length;ii>i;i++){(!currentPartition||currentPartition.positionData.length>65e3)&&(this.partitions.length>0&&i--,currentPartition={count:0,positionData:[],normalData:[],indexData:[]},this.partitions.push(currentPartition));var residue=chain[i];currentPartition.count++;for(var j=0;lineSegmentNum>j;j++){var nextPoint,currentPoint=residue[j];nextPoint=j===lineSegmentNum-1?i===chain.length-1?residue[j-1]:chain[i+1][0]:residue[j+1];var axis=[nextPoint.x-currentPoint.x,nextPoint.y-currentPoint.y,nextPoint.z-currentPoint.z];v3.normalize(axis),i===chain.length-1&&j===lineSegmentNum-1&&v3.scale(axis,-1);var startVector=v3.cross(axis,last,[]);v3.normalize(startVector),v3.scale(startVector,thickness/2);for(var rotator=new PointRotator(startVector,axis,2*Math.PI/cylinderResolution),k=0,kk=cylinderResolution;kk>k;k++){var use=rotator.rotate();k===m.floor(cylinderResolution/4)&&(last=[use[0],use[1],use[2]]),currentPartition.normalData.push(use[0],use[1],use[2]),currentPartition.positionData.push(currentPoint.x+use[0],currentPoint.y+use[1],currentPoint.z+use[2])}}}for(var n=0,nn=this.partitions.length;nn>n;n++)for(var currentPartition=this.partitions[n],i=0,ii=currentPartition.count-1;ii>i;i++)for(var indexStart=i*lineSegmentNum*cylinderResolution,j=0,jj=lineSegmentNum;jj>j;j++)for(var segmentIndexStart=indexStart+j*cylinderResolution,k=0;cylinderResolution>=k;k++){var sk=segmentIndexStart+k%cylinderResolution;currentPartition.indexData.push(sk,sk+cylinderResolution)}this.storeData(this.partitions[0].positionData,this.partitions[0].normalData,this.partitions[0].indexData)};var _=d3.CatmullTube.prototype=new d3._Mesh;_.render=function(gl,specs){this.bindBuffers(gl);for(var i=0,ii=this.partitions.length;ii>i;i++){var p=this.partitions[i];loadPartition(gl,p),gl.drawElements(gl.TRIANGLE_STRIP,p.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}gl.sphereBuffer.bindBuffers(gl);for(var i=0;2>i;i++){var p=this.ends[i],transform=m4.translate(gl.modelViewMatrix,[p.x,p.y,p.z],[]),radius=specs.proteins_tubeThickness/2;m4.scale(transform,[radius,radius,radius]),gl.setMatrixUniforms(transform),gl.drawElements(gl.TRIANGLES,gl.sphereBuffer.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}}}(ChemDoodle.extensions,ChemDoodle.RESIDUE,ChemDoodle.structures,ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3,ChemDoodle.math),function(d3,v3){"use strict";d3.UnitCell=function(unitCellVectors){this.unitCell=unitCellVectors;var positionData=[],normalData=[],pushSide=function(p1,p2,p3,p4){positionData.push(p1[0],p1[1],p1[2]),positionData.push(p2[0],p2[1],p2[2]),positionData.push(p3[0],p3[1],p3[2]),positionData.push(p4[0],p4[1],p4[2]);for(var i=0;4>i;i++)normalData.push(0,0,0)};pushSide(unitCellVectors.o,unitCellVectors.x,unitCellVectors.xy,unitCellVectors.y),pushSide(unitCellVectors.o,unitCellVectors.y,unitCellVectors.yz,unitCellVectors.z),pushSide(unitCellVectors.o,unitCellVectors.z,unitCellVectors.xz,unitCellVectors.x),pushSide(unitCellVectors.yz,unitCellVectors.y,unitCellVectors.xy,unitCellVectors.xyz),pushSide(unitCellVectors.xyz,unitCellVectors.xz,unitCellVectors.z,unitCellVectors.yz),pushSide(unitCellVectors.xy,unitCellVectors.x,unitCellVectors.xz,unitCellVectors.xyz);for(var indexData=[],i=0;6>i;i++){var start=4*i;indexData.push(start,start+1,start+1,start+2,start+2,start+3,start+3,start)}this.storeData(positionData,normalData,indexData)};var _=d3.UnitCell.prototype=new d3._Mesh;_.render=function(gl,specs){gl.setMatrixUniforms(gl.modelViewMatrix),this.bindBuffers(gl),gl.material.setDiffuseColor(specs.shapes_color),gl.lineWidth(specs.shapes_lineWidth),gl.drawElements(gl.LINES,this.vertexIndexBuffer.numItems,gl.UNSIGNED_SHORT,0)}}(ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(structures,extensions,m){"use strict";structures.Plate=function(lanes){for(this.lanes=new Array(lanes),i=0,ii=lanes;i<ii;i++)this.lanes[i]=[]};var _=structures.Plate.prototype;_.sort=function(){for(i=0,ii=this.lanes.length;i<ii;i++)this.lanes[i].sort(function(a,b){return a-b})},_.draw=function(ctx,specs){var width=ctx.canvas.width,height=ctx.canvas.height;for(this.origin=9*height/10,this.front=height/10,this.laneLength=this.origin-this.front,ctx.strokeStyle="#000000",ctx.beginPath(),ctx.moveTo(0,this.front),extensions.contextHashTo(ctx,0,this.front,width,this.front,3,3),ctx.closePath(),ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,this.origin),ctx.lineTo(width,this.origin),ctx.closePath(),ctx.stroke(),i=0,ii=this.lanes.length;i<ii;i++){var laneX=(i+1)*width/(ii+1);for(ctx.beginPath(),ctx.moveTo(laneX,this.origin),ctx.lineTo(laneX,this.origin+3),ctx.closePath(),ctx.stroke(),s=0,ss=this.lanes[i].length;s<ss;s++){var spotY=this.origin-this.laneLength*this.lanes[i][s].rf;switch(this.lanes[i][s].type){case"compact":ctx.beginPath(),ctx.arc(laneX,spotY,3,0,2*m.PI,!1),ctx.closePath();break;case"expanded":ctx.beginPath(),ctx.arc(laneX,spotY,7,0,2*m.PI,!1),ctx.closePath();break;case"trailing":break;case"widened":extensions.contextOval(ctx,laneX-18,spotY-10,36,10);break;case"cresent":ctx.beginPath(),ctx.arc(laneX,spotY,9,0,m.PI,!0),ctx.closePath()}switch(this.lanes[i][s].style){case"solid":ctx.fillStyle="#000000",ctx.fill();break;case"transparent":ctx.stroke();break;case"gradient":}}}},structures.Plate.Spot=function(type,rf,style){this.type=type,this.rf=rf,this.style=style?style:"solid"}}(ChemDoodle.structures,ChemDoodle.extensions,Math),function(c,structures,m){"use strict";c.default_backgroundColor="#FFFFFF",c.default_scale=1,c.default_rotateAngle=0,c.default_bondLength_2D=20,c.default_angstromsPerBondLength=1.25,c.default_lightDirection_3D=[-.1,-.1,-1],c.default_lightDiffuseColor_3D="#FFFFFF",c.default_lightSpecularColor_3D="#FFFFFF",c.default_projectionPerspective_3D=!0,c.default_projectionPerspectiveVerticalFieldOfView_3D=45,c.default_projectionOrthoWidth_3D=40,c.default_projectionWidthHeightRatio_3D=void 0,c.default_projectionFrontCulling_3D=.1,c.default_projectionBackCulling_3D=1e4,c.default_cullBackFace_3D=!0,c.default_fog_mode_3D=0,c.default_fog_color_3D="#000000",c.default_fog_start_3D=0,c.default_fog_end_3D=1,c.default_fog_density_3D=1,c.default_atoms_display=!0,c.default_atoms_color="#000000",c.default_atoms_font_size_2D=12,c.default_atoms_font_families_2D=["Helvetica","Arial","Dialog"],c.default_atoms_font_bold_2D=!1,c.default_atoms_font_italic_2D=!1,c.default_atoms_circles_2D=!1,c.default_atoms_circleDiameter_2D=10,c.default_atoms_circleBorderWidth_2D=1,c.default_atoms_lonePairDistance_2D=8,c.default_atoms_lonePairSpread_2D=4,c.default_atoms_lonePairDiameter_2D=1,c.default_atoms_useJMOLColors=!1,c.default_atoms_usePYMOLColors=!1,c.default_atoms_resolution_3D=60,c.default_atoms_sphereDiameter_3D=.8,c.default_atoms_useVDWDiameters_3D=!1,c.default_atoms_vdwMultiplier_3D=1,c.default_atoms_materialAmbientColor_3D="#000000",c.default_atoms_materialSpecularColor_3D="#555555",c.default_atoms_materialShininess_3D=32,c.default_atoms_implicitHydrogens_2D=!0,c.default_atoms_displayTerminalCarbonLabels_2D=!1,c.default_atoms_showHiddenCarbons_2D=!0,c.default_atoms_showAttributedCarbons_2D=!0,c.default_atoms_displayAllCarbonLabels_2D=!1,c.default_atoms_nonBondedAsStars_3D=!1,c.default_atoms_displayLabels_3D=!1,c.default_atoms_HBlack_2D=!0,c.default_bonds_display=!0,c.default_bonds_color="#000000",c.default_bonds_width_2D=1,c.default_bonds_saturationWidth_2D=.2,c.default_bonds_ends_2D="round",c.default_bonds_useJMOLColors=!1,c.default_bonds_usePYMOLColors=!1,c.default_bonds_colorGradient=!1,c.default_bonds_saturationAngle_2D=m.PI/3,c.default_bonds_symmetrical_2D=!1,c.default_bonds_clearOverlaps_2D=!1,c.default_bonds_overlapClearWidth_2D=.5,c.default_bonds_atomLabelBuffer_2D=1,c.default_bonds_wedgeThickness_2D=.22,c.default_bonds_hashWidth_2D=1,c.default_bonds_hashSpacing_2D=2.5,c.default_bonds_dotSize_2D=2,c.default_bonds_lewisStyle_2D=!1,c.default_bonds_showBondOrders_3D=!1,c.default_bonds_resolution_3D=60,c.default_bonds_renderAsLines_3D=!1,c.default_bonds_cylinderDiameter_3D=.3,c.default_bonds_pillLatitudeResolution_3D=10,c.default_bonds_pillLongitudeResolution_3D=20,c.default_bonds_pillHeight_3D=.3,c.default_bonds_pillSpacing_3D=.1,c.default_bonds_pillDiameter_3D=.3,c.default_bonds_materialAmbientColor_3D="#222222",c.default_bonds_materialSpecularColor_3D="#555555",c.default_bonds_materialShininess_3D=32,c.default_proteins_displayRibbon=!0,c.default_proteins_displayBackbone=!1,c.default_proteins_backboneThickness=1.5,c.default_proteins_backboneColor="#CCCCCC",c.default_proteins_ribbonCartoonize=!1,c.default_proteins_displayPipePlank=!1,c.default_proteins_residueColor="none",c.default_proteins_primaryColor="#FF0D0D",c.default_proteins_secondaryColor="#FFFF30",c.default_proteins_ribbonCartoonHelixPrimaryColor="#00E740",c.default_proteins_ribbonCartoonHelixSecondaryColor="#9905FF",c.default_proteins_ribbonCartoonSheetColor="#E8BB99",c.default_proteins_tubeColor="#FF0D0D",c.default_proteins_tubeResolution_3D=30,c.default_proteins_ribbonThickness=.2,c.default_proteins_tubeThickness=.5,c.default_proteins_plankSheetWidth=3.5,c.default_proteins_cylinderHelixDiameter=4,c.default_proteins_verticalResolution=10,c.default_proteins_horizontalResolution=9,c.default_proteins_materialAmbientColor_3D="#222222",c.default_proteins_materialSpecularColor_3D="#555555",c.default_proteins_materialShininess_3D=32,c.default_nucleics_display=!0,c.default_nucleics_tubeColor="#CCCCCC",c.default_nucleics_baseColor="#C10000",c.default_nucleics_residueColor="none",c.default_nucleics_tubeThickness=1.5,c.default_nucleics_tubeResolution_3D=60,c.default_nucleics_verticalResolution=10,c.default_nucleics_materialAmbientColor_3D="#222222",c.default_nucleics_materialSpecularColor_3D="#555555",c.default_nucleics_materialShininess_3D=32,c.default_macro_displayAtoms=!1,c.default_macro_displayBonds=!1,c.default_macro_atomToLigandDistance=-1,c.default_macro_showWater=!1,c.default_macro_colorByChain=!1,c.default_macro_rainbowColors=["#0000FF","#00FFFF","#00FF00","#FFFF00","#FF0000"],c.default_surfaces_display=!0,c.default_surfaces_style="Dot",c.default_surfaces_color="#E9B862",c.default_surfaces_materialAmbientColor_3D="#000000",c.default_surfaces_materialSpecularColor_3D="#000000",c.default_surfaces_materialShininess_3D=32,c.default_plots_color="#000000",c.default_plots_width=1,c.default_plots_showIntegration=!1,c.default_plots_integrationColor="#c10000",c.default_plots_integrationLineWidth=1,c.default_plots_showGrid=!1,c.default_plots_gridColor="gray",c.default_plots_gridLineWidth=.5,c.default_plots_showYAxis=!0,c.default_plots_flipXAxis=!1,c.default_text_font_size=12,c.default_text_font_families=["Helvetica","Arial","Dialog"],c.default_text_font_bold=!0,c.default_text_font_italic=!1,c.default_text_font_stroke_3D=!0,c.default_text_color="#000000",c.default_shapes_color="#000000",c.default_shapes_lineWidth=1,c.default_shapes_arrowLength_2D=8,c.default_compass_display=!1,c.default_compass_axisXColor_3D="#FF0000",c.default_compass_axisYColor_3D="#00FF00",c.default_compass_axisZColor_3D="#0000FF",c.default_compass_size_3D=50,c.default_compass_resolution_3D=10,c.default_compass_displayText_3D=!0,c.default_compass_type_3D=0,c.default_measurement_update_3D=!1,c.default_measurement_angleBands_3D=10,c.default_measurement_displayText_3D=!0,structures.VisualSpecifications=function(){this.backgroundColor=c.default_backgroundColor,this.scale=c.default_scale,this.rotateAngle=c.default_rotateAngle,this.bondLength_2D=c.default_bondLength_2D,this.angstromsPerBondLength=c.default_angstromsPerBondLength,this.lightDirection_3D=c.default_lightDirection_3D.slice(0),this.lightDiffuseColor_3D=c.default_lightDiffuseColor_3D,this.lightSpecularColor_3D=c.default_lightSpecularColor_3D,this.projectionPerspective_3D=c.default_projectionPerspective_3D,this.projectionPerspectiveVerticalFieldOfView_3D=c.default_projectionPerspectiveVerticalFieldOfView_3D,this.projectionOrthoWidth_3D=c.default_projectionOrthoWidth_3D,this.projectionWidthHeightRatio_3D=c.default_projectionWidthHeightRatio_3D,this.projectionFrontCulling_3D=c.default_projectionFrontCulling_3D,this.projectionBackCulling_3D=c.default_projectionBackCulling_3D,this.cullBackFace_3D=c.default_cullBackFace_3D,this.fog_mode_3D=c.default_fog_mode_3D,this.fog_color_3D=c.default_fog_color_3D,this.fog_start_3D=c.default_fog_start_3D,this.fog_end_3D=c.default_fog_end_3D,this.fog_density_3D=c.default_fog_density_3D,this.atoms_display=c.default_atoms_display,this.atoms_color=c.default_atoms_color,this.atoms_font_size_2D=c.default_atoms_font_size_2D,this.atoms_font_families_2D=c.default_atoms_font_families_2D.slice(0),this.atoms_font_bold_2D=c.default_atoms_font_bold_2D,this.atoms_font_italic_2D=c.default_atoms_font_italic_2D,this.atoms_circles_2D=c.default_atoms_circles_2D,this.atoms_circleDiameter_2D=c.default_atoms_circleDiameter_2D,this.atoms_circleBorderWidth_2D=c.default_atoms_circleBorderWidth_2D,this.atoms_lonePairDistance_2D=c.default_atoms_lonePairDistance_2D,this.atoms_lonePairSpread_2D=c.default_atoms_lonePairSpread_2D,this.atoms_lonePairDiameter_2D=c.default_atoms_lonePairDiameter_2D,this.atoms_useJMOLColors=c.default_atoms_useJMOLColors,this.atoms_usePYMOLColors=c.default_atoms_usePYMOLColors,this.atoms_resolution_3D=c.default_atoms_resolution_3D,this.atoms_sphereDiameter_3D=c.default_atoms_sphereDiameter_3D,this.atoms_useVDWDiameters_3D=c.default_atoms_useVDWDiameters_3D,this.atoms_vdwMultiplier_3D=c.default_atoms_vdwMultiplier_3D,this.atoms_materialAmbientColor_3D=c.default_atoms_materialAmbientColor_3D,this.atoms_materialSpecularColor_3D=c.default_atoms_materialSpecularColor_3D,this.atoms_materialShininess_3D=c.default_atoms_materialShininess_3D,this.atoms_implicitHydrogens_2D=c.default_atoms_implicitHydrogens_2D,this.atoms_displayTerminalCarbonLabels_2D=c.default_atoms_displayTerminalCarbonLabels_2D,this.atoms_showHiddenCarbons_2D=c.default_atoms_showHiddenCarbons_2D,this.atoms_showAttributedCarbons_2D=c.default_atoms_showAttributedCarbons_2D,this.atoms_displayAllCarbonLabels_2D=c.default_atoms_displayAllCarbonLabels_2D,this.atoms_nonBondedAsStars_3D=c.default_atoms_nonBondedAsStars_3D,this.atoms_displayLabels_3D=c.default_atoms_displayLabels_3D,this.atoms_HBlack_2D=c.default_atoms_HBlack_2D,this.bonds_display=c.default_bonds_display,this.bonds_color=c.default_bonds_color,this.bonds_width_2D=c.default_bonds_width_2D,this.bonds_saturationWidth_2D=c.default_bonds_saturationWidth_2D,this.bonds_ends_2D=c.default_bonds_ends_2D,this.bonds_useJMOLColors=c.default_bonds_useJMOLColors,this.bonds_usePYMOLColors=c.default_bonds_usePYMOLColors,this.bonds_colorGradient=c.default_bonds_colorGradient,this.bonds_saturationAngle_2D=c.default_bonds_saturationAngle_2D,this.bonds_symmetrical_2D=c.default_bonds_symmetrical_2D,this.bonds_clearOverlaps_2D=c.default_bonds_clearOverlaps_2D,this.bonds_overlapClearWidth_2D=c.default_bonds_overlapClearWidth_2D,this.bonds_atomLabelBuffer_2D=c.default_bonds_atomLabelBuffer_2D,this.bonds_wedgeThickness_2D=c.default_bonds_wedgeThickness_2D,this.bonds_hashWidth_2D=c.default_bonds_hashWidth_2D,this.bonds_hashSpacing_2D=c.default_bonds_hashSpacing_2D,this.bonds_dotSize_2D=c.default_bonds_dotSize_2D,this.bonds_lewisStyle_2D=c.default_bonds_lewisStyle_2D,this.bonds_showBondOrders_3D=c.default_bonds_showBondOrders_3D,this.bonds_resolution_3D=c.default_bonds_resolution_3D,this.bonds_renderAsLines_3D=c.default_bonds_renderAsLines_3D,this.bonds_cylinderDiameter_3D=c.default_bonds_cylinderDiameter_3D,this.bonds_pillHeight_3D=c.default_bonds_pillHeight_3D,this.bonds_pillLatitudeResolution_3D=c.default_bonds_pillLatitudeResolution_3D,this.bonds_pillLongitudeResolution_3D=c.default_bonds_pillLongitudeResolution_3D,this.bonds_pillSpacing_3D=c.default_bonds_pillSpacing_3D,this.bonds_pillDiameter_3D=c.default_bonds_pillDiameter_3D,this.bonds_materialAmbientColor_3D=c.default_bonds_materialAmbientColor_3D,this.bonds_materialSpecularColor_3D=c.default_bonds_materialSpecularColor_3D,this.bonds_materialShininess_3D=c.default_bonds_materialShininess_3D,this.proteins_displayRibbon=c.default_proteins_displayRibbon,this.proteins_displayBackbone=c.default_proteins_displayBackbone,this.proteins_backboneThickness=c.default_proteins_backboneThickness,this.proteins_backboneColor=c.default_proteins_backboneColor,this.proteins_ribbonCartoonize=c.default_proteins_ribbonCartoonize,this.proteins_residueColor=c.default_proteins_residueColor,this.proteins_primaryColor=c.default_proteins_primaryColor,this.proteins_secondaryColor=c.default_proteins_secondaryColor,this.proteins_ribbonCartoonHelixPrimaryColor=c.default_proteins_ribbonCartoonHelixPrimaryColor,this.proteins_ribbonCartoonHelixSecondaryColor=c.default_proteins_ribbonCartoonHelixSecondaryColor,this.proteins_tubeColor=c.default_proteins_tubeColor,this.proteins_tubeResolution_3D=c.default_proteins_tubeResolution_3D,this.proteins_displayPipePlank=c.default_proteins_displayPipePlank,this.proteins_ribbonCartoonSheetColor=c.default_proteins_ribbonCartoonSheetColor,this.proteins_ribbonThickness=c.default_proteins_ribbonThickness,this.proteins_tubeThickness=c.default_proteins_tubeThickness,this.proteins_plankSheetWidth=c.default_proteins_plankSheetWidth,this.proteins_cylinderHelixDiameter=c.default_proteins_cylinderHelixDiameter,this.proteins_verticalResolution=c.default_proteins_verticalResolution,this.proteins_horizontalResolution=c.default_proteins_horizontalResolution,this.proteins_materialAmbientColor_3D=c.default_proteins_materialAmbientColor_3D,this.proteins_materialSpecularColor_3D=c.default_proteins_materialSpecularColor_3D,this.proteins_materialShininess_3D=c.default_proteins_materialShininess_3D,this.macro_displayAtoms=c.default_macro_displayAtoms,this.macro_displayBonds=c.default_macro_displayBonds,this.macro_atomToLigandDistance=c.default_macro_atomToLigandDistance,this.nucleics_display=c.default_nucleics_display,this.nucleics_tubeColor=c.default_nucleics_tubeColor,this.nucleics_baseColor=c.default_nucleics_baseColor,this.nucleics_residueColor=c.default_nucleics_residueColor,this.nucleics_tubeThickness=c.default_nucleics_tubeThickness,this.nucleics_tubeResolution_3D=c.default_nucleics_tubeResolution_3D,this.nucleics_verticalResolution=c.default_nucleics_verticalResolution,this.nucleics_materialAmbientColor_3D=c.default_nucleics_materialAmbientColor_3D,this.nucleics_materialSpecularColor_3D=c.default_nucleics_materialSpecularColor_3D,this.nucleics_materialShininess_3D=c.default_nucleics_materialShininess_3D,this.macro_showWater=c.default_macro_showWater,this.macro_colorByChain=c.default_macro_colorByChain,this.macro_rainbowColors=c.default_macro_rainbowColors.slice(0),this.surfaces_display=c.default_surfaces_display,this.surfaces_style=c.default_surfaces_style,this.surfaces_color=c.default_surfaces_color,this.surfaces_materialAmbientColor_3D=c.default_surfaces_materialAmbientColor_3D,this.surfaces_materialSpecularColor_3D=c.default_surfaces_materialSpecularColor_3D,this.surfaces_materialShininess_3D=c.default_surfaces_materialShininess_3D,this.plots_color=c.default_plots_color,this.plots_width=c.default_plots_width,this.plots_showIntegration=c.default_plots_showIntegration,this.plots_integrationColor=c.default_plots_integrationColor,this.plots_integrationLineWidth=c.default_plots_integrationLineWidth,this.plots_showGrid=c.default_plots_showGrid,this.plots_gridColor=c.default_plots_gridColor,this.plots_gridLineWidth=c.default_plots_gridLineWidth,this.plots_showYAxis=c.default_plots_showYAxis,this.plots_flipXAxis=c.default_plots_flipXAxis,this.text_font_size=c.default_text_font_size,this.text_font_families=c.default_text_font_families.slice(0),this.text_font_bold=c.default_text_font_bold,this.text_font_italic=c.default_text_font_italic,this.text_font_stroke_3D=c.default_text_font_stroke_3D,this.text_color=c.default_text_color,this.shapes_color=c.default_shapes_color,this.shapes_lineWidth=c.default_shapes_lineWidth,this.shapes_arrowLength_2D=c.default_shapes_arrowLength_2D,this.compass_display=c.default_compass_display,this.compass_axisXColor_3D=c.default_compass_axisXColor_3D,this.compass_axisYColor_3D=c.default_compass_axisYColor_3D,this.compass_axisZColor_3D=c.default_compass_axisZColor_3D,this.compass_size_3D=c.default_compass_size_3D,this.compass_resolution_3D=c.default_compass_resolution_3D,this.compass_displayText_3D=c.default_compass_displayText_3D,this.compass_type_3D=c.default_compass_type_3D,this.measurement_update_3D=c.default_measurement_update_3D,this.measurement_angleBands_3D=c.default_measurement_angleBands_3D,this.measurement_displayText_3D=c.default_measurement_displayText_3D};var _=structures.VisualSpecifications.prototype;_.set3DRepresentation=function(representation){this.atoms_display=!0,this.bonds_display=!0,this.bonds_color="#777777",this.atoms_useVDWDiameters_3D=!0,this.atoms_useJMOLColors=!0,this.bonds_useJMOLColors=!0,this.bonds_showBondOrders_3D=!0,this.bonds_renderAsLines_3D=!1,"Ball and Stick"===representation?(this.atoms_vdwMultiplier_3D=.3,this.bonds_useJMOLColors=!1,this.bonds_cylinderDiameter_3D=.3,this.bonds_materialAmbientColor_3D=c.default_atoms_materialAmbientColor_3D,this.bonds_pillDiameter_3D=.15):"van der Waals Spheres"===representation?(this.bonds_display=!1,this.atoms_vdwMultiplier_3D=1):"Stick"===representation?(this.atoms_useVDWDiameters_3D=!1,this.bonds_showBondOrders_3D=!1,this.bonds_cylinderDiameter_3D=this.atoms_sphereDiameter_3D=.8,this.bonds_materialAmbientColor_3D=this.atoms_materialAmbientColor_3D):"Wireframe"===representation?(this.atoms_useVDWDiameters_3D=!1,this.bonds_cylinderDiameter_3D=this.bonds_pillDiameter_3D=.05,this.atoms_sphereDiameter_3D=.15,this.bonds_materialAmbientColor_3D=c.default_atoms_materialAmbientColor_3D):"Line"===representation?(this.atoms_display=!1,this.bonds_renderAsLines_3D=!0,this.bonds_width_2D=1,this.bonds_cylinderDiameter_3D=.05):alert('"'+representation+'" is not recognized. Use one of the following strings:\n\n1. Ball and Stick\n2. van der Waals Spheres\n3. Stick\n4. Wireframe\n5. Line\n')}}(ChemDoodle,ChemDoodle.structures,Math),function(c,ELEMENT,informatics,structures){"use strict";informatics.getPointsPerAngstrom=function(){return c.default_bondLength_2D/c.default_angstromsPerBondLength},informatics.BondDeducer=function(){};var _=informatics.BondDeducer.prototype;_.margin=1.1,_.deduceCovalentBonds=function(molecule,customPointsPerAngstrom){var pointsPerAngstrom=informatics.getPointsPerAngstrom();customPointsPerAngstrom&&(pointsPerAngstrom=customPointsPerAngstrom);for(var i=0,ii=molecule.atoms.length;ii>i;i++)for(var j=i+1;ii>j;j++){var first=molecule.atoms[i],second=molecule.atoms[j];first.distance3D(second)<(ELEMENT[first.label].covalentRadius+ELEMENT[second.label].covalentRadius)*pointsPerAngstrom*this.margin&&molecule.bonds.push(new structures.Bond(first,second,1))}}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.informatics,ChemDoodle.structures),function(informatics,structures){"use strict";informatics.HydrogenDeducer=function(){};var _=informatics.HydrogenDeducer.prototype;_.removeHydrogens=function(molecule,removeStereo){for(var atoms=[],bonds=[],i=0,ii=molecule.bonds.length;ii>i;i++){var b=molecule.bonds[i],save="H"!==b.a1.label&&"H"!==b.a2.label;save||removeStereo||b.stereo===structures.Bond.STEREO_NONE||(save=!0),save?(b.a1.tag=!0,bonds.push(b)):("H"===b.a1.label&&(b.a1.remove=!0),"H"===b.a2.label&&(b.a2.remove=!0))}for(var i=0,ii=molecule.atoms.length;ii>i;i++){var a=molecule.atoms[i];a.remove?a.remove=void 0:atoms.push(a)}molecule.atoms=atoms,molecule.bonds=bonds}}(ChemDoodle.informatics,ChemDoodle.structures),function(c,informatics,d3){"use strict";informatics.MolecularSurfaceGenerator=function(){};var _=informatics.MolecularSurfaceGenerator.prototype;_.generateSurface=function(molecule,latitudeBands,longitudeBands,probeRadius,atomRadius){return new d3.MolecularSurface(molecule,latitudeBands,longitudeBands,probeRadius,atomRadius)}}(ChemDoodle,ChemDoodle.informatics,ChemDoodle.structures.d3),function(informatics,structures){"use strict";informatics.Splitter=function(){};var _=informatics.Splitter.prototype;_.split=function(molecule){for(var mols=[],i=0,ii=molecule.atoms.length;ii>i;i++)molecule.atoms[i].visited=!1;for(var i=0,ii=molecule.bonds.length;ii>i;i++)molecule.bonds[i].visited=!1;for(var i=0,ii=molecule.atoms.length;ii>i;i++){var a=molecule.atoms[i];if(!a.visited){var newMol=new structures.Molecule;newMol.atoms.push(a),a.visited=!0;var q=new structures.Queue;for(q.enqueue(a);!q.isEmpty();)for(var atom=q.dequeue(),j=0,jj=molecule.bonds.length;jj>j;j++){var b=molecule.bonds[j];if(b.contains(atom)&&!b.visited){b.visited=!0,newMol.bonds.push(b);var neigh=b.getNeighbor(atom);neigh.visited||(neigh.visited=!0,newMol.atoms.push(neigh),q.enqueue(neigh))}}mols.push(newMol)}}return mols}}(ChemDoodle.informatics,ChemDoodle.structures),function(informatics,io,structures){"use strict";informatics.StructureBuilder=function(){};var _=informatics.StructureBuilder.prototype;_.copy=function(molecule){var json=new io.JSONInterpreter;return json.molFrom(json.molTo(molecule))}}(ChemDoodle.informatics,ChemDoodle.io,ChemDoodle.structures),function(informatics){"use strict";informatics._Counter=function(){};var _=informatics._Counter.prototype;_.value=0,_.molecule=void 0,_.setMolecule=function(molecule){this.value=0,this.molecule=molecule,this.innerCalculate&&this.innerCalculate()}}(ChemDoodle.informatics),function(informatics){"use strict";informatics.FrerejacqueNumberCounter=function(molecule){this.setMolecule(molecule)};var _=informatics.FrerejacqueNumberCounter.prototype=new informatics._Counter;_.innerCalculate=function(){this.value=this.molecule.bonds.length-this.molecule.atoms.length+new informatics.NumberOfMoleculesCounter(this.molecule).value}}(ChemDoodle.informatics),function(structures,informatics){"use strict";informatics.NumberOfMoleculesCounter=function(molecule){this.setMolecule(molecule)};var _=informatics.NumberOfMoleculesCounter.prototype=new informatics._Counter;_.innerCalculate=function(){for(var i=0,ii=this.molecule.atoms.length;ii>i;i++)this.molecule.atoms[i].visited=!1;for(var i=0,ii=this.molecule.atoms.length;ii>i;i++)if(!this.molecule.atoms[i].visited){this.value++;var q=new structures.Queue;for(this.molecule.atoms[i].visited=!0,q.enqueue(this.molecule.atoms[i]);!q.isEmpty();)for(var atom=q.dequeue(),j=0,jj=this.molecule.bonds.length;jj>j;j++){var b=this.molecule.bonds[j];if(b.contains(atom)){var neigh=b.getNeighbor(atom);neigh.visited||(neigh.visited=!0,q.enqueue(neigh))}}}}}(ChemDoodle.structures,ChemDoodle.informatics),function(informatics){"use strict";informatics._RingFinder=function(){};var _=informatics._RingFinder.prototype;_.atoms=void 0,_.bonds=void 0,_.rings=void 0,_.reduce=function(molecule){for(var i=0,ii=molecule.atoms.length;ii>i;i++)molecule.atoms[i].visited=!1;for(var i=0,ii=molecule.bonds.length;ii>i;i++)molecule.bonds[i].visited=!1;for(var cont=!0;cont;){cont=!1;for(var i=0,ii=molecule.atoms.length;ii>i;i++){for(var bond,count=0,j=0,jj=molecule.bonds.length;jj>j;j++)if(molecule.bonds[j].contains(molecule.atoms[i])&&!molecule.bonds[j].visited){if(count++,2===count)break;bond=molecule.bonds[j]}1===count&&(cont=!0,bond.visited=!0,molecule.atoms[i].visited=!0)}}for(var i=0,ii=molecule.atoms.length;ii>i;i++)molecule.atoms[i].visited||this.atoms.push(molecule.atoms[i]);for(var i=0,ii=molecule.bonds.length;ii>i;i++)molecule.bonds[i].visited||this.bonds.push(molecule.bonds[i]);0===this.bonds.length&&0!==this.atoms.length&&(this.atoms=[])},_.setMolecule=function(molecule){this.atoms=[],this.bonds=[],this.rings=[],this.reduce(molecule),this.atoms.length>2&&this.innerGetRings&&this.innerGetRings()},_.fuse=function(){for(var i=0,ii=this.rings.length;ii>i;i++)for(var j=0,jj=this.bonds.length;jj>j;j++)-1!==this.rings[i].atoms.indexOf(this.bonds[j].a1)&&-1!==this.rings[i].atoms.indexOf(this.bonds[j].a2)&&this.rings[i].bonds.push(this.bonds[j])}}(ChemDoodle.informatics),function(informatics,structures){"use strict";function Finger(a,from){if(this.atoms=[],from)for(var i=0,ii=from.atoms.length;ii>i;i++)this.atoms[i]=from.atoms[i];this.atoms.push(a)}var _2=Finger.prototype;_2.grow=function(bonds,blockers){for(var last=this.atoms[this.atoms.length-1],neighs=[],i=0,ii=bonds.length;ii>i;i++)if(bonds[i].contains(last)){var neigh=bonds[i].getNeighbor(last);-1===blockers.indexOf(neigh)&&neighs.push(neigh)}for(var returning=[],i=0,ii=neighs.length;ii>i;i++)returning.push(new Finger(neighs[i],this));return returning},_2.check=function(bonds,finger,a){for(var i=0,ii=finger.atoms.length-1;ii>i;i++)if(-1!==this.atoms.indexOf(finger.atoms[i]))return;var ring;if(finger.atoms[finger.atoms.length-1]===this.atoms[this.atoms.length-1]){ring=new structures.Ring,ring.atoms[0]=a;for(var i=0,ii=this.atoms.length;ii>i;i++)ring.atoms.push(this.atoms[i]);for(var i=finger.atoms.length-2;i>=0;i--)ring.atoms.push(finger.atoms[i])}else{for(var endbonds=[],i=0,ii=bonds.length;ii>i;i++)bonds[i].contains(finger.atoms[finger.atoms.length-1])&&endbonds.push(bonds[i]);for(var i=0,ii=endbonds.length;ii>i;i++)if((1===finger.atoms.length||!endbonds[i].contains(finger.atoms[finger.atoms.length-2]))&&endbonds[i].contains(this.atoms[this.atoms.length-1])){ring=new structures.Ring,ring.atoms[0]=a;for(var j=0,jj=this.atoms.length;jj>j;j++)ring.atoms.push(this.atoms[j]);for(var j=finger.atoms.length-1;j>=0;j--)ring.atoms.push(finger.atoms[j]);break}}return ring},informatics.EulerFacetRingFinder=function(molecule){this.setMolecule(molecule)};var _=informatics.EulerFacetRingFinder.prototype=new informatics._RingFinder;_.fingerBreak=5,_.innerGetRings=function(){for(var i=0,ii=this.atoms.length;ii>i;i++){for(var neigh=[],j=0,jj=this.bonds.length;jj>j;j++)this.bonds[j].contains(this.atoms[i])&&neigh.push(this.bonds[j].getNeighbor(this.atoms[i]));for(var j=0,jj=neigh.length;jj>j;j++)for(var k=j+1;k<neigh.length;k++){var fingers=[];fingers[0]=new Finger(neigh[j]),fingers[1]=new Finger(neigh[k]);var blockers=[];blockers[0]=this.atoms[i];for(var l=0,ll=neigh.length;ll>l;l++)l!==j&&l!==k&&blockers.push(neigh[l]);var found=[],three=fingers[0].check(this.bonds,fingers[1],this.atoms[i]);for(three&&(found[0]=three);0===found.length&&fingers.length>0&&fingers[0].atoms.length<this.fingerBreak;){for(var newfingers=[],l=0,ll=fingers.length;ll>l;l++)for(var adding=fingers[l].grow(this.bonds,blockers),m=0,mm=adding.length;mm>m;m++)newfingers.push(adding[m]);fingers=newfingers;for(var l=0,ll=fingers.length;ll>l;l++)for(var m=l+1;ll>m;m++){var r=fingers[l].check(this.bonds,fingers[m],this.atoms[i]);r&&found.push(r)}if(0===found.length){for(var newBlockers=[],l=0,ll=blockers.length;ll>l;l++)for(var m=0,mm=this.bonds.length;mm>m;m++)if(this.bonds[m].contains(blockers[l])){var neigh=this.bonds[m].getNeighbor(blockers[l]);-1===blockers.indexOf(neigh)&&-1===newBlockers.indexOf(neigh)&&newBlockers.push(neigh)}for(var l=0,ll=newBlockers.length;ll>l;l++)blockers.push(newBlockers[l])}}if(found.length>0){for(var use=void 0,l=0,ll=found.length;ll>l;l++)(!use||use.atoms.length>found[l].atoms.length)&&(use=found[l]);
for(var already=!1,l=0,ll=this.rings.length;ll>l;l++){for(var all=!0,m=0,mm=use.atoms.length;mm>m;m++)if(-1===this.rings[l].atoms.indexOf(use.atoms[m])){all=!1;break}if(all){already=!0;break}}already||this.rings.push(use)}}}this.fuse()}}(ChemDoodle.informatics,ChemDoodle.structures),function(informatics){"use strict";informatics.SSSRFinder=function(molecule){if(this.rings=[],molecule.atoms.length>0){var frerejacqueNumber=new informatics.FrerejacqueNumberCounter(molecule).value,all=new informatics.EulerFacetRingFinder(molecule).rings;all.sort(function(a,b){return a.atoms.length-b.atoms.length});for(var i=0,ii=molecule.bonds.length;ii>i;i++)molecule.bonds[i].visited=!1;for(var i=0,ii=all.length;ii>i;i++){for(var use=!1,j=0,jj=all[i].bonds.length;jj>j;j++)if(!all[i].bonds[j].visited){use=!0;break}if(use){for(var j=0,jj=all[i].bonds.length;jj>j;j++)all[i].bonds[j].visited=!0;this.rings.push(all[i])}if(this.rings.length===frerejacqueNumber)break}}}}(ChemDoodle.informatics),function(io){"use strict";io._Interpreter=function(){};var _=io._Interpreter.prototype;_.fit=function(data,length,leftAlign){for(var size=data.length,padding=[],i=0;length-size>i;i++)padding.push(" ");return leftAlign?data+padding.join(""):padding.join("")+data}}(ChemDoodle.io),function(c,extensions,io,structures,d3,m,m4,v3){"use strict";var whitespaceRegex=/\s+/g,whitespaceAndParenthesisRegex=/\(|\)|\s+/g,whitespaceAndQuoteRegex=/\'|\s+/g,whitespaceAndQuoteAndCommaRegex=/,|\'|\s+/g,leadingWhitespaceRegex=/^\s+/,digitsRegex=/[0-9]/g,digitsSymbolRegex=/[0-9]|\+|\-/g,filter=function(s){return 0!==s.length},hallTranslations={P:[],A:[[0,.5,.5]],B:[[.5,0,.5]],C:[[.5,.5,0]],I:[[.5,.5,.5]],R:[[2/3,1/3,1/3],[1/3,2/3,2/3]],S:[[1/3,1/3,2/3],[2/3,2/3,1/3]],T:[[1/3,2/3,1/3],[2/3,1/3,2/3]],F:[[0,.5,.5],[.5,0,.5],[.5,.5,0]]},parseTransform=function(s){var displacement=0,x=0,y=0,z=0,indexx=s.indexOf("x"),indexy=s.indexOf("y"),indexz=s.indexOf("z");if(-1!==indexx&&(x++,indexx>0&&"+"!==s.charAt(indexx-1)&&(x*=-1)),-1!==indexy&&(y++,indexy>0&&"+"!==s.charAt(indexy-1)&&(y*=-1)),-1!==indexz&&(z++,indexz>0&&"+"!==s.charAt(indexz-1)&&(z*=-1)),s.length>2)for(var op="+",i=0,ii=s.length;ii>i;i++){var l=s.charAt(i);"-"!==l&&"/"!==l||i!==s.length-1&&!s.charAt(i+1).match(digitsRegex)||(op=l),l.match(digitsRegex)&&("+"===op?displacement+=parseInt(l):"-"===op?displacement-=parseInt(l):"/"===op&&(displacement/=parseInt(l)))}return[displacement,x,y,z]},generateABC2XYZ=function(a,b,c,alpha,beta,gamma){var d=(m.cos(alpha)-m.cos(gamma)*m.cos(beta))/m.sin(gamma);return[a,0,0,0,b*m.cos(gamma),b*m.sin(gamma),0,0,c*m.cos(beta),c*d,c*m.sqrt(1-m.pow(m.cos(beta),2)-d*d),0,0,0,0,1]};io.CIFInterpreter=function(){};var _=io.CIFInterpreter.prototype=new io._Interpreter;_.read=function(content,xSuper,ySuper,zSuper){xSuper=xSuper?xSuper:1,ySuper=ySuper?ySuper:1,zSuper=zSuper?zSuper:1;var molecule=new structures.Molecule;if(!content)return molecule;for(var transformLoop,atomLoop,bondLoop,line,lines=content.split("\n"),aLength=0,bLength=0,cLength=0,alphaAngle=0,betaAngle=0,gammaAngle=0,hallClass="P",shift=!0;lines.length>0;)if(shift?line=lines.shift():shift=!0,line.length>0)if(extensions.stringStartsWith(line,"_cell_length_a"))aLength=parseFloat(line.split(whitespaceAndParenthesisRegex)[1]);else if(extensions.stringStartsWith(line,"_cell_length_b"))bLength=parseFloat(line.split(whitespaceAndParenthesisRegex)[1]);else if(extensions.stringStartsWith(line,"_cell_length_c"))cLength=parseFloat(line.split(whitespaceAndParenthesisRegex)[1]);else if(extensions.stringStartsWith(line,"_cell_angle_alpha"))alphaAngle=m.PI*parseFloat(line.split(whitespaceAndParenthesisRegex)[1])/180;else if(extensions.stringStartsWith(line,"_cell_angle_beta"))betaAngle=m.PI*parseFloat(line.split(whitespaceAndParenthesisRegex)[1])/180;else if(extensions.stringStartsWith(line,"_cell_angle_gamma"))gammaAngle=m.PI*parseFloat(line.split(whitespaceAndParenthesisRegex)[1])/180;else if(extensions.stringStartsWith(line,"_symmetry_space_group_name_H-M"))hallClass=line.split(whitespaceAndQuoteRegex)[1];else if(extensions.stringStartsWith(line,"loop_")){for(var loop={fields:[],lines:[]},pushingLines=!1;void 0!==(line=lines.shift())&&!extensions.stringStartsWith(line=line.replace(leadingWhitespaceRegex,""),"loop_")&&line.length>0;)if(extensions.stringStartsWith(line,"_")){if(pushingLines)break;loop.fields=loop.fields.concat(line.split(whitespaceRegex).filter(filter))}else pushingLines=!0,loop.lines.push(line);0!==lines.length&&(extensions.stringStartsWith(line,"loop_")||extensions.stringStartsWith(line,"_"))&&(shift=!1),-1!==loop.fields.indexOf("_symmetry_equiv_pos_as_xyz")||-1!==loop.fields.indexOf("_space_group_symop_operation_xyz")?transformLoop=loop:-1!==loop.fields.indexOf("_atom_site_label")?atomLoop=loop:-1!==loop.fields.indexOf("_geom_bond_atom_site_label_1")&&(bondLoop=loop)}var abc2xyz=generateABC2XYZ(aLength,bLength,cLength,alphaAngle,betaAngle,gammaAngle);if(atomLoop){for(var labelIndex=-1,altLabelIndex=-1,xIndex=-1,yIndex=-1,zIndex=-1,i=0,ii=atomLoop.fields.length;ii>i;i++){var field=atomLoop.fields[i];"_atom_site_type_symbol"===field?labelIndex=i:"_atom_site_label"===field?altLabelIndex=i:"_atom_site_fract_x"===field?xIndex=i:"_atom_site_fract_y"===field?yIndex=i:"_atom_site_fract_z"===field&&(zIndex=i)}for(var i=0,ii=atomLoop.lines.length;ii>i;i++){line=atomLoop.lines[i];var tokens=line.split(whitespaceRegex).filter(filter),a=new structures.Atom(tokens[-1===labelIndex?altLabelIndex:labelIndex].split(digitsSymbolRegex)[0],parseFloat(tokens[xIndex]),parseFloat(tokens[yIndex]),parseFloat(tokens[zIndex]));molecule.atoms.push(a),-1!==altLabelIndex&&(a.cifId=tokens[altLabelIndex],a.cifPart=0)}}if(transformLoop&&!bondLoop){for(var symIndex=0,i=0,ii=transformLoop.fields.length;ii>i;i++){var field=transformLoop.fields[i];("_symmetry_equiv_pos_as_xyz"===field||"_space_group_symop_operation_xyz"===field)&&(symIndex=i)}for(var impliedTranslations=hallTranslations[hallClass],add=[],i=0,ii=transformLoop.lines.length;ii>i;i++)for(var parts=transformLoop.lines[i].split(whitespaceAndQuoteAndCommaRegex).filter(filter),multx=parseTransform(parts[symIndex]),multy=parseTransform(parts[symIndex+1]),multz=parseTransform(parts[symIndex+2]),j=0,jj=molecule.atoms.length;jj>j;j++){var a=molecule.atoms[j],x=a.x*multx[1]+a.y*multx[2]+a.z*multx[3]+multx[0],y=a.x*multy[1]+a.y*multy[2]+a.z*multy[3]+multy[0],z=a.x*multz[1]+a.y*multz[2]+a.z*multz[3]+multz[0],copy1=new structures.Atom(a.label,x,y,z);if(add.push(copy1),void 0!==a.cifId&&(copy1.cifId=a.cifId,copy1.cifPart=i+1),impliedTranslations)for(var k=0,kk=impliedTranslations.length;kk>k;k++){var trans=impliedTranslations[k],copy2=new structures.Atom(a.label,x+trans[0],y+trans[1],z+trans[2]);add.push(copy2),void 0!==a.cifId&&(copy2.cifId=a.cifId,copy2.cifPart=i+1)}}for(var i=0,ii=add.length;ii>i;i++){for(var a=add[i];a.x>=1;)a.x--;for(;a.x<0;)a.x++;for(;a.y>=1;)a.y--;for(;a.y<0;)a.y++;for(;a.z>=1;)a.z--;for(;a.z<0;)a.z++}for(var noOverlaps=[],i=0,ii=add.length;ii>i;i++){for(var overlap=!1,a=add[i],j=0,jj=molecule.atoms.length;jj>j;j++)if(molecule.atoms[j].distance3D(a)<1e-4){overlap=!0;break}if(!overlap){for(var j=0,jj=noOverlaps.length;jj>j;j++)if(noOverlaps[j].distance3D(a)<1e-4){overlap=!0;break}overlap||noOverlaps.push(a)}}molecule.atoms=molecule.atoms.concat(noOverlaps)}for(var extras=[],i=0;xSuper>i;i++)for(var j=0;ySuper>j;j++)for(var k=0;zSuper>k;k++)if(0!==i||0!==j||0!==k)for(var l=0,ll=molecule.atoms.length;ll>l;l++){var a=molecule.atoms[l],copy=new structures.Atom(a.label,a.x+i,a.y+j,a.z+k);extras.push(copy),void 0!==a.cifId&&(copy.cifId=a.cifId,copy.cifPart=a.cifPart+(transformLoop?transformLoop.lines.length:0)+i+10*j+100*k)}molecule.atoms=molecule.atoms.concat(extras);for(var i=0,ii=molecule.atoms.length;ii>i;i++){var a=molecule.atoms[i],xyz=m4.multiplyVec3(abc2xyz,[a.x,a.y,a.z]);a.x=xyz[0],a.y=xyz[1],a.z=xyz[2]}if(bondLoop){for(var atom1=-1,atom2=-1,i=0,ii=bondLoop.fields.length;ii>i;i++){var field=bondLoop.fields[i];"_geom_bond_atom_site_label_1"===field?atom1=i:"_geom_bond_atom_site_label_2"===field&&(atom2=i)}for(var k=0,kk=bondLoop.lines.length;kk>k;k++)for(var tokens=bondLoop.lines[k].split(whitespaceRegex).filter(filter),id1=tokens[atom1],id2=tokens[atom2],i=0,ii=molecule.atoms.length;ii>i;i++)for(var j=i+1;ii>j;j++){var ai=molecule.atoms[i],aj=molecule.atoms[j];if(ai.cifPart!==aj.cifPart)break;(ai.cifId===id1&&aj.cifId===id2||ai.cifId===id2&&aj.cifId===id1)&&molecule.bonds.push(new structures.Bond(ai,aj))}}else(new c.informatics.BondDeducer).deduceCovalentBonds(molecule,1);var o=[-xSuper/2,-ySuper/2,-zSuper/2],unitCellVectors={o:m4.multiplyVec3(abc2xyz,o,[]),x:m4.multiplyVec3(abc2xyz,[o[0]+1,o[1],o[2]]),y:m4.multiplyVec3(abc2xyz,[o[0],o[1]+1,o[2]]),z:m4.multiplyVec3(abc2xyz,[o[0],o[1],o[2]+1]),xy:m4.multiplyVec3(abc2xyz,[o[0]+1,o[1]+1,o[2]]),xz:m4.multiplyVec3(abc2xyz,[o[0]+1,o[1],o[2]+1]),yz:m4.multiplyVec3(abc2xyz,[o[0],o[1]+1,o[2]+1]),xyz:m4.multiplyVec3(abc2xyz,[o[0]+1,o[1]+1,o[2]+1])};return{molecule:molecule,unitCell:new d3.UnitCell(unitCellVectors)}};var interpreter=new io.CIFInterpreter;c.readCIF=function(content,xSuper,ySuper,zSuper){return interpreter.read(content,xSuper,ySuper,zSuper)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(c,io,structures,q){"use strict";io.CMLInterpreter=function(){};var _=io.CMLInterpreter.prototype=new io._Interpreter;_.read=function(content){for(var molecules=[],xml=q.parseXML(content),allCml=q(xml).find("cml"),i=0,ii=allCml.length;ii>i;i++)for(var allMolecules=q(allCml[i]).find("molecule"),j=0,jj=allMolecules.length;jj>j;j++){for(var currentMolecule=molecules[j]=new structures.Molecule,idmap=[],cmlAtoms=q(allMolecules[j]).find("atom"),k=0,kk=cmlAtoms.length;kk>k;k++){var x,y,z,currentAtom,currentCMLAtom=q(cmlAtoms[k]),label=currentCMLAtom.attr("elementType");void 0==currentCMLAtom.attr("x2")?(x=currentCMLAtom.attr("x3"),y=currentCMLAtom.attr("y3"),z=currentCMLAtom.attr("z3")):(x=currentCMLAtom.attr("x2"),y=currentCMLAtom.attr("y2"),z=0),currentAtom=molecules[j].atoms[k]=new structures.Atom(label,x,y,z),idmap[k]=currentCMLAtom.attr("id"),void 0!=currentCMLAtom.attr("formalCharge")&&(currentAtom.charge=currentCMLAtom.attr("formalCharge"))}for(var cmlBonds=q(allMolecules[j]).find("bond"),k=0,kk=cmlBonds.length;kk>k;k++){var a1,a2,order,currentCMLBond=q(cmlBonds[k]),atomRefs2=currentCMLBond.attr("atomRefs2").split(" ");switch(a1=currentMolecule.atoms[q.inArray(atomRefs2[0],idmap)],a2=currentMolecule.atoms[q.inArray(atomRefs2[1],idmap)],currentCMLBond.attr("order")){case"2":case"D":order=2;break;case"3":case"T":order=3;break;case"A":order=1.5;break;default:order=1}var currentBond=molecules[j].bonds[k]=new structures.Bond(a1,a2,order);switch(currentCMLBond.find("bondStereo").text()){case"W":currentBond.stereo=structures.Bond.STEREO_PROTRUDING;break;case"H":currentBond.stereo=structures.Bond.STEREO_RECESSED}}}return molecules},_.write=function(molecules){var sb=[];sb.push('<?xml version="1.0" encoding="UTF-8"?>\n'),sb.push('<cml convention="conventions:molecular" xmlns="http://www.xml-cml.org/schema" xmlns:conventions="http://www.xml-cml.org/convention/" xmlns:dc="http://purl.org/dc/elements/1.1/">\n');for(var i=0,ii=molecules.length;ii>i;i++){sb.push('<molecule id="m'),sb.push(i),sb.push('">'),sb.push("<atomArray>");for(var j=0,jj=molecules[i].atoms.length;jj>j;j++){var currentAtom=molecules[i].atoms[j];sb.push('<atom elementType="'),sb.push(currentAtom.label),sb.push('" id="a'),sb.push(j),sb.push('" '),sb.push('x3="'),sb.push(currentAtom.x),sb.push('" y3="'),sb.push(currentAtom.y),sb.push('" z3="'),sb.push(currentAtom.z),sb.push('" '),0!=currentAtom.charge&&(sb.push('formalCharge="'),sb.push(currentAtom.charge),sb.push('" ')),sb.push("/>")}sb.push("</atomArray>"),sb.push("<bondArray>");for(var j=0,jj=molecules[i].bonds.length;jj>j;j++){var currentBond=molecules[i].bonds[j];switch(sb.push('<bond atomRefs2="a'),sb.push(molecules[i].atoms.indexOf(currentBond.a1)),sb.push(" a"),sb.push(molecules[i].atoms.indexOf(currentBond.a2)),sb.push('" order="'),currentBond.bondOrder){case 1.5:sb.push("A");break;case 1:case 2:case 3:sb.push(currentBond.bondOrder);break;case.5:default:sb.push("S")}sb.push('"/>')}sb.push("</bondArray>"),sb.push("</molecule>")}return sb.push("</cml>"),sb.join("")};var interpreter=new io.CMLInterpreter;c.readCML=function(content){return interpreter.read(content)},c.writeCML=function(molecules){return interpreter.write(molecules)}}(ChemDoodle,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery),function(c,ELEMENT,io,structures){"use strict";io.MOLInterpreter=function(){};var _=io.MOLInterpreter.prototype=new io._Interpreter;_.read=function(content,multiplier){multiplier||(multiplier=c.default_bondLength_2D);var molecule=new structures.Molecule;if(!content)return molecule;for(var currentTagTokens=content.split("\n"),counts=currentTagTokens[3],numAtoms=parseInt(counts.substring(0,3)),numBonds=parseInt(counts.substring(3,6)),i=0;numAtoms>i;i++){var line=currentTagTokens[4+i];molecule.atoms[i]=new structures.Atom(line.substring(31,34),parseFloat(line.substring(0,10))*multiplier,(1===multiplier?1:-1)*parseFloat(line.substring(10,20))*multiplier,parseFloat(line.substring(20,30))*multiplier);var massDif=parseInt(line.substring(34,36));switch(0!==massDif&&ELEMENT[molecule.atoms[i].label]&&(molecule.atoms[i].mass=ELEMENT[molecule.atoms[i].label].mass+massDif),parseInt(line.substring(36,39))){case 1:molecule.atoms[i].charge=3;break;case 2:molecule.atoms[i].charge=2;break;case 3:molecule.atoms[i].charge=1;break;case 5:molecule.atoms[i].charge=-1;break;case 6:molecule.atoms[i].charge=-2;break;case 7:molecule.atoms[i].charge=-3}}for(var i=0;numBonds>i;i++){var line=currentTagTokens[4+numAtoms+i],bondOrder=parseInt(line.substring(6,9)),stereo=parseInt(line.substring(9,12));if(bondOrder>3)switch(bondOrder){case 4:bondOrder=1.5;break;default:bondOrder=1}var b=new structures.Bond(molecule.atoms[parseInt(line.substring(0,3))-1],molecule.atoms[parseInt(line.substring(3,6))-1],bondOrder);switch(stereo){case 3:b.stereo=structures.Bond.STEREO_AMBIGUOUS;break;case 1:b.stereo=structures.Bond.STEREO_PROTRUDING;break;case 6:b.stereo=structures.Bond.STEREO_RECESSED}molecule.bonds[i]=b}return molecule},_.write=function(molecule){var sb=[];sb.push("Molecule from ChemDoodle Web Components\n\nhttp://www.ichemlabs.com\n"),sb.push(this.fit(molecule.atoms.length.toString(),3)),sb.push(this.fit(molecule.bonds.length.toString(),3)),sb.push("  0  0  0  0            999 V2000\n");for(var p=molecule.getCenter(),i=0,ii=molecule.atoms.length;ii>i;i++){var a=molecule.atoms[i],mass=" 0";if(-1!==a.mass&&ELEMENT[a.label]){var dif=a.mass-ELEMENT[a.label].mass;5>dif&&dif>-4&&(mass=(dif>-1?" ":"")+dif)}var charge="  0";if(0!==a.charge)switch(a.charge){case 3:charge="  1";break;case 2:charge="  2";break;case 1:charge="  3";break;case-1:charge="  5";break;case-2:charge="  6";break;case-3:charge="  7"}sb.push(this.fit(((a.x-p.x)/c.default_bondLength_2D).toFixed(4),10)),sb.push(this.fit((-(a.y-p.y)/c.default_bondLength_2D).toFixed(4),10)),sb.push(this.fit((a.z/c.default_bondLength_2D).toFixed(4),10)),sb.push(" "),sb.push(this.fit(a.label,3,!0)),sb.push(mass),sb.push(charge),sb.push("  0  0  0  0\n")}for(var i=0,ii=molecule.bonds.length;ii>i;i++){var b=molecule.bonds[i],stereo=0;b.stereo===structures.Bond.STEREO_AMBIGUOUS?stereo=3:b.stereo===structures.Bond.STEREO_PROTRUDING?stereo=1:b.stereo===structures.Bond.STEREO_RECESSED&&(stereo=6),sb.push(this.fit((molecule.atoms.indexOf(b.a1)+1).toString(),3)),sb.push(this.fit((molecule.atoms.indexOf(b.a2)+1).toString(),3));var btype=b.bondOrder;1.5==btype?btype=4:(btype>3||btype%1!=0)&&(btype=1),sb.push(this.fit(btype,3)),sb.push("  "),sb.push(stereo),sb.push("     0  0\n")}return sb.push("M  END"),sb.join("")};var interpreter=new io.MOLInterpreter;c.readMOL=function(content,multiplier){return interpreter.read(content,multiplier)},c.writeMOL=function(mol){return interpreter.write(mol)}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.io,ChemDoodle.structures),function(c,extensions,io,structures,ELEMENT,trim,m){"use strict";function checkContained(residue,set,chainID,index,helix){for(var j=0,jj=set.length;jj>j;j++){var check=set[j];if(check.id===chainID&&index>=check.start&&index<=check.end)return helix?residue.helix=!0:residue.sheet=!0,void(index===check.end&&(residue.arrow=!0))}}io.PDBInterpreter=function(){};var _=io.PDBInterpreter.prototype=new io._Interpreter;_.calculateRibbonDistances=!1,_.deduceResidueBonds=!1,_.read=function(content,multiplier){var molecule=new structures.Molecule;if(molecule.chains=[],!content)return molecule;var currentTagTokens=content.split("\n");multiplier||(multiplier=1);for(var lastC,helices=[],sheets=[],currentChain=[],resatoms=[],atomSerials=[],i=0,ii=currentTagTokens.length;ii>i;i++){var line=currentTagTokens[i];if(extensions.stringStartsWith(line,"HELIX"))helices.push({id:line.substring(19,20),start:parseInt(line.substring(21,25)),end:parseInt(line.substring(33,37))});else if(extensions.stringStartsWith(line,"SHEET"))sheets.push({id:line.substring(21,22),start:parseInt(line.substring(22,26)),end:parseInt(line.substring(33,37))});else if(extensions.stringStartsWith(line,"ATOM")){var altLoc=line.substring(16,17);if(" "===altLoc||"A"===altLoc){var label=trim(line.substring(76,78));if(0===label.length){var s=trim(line.substring(12,14));"HD"===s?label="H":s.length>0&&(label=s.length>1?s.charAt(0)+s.substring(1).toLowerCase():s)}var a=new structures.Atom(label,parseFloat(line.substring(30,38))*multiplier,parseFloat(line.substring(38,46))*multiplier,parseFloat(line.substring(46,54))*multiplier);a.hetatm=!1,resatoms.push(a);var resSeq=parseInt(line.substring(22,26));if(0===currentChain.length)for(var j=0;3>j;j++){var dummyFront=new structures.Residue(-1);dummyFront.cp1=a,dummyFront.cp2=a,currentChain.push(dummyFront)}if(resSeq!==Number.NaN&&currentChain[currentChain.length-1].resSeq!==resSeq){var r=new structures.Residue(resSeq);r.name=trim(line.substring(17,20)),3===r.name.length?r.name=r.name.substring(0,1)+r.name.substring(1).toLowerCase():2===r.name.length&&"D"===r.name.charAt(0)&&(r.name=r.name.substring(1)),currentChain.push(r);var chainID=line.substring(21,22);checkContained(r,helices,chainID,resSeq,!0),checkContained(r,sheets,chainID,resSeq,!1)}var atomName=trim(line.substring(12,16)),currentResidue=currentChain[currentChain.length-1];"CA"===atomName||"P"===atomName||"O5'"===atomName?currentResidue.cp1||(currentResidue.cp1=a):"N3"===atomName&&("C"===currentResidue.name||"U"===currentResidue.name||"T"===currentResidue.name)||"N1"===atomName&&("A"===currentResidue.name||"G"===currentResidue.name)?currentResidue.cp3=a:"C2"===atomName?currentResidue.cp4=a:"C4"===atomName&&("C"===currentResidue.name||"U"===currentResidue.name||"T"===currentResidue.name)||"C6"===atomName&&("A"===currentResidue.name||"G"===currentResidue.name)?currentResidue.cp5=a:"O"===atomName||"C6"===atomName&&("C"===currentResidue.name||"U"===currentResidue.name||"T"===currentResidue.name)||"N9"===atomName?currentChain[currentChain.length-1].cp2||(("C6"===atomName||"N9"===atomName)&&(lastC=a),currentResidue.cp2=a):"C"===atomName&&(lastC=a)}}else if(extensions.stringStartsWith(line,"HETATM")){var symbol=trim(line.substring(76,78));0===symbol.length&&(symbol=trim(line.substring(12,16))),symbol.length>1&&(symbol=symbol.substring(0,1)+symbol.substring(1).toLowerCase());var het=new structures.Atom(symbol,parseFloat(line.substring(30,38))*multiplier,parseFloat(line.substring(38,46))*multiplier,parseFloat(line.substring(46,54))*multiplier);het.hetatm=!0;var residueName=trim(line.substring(17,20));"HOH"===residueName&&(het.isWater=!0),molecule.atoms.push(het),atomSerials[parseInt(trim(line.substring(6,11)))]=het}else if(extensions.stringStartsWith(line,"CONECT")){var oid=parseInt(trim(line.substring(6,11)));if(atomSerials[oid])for(var origin=atomSerials[oid],k=0;4>k;k++){var next=trim(line.substring(11+5*k,16+5*k));if(0!==next.length){var nid=parseInt(next);if(atomSerials[nid]){for(var a2=atomSerials[nid],found=!1,j=0,jj=molecule.bonds.length;jj>j;j++){var b=molecule.bonds[j];if(b.a1===origin&&b.a2===a2||b.a1===a2&&b.a2===origin){found=!0;break}}found||molecule.bonds.push(new structures.Bond(origin,a2))}}}}else if(extensions.stringStartsWith(line,"TER"))this.endChain(molecule,currentChain,lastC,resatoms),currentChain=[];else if(extensions.stringStartsWith(line,"ENDMDL"))break}if(this.endChain(molecule,currentChain,lastC,resatoms),0===molecule.bonds.size&&(new c.informatics.BondDeducer).deduceCovalentBonds(molecule,multiplier),this.deduceResidueBonds)for(var i=0,ii=resatoms.length;ii>i;i++)for(var max=m.min(ii,i+20),j=i+1;max>j;j++){var first=resatoms[i],second=resatoms[j];first.distance3D(second)<1.1*(ELEMENT[first.label].covalentRadius+ELEMENT[second.label].covalentRadius)&&molecule.bonds.push(new structures.Bond(first,second,1))}return molecule.atoms=molecule.atoms.concat(resatoms),this.calculateRibbonDistances&&this.calculateDistances(molecule,resatoms),molecule},_.endChain=function(molecule,chain,lastC,resatoms){if(chain.length>0){var last=chain[chain.length-1];last.cp1||(last.cp1=resatoms[resatoms.length-2]),last.cp2||(last.cp2=resatoms[resatoms.length-1]);for(var i=0;4>i;i++){var dummyEnd=new structures.Residue(-1);dummyEnd.cp1=lastC,dummyEnd.cp2=chain[chain.length-1].cp2,chain.push(dummyEnd)}molecule.chains.push(chain)}},_.calculateDistances=function(molecule,resatoms){for(var hetatm=[],i=0,ii=molecule.atoms.length;ii>i;i++){var a=molecule.atoms[i];a.hetatm&&(a.isWater||hetatm.push(a))}for(var i=0,ii=resatoms.length;ii>i;i++){var a=resatoms[i];if(a.closestDistance=Number.POSITIVE_INFINITY,0===hetatm.length)a.closestDistance=0;else for(var j=0,jj=hetatm.length;jj>j;j++)a.closestDistance=Math.min(a.closestDistance,a.distance3D(hetatm[j]))}};var interpreter=new io.PDBInterpreter;c.readPDB=function(content,multiplier){return interpreter.read(content,multiplier)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.ELEMENT,ChemDoodle.lib.jQuery.trim,Math),function(c,extensions,io,structures,q){"use strict";var SQZ_HASH={"@":0,A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,a:-1,b:-2,c:-3,d:-4,e:-5,f:-6,g:-7,h:-8,i:-9},DIF_HASH={"%":0,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,j:-1,k:-2,l:-3,m:-4,n:-5,o:-6,p:-7,q:-8,r:-9},DUP_HASH={S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,s:9};io.JCAMPInterpreter=function(){};var _=io.JCAMPInterpreter.prototype=new io._Interpreter;_.convertHZ2PPM=!1,_.read=function(content){this.isBreak=function(c){return void 0!==SQZ_HASH[c]||void 0!==DIF_HASH[c]||void 0!==DUP_HASH[c]||" "===c||"-"===c||"+"===c},this.getValue=function(decipher,lastDif){var first=decipher.charAt(0),rest=decipher.substring(1);return void 0!==SQZ_HASH[first]?parseFloat(SQZ_HASH[first]+rest):void 0!==DIF_HASH[first]?parseFloat(DIF_HASH[first]+rest)+lastDif:parseFloat(rest)};var spectrum=new structures.Spectrum;if(void 0===content||0===content.length)return spectrum;for(var xLast,xFirst,yFirst,nPoints,lines=content.split("\n"),sb=[],xFactor=1,yFactor=1,observeFrequency=1,deltaX=-1,shiftOffsetNum=-1,shiftOffsetVal=-1,recordMeta=!0,divideByFrequency=!1,i=0,ii=lines.length;ii>i;i++){var use=lines[i].trim(),index=use.indexOf("$$");if(-1!==index&&(use=use.substring(0,index)),0!==sb.length&&extensions.stringStartsWith(lines[i],"##")){var currentRecord=sb.join("");if(recordMeta&&currentRecord.length<100&&spectrum.metadata.push(currentRecord),sb=[use],extensions.stringStartsWith(currentRecord,"##TITLE="))spectrum.title=currentRecord.substring(8).trim();else if(extensions.stringStartsWith(currentRecord,"##XUNITS="))spectrum.xUnit=currentRecord.substring(9).trim(),this.convertHZ2PPM&&"HZ"===spectrum.xUnit.toUpperCase()&&(spectrum.xUnit="PPM",divideByFrequency=!0);else if(extensions.stringStartsWith(currentRecord,"##YUNITS="))spectrum.yUnit=currentRecord.substring(9).trim();else if(extensions.stringStartsWith(currentRecord,"##XYPAIRS="));else if(extensions.stringStartsWith(currentRecord,"##FIRSTX="))xFirst=parseFloat(currentRecord.substring(9).trim());else if(extensions.stringStartsWith(currentRecord,"##LASTX="))xLast=parseFloat(currentRecord.substring(8).trim());else if(extensions.stringStartsWith(currentRecord,"##FIRSTY="))yFirst=parseFloat(currentRecord.substring(9).trim());else if(extensions.stringStartsWith(currentRecord,"##NPOINTS="))nPoints=parseFloat(currentRecord.substring(10).trim());else if(extensions.stringStartsWith(currentRecord,"##XFACTOR="))xFactor=parseFloat(currentRecord.substring(10).trim());else if(extensions.stringStartsWith(currentRecord,"##YFACTOR="))yFactor=parseFloat(currentRecord.substring(10).trim());else if(extensions.stringStartsWith(currentRecord,"##DELTAX="))deltaX=parseFloat(currentRecord.substring(9).trim());else if(extensions.stringStartsWith(currentRecord,"##.OBSERVE FREQUENCY="))this.convertHZ2PPM&&(observeFrequency=parseFloat(currentRecord.substring(21).trim()));else if(extensions.stringStartsWith(currentRecord,"##.SHIFT REFERENCE=")){if(this.convertHZ2PPM){var parts=currentRecord.substring(19).split(",");shiftOffsetNum=parseInt(parts[2].trim()),shiftOffsetVal=parseFloat(parts[3].trim())}}else if(extensions.stringStartsWith(currentRecord,"##XYDATA=")){divideByFrequency||(observeFrequency=1),recordMeta=!1;var lastWasDif=!1,innerLines=currentRecord.split("\n"),abscissaSpacing=(xLast-xFirst)/(nPoints-1);if(-1!==deltaX)for(var j=1,jj=innerLines.length;jj>j;j++)if("|"===innerLines[j].charAt(0)){abscissaSpacing=deltaX;break}for(var lastOrdinate,lastX=xFirst-abscissaSpacing,lastY=yFirst,lastDif=0,j=1,jj=innerLines.length;jj>j;j++){for(var data=[],read=innerLines[j].trim(),sb=[],isCompressedDiscontinuous=!1,k=0,kk=read.length;kk>k;k++)this.isBreak(read.charAt(k))?(sb.length>0&&(1!==sb.length||" "!==sb[0])&&data.push(sb.join("")),sb=[read.charAt(k)]):"|"===read.charAt(k)?isCompressedDiscontinuous=!0:sb.push(read.charAt(k));data.push(sb.join("")),lastX=parseFloat(data[0])*xFactor-abscissaSpacing;for(var k=1,kk=data.length;kk>k;k++){var decipher=data[k];if(void 0!==DUP_HASH[decipher.charAt(0)])for(var dup=parseInt(DUP_HASH[decipher.charAt(0)]+decipher.substring(1))-1,l=0;dup>l;l++)lastX+=abscissaSpacing,lastDif=this.getValue(lastOrdinate,lastDif),lastY=lastDif*yFactor,count++,spectrum.data[spectrum.data.length-1]=new structures.Point(lastX/observeFrequency,lastY);else void 0!==SQZ_HASH[decipher.charAt(0)]&&lastWasDif?(lastY=this.getValue(decipher,lastDif)*yFactor,isCompressedDiscontinuous&&(lastX+=abscissaSpacing,spectrum.data.push(new structures.Point(lastX/observeFrequency,lastY)))):(lastWasDif=void 0!==DIF_HASH[decipher.charAt(0)],lastOrdinate=decipher,lastX+=abscissaSpacing,lastDif=this.getValue(decipher,lastDif),lastY=lastDif*yFactor,count++,spectrum.data.push(new structures.Point(lastX/observeFrequency,lastY)))}}if(-1!==shiftOffsetNum)for(var dif=shiftOffsetVal-spectrum.data[shiftOffsetNum-1].x,i=0,ii=spectrum.data.length;ii>i;i++)spectrum.data[i].x+=dif}else if(extensions.stringStartsWith(currentRecord,"##PEAK TABLE=")){recordMeta=!1,spectrum.continuous=!1;for(var innerLines=currentRecord.split("\n"),count=0,reg=/[\s,]+/,j=1,jj=innerLines.length;jj>j;j++){var items=innerLines[j].split(reg);count+=items.length/2;for(var k=0,kk=items.length;kk>k+1;k+=2)spectrum.data.push(new structures.Point(parseFloat(items[k].trim()),parseFloat(items[k+1].trim())))}}else if(extensions.stringStartsWith(currentRecord,"##ATOMLIST=")){spectrum.molecule=new structures.Molecule;for(var innerLines=currentRecord.split("\n"),reg=/[\s]+/,j=1,jj=innerLines.length;jj>j;j++){var items=innerLines[j].split(reg);spectrum.molecule.atoms.push(new structures.Atom(items[1]))}}else if(extensions.stringStartsWith(currentRecord,"##BONDLIST="))for(var innerLines=currentRecord.split("\n"),reg=/[\s]+/,j=1,jj=innerLines.length;jj>j;j++){var items=innerLines[j].split(reg),order=1;"D"===items[2]?order=2:"T"===items[2]&&(order=3),spectrum.molecule.bonds.push(new structures.Bond(spectrum.molecule.atoms[parseInt(items[0])-1],spectrum.molecule.atoms[parseInt(items[1])-1],order))}else if(spectrum.molecule&&extensions.stringStartsWith(currentRecord,"##XY_RASTER=")){for(var innerLines=currentRecord.split("\n"),reg=/[\s]+/,j=1,jj=innerLines.length;jj>j;j++){var items=innerLines[j].split(reg),a=spectrum.molecule.atoms[parseInt(items[0])-1];a.x=parseInt(items[1]),a.y=parseInt(items[2]),4==items.length&&(a.z=parseInt(items[3]))}spectrum.molecule.scaleToAverageBondLength(20)}else if(extensions.stringStartsWith(currentRecord,"##PEAK ASSIGNMENTS=")){var innerLines=currentRecord.split("\n"),reg=/[\s,()<>]+/;spectrum.assignments=[];for(var j=1,jj=innerLines.length;jj>j;j++){for(var items=innerLines[j].split(reg),x=parseFloat(items[1]),y=parseFloat(items[2]),a=spectrum.molecule.atoms[parseInt(items[3])-1],used=!1,k=0,kk=spectrum.assignments.length;kk>k;k++){var assign=spectrum.assignments[k];if(assign.x===x){assign.as.push(a),a.assigned=assign,used=!0;break}}if(!used){var assign={x:x,y:y,as:[a]};a.assigned=assign,spectrum.assignments.push(assign)}}}}else{var trimmed=use.trim();0!==sb.length&&0!==trimmed.length&&sb.push("\n"),sb.push(trimmed)}}return spectrum.setup(),spectrum},_.makeStructureSpectrumSet=function(id,content){this.convertHZ2PPM=!0;var spectrum=this.read(content),mcanvas=new c.ViewerCanvas(id+"_molecule",200,200);mcanvas.specs.atoms_displayTerminalCarbonLabels_2D=!0,mcanvas.specs.atoms_displayImplicitHydrogens_2D=!0,mcanvas.mouseout=function(e){if(0!==this.molecules.length){for(var i=0,ii=this.molecules[0].atoms.length;ii>i;i++)this.molecules[0].atoms[i].isHover=!1;spectrum.hovered=void 0,this.repaint(),scanvas.repaint()}},mcanvas.touchend=mcanvas.mouseout,mcanvas.mousemove=function(e){if(0!==this.molecules.length){for(var closest=void 0,i=0,ii=this.molecules[0].atoms.length;ii>i;i++){var a=this.molecules[0].atoms[i];a.isHover=!1,a.assigned&&(void 0===closest||e.p.distance(a)<e.p.distance(closest))&&(closest=a)}if(spectrum.hovered=void 0,e.p.distance(closest)<20){for(var i=0,ii=closest.assigned.as.length;ii>i;i++)closest.assigned.as[i].isHover=!0;scanvas.spectrum.hovered=closest.assigned}this.repaint(),scanvas.repaint()}},mcanvas.touchmove=mcanvas.mousemove,mcanvas.drawChildExtras=function(ctx){if(0!==this.molecules.length)for(var i=0,ii=this.molecules[0].atoms.length;ii>i;i++)this.molecules[0].atoms[i].drawDecorations(ctx)};var scanvas=new c.ObserverCanvas(id+"_spectrum",400,200);return scanvas.specs.plots_showYAxis=!1,scanvas.specs.plots_flipXAxis=!0,scanvas.mouseout=function(e){if(this.spectrum&&this.spectrum.assignments){for(var i=0,ii=mcanvas.molecules[0].atoms.length;ii>i;i++)mcanvas.molecules[0].atoms[i].isHover=!1;this.spectrum.hovered=void 0,mcanvas.repaint(),this.repaint()}},scanvas.touchend=scanvas.mouseout,scanvas.mousemove=function(e){if(this.spectrum&&this.spectrum.assignments){for(var closest=void 0,i=0,ii=mcanvas.molecules[0].atoms.length;ii>i;i++)mcanvas.molecules[0].atoms[i].isHover=!1;this.spectrum.hovered=void 0;for(var i=0,ii=this.spectrum.assignments.length;ii>i;i++){var a=this.spectrum.assignments[i];(void 0===closest||Math.abs(this.spectrum.getTransformedX(a.x,this.specs,this.spectrum.memory.width,this.spectrum.memory.offsetLeft)-e.p.x)<Math.abs(this.spectrum.getTransformedX(closest.x,this.specs,this.spectrum.memory.width,this.spectrum.memory.offsetLeft)-e.p.x))&&(closest=a)}if(Math.abs(this.spectrum.getTransformedX(closest.x,this.specs,this.spectrum.memory.width,this.spectrum.memory.offsetLeft)-e.p.x)<20){for(var i=0,ii=closest.as.length;ii>i;i++)closest.as[i].isHover=!0;this.spectrum.hovered=closest}mcanvas.repaint(),this.repaint()}},scanvas.touchmove=scanvas.mousemove,scanvas.drawChildExtras=function(ctx){if(this.spectrum&&this.spectrum.hovered){var x=this.spectrum.getTransformedX(this.spectrum.hovered.x,scanvas.specs,this.spectrum.memory.width,this.spectrum.memory.offsetLeft);x>=this.spectrum.memory.offsetLeft&&x<this.spectrum.memory.width&&(ctx.save(),
ctx.strokeStyle="#885110",ctx.lineWidth=3,ctx.beginPath(),ctx.moveTo(x,this.spectrum.memory.height-this.spectrum.memory.offsetBottom),ctx.lineTo(x,this.spectrum.getTransformedY(this.spectrum.hovered.y,scanvas.specs,this.spectrum.memory.height,this.spectrum.memory.offsetBottom,this.spectrum.memory.offsetTop)),ctx.stroke(),ctx.restore())}},spectrum&&(scanvas.loadSpectrum(spectrum),spectrum.molecule&&mcanvas.loadMolecule(spectrum.molecule)),[mcanvas,scanvas]};var interpreter=new io.JCAMPInterpreter;interpreter.convertHZ2PPM=!0,c.readJCAMP=function(content){return interpreter.read(content)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery),function(c,io,structures,d2,d3,JSON){"use strict";io.JSONInterpreter=function(){};var _=io.JSONInterpreter.prototype;_.contentTo=function(mols,shapes){for(var count1=0,count2=0,i=0,ii=mols.length;ii>i;i++){for(var mol=mols[i],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].tmpid="a"+count1++;for(var j=0,jj=mol.bonds.length;jj>j;j++)mol.bonds[j].tmpid="b"+count2++}count1=0;for(var i=0,ii=shapes.length;ii>i;i++)shapes[i].tmpid="s"+count1++;var dummy={};if(mols&&mols.length>0){dummy.m=[];for(var i=0,ii=mols.length;ii>i;i++)dummy.m.push(this.molTo(mols[i]))}if(shapes&&shapes.length>0){dummy.s=[];for(var i=0,ii=shapes.length;ii>i;i++)dummy.s.push(this.shapeTo(shapes[i]))}for(var i=0,ii=mols.length;ii>i;i++){for(var mol=mols[i],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].tmpid=void 0;for(var j=0,jj=mol.bonds.length;jj>j;j++)mol.bonds[j].tmpid=void 0}for(var i=0,ii=shapes.length;ii>i;i++)shapes[i].tmpid=void 0;return dummy},_.contentFrom=function(dummy){var obj={molecules:[],shapes:[]};if(dummy.m)for(var i=0,ii=dummy.m.length;ii>i;i++)obj.molecules.push(this.molFrom(dummy.m[i]));if(dummy.s)for(var i=0,ii=dummy.s.length;ii>i;i++)obj.shapes.push(this.shapeFrom(dummy.s[i],obj.molecules));for(var i=0,ii=obj.molecules.length;ii>i;i++){for(var mol=obj.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].tmpid=void 0;for(var j=0,jj=mol.bonds.length;jj>j;j++)mol.bonds[j].tmpid=void 0}for(var i=0,ii=obj.shapes.length;ii>i;i++)obj.shapes[i].tmpid=void 0;return obj},_.queryTo=function(query){var q={},appendProperty=function(q,p,name,isRange){p&&(q[name]={v:isRange?query.outputRange(p.v):p.v,n:p.not})};return query.type===structures.Query.TYPE_ATOM?(appendProperty(q,query.elements,"as"),appendProperty(q,query.chirality,"@"),appendProperty(q,query.aromatic,"A"),appendProperty(q,query.charge,"C",!0),appendProperty(q,query.hydrogens,"H",!0),appendProperty(q,query.ringCount,"R",!0),appendProperty(q,query.saturation,"S"),appendProperty(q,query.connectivity,"X",!0),appendProperty(q,query.connectivityNoH,"x",!0)):(appendProperty(q,query.orders,"bs"),appendProperty(q,query.stereo,"@"),appendProperty(q,query.aromatic,"A"),appendProperty(q,query.ringCount,"R",!0)),q},_.molTo=function(mol){for(var dummy={a:[]},i=0,ii=mol.atoms.length;ii>i;i++){var a=mol.atoms[i],da={x:a.x,y:a.y};a.tmpid&&(da.i=a.tmpid),"C"!==a.label&&(da.l=a.label),0!==a.z&&(da.z=a.z),0!==a.charge&&(da.c=a.charge),-1!==a.mass&&(da.m=a.mass),0!==a.numRadical&&(da.r=a.numRadical),0!==a.numLonePair&&(da.p=a.numLonePair),a.query&&(da.q=this.queryTo(a.query)),dummy.a.push(da)}if(mol.bonds.length>0){dummy.b=[];for(var i=0,ii=mol.bonds.length;ii>i;i++){var b=mol.bonds[i],db={b:mol.atoms.indexOf(b.a1),e:mol.atoms.indexOf(b.a2)};b.tmpid&&(db.i=b.tmpid),1!==b.bondOrder&&(db.o=b.bondOrder),b.stereo!==structures.Bond.STEREO_NONE&&(db.s=b.stereo),b.query&&(db.q=this.queryTo(b.query)),dummy.b.push(db)}}return dummy},_.queryFrom=function(json){var query=new structures.Query(json.as?structures.Query.TYPE_ATOM:structures.Query.TYPE_BOND),setupProperty=function(query,json,name,isRange){json&&(query[name]={},query[name].v=isRange?query.parseRange(json.v):json.v,json.n&&(query[name].not=!0))};return query.type===structures.Query.TYPE_ATOM?(setupProperty(query,json.as,"elements"),setupProperty(query,json["@"],"chirality"),setupProperty(query,json.A,"aromatic"),setupProperty(query,json.C,"charge",!0),setupProperty(query,json.H,"hydrogens",!0),setupProperty(query,json.R,"ringCount",!0),setupProperty(query,json.S,"saturation"),setupProperty(query,json.X,"connectivity",!0),setupProperty(query,json.x,"connectivityNoH",!0)):(setupProperty(query,json.bs,"orders"),setupProperty(query,json["@"],"stereo"),setupProperty(query,json.A,"aromatic"),setupProperty(query,json.R,"ringCount",!0)),query},_.molFrom=function(json){for(var molecule=new structures.Molecule,i=0,ii=json.a.length;ii>i;i++){var c=json.a[i],a=new structures.Atom(c.l?c.l:"C",c.x,c.y);c.i&&(a.tmpid=c.i),c.z&&(a.z=c.z),c.c&&(a.charge=c.c),c.m&&(a.mass=c.m),c.r&&(a.numRadical=c.r),c.p&&(a.numLonePair=c.p),c.q&&(a.query=this.queryFrom(c.q)),void 0!==c.p_h&&(a.hetatm=c.p_h),void 0!==c.p_w&&(a.isWater=c.p_w),void 0!==c.p_d&&(a.closestDistance=c.p_d),molecule.atoms.push(a)}if(json.b)for(var i=0,ii=json.b.length;ii>i;i++){var c=json.b[i],b=new structures.Bond(molecule.atoms[c.b],molecule.atoms[c.e],void 0===c.o?1:c.o);c.i&&(b.tmpid=c.i),c.s&&(b.stereo=c.s),c.q&&(b.query=this.queryFrom(c.q)),molecule.bonds.push(b)}return molecule},_.shapeTo=function(shape){var dummy={};if(shape.tmpid&&(dummy.i=shape.tmpid),shape instanceof d2.Line)dummy.t="Line",dummy.x1=shape.p1.x,dummy.y1=shape.p1.y,dummy.x2=shape.p2.x,dummy.y2=shape.p2.y,dummy.a=shape.arrowType;else if(shape instanceof d2.Pusher)dummy.t="Pusher",dummy.o1=shape.o1.tmpid,dummy.o2=shape.o2.tmpid,1!==shape.numElectron&&(dummy.e=shape.numElectron);else if(shape instanceof d2.Bracket)dummy.t="Bracket",dummy.x1=shape.p1.x,dummy.y1=shape.p1.y,dummy.x2=shape.p2.x,dummy.y2=shape.p2.y,0!==shape.charge&&(dummy.c=shape.charge),0!==shape.mult&&(dummy.m=shape.mult),0!==shape.repeat&&(dummy.r=shape.repeat);else if(shape instanceof d3.Distance)dummy.t="Distance",dummy.a1=shape.a1.tmpid,dummy.a2=shape.a2.tmpid,shape.node&&(dummy.n=shape.node,dummy.o=shape.offset);else if(shape instanceof d3.Angle)dummy.t="Angle",dummy.a1=shape.a1.tmpid,dummy.a2=shape.a2.tmpid,dummy.a3=shape.a3.tmpid;else if(shape instanceof d3.Torsion)dummy.t="Torsion",dummy.a1=shape.a1.tmpid,dummy.a2=shape.a2.tmpid,dummy.a3=shape.a3.tmpid,dummy.a4=shape.a4.tmpid;else if(shape instanceof d3.UnitCell){dummy.t="UnitCell";for(var p in shape.unitCell)dummy[p]=shape.unitCell[p]}return dummy},_.shapeFrom=function(dummy,mols){var shape;if("Line"===dummy.t)shape=new d2.Line(new structures.Point(dummy.x1,dummy.y1),new structures.Point(dummy.x2,dummy.y2)),shape.arrowType=dummy.a;else if("Pusher"===dummy.t){for(var o1,o2,i=0,ii=mols.length;ii>i;i++){for(var mol=mols[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.tmpid===dummy.o1?o1=a:a.tmpid===dummy.o2&&(o2=a)}for(var j=0,jj=mol.bonds.length;jj>j;j++){var b=mol.bonds[j];b.tmpid===dummy.o1?o1=b:b.tmpid===dummy.o2&&(o2=b)}}shape=new d2.Pusher(o1,o2),dummy.e&&(shape.numElectron=dummy.e)}else if("Bracket"===dummy.t)shape=new d2.Bracket(new structures.Point(dummy.x1,dummy.y1),new structures.Point(dummy.x2,dummy.y2)),void 0!==dummy.c&&(shape.charge=dummy.c),void 0!==dummy.m&&(shape.mult=dummy.m),void 0!==dummy.r&&(shape.repeat=dummy.r);else if("Distance"===dummy.t){for(var a1,a2,i=0,ii=mols.length;ii>i;i++)for(var mol=mols[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.tmpid===dummy.a1?a1=a:a.tmpid===dummy.a2&&(a2=a)}shape=new d3.Distance(a1,a2,dummy.n,dummy.o)}else if("Angle"===dummy.t){for(var a1,a2,a3,i=0,ii=mols.length;ii>i;i++)for(var mol=mols[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.tmpid===dummy.a1?a1=a:a.tmpid===dummy.a2?a2=a:a.tmpid===dummy.a3&&(a3=a)}shape=new d3.Angle(a1,a2,a3)}else if("Torsion"===dummy.t){for(var a1,a2,a3,a4,i=0,ii=mols.length;ii>i;i++)for(var mol=mols[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.tmpid===dummy.a1?a1=a:a.tmpid===dummy.a2?a2=a:a.tmpid===dummy.a3?a3=a:a.tmpid===dummy.a4&&(a4=a)}shape=new d3.Torsion(a1,a2,a3,a4)}else if("UnitCell"===dummy.t){var unitCellVectors={};for(var p in dummy)unitCellVectors[p]=dummy[p];shape=new d3.UnitCell(unitCellVectors)}return shape},_.pdbFrom=function(content){var mol=this.molFrom(content.mol);return mol.findRings=!1,mol.fromJSON=!0,mol.chains=this.chainsFrom(content.ribbons),mol},_.chainsFrom=function(content){for(var chains=[],i=0,ii=content.cs.length;ii>i;i++){for(var chain=content.cs[i],c=[],j=0,jj=chain.length;jj>j;j++){var convert=chain[j],r=new structures.Residue;r.name=convert.n,r.cp1=new structures.Atom("",convert.x1,convert.y1,convert.z1),r.cp2=new structures.Atom("",convert.x2,convert.y2,convert.z2),convert.x3&&(r.cp3=new structures.Atom("",convert.x3,convert.y3,convert.z3),r.cp4=new structures.Atom("",convert.x4,convert.y4,convert.z4),r.cp5=new structures.Atom("",convert.x5,convert.y5,convert.z5)),r.helix=convert.h,r.sheet=convert.s,r.arrow=j>0&&chain[j-1].a,c.push(r)}chains.push(c)}return chains};var interpreter=new io.JSONInterpreter;c.readJSON=function(string){var obj;try{obj=JSON.parse(string)}catch(e){return}return obj?obj.m||obj.s?interpreter.contentFrom(obj):obj=obj.a?{molecules:[interpreter.molFrom(obj)],shapes:[]}:{molecules:[],shapes:[]}:void 0},c.writeJSON=function(mols,shapes){return JSON.stringify(interpreter.contentTo(mols,shapes))}}(ChemDoodle,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.structures.d3,JSON),function(c,io,structures){"use strict";io.RXNInterpreter=function(){};var _=io.RXNInterpreter.prototype=new io._Interpreter;_.read=function(content,multiplier){multiplier||(multiplier=c.default_bondLength_2D);var line,molecules=[];if(content){for(var contentTokens=content.split("$MOL\n"),headerTokens=contentTokens[0].split("\n"),counts=headerTokens[4],numReactants=parseInt(counts.substring(0,3)),numProducts=parseInt(counts.substring(3,6)),currentMolecule=1,start=0,i=0,ii=numReactants+numProducts;ii>i;i++){molecules[i]=c.readMOL(contentTokens[currentMolecule],multiplier);var b=molecules[i].getBounds(),width=b.maxX-b.minX;start-=width+40,currentMolecule++}for(var i=0,ii=numReactants;ii>i;i++){for(var b=molecules[i].getBounds(),width=b.maxX-b.minX,center=molecules[i].getCenter(),j=0,jj=molecules[i].atoms.length;jj>j;j++){var a=molecules[i].atoms[j];a.x+=start+width/2-center.x,a.y-=center.y}start+=width+40}line=new structures.d2.Line(new structures.Point(start,0),new structures.Point(start+40,0)),start+=80;for(var i=numReactants,ii=numReactants+numProducts;ii>i;i++){for(var b=molecules[i].getBounds(),width=b.maxX-b.minX,center=molecules[i].getCenter(),j=0;j<molecules[i].atoms.length;j++){var a=molecules[i].atoms[j];a.x+=start+width/2-center.x,a.y-=center.y}start+=width+40}}else molecules.push(new structures.Molecule),line=new structures.d2.Line(new structures.Point(-20,0),new structures.Point(20,0));return line.arrowType=structures.d2.Line.ARROW_SYNTHETIC,{molecules:molecules,shapes:[line]}},_.write=function(mols,shapes){var molecules=[[],[]],ps=void 0;if(mols&&shapes){for(i=0,ii=shapes.length;ii>i;i++)if(shapes[i]instanceof structures.d2.Line){ps=shapes[i].getPoints();break}if(!ps)return"";for(var i=0,ii=mols.length;ii>i;i++){var center=mols[i].getCenter();center.x<ps[1].x?molecules[0].push(mols[i]):molecules[1].push(mols[i])}var sb=[];sb.push("$RXN\nReaction from ChemDoodle Web Components\n\nhttp://www.ichemlabs.com\n"),sb.push(this.fit(molecules[0].length.toString(),3)),sb.push(this.fit(molecules[1].length.toString(),3)),sb.push("\n");for(var i=0;2>i;i++)for(var j=0,jj=molecules[i].length;jj>j;j++)sb.push("$MOL\n"),sb.push(c.writeMOL(molecules[i][j])),sb.push("\n");return sb.join("")}};var interpreter=new io.RXNInterpreter;c.readRXN=function(content,multiplier){return interpreter.read(content,multiplier)},c.writeRXN=function(mols,shapes){return interpreter.write(mols,shapes)}}(ChemDoodle,ChemDoodle.io,ChemDoodle.structures),function(c,ELEMENT,SYMBOLS,io,structures,trim){"use strict";io.XYZInterpreter=function(){};var _=io.XYZInterpreter.prototype=new io._Interpreter;_.deduceCovalentBonds=!0,_.read=function(content){var molecule=new structures.Molecule;if(!content)return molecule;for(var lines=content.split("\n"),numAtoms=parseInt(trim(lines[0])),i=0;numAtoms>i;i++){var line=lines[i+2],tokens=line.split(/\s+/g);molecule.atoms[i]=new structures.Atom(isNaN(tokens[0])?tokens[0]:SYMBOLS[parseInt(tokens[0])-1],parseFloat(tokens[1]),parseFloat(tokens[2]),parseFloat(tokens[3]))}return this.deduceCovalentBonds&&(new c.informatics.BondDeducer).deduceCovalentBonds(molecule,1),molecule};var interpreter=new io.XYZInterpreter;c.readXYZ=function(content){return interpreter.read(content)}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.SYMBOLS,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery.trim),ChemDoodle.monitor=function(featureDetection,q,document){"use strict";var m={};return m.CANVAS_DRAGGING=void 0,m.CANVAS_OVER=void 0,m.ALT=!1,m.SHIFT=!1,m.META=!1,featureDetection.supports_touch()||q(document).ready(function(){q(document).mousemove(function(e){m.CANVAS_DRAGGING&&m.CANVAS_DRAGGING.drag&&(m.CANVAS_DRAGGING.prehandleEvent(e),m.CANVAS_DRAGGING.drag(e))}),q(document).mouseup(function(e){m.CANVAS_DRAGGING&&m.CANVAS_DRAGGING!==m.CANVAS_OVER&&m.CANVAS_DRAGGING.mouseup&&(m.CANVAS_DRAGGING.prehandleEvent(e),m.CANVAS_DRAGGING.mouseup(e)),m.CANVAS_DRAGGING=void 0}),q(document).keydown(function(e){m.SHIFT=e.shiftKey,m.ALT=e.altKey,m.META=e.metaKey||e.ctrlKey;var affecting=m.CANVAS_OVER;m.CANVAS_DRAGGING&&(affecting=m.CANVAS_DRAGGING),affecting&&affecting.keydown&&(affecting.prehandleEvent(e),affecting.keydown(e))}),q(document).keypress(function(e){var affecting=m.CANVAS_OVER;m.CANVAS_DRAGGING&&(affecting=m.CANVAS_DRAGGING),affecting&&affecting.keypress&&(affecting.prehandleEvent(e),affecting.keypress(e))}),q(document).keyup(function(e){m.SHIFT=e.shiftKey,m.ALT=e.altKey,m.META=e.metaKey||e.ctrlKey;var affecting=m.CANVAS_OVER;m.CANVAS_DRAGGING&&(affecting=m.CANVAS_DRAGGING),affecting&&affecting.keyup&&(affecting.prehandleEvent(e),affecting.keyup(e))})}),m}(ChemDoodle.featureDetection,ChemDoodle.lib.jQuery,document),function(c,featureDetection,math,monitor,structures,q,m,document,window,userAgent){"use strict";c._Canvas=function(){};var _=c._Canvas.prototype;_.molecules=void 0,_.shapes=void 0,_.emptyMessage=void 0,_.image=void 0,_.repaint=function(){if(!this.test){var canvas=document.getElementById(this.id);if(canvas.getContext){var ctx=canvas.getContext("2d");if(1!==this.pixelRatio&&canvas.width===this.width&&(canvas.width=this.width*this.pixelRatio,canvas.height=this.height*this.pixelRatio,ctx.scale(this.pixelRatio,this.pixelRatio)),this.image?ctx.drawImage(this.image,0,0):(this.specs.backgroundColor&&this.bgCache!==canvas.style.backgroundColor&&(canvas.style.backgroundColor=this.specs.backgroundColor,this.bgCache=canvas.style.backgroundColor),ctx.fillStyle=this.specs.backgroundColor,ctx.fillRect(0,0,this.width,this.height)),this.innerRepaint)this.innerRepaint(ctx);else if(0!==this.molecules.length||0!==this.shapes.length){ctx.save(),ctx.translate(this.width/2,this.height/2),ctx.rotate(this.specs.rotateAngle),ctx.scale(this.specs.scale,this.specs.scale),ctx.translate(-this.width/2,-this.height/2);for(var i=0,ii=this.molecules.length;ii>i;i++)this.molecules[i].check(!0),this.molecules[i].draw(ctx,this.specs);for(var i=0,ii=this.shapes.length;ii>i;i++)this.shapes[i].draw(ctx,this.specs);ctx.restore()}else this.emptyMessage&&(ctx.fillStyle="#737683",ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="18px Helvetica, Verdana, Arial, Sans-serif",ctx.fillText(this.emptyMessage,this.width/2,this.height/2));this.drawChildExtras&&this.drawChildExtras(ctx)}}},_.resize=function(w,h){var cap=q("#"+this.id);if(cap.attr({width:w,height:h}),cap.css("width",w),cap.css("height",h),this.width=w,this.height=h,c._Canvas3D&&this instanceof c._Canvas3D){var wu=w,hu=h;1!==this.pixelRatio&&(wu*=this.pixelRatio,hu*=this.pixelRatio,this.gl.canvas.width=wu,this.gl.canvas.height=hu),this.gl.viewport(0,0,wu,hu),this.afterLoadContent()}else if(this.molecules.length>0){this.center();for(var i=0,ii=this.molecules.length;ii>i;i++)this.molecules[i].check()}this.repaint()},_.setBackgroundImage=function(path){this.image=new Image;var me=this;this.image.onload=function(){me.repaint()},this.image.src=path},_.loadMolecule=function(molecule){this.clear(),this.molecules.push(molecule),this.center(),c._Canvas3D&&this instanceof c._Canvas3D||molecule.check(),this.afterLoadContent&&this.afterLoadContent(),this.repaint()},_.loadContent=function(mols,shapes){if(this.molecules=mols?mols:[],this.shapes=shapes?shapes:[],this.center(),!(c._Canvas3D&&this instanceof c._Canvas3D))for(var i=0,ii=this.molecules.length;ii>i;i++)this.molecules[i].check();this.afterLoadContent&&this.afterLoadContent(),this.repaint()},_.addMolecule=function(molecule){this.molecules.push(molecule),c._Canvas3D&&this instanceof c._Canvas3D||molecule.check(),this.repaint()},_.removeMolecule=function(mol){this.molecules=q.grep(this.molecules,function(value){return value!==mol}),this.repaint()},_.getMolecule=function(){return this.molecules.length>0?this.molecules[0]:void 0},_.getMolecules=function(){return this.molecules},_.addShape=function(shape){this.shapes.push(shape),this.repaint()},_.removeShape=function(shape){this.shapes=q.grep(this.shapes,function(value){return value!==shape}),this.repaint()},_.getShapes=function(){return this.shapes},_.clear=function(){this.molecules=[],this.shapes=[],this.specs.scale=1,this.repaint()},_.center=function(){for(var bounds=this.getContentBounds(),center=new structures.Point((this.width-bounds.minX-bounds.maxX)/2,(this.height-bounds.minY-bounds.maxY)/2),i=0,ii=this.molecules.length;ii>i;i++)for(var mol=this.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].add(center);for(var i=0,ii=this.shapes.length;ii>i;i++)for(var sps=this.shapes[i].getPoints(),j=0,jj=sps.length;jj>j;j++)sps[j].add(center);this.specs.scale=1;var difX=bounds.maxX-bounds.minX,difY=bounds.maxY-bounds.minY;(difX>this.width||difY>this.height)&&(this.specs.scale=.85*m.min(this.width/difX,this.height/difY))},_.bondExists=function(a1,a2){for(var i=0,ii=this.molecules.length;ii>i;i++)for(var mol=this.molecules[i],j=0,jj=mol.bonds.length;jj>j;j++){var b=mol.bonds[j];if(b.contains(a1)&&b.contains(a2))return!0}return!1},_.getBond=function(a1,a2){for(var i=0,ii=this.molecules.length;ii>i;i++)for(var mol=this.molecules[i],j=0,jj=mol.bonds.length;jj>j;j++){var b=mol.bonds[j];if(b.contains(a1)&&b.contains(a2))return b}},_.getMoleculeByAtom=function(a){for(var i=0,ii=this.molecules.length;ii>i;i++){var mol=this.molecules[i];if(-1!==mol.atoms.indexOf(a))return mol}},_.getAllAtoms=function(){for(var as=[],i=0,ii=this.molecules.length;ii>i;i++)as=as.concat(this.molecules[i].atoms);return as},_.getAllPoints=function(){for(var ps=[],i=0,ii=this.molecules.length;ii>i;i++)ps=ps.concat(this.molecules[i].atoms);for(var i=0,ii=this.shapes.length;ii>i;i++)ps=ps.concat(this.shapes[i].getPoints());return ps},_.getContentBounds=function(){for(var bounds=new math.Bounds,i=0,ii=this.molecules.length;ii>i;i++)bounds.expand(this.molecules[i].getBounds());for(var i=0,ii=this.shapes.length;ii>i;i++)bounds.expand(this.shapes[i].getBounds());return bounds},_.create=function(id,width,height){if(this.id=id,this.width=width,this.height=height,this.molecules=[],this.shapes=[],document.getElementById(id)){var canvas=q("#"+id);width?canvas.attr("width",width):this.width=canvas.attr("width"),height?canvas.attr("height",height):this.height=canvas.attr("height"),canvas.attr("class","ChemDoodleWebComponent")}else{if(!c.featureDetection.supports_canvas_text()&&-1!=userAgent.indexOf("MSIE"))return void document.writeln('<div style="border: 1px solid black;" width="'+width+'" height="'+height+'">Please install <a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>, then restart Internet Explorer.</div>');document.writeln('<canvas class="ChemDoodleWebComponent" id="'+id+'" width="'+width+'" height="'+height+'" alt="ChemDoodle Web Component">This browser does not support HTML5/Canvas.</canvas>')}var jqCapsule=q("#"+id);jqCapsule.css("width",this.width),jqCapsule.css("height",this.height),this.pixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,this.specs=new structures.VisualSpecifications;var me=this;featureDetection.supports_touch()?(jqCapsule.bind("touchstart",function(e){var time=(new Date).getTime();if(!featureDetection.supports_gesture()&&2===e.originalEvent.touches.length){var ts=e.originalEvent.touches,p1=new structures.Point(ts[0].pageX,ts[0].pageY),p2=new structures.Point(ts[1].pageX,ts[1].pageY);me.implementedGestureDist=p1.distance(p2),me.implementedGestureAngle=p1.angle(p2),me.gesturestart&&(me.prehandleEvent(e),me.gesturestart(e))}me.lastTouch&&1===e.originalEvent.touches.length&&time-me.lastTouch<500?me.dbltap?(me.prehandleEvent(e),me.dbltap(e)):me.dblclick?(me.prehandleEvent(e),me.dblclick(e)):me.touchstart?(me.prehandleEvent(e),me.touchstart(e)):me.mousedown&&(me.prehandleEvent(e),me.mousedown(e)):me.touchstart?(me.prehandleEvent(e),me.touchstart(e),this.hold&&clearTimeout(this.hold),this.touchhold&&(this.hold=setTimeout(function(){me.touchhold(e)},1e3))):me.mousedown&&(me.prehandleEvent(e),me.mousedown(e)),me.lastTouch=time}),jqCapsule.bind("touchmove",function(e){if(this.hold&&(clearTimeout(this.hold),this.hold=void 0),!featureDetection.supports_gesture()&&2===e.originalEvent.touches.length&&me.gesturechange){var ts=e.originalEvent.touches,p1=new structures.Point(ts[0].pageX,ts[0].pageY),p2=new structures.Point(ts[1].pageX,ts[1].pageY),newDist=p1.distance(p2),newAngle=p1.angle(p2);e.originalEvent.scale=newDist/me.implementedGestureDist,e.originalEvent.rotation=180*(me.implementedGestureAngle-newAngle)/m.PI,me.prehandleEvent(e),me.gesturechange(e)}if(e.originalEvent.touches.length>1&&me.multitouchmove){var numFingers=e.originalEvent.touches.length;me.prehandleEvent(e);for(var center=new structures.Point(-e.offset.left*numFingers,-e.offset.top*numFingers),i=0;numFingers>i;i++)center.x+=e.originalEvent.changedTouches[i].pageX,center.y+=e.originalEvent.changedTouches[i].pageY;center.x/=numFingers,center.y/=numFingers,e.p=center,me.multitouchmove(e,numFingers)}else me.touchmove?(me.prehandleEvent(e),me.touchmove(e)):me.drag&&(me.prehandleEvent(e),me.drag(e))}),jqCapsule.bind("touchend",function(e){this.hold&&(clearTimeout(this.hold),this.hold=void 0),!featureDetection.supports_gesture()&&me.implementedGestureDist&&(me.implementedGestureDist=void 0,me.implementedGestureAngle=void 0,me.gestureend&&(me.prehandleEvent(e),me.gestureend(e))),me.touchend?(me.prehandleEvent(e),me.touchend(e)):me.mouseup&&(me.prehandleEvent(e),me.mouseup(e)),(new Date).getTime()-me.lastTouch<250&&(me.tap?(me.prehandleEvent(e),me.tap(e)):me.click&&(me.prehandleEvent(e),me.click(e)))}),jqCapsule.bind("gesturestart",function(e){me.gesturestart&&(me.prehandleEvent(e),me.gesturestart(e))}),jqCapsule.bind("gesturechange",function(e){me.gesturechange&&(me.prehandleEvent(e),me.gesturechange(e))}),jqCapsule.bind("gestureend",function(e){me.gestureend&&(me.prehandleEvent(e),me.gestureend(e))})):(jqCapsule.click(function(e){switch(e.which){case 1:me.click&&(me.prehandleEvent(e),me.click(e));break;case 2:me.middleclick&&(me.prehandleEvent(e),me.middleclick(e));break;case 3:me.rightclick&&(me.prehandleEvent(e),me.rightclick(e))}}),jqCapsule.dblclick(function(e){me.dblclick&&(me.prehandleEvent(e),me.dblclick(e))}),jqCapsule.mousedown(function(e){switch(e.which){case 1:monitor.CANVAS_DRAGGING=me,me.mousedown&&(me.prehandleEvent(e),me.mousedown(e));break;case 2:me.middlemousedown&&(me.prehandleEvent(e),me.middlemousedown(e));break;case 3:me.rightmousedown&&(me.prehandleEvent(e),me.rightmousedown(e))}}),jqCapsule.mousemove(function(e){!monitor.CANVAS_DRAGGING&&me.mousemove&&(me.prehandleEvent(e),me.mousemove(e))}),jqCapsule.mouseout(function(e){monitor.CANVAS_OVER=void 0,me.mouseout&&(me.prehandleEvent(e),me.mouseout(e))}),jqCapsule.mouseover(function(e){monitor.CANVAS_OVER=me,me.mouseover&&(me.prehandleEvent(e),me.mouseover(e))}),jqCapsule.mouseup(function(e){switch(e.which){case 1:me.mouseup&&(me.prehandleEvent(e),me.mouseup(e));break;case 2:me.middlemouseup&&(me.prehandleEvent(e),me.middlemouseup(e));break;case 3:me.rightmouseup&&(me.prehandleEvent(e),me.rightmouseup(e))}}),jqCapsule.mousewheel(function(e,delta){me.mousewheel&&(me.prehandleEvent(e),me.mousewheel(e,delta))})),this.subCreate&&this.subCreate()},_.prehandleEvent=function(e){e.originalEvent.changedTouches&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY),e.preventDefault(),e.offset=q("#"+this.id).offset(),e.p=new structures.Point(e.pageX-e.offset.left,e.pageY-e.offset.top)}}(ChemDoodle,ChemDoodle.featureDetection,ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.lib.jQuery,Math,document,window,navigator.userAgent),function(c,animations){"use strict";c._AnimatorCanvas=function(id,width,height){id&&this.create(id,width,height)};var _=c._AnimatorCanvas.prototype=new c._Canvas;_.timeout=33,_.startAnimation=function(){this.stopAnimation(),this.lastTime=(new Date).getTime();var me=this;this.nextFrame&&(this.handle=animations.requestInterval(function(){var timeNow=(new Date).getTime();me.nextFrame(timeNow-me.lastTime),me.repaint(),me.lastTime=timeNow},this.timeout))},_.stopAnimation=function(){this.handle&&(animations.clearRequestInterval(this.handle),this.handle=void 0)},_.isRunning=function(){return void 0!==this.handle}}(ChemDoodle,ChemDoodle.animations),function(c,document){"use strict";c.FileCanvas=function(id,width,height,action){id&&this.create(id,width,height);var form='<br><form name="FileForm" enctype="multipart/form-data" method="POST" action="'+action+'" target="HiddenFileFrame"><input type="file" name="f" /><input type="submit" name="submitbutton" value="Show File" /></form><iframe id="HFF-'+id+'" name="HiddenFileFrame" height="0" width="0" style="display:none;" onLoad="GetMolFromFrame(\'HFF-'+id+"', "+id+')"></iframe>';document.writeln(form),this.emptyMessage="Click below to load file",this.repaint()},c.FileCanvas.prototype=new c._Canvas}(ChemDoodle,document),function(c){"use strict";c.HyperlinkCanvas=function(id,width,height,urlOrFunction,color,size){id&&this.create(id,width,height),this.urlOrFunction=urlOrFunction,this.color=color?color:"blue",this.size=size?size:2};var _=c.HyperlinkCanvas.prototype=new c._Canvas;_.openInNewWindow=!0,_.hoverImage=void 0,_.drawChildExtras=function(ctx){this.e&&(this.hoverImage?ctx.drawImage(this.hoverImage,0,0):(ctx.strokeStyle=this.color,ctx.lineWidth=2*this.size,ctx.strokeRect(0,0,this.width,this.height)))},_.setHoverImage=function(url){this.hoverImage=new Image,this.hoverImage.src=url},_.click=function(p){this.e=void 0,this.repaint(),this.urlOrFunction instanceof Function?this.urlOrFunction():this.openInNewWindow?window.open(this.urlOrFunction):location.href=this.urlOrFunction},_.mouseout=function(e){this.e=void 0,this.repaint()},_.mouseover=function(e){this.e=e,this.repaint()}}(ChemDoodle),function(c,iChemLabs,q,document){"use strict";c.MolGrabberCanvas=function(id,width,height){id&&this.create(id,width,height);var sb=[];sb.push('<br><input type="text" id="'),sb.push(id),sb.push('_query" size="32" value="" />'),sb.push("<br><nobr>"),sb.push('<select id="'),sb.push(id),sb.push('_select">'),sb.push('<option value="chemexper">ChemExper'),sb.push('<option value="chemspider">ChemSpider'),sb.push('<option value="pubchem" selected>PubChem'),sb.push("</select>"),sb.push('<button id="'),sb.push(id),sb.push('_submit">Show Molecule</button>'),sb.push("</nobr>"),document.getElementById(id);var canvas=q("#"+id);canvas.after(sb.join(""));var self=this;q("#"+id+"_submit").click(function(){self.search()}),q("#"+id+"_query").keypress(function(e){13===e.which&&self.search()}),this.emptyMessage="Enter search term below",this.repaint()};var _=c.MolGrabberCanvas.prototype=new c._Canvas;_.setSearchTerm=function(term){q("#"+this.id+"_query").val(term),this.search()},_.search=function(){this.emptyMessage="Searching...",this.clear();var self=this;iChemLabs.getMoleculeFromDatabase(q("#"+this.id+"_query").val(),{database:q("#"+this.id+"_select").val()},function(mol){self.loadMolecule(mol)})}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.lib.jQuery,document),function(c,m,m4){"use strict";var matrix=[],xAxis=[1,0,0],yAxis=[0,1,0],zAxis=[0,0,1];c.RotatorCanvas=function(id,width,height,rotate3D){id&&this.create(id,width,height),this.rotate3D=rotate3D};var _=c.RotatorCanvas.prototype=new c._AnimatorCanvas,increment=m.PI/15;_.xIncrement=increment,_.yIncrement=increment,_.zIncrement=increment,_.nextFrame=function(delta){if(0===this.molecules.length&&0===this.shapes.length)return void this.stopAnimation();var change=delta/1e3;if(this.rotate3D){m4.identity(matrix),m4.rotate(matrix,this.xIncrement*change,xAxis),m4.rotate(matrix,this.yIncrement*change,yAxis),m4.rotate(matrix,this.zIncrement*change,zAxis);for(var i=0,ii=this.molecules.length;ii>i;i++){for(var m=this.molecules[i],j=0,jj=m.atoms.length;jj>j;j++){var a=m.atoms[j],p=[a.x-this.width/2,a.y-this.height/2,a.z];m4.multiplyVec3(matrix,p),a.x=p[0]+this.width/2,a.y=p[1]+this.height/2,a.z=p[2]}for(var j=0,jj=m.rings.length;jj>j;j++)m.rings[j].center=m.rings[j].getCenter();this.specs.atoms_display&&this.specs.atoms_circles_2D&&m.sortAtomsByZ(),this.specs.bonds_display&&this.specs.bonds_clearOverlaps_2D&&m.sortBondsByZ()}for(var i=0,ii=this.shapes.length;ii>i;i++)for(var sps=this.shapes[i].getPoints(),j=0,jj=sps.length;jj>j;j++){var a=sps[j],p=[a.x-this.width/2,a.y-this.height/2,0];m4.multiplyVec3(matrix,p),a.x=p[0]+this.width/2,a.y=p[1]+this.height/2}}else this.specs.rotateAngle+=this.zIncrement*change},_.dblclick=function(e){this.isRunning()?this.stopAnimation():this.startAnimation()}}(ChemDoodle,Math,ChemDoodle.lib.mat4),function(c,animations,math){"use strict";c.SlideshowCanvas=function(id,width,height){id&&this.create(id,width,height)};var _=c.SlideshowCanvas.prototype=new c._AnimatorCanvas;_.frames=[],_.curIndex=0,_.timeout=5e3,_.alpha=0,_.innerHandle=void 0,_.phase=0,_.drawChildExtras=function(ctx){var rgb=math.getRGB(this.specs.backgroundColor,255);ctx.fillStyle="rgba("+rgb[0]+", "+rgb[1]+", "+rgb[2]+", "+this.alpha+")",ctx.fillRect(0,0,this.width,this.height)},_.nextFrame=function(delta){if(0===this.frames.length)return void this.stopAnimation();this.phase=0;var me=this,count=1;this.innerHandle=setInterval(function(){me.alpha=count/15,me.repaint(),15===count&&me.breakInnerHandle(),count++},33)},_.breakInnerHandle=function(){if(this.innerHandle&&(clearInterval(this.innerHandle),this.innerHandle=void 0),0===this.phase){this.curIndex++,this.curIndex>this.frames.length-1&&(this.curIndex=0),this.alpha=1;var f=this.frames[this.curIndex];this.loadContent(f.mols,f.shapes),this.phase=1;var me=this,count=1;this.innerHandle=setInterval(function(){me.alpha=(15-count)/15,me.repaint(),15===count&&me.breakInnerHandle(),count++},33)}else 1===this.phase&&(this.alpha=0,this.repaint())},_.addFrame=function(molecules,shapes){0===this.frames.length&&this.loadContent(molecules,shapes),this.frames.push({mols:molecules,shapes:shapes})}}(ChemDoodle,ChemDoodle.animations,ChemDoodle.math),function(c,monitor,structures,m,m4){"use strict";c.TransformCanvas=function(id,width,height,rotate3D){id&&this.create(id,width,height),this.rotate3D=rotate3D};var _=c.TransformCanvas.prototype=new c._Canvas;_.lastPoint=void 0,_.rotationMultMod=1.3,_.lastPinchScale=1,_.lastGestureRotate=0,_.mousedown=function(e){this.lastPoint=e.p},_.dblclick=function(e){this.center(),this.repaint()},_.drag=function(e){if(!this.lastPoint.multi)if(monitor.ALT){var t=new structures.Point(e.p.x,e.p.y);t.sub(this.lastPoint);for(var i=0,ii=this.molecules.length;ii>i;i++){for(var mol=this.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].add(t);mol.check()}for(var i=0,ii=this.shapes.length;ii>i;i++)for(var sps=this.shapes[i].getPoints(),j=0,jj=sps.length;jj>j;j++)sps[j].add(t);this.lastPoint=e.p,this.repaint();
}else if(this.rotate3D===!0){var diameter=m.max(this.width/4,this.height/4),difx=e.p.x-this.lastPoint.x,dify=e.p.y-this.lastPoint.y,yIncrement=difx/diameter*this.rotationMultMod,xIncrement=-dify/diameter*this.rotationMultMod,matrix=[];m4.identity(matrix),m4.rotate(matrix,xIncrement,[1,0,0]),m4.rotate(matrix,yIncrement,[0,1,0]);for(var i=0,ii=this.molecules.length;ii>i;i++){for(var mol=this.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j],p=[a.x-this.width/2,a.y-this.height/2,a.z];m4.multiplyVec3(matrix,p),a.x=p[0]+this.width/2,a.y=p[1]+this.height/2,a.z=p[2]}for(var i=0,ii=mol.rings.length;ii>i;i++)mol.rings[i].center=mol.rings[i].getCenter();this.lastPoint=e.p,this.specs.atoms_display&&this.specs.atoms_circles_2D&&mol.sortAtomsByZ(),this.specs.bonds_display&&this.specs.bonds_clearOverlaps_2D&&mol.sortBondsByZ()}this.repaint()}else{var center=new structures.Point(this.width/2,this.height/2),before=center.angle(this.lastPoint),after=center.angle(e.p);this.specs.rotateAngle-=after-before,this.lastPoint=e.p,this.repaint()}},_.mousewheel=function(e,delta){this.specs.scale+=delta/50,this.specs.scale<.01&&(this.specs.scale=.01),this.repaint()},_.multitouchmove=function(e,numFingers){if(2===numFingers)if(this.lastPoint.multi){var t=new structures.Point(e.p.x,e.p.y);t.sub(this.lastPoint);for(var i=0,ii=this.molecules.length;ii>i;i++){for(var m=this.molecules[i],j=0,jj=m.atoms.length;jj>j;j++)m.atoms[j].add(t);m.check()}for(var i=0,ii=this.shapes.length;ii>i;i++)for(var sps=this.shapes[i].getPoints(),j=0,jj=sps.length;jj>j;j++)sps[j].add(t);this.lastPoint=e.p,this.lastPoint.multi=!0,this.repaint()}else this.lastPoint=e.p,this.lastPoint.multi=!0},_.gesturechange=function(e){if(e.originalEvent.scale-this.lastPinchScale!==0&&(this.specs.scale*=e.originalEvent.scale/this.lastPinchScale,this.specs.scale<.01&&(this.specs.scale=.01),this.lastPinchScale=e.originalEvent.scale),this.lastGestureRotate-e.originalEvent.rotation!==0){for(var rot=(this.lastGestureRotate-e.originalEvent.rotation)/180*m.PI,center=new structures.Point(this.width/2,this.height/2),i=0,ii=this.molecules.length;ii>i;i++){for(var mol=this.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j],dist=center.distance(a),angle=center.angle(a)+rot;a.x=center.x+dist*m.cos(angle),a.y=center.y-dist*m.sin(angle)}mol.check()}this.lastGestureRotate=e.originalEvent.rotation}this.repaint()},_.gestureend=function(e){this.lastPinchScale=1,this.lastGestureRotate=0}}(ChemDoodle,ChemDoodle.monitor,ChemDoodle.structures,Math,ChemDoodle.lib.mat4),function(c){"use strict";c.ViewerCanvas=function(id,width,height){id&&this.create(id,width,height)},c.ViewerCanvas.prototype=new c._Canvas}(ChemDoodle),function(c,document){"use strict";c._SpectrumCanvas=function(id,width,height){id&&this.create(id,width,height)};var _=c._SpectrumCanvas.prototype=new c._Canvas;_.spectrum=void 0,_.emptyMessage="No Spectrum Loaded or Recognized",_.loadMolecule=void 0,_.getMolecule=void 0,_.innerRepaint=function(ctx){this.spectrum&&this.spectrum.data.length>0?this.spectrum.draw(ctx,this.specs,this.width,this.height):this.emptyMessage&&(ctx.fillStyle="#737683",ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="18px Helvetica, Verdana, Arial, Sans-serif",ctx.fillText(this.emptyMessage,this.width/2,this.height/2))},_.loadSpectrum=function(spectrum){this.spectrum=spectrum,this.repaint()},_.getSpectrum=function(){return this.spectrum},_.getSpectrumCoordinates=function(x,y){return spectrum.getInternalCoordinates(x,y,this.width,this.height)}}(ChemDoodle,document),function(c){"use strict";c.ObserverCanvas=function(id,width,height){id&&this.create(id,width,height)},c.ObserverCanvas.prototype=new c._SpectrumCanvas}(ChemDoodle),function(c){"use strict";c.OverlayCanvas=function(id,width,height){id&&this.create(id,width,height)};var _=c.OverlayCanvas.prototype=new c._SpectrumCanvas;_.overlaySpectra=[],_.superRepaint=_.innerRepaint,_.innerRepaint=function(ctx){if(this.superRepaint(ctx),this.spectrum&&this.spectrum.data.length>0)for(var i=0,ii=this.overlaySpectra.length;ii>i;i++){var s=this.overlaySpectra[i];s&&s.data.length>0&&(s.minX=this.spectrum.minX,s.maxX=this.spectrum.maxX,s.drawPlot(ctx,this.specs,this.width,this.height,this.spectrum.memory.offsetTop,this.spectrum.memory.offsetLeft,this.spectrum.memory.offsetBottom))}},_.addSpectrum=function(spectrum){this.spectrum?this.overlaySpectra.push(spectrum):this.spectrum=spectrum}}(ChemDoodle),function(c,monitor,m){"use strict";c.PerspectiveCanvas=function(id,width,height){id&&this.create(id,width,height)};var _=c.PerspectiveCanvas.prototype=new c._SpectrumCanvas;_.dragRange=void 0,_.rescaleYAxisOnZoom=!0,_.lastPinchScale=1,_.mousedown=function(e){this.dragRange=new c.structures.Point(e.p.x,e.p.x)},_.mouseup=function(e){if(this.dragRange&&this.dragRange.x!==this.dragRange.y){if(!this.dragRange.multi){var newScale=this.spectrum.zoom(this.dragRange.x,e.p.x,this.width,this.rescaleYAxisOnZoom);this.rescaleYAxisOnZoom&&(this.specs.scale=newScale)}this.dragRange=void 0,this.repaint()}},_.drag=function(e){this.dragRange&&(this.dragRange.multi?this.dragRange=void 0:monitor.SHIFT?(this.spectrum.translate(e.p.x-this.dragRange.x,this.width),this.dragRange.x=e.p.x,this.dragRange.y=e.p.x):this.dragRange.y=e.p.x,this.repaint())},_.drawChildExtras=function(ctx){if(this.dragRange){var xs=m.min(this.dragRange.x,this.dragRange.y),xe=m.max(this.dragRange.x,this.dragRange.y);ctx.strokeStyle="gray",ctx.lineStyle=1,ctx.beginPath(),ctx.moveTo(xs,this.height/2);for(var i=xs;xe>=i;i++)5>i%10?ctx.lineTo(i,m.round(this.height/2)):ctx.moveTo(i,m.round(this.height/2));ctx.stroke()}},_.mousewheel=function(e,delta){this.specs.scale+=delta/10,this.specs.scale<.01&&(this.specs.scale=.01),this.repaint()},_.dblclick=function(e){this.spectrum.setup(),this.specs.scale=1,this.repaint()},_.multitouchmove=function(e,numFingers){2===numFingers&&(this.dragRange&&this.dragRange.multi?(this.spectrum.translate(e.p.x-this.dragRange.x,this.width),this.dragRange.x=e.p.x,this.dragRange.y=e.p.x,this.repaint()):(this.dragRange=new c.structures.Point(e.p.x,e.p.x),this.dragRange.multi=!0))},_.gesturechange=function(e){this.specs.scale*=e.originalEvent.scale/this.lastPinchScale,this.specs.scale<.01&&(this.specs.scale=.01),this.lastPinchScale=e.originalEvent.scale,this.repaint()},_.gestureend=function(e){this.lastPinchScale=1}}(ChemDoodle,ChemDoodle.monitor,Math),function(c,extensions,m){"use strict";c.SeekerCanvas=function(id,width,height,seekType){id&&this.create(id,width,height),this.seekType=seekType};var _=c.SeekerCanvas.prototype=new c._SpectrumCanvas;_.superRepaint=_.innerRepaint,_.innerRepaint=function(ctx){if(this.superRepaint(ctx),this.spectrum&&this.spectrum.data.length>0&&this.p){var renderP,internalP;if(this.seekType===c.SeekerCanvas.SEEK_POINTER)renderP=this.p,internalP=this.spectrum.getInternalCoordinates(renderP.x,renderP.y);else if(this.seekType===c.SeekerCanvas.SEEK_PLOT||this.seekType===c.SeekerCanvas.SEEK_PEAK){if(internalP=this.seekType===c.SeekerCanvas.SEEK_PLOT?this.spectrum.getClosestPlotInternalCoordinates(this.p.x):this.spectrum.getClosestPeakInternalCoordinates(this.p.x),!internalP)return;renderP={x:this.spectrum.getTransformedX(internalP.x,this.specs,this.width,this.spectrum.memory.offsetLeft),y:this.spectrum.getTransformedY(internalP.y/100,this.specs,this.height,this.spectrum.memory.offsetBottom,this.spectrum.memory.offsetTop)}}ctx.fillStyle="white",ctx.strokeStyle=this.specs.plots_color,ctx.lineWidth=this.specs.plots_width,ctx.beginPath(),ctx.arc(renderP.x,renderP.y,3,0,2*m.PI,!1),ctx.fill(),ctx.stroke(),ctx.font=extensions.getFontString(this.specs.text_font_size,this.specs.text_font_families),ctx.textAlign="left",ctx.textBaseline="bottom";var s="x:"+internalP.x.toFixed(3)+", y:"+internalP.y.toFixed(3),x=renderP.x+3,w=ctx.measureText(s).width;x+w>this.width-2&&(x-=6+w);var y=renderP.y;y-this.specs.text_font_size-2<0&&(y+=this.specs.text_font_size),ctx.fillRect(x,y-this.specs.text_font_size,w,this.specs.text_font_size),ctx.fillStyle="black",ctx.fillText(s,x,y)}},_.mouseout=function(e){this.p=void 0,this.repaint()},_.mousemove=function(e){this.p={x:e.p.x-2,y:e.p.y-3},this.repaint()},_.touchstart=function(e){this.mousemove(e)},_.touchmove=function(e){this.mousemove(e)},_.touchend=function(e){this.mouseout(e)},c.SeekerCanvas.SEEK_POINTER="pointer",c.SeekerCanvas.SEEK_PLOT="plot",c.SeekerCanvas.SEEK_PEAK="peak"}(ChemDoodle,ChemDoodle.extensions,Math),function(c,extensions,math,structures,d3,RESIDUE,m,document,m4,m3,v3,q,window){"use strict";c._Canvas3D=function(id,width,height){id&&this.create(id,width,height)};var _=c._Canvas3D.prototype=new c._Canvas;_.rotationMatrix=void 0,_.translationMatrix=void 0,_.lastPoint=void 0,_.emptyMessage="WebGL is Unavailable!",_.lastPinchScale=1,_.lastGestureRotate=0,_.afterLoadContent=function(){for(var bounds=new math.Bounds,i=0,ii=this.molecules.length;ii>i;i++)bounds.expand(this.molecules[i].getBounds3D());var maxDimension3D=v3.dist([bounds.maxX,bounds.maxY,bounds.maxZ],[bounds.minX,bounds.minY,bounds.minZ])/2+1.5;maxDimension3D===1/0&&(maxDimension3D=10);var fov=45,theta=fov/360*Math.PI,tanTheta=Math.tan(theta)/.8,top=maxDimension3D;this.depth=top/tanTheta;var near=m.max(this.depth-top,.1),far=this.depth+top,aspec=this.gl.canvas.clientWidth/this.gl.canvas.clientHeight;1>aspec&&(fov/=aspec),this.specs.projectionOrthoWidth_3D=Math.tan(fov/360*Math.PI)*this.depth*2*aspec,this.specs.projectionPerspectiveVerticalFieldOfView_3D=fov,this.specs.projectionFrontCulling_3D=near,this.specs.projectionBackCulling_3D=far,this.specs.projectionWidthHeightRatio_3D=aspec,this.translationMatrix=m4.translate(m4.identity([]),[0,0,-this.depth]),this.maxDimension=m.max(bounds.maxX-bounds.minX,bounds.maxY-bounds.minY),this.setupScene()},_.setViewDistance=function(fov){var minFov=.1,maxFov=179.9;this.specs.projectionPerspectiveVerticalFieldOfView_3D=math.clamp(this.specs.projectionPerspectiveVerticalFieldOfView_3D/fov,minFov,maxFov),this.specs.projectionOrthoWidth_3D=m.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*Math.PI)*this.depth*2*this.specs.projectionWidthHeightRatio_3D,this.updateScene()},_.repaint=function(){if(this.gl){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.modelViewMatrix=m4.multiply(this.translationMatrix,this.rotationMatrix,[]),this.gl.rotationMatrix=this.rotationMatrix;var pUniform=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix");this.gl.uniformMatrix4fv(pUniform,!1,this.gl.projectionMatrix),this.gl.fogging.setMode(this.specs.fog_mode_3D);for(var i=0,ii=this.molecules.length;ii>i;i++)this.molecules[i].render(this.gl,this.specs);for(var i=0,ii=this.shapes.length;ii>i;i++)this.shapes[i].render(this.gl,this.specs);this.specs.compass_display&&(this.gl.uniformMatrix4fv(pUniform,!1,this.compass.projectionMatrix),this.compass.render(this.gl,this.specs),this.gl.setMatrixUniforms(this.gl.modelViewMatrix),this.gl.uniformMatrix4fv(pUniform,!1,this.gl.projectionMatrix)),this.gl.enable(this.gl.BLEND),this.gl.depthMask(!1),this.gl.enableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.specs.atoms_displayLabels_3D&&this.label3D.render(this.gl,this.specs,this.getMolecules()),this.specs.compass_display&&this.specs.compass_displayText_3D&&(this.gl.uniformMatrix4fv(pUniform,!1,this.compass.projectionMatrix),this.compass.renderAxis(this.gl),this.gl.setMatrixUniforms(this.gl.modelViewMatrix),this.gl.uniformMatrix4fv(pUniform,!1,this.gl.projectionMatrix)),this.gl.disableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.gl.disable(this.gl.BLEND),this.gl.depthMask(!0),this.gl.disable(this.gl.DEPTH_TEST),this.drawChildExtras&&this.drawChildExtras(this.gl),this.gl.enable(this.gl.DEPTH_TEST),this.gl.flush()}},_.pick=function(x,y,includeAtoms,includeBonds){if(this.gl){m4.multiply(this.translationMatrix,this.rotationMatrix,this.gl.modelViewMatrix),this.gl.rotationMatrix=this.rotationMatrix;var pUniform=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix");this.gl.uniformMatrix4fv(pUniform,!1,this.gl.projectionMatrix);var xu=x,yu=this.height-y;return 1!==this.pixelRatio&&(xu*=this.pixelRatio,yu*=this.pixelRatio),this.picker.pick(this.gl,this.molecules,this.specs,xu,yu,includeAtoms,includeBonds)}},_.center=function(){for(var p=new structures.Atom,k=0,kk=this.molecules.length;kk>k;k++){var m=this.molecules[k];p.add3D(m.getCenter3D())}p.x/=this.molecules.length,p.y/=this.molecules.length;for(var k=0,kk=this.molecules.length;kk>k;k++){for(var m=this.molecules[k],i=0,ii=m.atoms.length;ii>i;i++)m.atoms[i].sub3D(p);if(m.chains&&m.fromJSON)for(var i=0,ii=m.chains.length;ii>i;i++)for(var chain=m.chains[i],j=0,jj=chain.length;jj>j;j++){var residue=chain[j];residue.cp1.sub3D(p),residue.cp2.sub3D(p),residue.cp3&&(residue.cp3.sub3D(p),residue.cp4.sub3D(p),residue.cp5.sub3D(p))}}},_.subCreate=function(){try{var canvas=document.getElementById(this.id);this.gl=canvas.getContext("webgl"),this.gl||(this.gl=canvas.getContext("experimental-webgl"))}catch(e){}this.gl?(1!==this.pixelRatio&&this.gl.canvas.width===this.width&&(this.gl.canvas.style.width=this.width+"px",this.gl.canvas.style.height=this.height+"px",this.gl.canvas.width=this.width*this.pixelRatio,this.gl.canvas.height=this.height*this.pixelRatio),this.rotationMatrix=m4.identity([]),this.translationMatrix=m4.identity([]),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.program=this.gl.createProgram(),this.gl.shader=new d3.Shader,this.gl.shader.init(this.gl),this.gl.programLabel=this.gl.createProgram(),this.setupScene()):this.displayMessage()},c._Canvas.prototype.displayMessage=function(){var canvas=document.getElementById(this.id);if(canvas.getContext){var ctx=canvas.getContext("2d");this.specs.backgroundColor&&(ctx.fillStyle=this.specs.backgroundColor,ctx.fillRect(0,0,this.width,this.height)),this.emptyMessage&&(ctx.fillStyle="#737683",ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="18px Helvetica, Verdana, Arial, Sans-serif",ctx.fillText(this.emptyMessage,this.width/2,this.height/2))}},_.renderText=function(text,position){if(this.gl){var vertexData={position:[],texCoord:[],translation:[]};this.gl.textImage.pushVertexData(text,position,0,vertexData),this.gl.textMesh.storeData(this.gl,vertexData.position,vertexData.texCoord,vertexData.translation),this.gl.enable(this.gl.BLEND),this.gl.depthMask(!1),this.gl.enableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.gl.textImage.useTexture(this.gl),this.gl.textMesh.render(this.gl),this.gl.disableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.gl.disable(this.gl.BLEND),this.gl.depthMask(!0)}},_.setupScene=function(){if(this.gl){var jqCapsule=q("#"+this.id);jqCapsule.css("background-color",this.specs.backgroundColor);var cs=math.getRGB(this.specs.backgroundColor,1);this.gl.clearColor(cs[0],cs[1],cs[2],1),this.gl.clearDepth(1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.specs.cullBackFace_3D?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.sphereBuffer=new d3.Sphere(1,this.specs.atoms_resolution_3D,this.specs.atoms_resolution_3D),this.gl.starBuffer=new d3.Star,this.gl.cylinderBuffer=new d3.Cylinder(1,1,this.specs.bonds_resolution_3D),this.gl.cylinderClosedBuffer=new d3.Cylinder(1,1,this.specs.bonds_resolution_3D,!0),this.gl.boxBuffer=new d3.Box(1,1,1),this.gl.pillBuffer=new d3.Pill(this.specs.bonds_pillDiameter_3D/2,this.specs.bonds_pillHeight_3D,this.specs.bonds_pillLatitudeResolution_3D,this.specs.bonds_pillLongitudeResolution_3D),this.gl.lineBuffer=new d3.Line,this.gl.lineArrowBuffer=new d3.LineArrow,this.gl.arrowBuffer=new d3.Arrow(.3,this.specs.compass_resolution_3D),this.gl.textMesh=new d3.TextMesh,this.gl.textMesh.init(this.gl),this.gl.textImage=new d3.TextImage,this.gl.textImage.init(this.gl),this.gl.textImage.updateFont(this.gl,this.specs.text_font_size,this.specs.text_font_families,this.specs.text_font_bold,this.specs.text_font_italic,this.specs.text_font_stroke_3D),this.label3D=new d3.Label,this.label3D.init(this.gl,this.specs);for(var k=0,kk=this.molecules.length;kk>k;k++){var mol=this.molecules[k];if(mol.labelMesh instanceof d3.TextMesh||(mol.labelMesh=new d3.TextMesh,mol.labelMesh.init(this.gl)),mol.chains){mol.ribbons=[],mol.cartoons=[],mol.tubes=[],mol.pipePlanks=[];for(var j=0,jj=mol.chains.length;jj>j;j++){for(var rs=mol.chains[j],i=0,ii=rs.length-1;ii>i;i++)rs[i].Test=i;var isNucleotide=rs.length>3&&RESIDUE[rs[3].name]&&"#BEA06E"===RESIDUE[rs[3].name].aminoColor;if(rs.length>0&&!rs[0].lineSegments){for(var i=0,ii=rs.length-1;ii>i;i++)rs[i].setup(rs[i+1].cp1,isNucleotide?1:this.specs.proteins_horizontalResolution);if(!isNucleotide)for(var i=1,ii=rs.length-1;ii>i;i++)extensions.vec3AngleFrom(rs[i-1].D,rs[i].D)>m.PI/2&&(rs[i].guidePointsSmall.reverse(),rs[i].guidePointsLarge.reverse(),v3.scale(rs[i].D,-1));for(var i=2,ii=rs.length-3;ii>i;i++)rs[i].computeLineSegments(rs[i-2],rs[i-1],rs[i+1],!isNucleotide,isNucleotide?this.specs.nucleics_verticalResolution:this.specs.proteins_verticalResolution);rs.pop(),rs.pop(),rs.pop(),rs.shift(),rs.shift()}var rgb=math.hsl2rgb(1===jj?.5:j/jj,1,.5),chainColor="rgb("+rgb[0]+","+rgb[1]+","+rgb[2]+")";if(rs.chainColor=chainColor,isNucleotide){var t=new d3.Tube(rs,this.specs.nucleics_tubeThickness,this.specs.nucleics_tubeResolution_3D);t.chainColor=chainColor,mol.tubes.push(t)}else{var t=new d3.PipePlank(rs,this.specs);mol.pipePlanks.push(t);var res=rs.shift(),r={front:new d3.Ribbon(rs,this.specs.proteins_ribbonThickness,!1),back:new d3.Ribbon(rs,-this.specs.proteins_ribbonThickness,!1)};r.front.chainColor=chainColor,r.back.chainColor=chainColor,mol.ribbons.push(r);var d={front:new d3.Ribbon(rs,this.specs.proteins_ribbonThickness,!0),back:new d3.Ribbon(rs,-this.specs.proteins_ribbonThickness,!0)};d.front.chainColor=chainColor,d.back.chainColor=chainColor,mol.cartoons.push(d),rs.unshift(res)}}}}if(this.label3D.updateVerticesBuffer(this.gl,this.getMolecules(),this.specs),this instanceof c.MovieCanvas3D&&this.frames)for(var i=0,ii=this.frames.length;ii>i;i++){for(var f=this.frames[i],j=0,jj=f.mols.length;jj>j;j++){var mol=f.mols[j];mol.labelMesh instanceof structures.d3.TextMesh||(mol.labelMesh=new structures.d3.TextMesh,mol.labelMesh.init(this.gl))}this.label3D.updateVerticesBuffer(this.gl,f.mols,this.specs)}this.gl.lighting=new d3.Light(this.specs.lightDiffuseColor_3D,this.specs.lightSpecularColor_3D,this.specs.lightDirection_3D),this.gl.lighting.lightScene(this.gl),this.gl.material=new d3.Material(this.gl),this.gl.fogging=new d3.Fog(this.gl),this.gl.fogging.setTempParameter(this.specs.fog_color_3D||this.specs.backgroundColor,this.specs.fog_start_3D,this.specs.fog_end_3D,this.specs.fog_density_3D),this.compass=new d3.Compass(this.gl,this.specs);var widthHeightRatio=this.width/this.height;this.specs.projectionWidthHeightRatio_3D&&(widthHeightRatio=this.specs.projectionWidthHeightRatio_3D),this.gl.projectionMatrix=this.specs.projectionPerspective_3D?m4.perspective(this.specs.projectionPerspectiveVerticalFieldOfView_3D,widthHeightRatio,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D):m4.ortho(-this.specs.projectionOrthoWidth_3D/2,this.specs.projectionOrthoWidth_3D/2,-this.specs.projectionOrthoWidth_3D/2/widthHeightRatio,this.specs.projectionOrthoWidth_3D/2/widthHeightRatio,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D);var pUniform=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix");this.gl.uniformMatrix4fv(pUniform,!1,this.gl.projectionMatrix);var mvUL=this.gl.getUniformLocation(this.gl.program,"u_model_view_matrix"),nUL=this.gl.getUniformLocation(this.gl.program,"u_normal_matrix");this.gl.setMatrixUniforms=function(mvMatrix){this.uniformMatrix4fv(mvUL,!1,mvMatrix);var normalMatrix=m3.transpose(m4.toInverseMat3(mvMatrix,[]));this.uniformMatrix3fv(nUL,!1,normalMatrix)};var dimUL=this.gl.getUniformLocation(this.gl.program,"u_dimension");this.gl.uniformMatrix4fv(pUniform,!1,this.gl.projectionMatrix),this.gl.uniform2f(dimUL,this.gl.canvas.clientWidth,this.gl.canvas.clientHeight),this.picker=new d3.Picker,this.picker.init(this.gl),this.picker.setDimension(this.gl,this.gl.canvas.width,this.gl.canvas.height)}},_.updateScene=function(){this.gl.fogging.setTempParameter(this.specs.fog_color_3D||this.specs.backgroundColor,this.specs.fog_start_3D,this.specs.fog_end_3D,this.specs.fog_density_3D);var widthHeightRatio=this.width/this.height;this.specs.projectionWidthHeightRatio_3D&&(widthHeightRatio=this.specs.projectionWidthHeightRatio_3D),this.gl.projectionMatrix=this.specs.projectionPerspective_3D?m4.perspective(this.specs.projectionPerspectiveVerticalFieldOfView_3D,widthHeightRatio,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D):m4.ortho(-this.specs.projectionOrthoWidth_3D/2,this.specs.projectionOrthoWidth_3D/2,-this.specs.projectionOrthoWidth_3D/2/widthHeightRatio,this.specs.projectionOrthoWidth_3D/2/widthHeightRatio,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D),this.repaint()},_.mousedown=function(e){this.lastPoint=e.p},_.mouseup=function(e){this.lastPoint=void 0},_.rightmousedown=function(e){this.lastPoint=e.p},_.drag=function(e){if(this.lastPoint)if(c.monitor.ALT){var t=new structures.Point(e.p.x,e.p.y);t.sub(this.lastPoint);var theta=this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*m.PI,tanTheta=m.tan(theta),topScreen=this.height/2,nearScreen=topScreen/tanTheta,nearRatio=this.depth/nearScreen;m4.translate(this.translationMatrix,[t.x*nearRatio,-t.y*nearRatio,0]),this.lastPoint=e.p,this.repaint()}else{var difx=e.p.x-this.lastPoint.x,dify=e.p.y-this.lastPoint.y,rotation=m4.rotate(m4.identity([]),difx*m.PI/180,[0,1,0]);m4.rotate(rotation,dify*m.PI/180,[1,0,0]),this.rotationMatrix=m4.multiply(rotation,this.rotationMatrix),this.lastPoint=e.p,this.repaint()}},_.mousewheel=function(e,delta){var minFov=.1,maxFov=179.9,fov=this.specs.projectionPerspectiveVerticalFieldOfView_3D+delta;this.specs.projectionPerspectiveVerticalFieldOfView_3D=minFov>fov?minFov:fov>maxFov?maxFov:fov,this.specs.projectionOrthoWidth_3D=Math.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*Math.PI)*this.depth*2*this.specs.projectionWidthHeightRatio_3D,this.updateScene()},_.multitouchmove=function(e,numFingers){if(2===numFingers)if(this.lastPoint&&this.lastPoint.multi){var t=new structures.Point(e.p.x,e.p.y);t.sub(this.lastPoint);var theta=this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*m.PI,tanTheta=m.tan(theta),topScreen=this.height/2,nearScreen=topScreen/tanTheta,nearRatio=this.depth/nearScreen;m4.translate(this.translationMatrix,[t.x*nearRatio,-t.y*nearRatio,0]),this.lastPoint=e.p,this.repaint()}else this.lastPoint=e.p,this.lastPoint.multi=!0},_.gesturechange=function(e){if(e.originalEvent.scale-this.lastPinchScale!==0){var minFov=.1,maxFov=179.9,dz=30*-(e.originalEvent.scale/this.lastPinchScale-1);if(isNaN(dz))return;var fov=this.specs.projectionPerspectiveVerticalFieldOfView_3D+dz;this.specs.projectionPerspectiveVerticalFieldOfView_3D=minFov>fov?minFov:fov>maxFov?maxFov:fov,this.specs.projectionOrthoWidth_3D=Math.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*Math.PI)*this.depth*2*this.specs.projectionWidthHeightRatio_3D,this.updateScene(),this.lastPinchScale=e.originalEvent.scale}this.repaint()},_.gestureend=function(e){this.lastPinchScale=1,this.lastGestureRotate=0}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.RESIDUE,Math,document,ChemDoodle.lib.mat4,ChemDoodle.lib.mat3,ChemDoodle.lib.vec3,ChemDoodle.lib.jQuery,window),function(c,iChemLabs,q,document){"use strict";c.MolGrabberCanvas3D=function(id,width,height){id&&this.create(id,width,height);var sb=[];sb.push('<br><input type="text" id="'),sb.push(id),sb.push('_query" size="32" value="" />'),sb.push("<br><nobr>"),sb.push('<select id="'),sb.push(id),sb.push('_select">'),sb.push('<option value="pubchem" selected>PubChem'),sb.push("</select>"),sb.push('<button id="'),sb.push(id),sb.push('_submit">Show Molecule</button>'),sb.push("</nobr>"),document.writeln(sb.join(""));var self=this;q("#"+id+"_submit").click(function(){self.search()}),q("#"+id+"_query").keypress(function(e){13===e.which&&self.search()})};var _=c.MolGrabberCanvas3D.prototype=new c._Canvas3D;_.setSearchTerm=function(term){q("#"+this.id+"_query").val(term),this.search()},_.search=function(){var self=this;iChemLabs.getMoleculeFromDatabase(q("#"+this.id+"_query").val(),{database:q("#"+this.id+"_select").val(),dimension:3},function(mol){self.loadMolecule(mol)})}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.lib.jQuery,document),function(c,structures){"use strict";c.MovieCanvas3D=function(id,width,height){id&&this.create(id,width,height),this.frames=[]},c.MovieCanvas3D.PLAY_ONCE=0,c.MovieCanvas3D.PLAY_LOOP=1,c.MovieCanvas3D.PLAY_SPRING=2;var _=c.MovieCanvas3D.prototype=new c._Canvas3D;_.timeout=50,_.frameNumber=0,_.playMode=2,_.reverse=!1,_.startAnimation=c._AnimatorCanvas.prototype.startAnimation,_.stopAnimation=c._AnimatorCanvas.prototype.stopAnimation,_.isRunning=c._AnimatorCanvas.prototype.isRunning,_.dblclick=c.RotatorCanvas.prototype.dblclick,_.nextFrame=function(delta){var f=this.frames[this.frameNumber];this.molecules=f.mols,this.shapes=f.shapes,2===this.playMode&&this.reverse?(this.frameNumber--,this.frameNumber<0&&(this.frameNumber=1,this.reverse=!1)):(this.frameNumber++,this.frameNumber>=this.frames.length&&(2===this.playMode?(this.frameNumber-=2,this.reverse=!0):(this.frameNumber=0,0===this.playMode&&this.stopAnimation())))},_.center=function(){for(var p=new structures.Atom,first=this.frames[0],j=0,jj=first.mols.length;jj>j;j++)p.add3D(first.mols[j].getCenter3D());p.x/=first.mols.length,p.y/=first.mols.length;var center=new structures.Atom;center.sub3D(p);for(var i=0,ii=this.frames.length;ii>i;i++)for(var f=this.frames[i],j=0,jj=f.mols.length;jj>j;j++)for(var mol=f.mols[j],k=0,kk=mol.atoms.length;kk>k;k++)mol.atoms[k].add3D(center)},_.addFrame=function(molecules,shapes){this.frames.push({mols:molecules,shapes:shapes})}}(ChemDoodle,ChemDoodle.structures),function(c,m,m4){"use strict";var matrix=[],xAxis=[1,0,0],yAxis=[0,1,0],zAxis=[0,0,1];c.RotatorCanvas3D=function(id,width,height){id&&this.create(id,width,height)};var _=c.RotatorCanvas3D.prototype=new c._Canvas3D;_.timeout=33;var increment=m.PI/15;_.xIncrement=increment,_.yIncrement=increment,_.zIncrement=increment,_.startAnimation=c._AnimatorCanvas.prototype.startAnimation,_.stopAnimation=c._AnimatorCanvas.prototype.stopAnimation,_.isRunning=c._AnimatorCanvas.prototype.isRunning,_.dblclick=c.RotatorCanvas.prototype.dblclick,_.mousedown=void 0,_.rightmousedown=void 0,_.drag=void 0,_.mousewheel=void 0,_.nextFrame=function(delta){if(0===this.molecules.length&&0===this.shapes.length)return void this.stopAnimation();m4.identity(matrix);var change=delta/1e3;m4.rotate(matrix,this.xIncrement*change,xAxis),m4.rotate(matrix,this.yIncrement*change,yAxis),m4.rotate(matrix,this.zIncrement*change,zAxis),m4.multiply(this.rotationMatrix,matrix)}}(ChemDoodle,Math,ChemDoodle.lib.mat4),function(c){"use strict";c.TransformCanvas3D=function(id,width,height){id&&this.create(id,width,height)},c.TransformCanvas3D.prototype=new c._Canvas3D}(ChemDoodle),function(c){"use strict";c.ViewerCanvas3D=function(id,width,height){id&&this.create(id,width,height)};var _=c.ViewerCanvas3D.prototype=new c._Canvas3D;_.mousedown=void 0,_.rightmousedown=void 0,_.drag=void 0,_.mousewheel=void 0}(ChemDoodle),function(c,extensions,math,document){"use strict";function PeriodicCell(element,x,y,dimension){this.element=element,this.x=x,this.y=y,this.dimension=dimension,this.allowMultipleSelections=!1}c.PeriodicTableCanvas=function(id,cellDimension){this.padding=5,id&&this.create(id,18*cellDimension+2*this.padding,10*cellDimension+2*this.padding),this.cellDimension=cellDimension?cellDimension:20,this.setupTable(),this.repaint()};var _=c.PeriodicTableCanvas.prototype=new c._Canvas;_.loadMolecule=void 0,_.getMolecule=void 0,_.getHoveredElement=function(){return this.hovered?this.hovered.element:void 0},_.innerRepaint=function(ctx){for(var i=0,ii=this.cells.length;ii>i;i++)this.drawCell(ctx,this.specs,this.cells[i]);this.hovered&&this.drawCell(ctx,this.specs,this.hovered),this.selected&&this.drawCell(ctx,this.specs,this.selected)},_.setupTable=function(){this.cells=[];for(var x=this.padding,y=this.padding,count=0,i=0,ii=c.SYMBOLS.length;ii>i;i++){18===count&&(count=0,y+=this.cellDimension,x=this.padding);var e=c.ELEMENT[c.SYMBOLS[i]];2===e.atomicNumber?(x+=16*this.cellDimension,count+=16):(5===e.atomicNumber||13===e.atomicNumber)&&(x+=10*this.cellDimension,count+=10),(e.atomicNumber<58||e.atomicNumber>71&&e.atomicNumber<90||e.atomicNumber>103)&&e.atomicNumber<113&&(this.cells.push(new PeriodicCell(e,x,y,this.cellDimension)),x+=this.cellDimension,count++)}y+=2*this.cellDimension,x=3*this.cellDimension+this.padding;for(var i=57;104>i;i++){var e=c.ELEMENT[c.SYMBOLS[i]];90===e.atomicNumber&&(y+=this.cellDimension,x=3*this.cellDimension+this.padding),(e.atomicNumber>=58&&e.atomicNumber<=71||e.atomicNumber>=90&&e.atomicNumber<=103)&&(this.cells.push(new PeriodicCell(e,x,y,this.cellDimension)),x+=this.cellDimension)}},_.drawCell=function(ctx,specs,cell){var radgrad=ctx.createRadialGradient(cell.x+cell.dimension/3,cell.y+cell.dimension/3,1.5*cell.dimension,cell.x+cell.dimension/3,cell.y+cell.dimension/3,cell.dimension/10);radgrad.addColorStop(0,"#000000"),radgrad.addColorStop(.7,cell.element.jmolColor),radgrad.addColorStop(1,"#FFFFFF"),ctx.fillStyle=radgrad,extensions.contextRoundRect(ctx,cell.x,cell.y,cell.dimension,cell.dimension,cell.dimension/8),(cell===this.hovered||cell===this.selected||cell.selected)&&(ctx.lineWidth=2,ctx.strokeStyle="#c10000",ctx.stroke(),ctx.fillStyle="white"),ctx.fill(),ctx.font=extensions.getFontString(specs.text_font_size,specs.text_font_families),ctx.fillStyle=specs.text_color,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(cell.element.symbol,cell.x+cell.dimension/2,cell.y+cell.dimension/2)},_.click=function(e){this.hovered&&(this.allowMultipleSelections?this.hovered.selected=!this.hovered.selected:this.selected=this.hovered,this.repaint())},_.touchstart=function(e){this.mousemove(e)},_.mousemove=function(e){var x=e.p.x,y=e.p.y;this.hovered=void 0;for(var i=0,ii=this.cells.length;ii>i;i++){var c=this.cells[i];if(math.isBetween(x,c.x,c.x+c.dimension)&&math.isBetween(y,c.y,c.y+c.dimension)){this.hovered=c;break}}this.repaint()},_.mouseout=function(e){this.hovered=void 0,this.repaint()}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.math,document),function(io,document,window){"use strict";io.png={},io.png.create=function(canvas){window.open(document.getElementById(canvas.id).toDataURL("image/png"))}}(ChemDoodle.io,document,window),function(io,q){"use strict";io.file={},io.file.content=function(url,callback){q.get(url,"",callback)}}(ChemDoodle.io,ChemDoodle.lib.jQuery),function(c,iChemLabs,io,structures,q,location){"use strict";iChemLabs.SERVER_URL="https://ichemlabs.cloud.chemdoodle.com/icl_cdc_v070000/WebHQ",iChemLabs.inRelay=!1,iChemLabs.asynchronous=!0,iChemLabs.INFO={userAgent:navigator.userAgent,v_cwc:c.getVersion(),v_jQuery:q.version,v_jQuery_ui:q.ui?q.ui.version:"N/A"};var JSON_INTERPRETER=new io.JSONInterpreter,queue=new structures.Queue;iChemLabs.useHTTPS=function(){iChemLabs.SERVER_URL="https"+iChemLabs.SERVER_URL.substr(4)},iChemLabs._contactServer=function(call,content,options,callback,errorback){this.inRelay?queue.enqueue({call:call,content:content,options:options,callback:callback,errorback:errorback}):(iChemLabs.inRelay=!0,q.ajax({dataType:"text",type:"POST",data:JSON.stringify({call:call,content:content,options:options,info:iChemLabs.INFO}),url:this.SERVER_URL,success:function(data){var o=JSON.parse(data);if(o.message&&alert(o.message),
iChemLabs.inRelay=!1,callback&&o.content&&!o.stop&&callback(o.content),o.stop&&errorback&&errorback(),!queue.isEmpty()){var next=queue.dequeue();iChemLabs._contactServer(next.call,next.content,next.options,next.callback,next.errorback)}},error:function(xhr,status,error){if("checkForUpdates"!=call&&alert("Call failed. Please try again. If you continue to see this message, please contact iChemLabs customer support."),iChemLabs.inRelay=!1,errorback&&errorback(),!queue.isEmpty()){var next=queue.dequeue();iChemLabs._contactServer(next.call,next.content,next.options,next.callback,next.errorback)}},xhrFields:{withCredentials:!0},async:iChemLabs.asynchronous}))},iChemLabs.authenticate=function(credential,options,callback,errorback){this._contactServer("authenticate",{credential:credential},options,function(content){callback(content)},errorback)},iChemLabs.calculate=function(mol,options,callback,errorback){this._contactServer("calculate",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(content)},errorback)},iChemLabs.createLewisDotStructure=function(mol,options,callback,errorback){this._contactServer("createLewisDot",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(JSON_INTERPRETER.molFrom(content.mol))},errorback)},iChemLabs.generateImage=function(mol,options,callback,errorback){this._contactServer("generateImage",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(content.link)},errorback)},iChemLabs.generateIUPACName=function(mol,options,callback,errorback){this._contactServer("generateIUPACName",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(content.iupac)},errorback)},iChemLabs.getAd=function(callback,errorback){this._contactServer("getAd",{},{},function(content){callback(content.image_url,content.target_url)},errorback)},iChemLabs.getMoleculeFromContent=function(input,options,callback,errorback){this._contactServer("getMoleculeFromContent",{content:input},options,function(content){for(var z=!1,i=0,ii=content.mol.a.length;ii>i;i++)if(0!==content.mol.a[i].z){z=!0;break}if(z)for(var i=0,ii=content.mol.a.length;ii>i;i++)content.mol.a[i].x/=20,content.mol.a[i].y/=20,content.mol.a[i].z/=20;callback(JSON_INTERPRETER.molFrom(content.mol))},errorback)},iChemLabs.getMoleculeFromDatabase=function(query,options,callback,errorback){this._contactServer("getMoleculeFromDatabase",{query:query},options,function(content){if(3===options.dimension)for(var i=0,ii=content.mol.a.length;ii>i;i++)content.mol.a[i].x/=20,content.mol.a[i].y/=-20,content.mol.a[i].z/=20;callback(JSON_INTERPRETER.molFrom(content.mol))},errorback)},iChemLabs.getOptimizedPDBStructure=function(id,options,callback,errorback){this._contactServer("getOptimizedPDBStructure",{id:id},options,function(content){var mol;mol=content.mol?JSON_INTERPRETER.molFrom(content.mol):new structures.Molecule,mol.chains=JSON_INTERPRETER.chainsFrom(content.ribbons),mol.fromJSON=!0,callback(mol)},errorback)},iChemLabs.getZeoliteFromIZA=function(query,options,callback,errorback){this._contactServer("getZeoliteFromIZA",{query:query},options,function(content){callback(ChemDoodle.readCIF(content.cif,options.xSuper,options.ySuper,options.zSuper))},errorback)},iChemLabs.isGraphIsomorphism=function(arrow,target,options,callback,errorback){this._contactServer("isGraphIsomorphism",{arrow:JSON_INTERPRETER.molTo(arrow),target:JSON_INTERPRETER.molTo(target)},options,function(content){callback(content.value)},errorback)},iChemLabs.isSubgraphIsomorphism=function(arrow,target,options,callback,errorback){this._contactServer("isSubgraphIsomorphism",{arrow:JSON_INTERPRETER.molTo(arrow),target:JSON_INTERPRETER.molTo(target)},options,function(content){callback(content.value)},errorback)},iChemLabs.isSupergraphIsomorphism=function(arrow,target,options,callback,errorback){this._contactServer("isSupergraphIsomorphism",{arrow:JSON_INTERPRETER.molTo(arrow),target:JSON_INTERPRETER.molTo(target)},options,function(content){callback(content.value)},errorback)},iChemLabs.getSimilarityMeasure=function(first,second,options,callback,errorback){this._contactServer("getSimilarityMeasure",{first:JSON_INTERPRETER.molTo(first),second:JSON_INTERPRETER.molTo(second)},options,function(content){callback(content.value)},errorback)},iChemLabs.kekulize=function(mol,options,callback,errorback){this._contactServer("kekulize",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(JSON_INTERPRETER.molFrom(content.mol))},errorback)},iChemLabs.optimize=function(mol,options,callback,errorback){this._contactServer("optimize",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){var optimized=JSON_INTERPRETER.molFrom(content.mol);if(2===options.dimension){for(var i=0,ii=optimized.atoms.length;ii>i;i++)mol.atoms[i].x=optimized.atoms[i].x,mol.atoms[i].y=optimized.atoms[i].y;callback()}else if(3===options.dimension){for(var i=0,ii=optimized.atoms.length;ii>i;i++)optimized.atoms[i].x/=20,optimized.atoms[i].y/=-20,optimized.atoms[i].z/=20;callback(optimized)}},errorback)},iChemLabs.readIUPACName=function(iupac,options,callback,errorback){this._contactServer("readIUPACName",{iupac:iupac},options,function(content){callback(JSON_INTERPRETER.molFrom(content.mol))},errorback)},iChemLabs.readSMILES=function(smiles,options,callback,errorback){this._contactServer("readSMILES",{smiles:smiles},options,function(content){callback(JSON_INTERPRETER.molFrom(content.mol))},errorback)},iChemLabs.saveFile=function(mol,options,callback,errorback){this._contactServer("saveFile",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(content.link)},errorback)},iChemLabs.simulate13CNMR=function(mol,options,callback,errorback){options.nucleus="C",options.isotope=13,this._contactServer("simulateNMR",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(c.readJCAMP(content.jcamp))},errorback)},iChemLabs.simulate1HNMR=function(mol,options,callback,errorback){options.nucleus="H",options.isotope=1,this._contactServer("simulateNMR",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(c.readJCAMP(content.jcamp))},errorback)},iChemLabs.simulateMassParentPeak=function(mol,options,callback,errorback){this._contactServer("simulateMassParentPeak",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(c.readJCAMP(content.jcamp))},errorback)},iChemLabs.writeSMILES=function(mol,options,callback,errorback){this._contactServer("writeSMILES",{mol:JSON_INTERPRETER.molTo(mol)},options,function(content){callback(content.smiles)},errorback)},iChemLabs.version=function(options,callback,errorback){this._contactServer("version",{},options,function(content){callback(content.value)},errorback)},iChemLabs.checkForUpdates=function(options){this._contactServer("checkForUpdates",{value:location.href},options,function(content){},function(){})}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery,location),function(jQuery){!function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{},$.extend($.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)}}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.support.selectstart="onselectstart"in document.createElement("div"),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)}})}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&methodValue!==undefined?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):this.each(function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}(jQuery),function($,undefined){var mouseHandled=!1;$(document).mouseup(function(){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){return $.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button?this._mouseUp(event):this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function($,undefined){function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=getDimensions(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],$.support.offsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&0>=overRight?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):overRight>0&&0>=overLeft?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&0>=overBottom?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):overBottom>0&&0>=overTop?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];
0>overLeft?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];0>overTop?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,$.support.offsetFractions=offsetLeft>10&&11>offsetLeft,testElement.innerHTML="",testElementParent.removeChild(testElement)}()}(jQuery),function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"original"!==this.options.helper||$.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1):!1},_mouseUp:function(event){return $("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(over="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()}),{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*mod}},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,pageX=event.pageX,pageY=event.pageY;return this.offset.scroll||(this.offset.scroll={top:scroll.scrollTop(),left:scroll.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(co=this.relative_container.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),"drag"===type&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,"original"===inst.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=!1,thisSortable=this;this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(innermostIntersecting=!0,$.each(inst.sortables,function(){return this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.contains(thisSortable.instance.element[0],this.instance.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(){var o=$(this).data("ui-draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event){var i=$(this).data("ui-draggable"),o=i.options,scrolled=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height,l-d>x2||x1>r+d||t-d>y2||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ui.plugin.add("draggable","stack",{start:function(){var min,o=this.data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($,undefined){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}$.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[],$.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];i<drop.length;i++)drop[i]===this&&drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){"accept"===key&&(this.accept=$.isFunction(value)?value:function(d){return d.is(value)}),$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=!1;return draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"ui-droppable");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return!1;var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOverAxis(draggableTop,t,droppable.proportions.height)&&isOverAxis(draggableLeft,l,droppable.proportions.width);case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}},$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight})}},drop:function(draggable,event){var dropped=!1;return $.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope}),parent.length&&(parentInstance=$.data(parent[0],"ui-droppable"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}}}(jQuery),function($,undefined){function num(v){return parseInt(v,10)||0}function isNumber(value){return!isNaN(parseInt(value,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;if(this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$("<div class='ui-resizable-handle "+hname+"'></div>"),axis.css({zIndex:o.zIndex}),"se"===handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis);
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=$(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(axis=$(this.handles[i],this.element),padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth(),padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),target.css(padPos,padWrapper),this._proportionallyResize()),$(this.handles[i]).length},this._renderAxis(this.element),this._handles=$(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){that.resizing||(this.className&&(axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),that.axis=axis&&axis[1]?axis[1]:"se")}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||($(this).removeClass("ui-resizable-autohide"),that._handles.show())}).mouseleave(function(){o.disabled||that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(_destroy(this.element),wrapper=this.element,this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()),this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles)handle=$(this.handles[i])[0],(handle===event.target||$.contains(handle,event.target))&&(capture=!0);return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;return this.resizing=!0,/absolute/.test(el.css("position"))?el.css({position:"absolute",top:el.css("top"),left:el.css("left")}):el.is(".ui-draggable")&&el.css({position:"absolute",top:iniPos.top,left:iniPos.left}),this._renderProxy(),curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top")),o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalPosition={left:curleft,top:curtop},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,cursor=$(".ui-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,prevWidth=this.size.width,prevHeight=this.size.height,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];return trigger?(data=trigger.apply(this,[event,dx,dy]),this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._updateCache(data),this._propagate("resize",event),this.position.top!==prevTop&&(props.top=this.position.top+"px"),this.position.left!==prevLeft&&(props.left=this.position.left+"px"),this.size.width!==prevWidth&&(props.width=this.size.width+"px"),this.size.height!==prevHeight&&(props.height=this.size.height+"px"),el.css(props),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(props)||this._trigger("resize",event,this.ui()),!1):!1},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;return this._helper&&(pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b},_updateCache:function(data){this.offset=this.helper.offset(),isNumber(data.left)&&(this.position.left=data.left),isNumber(data.top)&&(this.position.top=data.top),isNumber(data.height)&&(this.size.height=data.height),isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;return isNumber(data.height)?data.width=data.height*this.aspectRatio:isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"===a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"===a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);return isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight),isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight),data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null,data},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){if(prel=this._proportionallyResizeElements[i],!this.borderDif)for(this.borderDif=[],borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")],j=0;j<borders.length;j++)this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0);prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset(),this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;ce&&(that.containerElement=$(ce),/document/.test(oc)||oc===document?(that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(element=$(ce),p=[],$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]},co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch,that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}))},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio),that.position.top=that._helper?co.top:0),that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top,woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height),isParent=that.containerElement.get(0)===that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position")),isParent&&isOffsetRelative&&(woset-=that.parentData.left),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio))},stop:function(){var that=$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?_store(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],_store(o.alsoResize)):$.each(o.alsoResize,function(exp){_store(exp)})},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?_alsoResize(o.alsoResize):$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})},stop:function(){$(this).removeData("resizable-alsoresize")}}),$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).data("ui-resizable");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).data("ui-resizable");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid,isMinWidth&&(newWidth+=gridX),isMinHeight&&(newHeight+=gridY),isMaxWidth&&(newWidth-=gridX),isMaxHeight&&(newHeight-=gridY),/^(se|s|e)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight):/^(ne)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.left=op.left-ox):(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy,that.position.left=op.left-ox)}})}(jQuery),function($,undefined){$.widget("ui.selectable",$.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){selectees=$(that.options.filter,that.element[0]),selectees.addClass("ui-selectee"),selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=selectees.addClass("ui-selectee"),this._mouseInit(),this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY],this.options.disabled||(this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.pageX,top:event.pageY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");return selectee?(doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected"),selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1):void 0}))},_mouseDrag:function(event){if(this.dragged=!0,!this.options.disabled){var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;return x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=!1;selectee&&selectee.element!==that.element[0]&&("touch"===options.tolerance?hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1):"fit"===options.tolerance&&(hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2),hit?(selectee.selected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1),selectee.unselecting&&(selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(selectee.$element.addClass("ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.$element.addClass("ui-selected"),selectee.selected=!0):(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.startselected&&(selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))))}),!1}},_mouseStop:function(event){var that=this;return this.dragged=!1,$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}})}(jQuery),function($,undefined){function isOverAxis(x,reference,size){return x>reference&&reference+size>x}function isFloating(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))}$.widget("ui.sortable",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var o=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===o.axis||isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){"disabled"===key?(this.options[key]=value,this.widget().toggleClass("ui-sortable-disabled",!!value)):$.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(event),$(event.target).parents().each(function(){return $.data(this,that.widgetName+"-item")===that?(currentItem=$(this),!1):void 0}),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),currentItem&&(!this.options.handle||overrideHandle||($(this.options.handle,currentItem).find("*").addBack().each(function(){this===event.target&&(validHandle=!0)}),validHandle))?(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)),event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&itemElement!==this.currentItem[0]&&this.placeholder[1===intersection?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],itemElement):!0)){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&b>y1+dyClick,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&r>x1+dxClick,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();
return isOverElement?this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;queriesLength>j;j++)item=$(_queries[j]),item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,item,t,p;for(i=this.items.length-1;i>=0;i--)item=this.items[i],item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===nodeName?that.currentItem.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(element)}):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){(!className||o.forcePlaceholderSize)&&(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,floating,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,floating=innermostContainer.floating||isFloating(this.currentItem),posProperty=floating?"left":"top",sizeProperty=floating?"width":"height",base=this.positionAbs[posProperty]+this.offset.click[posProperty],j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(!floating||isOverAxis(this.positionAbs.top+this.offset.click.top,this.items[j].top,this.items[j].height))&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)&&(nearBottom=!0,cur+=this.items[j][sizeProperty]),Math.abs(cur-base)<dist&&(dist=Math.abs(cur-base),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return;itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!helper[0].style.width||o.forceHelperSize)&&helper.width(this.currentItem.width()),(!helper[0].style.height||o.forceHelperSize)&&helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,($("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter===this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!noPropagation){for(this._trigger("beforeStop",event,this._uiHash()),i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!1}if(noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}(jQuery),function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(name=name.replace(/'/g,"\\'"),radios=form?$(form).find("[name='"+name+"']"):$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton="checkbox"===this.type||"radio"===this.type,activeClass=toggleButton?"":"ui-state-active",focusClass="ui-state-focus";null===options.label&&(options.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){options.disabled||this===lastActive&&$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){options.disabled||$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)}),toggleButton&&(this.element.bind("change"+this.eventNamespace,function(){clickDragged||that.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){options.disabled||(clickDragged=!1,startXPos=event.pageX,startYPos=event.pageY)}).bind("mouseup"+this.eventNamespace,function(event){options.disabled||(startXPos!==event.pageX||startYPos!==event.pageY)&&(clickDragged=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return options.disabled||clickDragged?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return!1;$(this).addClass("ui-state-active"),that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return options.disabled?!1:($(this).addClass("ui-state-active"),lastActive=this,void that.document.one("mouseup",function(){lastActive=null}))}).bind("mouseup"+this.eventNamespace,function(){return options.disabled?!1:void $(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){return options.disabled?!1:void((event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER)&&$(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(ancestor=this.element.parents().last(),labelSelector="label[for='"+this.element.attr("id")+"']",this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible"),checked=this.element.is(":checked"),checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",checked)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(key,value){return this._super(key,value),"disabled"===key?void(value?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),"radio"===this.type?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",$.trim(buttonText)))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){"disabled"===key&&this.buttons.button("option",key,value),this._super(key,value)},refresh:function(){var rtl="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){var sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};$.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&$.fn.draggable&&this._makeDraggable(),this.options.resizable&&$.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var element=this.options.appendTo;return element&&(element.jquery||element.nodeType)?$(element):this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=originalPosition.parent.children().eq(originalPosition.index),next.length&&next[0]!==this.element[0]?next.before(this.element):originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var that=this;this._isOpen&&this._trigger("beforeClose",event)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||$(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return moved&&!silent&&this._trigger("focus",event),moved},open:function(){var that=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=$(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){that._focusTabbable(),that._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");hasFocus.length||(hasFocus=this.element.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogTitlebarClose.filter(":tabbable")),hasFocus.length||(hasFocus=this.uiDialog),hasFocus.eq(0).focus()},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);isActive||this._focusTabbable()}event.preventDefault(),checkFocus.call(this),this._delay(checkFocus)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE)return event.preventDefault(),void this.close(event);if(event.keyCode===$.ui.keyCode.TAB){var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");event.target!==last[0]&&event.target!==this.uiDialog[0]||event.shiftKey?event.target!==first[0]&&event.target!==this.uiDialog[0]||!event.shiftKey||(last.focus(1),event.preventDefault()):(first.focus(1),event.preventDefault())}},mousedown:function(event){this._moveToTop(event)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(event){$(event.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault(),this.close(event)}}),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(uiDialogTitle),this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")})},_title:function(title){this.options.title||title.html("&#160;"),title.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var that=this,buttons=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(buttons)||$.isArray(buttons)&&!buttons.length?void this.uiDialog.removeClass("ui-dialog-buttons"):($.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props,props=$.extend({type:"button"},props),click=props.click,props.click=function(){click.apply(that.element[0],arguments)},buttonOptions={icons:props.icons,
text:props.showText},delete props.icons,delete props.showText,$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._blockFrames(),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()],$(this).removeClass("ui-dialog-dragging"),that._unblockFrames(),that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._blockFrames(),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){options.height=$(this).height(),options.width=$(this).width(),$(this).removeClass("ui-dialog-resizing"),that._unblockFrames(),that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=this.uiDialog.is(":visible");isVisible||this.uiDialog.show(),this.uiDialog.position(this.options.position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resize=!1,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;"dialogClass"===key&&uiDialog.removeClass(this.options.dialogClass).addClass(value),"disabled"!==key&&(this._super(key,value),"appendTo"===key&&this.uiDialog.appendTo(this._appendTo()),"buttons"===key&&this._createButtons(),"closeText"===key&&this.uiDialogTitlebarClose.button({label:""+value}),"draggable"===key&&(isDraggable=uiDialog.is(":data(ui-draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable()),"position"===key&&this._position(),"resizable"===key&&(isResizable=uiDialog.is(":data(ui-resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable()),"title"===key&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),maxContentHeight="number"==typeof options.maxHeight?Math.max(0,options.maxHeight-nonContentHeight):"none","auto"===options.height?this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"}):this.element.height(Math.max(0,options.height-nonContentHeight)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(event){return $(event.target).closest(".ui-dialog").length?!0:!!$(event.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var that=this,widgetFullName=this.widgetFullName;$.ui.dialog.overlayInstances||this._delay(function(){$.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(event){that._allowInteraction(event)||(event.preventDefault(),$(".ui-dialog:visible:last .ui-dialog-content").data(widgetFullName)._focusTabbable())})}),this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),$.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&($.ui.dialog.overlayInstances--,$.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),$.ui.dialog.overlayInstances=0,$.uiBackCompat!==!1&&$.widget("ui.dialog",$.ui.dialog,{_position:function(){var isVisible,position=this.options.position,myAt=[],offset=[0,0];position?(("string"==typeof position||"object"==typeof position&&"0"in position)&&(myAt=position.split?position.split(" "):[position[0],position[1]],1===myAt.length&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")}),position=$.extend({},$.ui.dialog.prototype.options.position,position)):position=$.ui.dialog.prototype.options.position,isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.position(position),isVisible||this.uiDialog.hide()}})}(jQuery),function($,undefined){$.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){this.options.disabled&&event.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");!this.mouseHandled&&target.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(event),target.has(".ui-menu").length?this.expand(event):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);keepActiveItem||this.focus(event,item)},blur:function(event){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){$(event.target).closest(".ui-menu").length||this.collapseAll(event),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var match,prev,character,skip,regex,preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())}),match=skip&&-1!==match.index(this.active.next())?this.active.nextAll(".ui-menu-item"):match,match.length||(character=String.fromCharCode(event.keyCode),regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())})),match.length?(this.focus(event,match),match.length>1?(this.previousFilter=character,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(event):this.select(event))},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))}),menus=submenus.add(this.element),menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);/[^\-\u2014\u2013\s]/.test(item.text())||item.addClass("ui-widget-content ui-menu-divider")}),menus.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){"icons"===key&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu),this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&"focus"===event.type),this._scrollIntoView(item),this.active=item.first(),focused=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),event&&"keydown"===event.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),nested=item.children(".ui-menu"),nested.length&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.height(),0>offset?this.activeMenu.scrollTop(scroll+offset):offset+itemHeight>elementHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active}))},_startOpening:function(submenu){clearTimeout(this.timer),"true"===submenu.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(submenu)},this.delay))},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);newItem&&newItem.length&&(this._close(),this.focus(event,newItem))},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();newItem&&newItem.length&&(this._open(newItem.parent()),this._delay(function(){this.focus(event,newItem)}))},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(next="first"===direction||"last"===direction?this.active["first"===direction?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[direction+"All"](".ui-menu-item").eq(0)),next&&next.length&&this.active||(next=this.activeMenu.children(".ui-menu-item")[filter]()),this.focus(event,next)},nextPage:function(event){var item,base,height;return this.active?void(this.isLastItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base-height<0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(event)},previousPage:function(event){var item,base,height;return this.active?void(this.isFirstItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base+height>0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item").first()))):void this.next(event)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(event,!0),this._trigger("select",event,ui)}})}(jQuery),function($,undefined){$.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(newValue){return newValue===undefined?this.options.value:(this.options.value=this._constrainedValue(newValue),void this._refreshValue())},_constrainedValue:function(newValue){return newValue===undefined&&(newValue=this.options.value),this.indeterminate=newValue===!1,"number"!=typeof newValue&&(newValue=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,newValue))},_setOptions:function(options){var value=options.value;delete options.value,this._super(options),this.options.value=this._constrainedValue(value),this._refreshValue()},_setOption:function(key,value){"max"===key&&(value=Math.max(this.min,value)),this._super(key,value)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==value&&(this.oldValue=value,this._trigger("change")),value===this.options.max&&this._trigger("complete")}})}(jQuery),function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handles=[];for(handleCount=options.values&&options.values.length||1,existingHandles.length>handleCount&&(existingHandles.slice(handleCount).remove(),existingHandles=existingHandles.slice(0,handleCount)),i=existingHandles.length;handleCount>i;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";options.range?(options.range===!0&&(options.values?options.values.length&&2!==options.values.length?options.values=[options.values[0],options.values[0]]:$.isArray(options.values)&&(options.values=options.values.slice(0)):options.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=$("<div></div>").appendTo(this.element),classes="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(classes+("min"===options.range||"max"===options.range?" ui-slider-range-"+options.range:""))):this.range=$([])},_setupEvents:function(){var elements=this.handles.add(this.range).filter("a");this._off(elements),this._on(elements,this._handleEvents),this._hoverable(elements),this._focusable(elements)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))&&(distance=thisDistance,closestHandle=$(this),index=i)}),allowed=this._start(event,index),allowed===!1?!1:(this._mouseSliding=!0,this._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return"horizontal"===this.orientation?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),percentMouse=pixelMouse/pixelTotal,percentMouse>1&&(percentMouse=1),0>percentMouse&&(percentMouse=0),"vertical"===this.orientation&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),2===this.options.values.length&&this.options.range===!0&&(0===index&&newVal>otherVal||1===index&&otherVal>newVal)&&(newVal=otherVal),newVal!==this.values(index)&&(newValues=this.values(),newValues[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),allowed!==!1&&this.values(index,newVal,!0))):newVal!==this.value()&&(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}),allowed!==!1&&this.value(newVal))},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._lastChangedValue=index,this._trigger("change",event,uiHash)}},value:function(newValue){return arguments.length?(this.options.value=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,0)):this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1)return this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,index);if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();for(vals=this.options.values,newValues=arguments[0],i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;switch("range"===key&&this.options.range===!0&&("min"===value?(this.options.value=this._values(0),this.options.values=null):"max"===value&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),$.isArray(this.options.values)&&(valsLength=this.options.values.length),$.Widget.prototype._setOption.apply(this,arguments),key){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;valsLength>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val)},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val);if(this.options.values&&this.options.values.length){for(vals=this.options.values.slice(),i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return 2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=this._animateOff?!1:o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100,_set["horizontal"===that.orientation?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),that.options.range===!0&&("horizontal"===that.orientation?(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),lastValPercent=valPercent}):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set["horizontal"===this.orientation?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(event.preventDefault(),!this._keySliding&&(this._keySliding=!0,$(event.target).addClass("ui-state-active"),allowed=this._start(event,index),allowed===!1))return}switch(step=this.options.step,curVal=newVal=this.options.values&&this.options.values.length?this.values(index):this.value(),event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},click:function(event){event.preventDefault()},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(event,index),this._change(event,index),$(event.target).removeClass("ui-state-active"))}}})}(jQuery),function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments),this._refresh(),previous!==this.element.val()&&this._trigger("change")}}$.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){
this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;return $.each(["min","max","step"],function(i,option){var value=element.attr(option);void 0!==value&&value.length&&(options[option]=value)}),options},_events:{keydown:function(event){this._start(event)&&this._keydown(event)&&event.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",event)))},mousewheel:function(event,delta){if(delta){if(!this.spinning&&!this._start(event))return!1;this._spin((delta>0?1:-1)*this.options.step,event),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(event)},100),event.preventDefault()}},"mousedown .ui-spinner-button":function(event){function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;isActive||(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous}))}var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),event.preventDefault(),checkFocus.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,checkFocus.call(this)}),this._start(event)!==!1&&this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){return $(event.currentTarget).hasClass("ui-state-active")?this._start(event)===!1?!1:void this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*uiSpinner.height())&&uiSpinner.height()>0&&uiSpinner.height(uiSpinner.height()),this.options.disabled&&this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:return this._repeat(null,1,event),!0;case keyCode.DOWN:return this._repeat(null,-1,event),!0;case keyCode.PAGE_UP:return this._repeat(null,options.page,event),!0;case keyCode.PAGE_DOWN:return this._repeat(null,-options.page,event),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(event){return this.spinning||this._trigger("start",event)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(i,steps,event){i=i||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,steps,event)},i),this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=this.value()||0;this.counter||(this.counter=1),value=this._adjustValue(value+step*this._increment(this.counter)),this.spinning&&this._trigger("spin",event,{value:value})===!1||(this._value(value),this.counter++)},_increment:function(i){var incremental=this.options.incremental;return incremental?$.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5e4-i*i/500+17*i/200+1):1},_precision:function(){var precision=this._precisionOf(this.options.step);return null!==this.options.min&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return-1===decimal?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;return base=null!==options.min?options.min:0,aboveMin=value-base,aboveMin=Math.round(aboveMin/options.step)*options.step,value=base+aboveMin,value=parseFloat(value.toFixed(this._precision())),null!==options.max&&value>options.max?options.max:null!==options.min&&value<options.min?options.min:value},_stop:function(event){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",event))},_setOption:function(key,value){if("culture"===key||"numberFormat"===key){var prevValue=this._parse(this.element.val());return this.options[key]=value,void this.element.val(this._format(prevValue))}("max"===key||"min"===key||"step"===key)&&"string"==typeof value&&(value=this._parse(value)),"icons"===key&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down)),this._super(key,value),"disabled"===key&&(value?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:modifier(function(options){this._super(options),this._value(this.element.val())}),_parse:function(val){return"string"==typeof val&&""!==val&&(val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val),""===val||isNaN(val)?null:val},_format:function(value){return""===value?"":window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(value,allowAny){var parsed;""!==value&&(parsed=this._parse(value),null!==parsed&&(allowAny||(parsed=this._adjustValue(parsed)),value=this._format(parsed))),this.element.val(value),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:modifier(function(steps){this._stepUp(steps)}),_stepUp:function(steps){this._start()&&(this._spin((steps||1)*this.options.step),this._stop())},stepDown:modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){this._start()&&(this._spin((steps||1)*-this.options.step),this._stop())},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){return arguments.length?void modifier(this._value).call(this,newVal):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function isLocal(anchor){return anchor.hash.length>1&&decodeURIComponent(anchor.href.replace(rhash,""))===decodeURIComponent(location.href.replace(rhash,""))}var tabId=0,rhash=/#.*$/;$.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){$(this).is(".ui-state-disabled")&&event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){$(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),options.active=this._initialActive(),$.isArray(options.disabled)&&(options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(options.active):this.active=$(),this._refresh(),this.active.length&&this.load(options.active)},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);return null===active&&(locationHash&&this.tabs.each(function(i,tab){return $(tab).attr("aria-controls")===locationHash?(active=i,!1):void 0}),null===active&&(active=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===active||-1===active)&&(active=this.tabs.length?0:!1)),active!==!1&&(active=this.tabs.index(this.tabs.eq(active)),-1===active&&(active=collapsible?!1:0)),!collapsible&&active===!1&&this.anchors.length&&(active=0),active},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=!0;if(!this._handlePageNav(event)){switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=!1,selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex);case $.ui.keyCode.ENTER:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex===this.options.active?!1:selectedIndex);default:return}event.preventDefault(),clearTimeout(this.activating),selectedIndex=this._focusNextTab(selectedIndex,goingForward),event.ctrlKey||(focusedTab.attr("aria-selected","false"),this.tabs.eq(selectedIndex).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",selectedIndex)},this.delay))}},_panelKeydown:function(event){this._handlePageNav(event)||event.ctrlKey&&event.keyCode===$.ui.keyCode.UP&&(event.preventDefault(),this.active.focus())},_handlePageNav:function(event){return event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(index,goingForward){function constrain(){return index>lastTabIndex&&(index=0),0>index&&(index=lastTabIndex),index}for(var lastTabIndex=this.tabs.length-1;-1!==$.inArray(constrain(),this.options.disabled);)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){return index=this._findNextTab(index,goingForward),this.tabs.eq(index).focus(),index},_setOption:function(key,value){return"active"===key?void this._activate(value):"disabled"===key?void this._setupDisabled(value):(this._super(key,value),"collapsible"===key&&(this.element.toggleClass("ui-tabs-collapsible",value),value||this.options.active!==!1||this._activate(0)),"event"===key&&this._setupEvents(value),void("heightStyle"===key&&this._setupHeightStyle(value)))},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)}),this._processTabs(),options.active!==!1&&this.anchors.length?this.active.length&&!$.contains(this.tablist[0],this.active[0])?this.tabs.length===options.disabled.length?(options.active=!1,this.active=$()):this._activate(this._findNextTab(Math.max(0,options.active-1),!1)):options.active=this.tabs.index(this.active):(options.active=!1,this.active=$()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");isLocal(anchor)?(selector=anchor.hash,panel=that.element.find(that._sanitizeSelector(selector))):(panelId=that._tabId(tab),selector="#"+panelId,panel=that.element.find(selector),panel.length||(panel=that._createPanel(panelId),panel.insertAfter(that.panels[i-1]||that.tablist)),panel.attr("aria-live","polite")),panel.length&&(that.panels=that.panels.add(panel)),originalAriaControls&&tab.data("ui-tabs-aria-controls",originalAriaControls),tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId}),panel.attr("aria-labelledby",anchorId)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(disabled){$.isArray(disabled)&&(disabled.length?disabled.length===this.anchors.length&&(disabled=!0):disabled=!1);for(var li,i=0;li=this.tabs[i];i++)disabled===!0||-1!==$.inArray(i,disabled)?$(li).addClass("ui-state-disabled").attr("aria-disabled","true"):$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,events),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();"fill"===heightStyle?(maxHeight=parent.height(),maxHeight-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(!0)}),this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight))},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=active.length?this._getPanelForTab(active):$(),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault(),tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.tabs.index(tab),this.active=clickedIsActive?$():tab,this.xhr&&this.xhr.abort(),toHide.length||toShow.length||$.error("jQuery UI Tabs: Mismatching fragment identifier."),toShow.length&&this.load(this.tabs.index(tab),event),this._toggle(event,eventData))},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&that.options.show?that._show(toShow,that.options.show,complete):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=!0,toHide.length&&this.options.hide?this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),eventData.oldTab.attr("aria-selected","false"),toShow.length&&toHide.length?eventData.oldTab.attr("tabIndex",-1):toShow.length&&this.tabs.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}),eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);active[0]!==this.active[0]&&(active.length||(active=this.active),anchor=active.find(".ui-tabs-anchor")[0],this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop}))},_findActive:function(index){return index===!1?$():this.tabs.eq(index)},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))),index},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){$.data(this,"ui-tabs-destroy")?$(this).remove():$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");prev?li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls"):li.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;disabled!==!1&&(index===undefined?disabled=!1:(index=this._getIndex(index),disabled=$.isArray(disabled)?$.map(disabled,function(num){return num!==index?num:null}):$.map(this.tabs,function(li,num){return num!==index?num:null})),this._setupDisabled(disabled))},disable:function(index){var disabled=this.options.disabled;if(disabled!==!0){if(index===undefined)disabled=!0;else{if(index=this._getIndex(index),-1!==$.inArray(index,disabled))return;disabled=$.isArray(disabled)?$.merge([index],disabled).sort():[index]}this._setupDisabled(disabled)}},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};isLocal(anchor[0])||(this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData)),this.xhr&&"canceled"!==this.xhr.statusText&&(tab.addClass("ui-tabs-loading"),panel.attr("aria-busy","true"),this.xhr.success(function(response){setTimeout(function(){panel.html(response),that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){"abort"===status&&that.panels.stop(!1,!0),tab.removeClass("ui-tabs-loading"),panel.removeAttr("aria-busy"),jqXHR===that.xhr&&delete that.xhr},1)})))},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}})}(jQuery),function($){function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id),elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);-1!==index&&describedby.splice(index,1),elem.removeData("ui-tooltip-id"),describedby=$.trim(describedby.join(" ")),describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")}var increments=0;$.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(key,value){var that=this;return"disabled"===key?(this[value?"_disable":"_enable"](),void(this.options[key]=value)):(this._super(key,value),void("content"===key&&$.each(this.tooltips,function(id,element){that._updateContent(element)})))},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0)}),this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);target.length&&!target.data("ui-tooltip-id")&&(target.attr("title")&&target.data("ui-tooltip-title",target.attr("title")),target.data("ui-tooltip-open",!0),event&&"mouseover"===event.type&&target.parents().each(function(){var blurEvent,parent=$(this);parent.data("ui-tooltip-open")&&(blurEvent=$.Event("blur"),blurEvent.target=blurEvent.currentTarget=this,that.close(blurEvent,!0)),parent.attr("title")&&(parent.uniqueId(),that.parents[this.id]={element:this,title:parent.attr("title")},parent.attr("title",""))}),this._updateContent(target,event))},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;return"string"==typeof contentOption?this._open(event,target,contentOption):(content=contentOption.call(target[0],function(response){target.data("ui-tooltip-open")&&that._delay(function(){event&&(event.type=eventType),this._open(event,target,response)})}),void(content&&this._open(event,target,content)))},_open:function(event,target,content){function position(event){positionOption.of=event,tooltip.is(":hidden")||tooltip.position(positionOption)}var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);if(content){if(tooltip=this._find(target),tooltip.length)return void tooltip.find(".ui-tooltip-content").html(content);target.is("[title]")&&(event&&"mouseover"===event.type?target.attr("title",""):target.removeAttr("title")),tooltip=this._tooltip(target),addDescribedBy(target,tooltip.attr("id")),tooltip.find(".ui-tooltip-content").html(content),this.options.track&&event&&/^mouse/.test(event.type)?(this._on(this.document,{mousemove:position}),position(event)):tooltip.position($.extend({of:target},this.options.position)),tooltip.hide(),this._show(tooltip,this.options.show),this.options.show&&this.options.show.delay&&(delayedShow=this.delayedShow=setInterval(function(){tooltip.is(":visible")&&(position(positionOption.of),clearInterval(delayedShow))},$.fx.interval)),this._trigger("open",event,{tooltip:tooltip}),events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0],this.close(fakeEvent,!0)}},remove:function(){this._removeTooltip(tooltip)}},event&&"mouseover"!==event.type||(events.mouseleave="close"),event&&"focusin"!==event.type||(events.focusout="close"),this._on(!0,target,events)}},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);this.closing||(clearInterval(this.delayedShow),target.data("ui-tooltip-title")&&target.attr("title",target.data("ui-tooltip-title")),removeDescribedBy(target),tooltip.stop(!0),this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))}),target.removeData("ui-tooltip-open"),this._off(target,"mouseleave focusout keyup"),target[0]!==this.element[0]&&this._off(target,"remove"),this._off(this.document,"mousemove"),event&&"mouseleave"===event.type&&$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title),delete that.parents[id]}),this.closing=!0,this._trigger("close",event,{tooltip:tooltip}),this.closing=!1)},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return $("<div>").addClass("ui-tooltip-content").appendTo(tooltip),tooltip.appendTo(this.document[0].body),this.tooltips[id]=element,tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove(),delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0),$("#"+id).remove(),element.data("ui-tooltip-title")&&(element.attr("title",element.data("ui-tooltip-title")),element.removeData("ui-tooltip-title"))})}})}(jQuery)}(ChemDoodle.lib.jQuery),function($){$.fn.simpleColor=function(options){function buildChooser(index){options=$.simpleColorOptions;var container=$("<div class='simpleColorContainer' />");container.css("position","relative");var defaultColor=this.value&&""!=this.value?this.value:options.defaultColor,displayBox=$("<div class='simpleColorDisplay' />");displayBox.css($.extend(options.displayCSS,{"background-color":defaultColor})),displayBox.data("color",defaultColor),container.append(displayBox),options.displayColorCode&&(displayBox.data("displayColorCode",!0),displayBox.text(this.value),displayBox.css({color:options.colorCodeColor,textAlign:options.colorCodeAlign}));var selectCallback=function(event){if($("html").bind("click.simpleColorDisplay",function(e){$("html").unbind("click.simpleColorDisplay"),$(".simpleColorChooser").hide();var target=$(e.target);(target.is(".simpleColorCell")===!1||$.contains($(event.target).closest(".simpleColorContainer")[0],target[0])===!1)&&(displayBox.css("background-color",displayBox.data("color")),options.displayColorCode&&displayBox.text(displayBox.data("color"))),options.onClose&&options.onClose(element)}),event.data.container.chooser)event.data.container.chooser.toggle();else{var chooser=$("<div class='simpleColorChooser'/>");chooser.css(options.chooserCSS),event.data.container.chooser=chooser,event.data.container.append(chooser);for(var i=0;i<options.colors.length;i++){var cell=$("<div class='simpleColorCell' id='"+options.colors[i]+"'/>");cell.css({width:options.cellWidth+"px",height:options.cellHeight+"px",margin:options.cellMargin+"px",cursor:"pointer",lineHeight:options.cellHeight+"px",fontSize:"1px","float":"left","background-color":"#"+options.colors[i]}),chooser.append(cell),(options.onCellEnter||options.livePreview)&&cell.bind("mouseenter",function(event){options.onCellEnter&&options.onCellEnter(this.id,element),options.livePreview&&(displayBox.css("background-color","#"+this.id),options.displayColorCode&&displayBox.text("#"+this.id))}),cell.bind("click",{input:event.data.input,chooser:chooser,displayBox:displayBox},function(event){var color="#"+this.id;event.data.input.value=color,$(event.data.input).change(),$(event.data.displayBox).data("color",color),event.data.displayBox.css("background-color",color),event.data.chooser.hide(),options.displayColorCode&&event.data.displayBox.text(color),options.onSelect&&options.onSelect(color,element)})}}},callbackParams={input:this,container:container,displayBox:displayBox};displayBox.bind("click",callbackParams,selectCallback),$(this).after(container),$(this).data("container",container)}var element=this,defaultColors=["990033","ff3366","cc0033","ff0033","ff9999","cc3366","ffccff","cc6699","993366","660033","cc3399","ff99cc","ff66cc","ff99ff","ff6699","cc0066","ff0066","ff3399","ff0099","ff33cc","ff00cc","ff66ff","ff33ff","ff00ff","cc0099","990066","cc66cc","cc33cc","cc99ff","cc66ff","cc33ff","993399","cc00cc","cc00ff","9900cc","990099","cc99cc","996699","663366","660099","9933cc","660066","9900ff","9933ff","9966cc","330033","663399","6633cc","6600cc","9966ff","330066","6600ff","6633ff","ccccff","9999ff","9999cc","6666cc","6666ff","666699","333366","333399","330099","3300cc","3300ff","3333ff","3333cc","0066ff","0033ff","3366ff","3366cc","000066","000033","0000ff","000099","0033cc","0000cc","336699","0066cc","99ccff","6699ff","003366","6699cc","006699","3399cc","0099cc","66ccff","3399ff","003399","0099ff","33ccff","00ccff","99ffff","66ffff","33ffff","00ffff","00cccc","009999","669999","99cccc","ccffff","33cccc","66cccc","339999","336666","006666","003333","00ffcc","33ffcc","33cc99","00cc99","66ffcc","99ffcc","00ff99","339966","006633","336633","669966","66cc66","99ff99","66ff66","339933","99cc99","66ff99","33ff99","33cc66","00cc66","66cc99","009966","009933","33ff66","00ff66","ccffcc","ccff99","99ff66","99ff33","00ff33","33ff33","00cc33","33cc33","66ff33","00ff00","66cc33","006600","003300","009900","33ff00","66ff00","99ff00","66cc00","00cc00","33cc00","339900","99cc66","669933","99cc33","336600","669900","99cc00","ccff66","ccff33","ccff00","999900","cccc00","cccc33","333300","666600","999933","cccc66","666633","999966","cccc99","ffffcc","ffff99","ffff66","ffff33","ffff00","ffcc00","ffcc66","ffcc33","cc9933","996600","cc9900","ff9900","cc6600","993300","cc6633","663300","ff9966","ff6633","ff9933","ff6600","cc3300","996633","330000","663333","996666","cc9999","993333","cc6666","ffcccc","ff3333","cc3333","ff6666","660000","990000","cc0000","ff0000","ff3300","cc9966","ffcc99","ffffff","cccccc","999999","666666","333333","000000","000000","000000","000000","000000","000000","000000","000000","000000"];return options=$.extend({defaultColor:this.attr("defaultColor")||"#FFF",cellWidth:this.attr("cellWidth")||10,cellHeight:this.attr("cellHeight")||10,cellMargin:this.attr("cellMargin")||1,boxWidth:this.attr("boxWidth")||"115px",boxHeight:this.attr("boxHeight")||"20px",columns:this.attr("columns")||16,insert:this.attr("insert")||"after",colors:this.attr("colors")||defaultColors,displayColorCode:this.attr("displayColorCode")||!1,
colorCodeAlign:this.attr("colorCodeAlign")||"center",colorCodeColor:this.attr("colorCodeColor")||"#FFF",onSelect:null,onCellEnter:null,onClose:null,livePreview:!1},options||{}),options.totalWidth=options.columns*(options.cellWidth+2*options.cellMargin),options.chooserCSS=$.extend({border:"1px solid #000",margin:"0 0 0 5px",width:options.totalWidth,height:options.totalHeight,top:0,left:options.boxWidth,position:"absolute","background-color":"#fff"},options.chooserCSS||{}),options.displayCSS=$.extend({"background-color":options.defaultColor,border:"1px solid #000",width:options.boxWidth,height:options.boxHeight,"line-height":options.boxHeight+"px",cursor:"pointer"},options.displayCSS||{}),this.hide(),-1!=navigator.userAgent.indexOf("MSIE")&&(options.totalWidth+=2),options.totalHeight=Math.ceil(options.colors.length/options.columns)*(options.cellHeight+2*options.cellMargin),$.simpleColorOptions=options,this.each(buildChooser),$(".simpleColorDisplay").each(function(){$(this).click(function(e){e.stopPropagation()})}),this},$.fn.closeChooser=function(){return this.each(function(index){$(this).data("container").find(".simpleColorChooser").hide()}),this},$.fn.setColor=function(color){return this.each(function(index){var displayBox=$(this).data("container").find(".simpleColorDisplay");displayBox.css("background-color",color).data("color",color),displayBox.data("displayColorCode")===!0&&displayBox.text(color)}),this}}(ChemDoodle.lib.jQuery),ChemDoodle.uis=function(){"use strict";var p={};return p.actions={},p.gui={},p.gui.desktop={},p.gui.mobile={},p.states={},p.tools={},p}(),function(actions){"use strict";actions._Action=function(){};var _=actions._Action.prototype;_.forward=function(sketcher){this.innerForward(),this.checks(sketcher)},_.reverse=function(sketcher){this.innerReverse(),this.checks(sketcher)},_.checks=function(sketcher){for(var i=0,ii=sketcher.molecules.length;ii>i;i++)sketcher.molecules[i].check();sketcher.lasso&&sketcher.lasso.isActive()&&sketcher.lasso.setBounds(),sketcher.repaint()}}(ChemDoodle.uis.actions),function(informatics,structures,actions){"use strict";actions.AddAction=function(sketcher,a,as,bs){this.sketcher=sketcher,this.a=a,this.as=as,this.bs=bs};var _=actions.AddAction.prototype=new actions._Action;_.innerForward=function(){var mol=this.sketcher.getMoleculeByAtom(this.a);if(mol||(mol=new structures.Molecule,this.sketcher.molecules.push(mol)),this.as)for(var i=0,ii=this.as.length;ii>i;i++)mol.atoms.push(this.as[i]);if(this.bs){for(var merging=[],i=0,ii=this.bs.length;ii>i;i++){var b=this.bs[i];if(-1===mol.atoms.indexOf(b.a1)){var otherMol=this.sketcher.getMoleculeByAtom(b.a1);-1===merging.indexOf(otherMol)&&merging.push(otherMol)}if(-1===mol.atoms.indexOf(b.a2)){var otherMol=this.sketcher.getMoleculeByAtom(b.a2);-1===merging.indexOf(otherMol)&&merging.push(otherMol)}mol.bonds.push(b)}for(var i=0,ii=merging.length;ii>i;i++){var molRemoving=merging[i];this.sketcher.removeMolecule(molRemoving),mol.atoms=mol.atoms.concat(molRemoving.atoms),mol.bonds=mol.bonds.concat(molRemoving.bonds)}}},_.innerReverse=function(){var mol=this.sketcher.getMoleculeByAtom(this.a);if(this.as){for(var aKeep=[],i=0,ii=mol.atoms.length;ii>i;i++)-1===this.as.indexOf(mol.atoms[i])&&aKeep.push(mol.atoms[i]);mol.atoms=aKeep}if(this.bs){for(var bKeep=[],i=0,ii=mol.bonds.length;ii>i;i++)-1===this.bs.indexOf(mol.bonds[i])&&bKeep.push(mol.bonds[i]);mol.bonds=bKeep}if(0===mol.atoms.length)this.sketcher.removeMolecule(mol);else{var split=(new informatics.Splitter).split(mol);if(split.length>1){this.sketcher.removeMolecule(mol);for(var i=0,ii=split.length;ii>i;i++)this.sketcher.molecules.push(split[i])}}}}(ChemDoodle.informatics,ChemDoodle.structures,ChemDoodle.uis.actions),function(actions){"use strict";actions.AddShapeAction=function(sketcher,s){this.sketcher=sketcher,this.s=s};var _=actions.AddShapeAction.prototype=new actions._Action;_.innerForward=function(){this.sketcher.shapes.push(this.s)},_.innerReverse=function(){this.sketcher.removeShape(this.s)}}(ChemDoodle.uis.actions),function(actions,Bond,m){"use strict";actions.ChangeBondAction=function(b,orderAfter,stereoAfter){this.b=b,this.orderBefore=b.bondOrder,this.stereoBefore=b.stereo,orderAfter?(this.orderAfter=orderAfter,this.stereoAfter=stereoAfter):(this.orderAfter=m.floor(b.bondOrder+1),this.orderAfter>3&&(this.orderAfter=1),this.stereoAfter=Bond.STEREO_NONE)};var _=actions.ChangeBondAction.prototype=new actions._Action;_.innerForward=function(){this.b.bondOrder=this.orderAfter,this.b.stereo=this.stereoAfter},_.innerReverse=function(){this.b.bondOrder=this.orderBefore,this.b.stereo=this.stereoBefore}}(ChemDoodle.uis.actions,ChemDoodle.structures.Bond,Math),function(actions,m){"use strict";actions.ChangeBracketAttributeAction=function(s,type){this.s=s,this.type=type};var _=actions.ChangeBracketAttributeAction.prototype=new actions._Action;_.innerForward=function(){var c=this.type>0?1:-1;switch(m.abs(this.type)){case 1:this.s.charge+=c;break;case 2:this.s.repeat+=c;break;case 3:this.s.mult+=c}},_.innerReverse=function(){var c=this.type>0?-1:1;switch(m.abs(this.type)){case 1:this.s.charge+=c;break;case 2:this.s.repeat+=c;break;case 3:this.s.mult+=c}}}(ChemDoodle.uis.actions,Math),function(actions){"use strict";actions.ChangeChargeAction=function(a,delta){this.a=a,this.delta=delta};var _=actions.ChangeChargeAction.prototype=new actions._Action;_.innerForward=function(){this.a.charge+=this.delta},_.innerReverse=function(){this.a.charge-=this.delta}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ChangeCoordinatesAction=function(as,newCoords){this.as=as,this.recs=[];for(var i=0,ii=this.as.length;ii>i;i++)this.recs[i]={xo:this.as[i].x,yo:this.as[i].y,xn:newCoords[i].x,yn:newCoords[i].y}};var _=actions.ChangeCoordinatesAction.prototype=new actions._Action;_.innerForward=function(){for(var i=0,ii=this.as.length;ii>i;i++)this.as[i].x=this.recs[i].xn,this.as[i].y=this.recs[i].yn},_.innerReverse=function(){for(var i=0,ii=this.as.length;ii>i;i++)this.as[i].x=this.recs[i].xo,this.as[i].y=this.recs[i].yo}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ChangeLabelAction=function(a,after){this.a=a,this.before=a.label,this.after=after};var _=actions.ChangeLabelAction.prototype=new actions._Action;_.innerForward=function(){this.a.label=this.after},_.innerReverse=function(){this.a.label=this.before}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ChangeLonePairAction=function(a,delta){this.a=a,this.delta=delta};var _=actions.ChangeLonePairAction.prototype=new actions._Action;_.innerForward=function(){this.a.numLonePair+=this.delta},_.innerReverse=function(){this.a.numLonePair-=this.delta}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ChangeQueryAction=function(o,after){this.o=o,this.before=o.query,this.after=after};var _=actions.ChangeQueryAction.prototype=new actions._Action;_.innerForward=function(){this.o.query=this.after},_.innerReverse=function(){this.o.query=this.before}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ChangeRadicalAction=function(a,delta){this.a=a,this.delta=delta};var _=actions.ChangeRadicalAction.prototype=new actions._Action;_.innerForward=function(){this.a.numRadical+=this.delta},_.innerReverse=function(){this.a.numRadical-=this.delta}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ChangeRgroupAction=function(a,rafter){this.a=a,this.rbefore=a.rgroup,this.rafter=rafter};var _=actions.ChangeRgroupAction.prototype=new actions._Action;_.innerForward=function(){this.a.rgroup=this.rafter},_.innerReverse=function(){this.a.rgroup=this.rbefore}}(ChemDoodle.uis.actions),function(structures,actions){"use strict";actions.ClearAction=function(sketcher){this.sketcher=sketcher,this.beforeMols=this.sketcher.molecules,this.beforeShapes=this.sketcher.shapes,this.sketcher.clear(),this.sketcher.oneMolecule&&!this.sketcher.setupScene&&(this.afterMol=new structures.Molecule,this.afterMol.atoms.push(new structures.Atom),this.sketcher.molecules.push(this.afterMol),this.sketcher.center(),this.sketcher.repaint())};var _=actions.ClearAction.prototype=new actions._Action;_.innerForward=function(){this.sketcher.molecules=[],this.sketcher.shapes=[],this.sketcher.oneMolecule&&!this.sketcher.setupScene&&this.sketcher.molecules.push(this.afterMol)},_.innerReverse=function(){this.sketcher.molecules=this.beforeMols,this.sketcher.shapes=this.beforeShapes}}(ChemDoodle.structures,ChemDoodle.uis.actions),function(actions){"use strict";actions.DeleteAction=function(sketcher,a,as,bs){this.sketcher=sketcher,this.a=a,this.as=as,this.bs=bs,this.ss=[]};var _=actions.DeleteAction.prototype=new actions._Action;_.innerForwardAReverse=actions.AddAction.prototype.innerReverse,_.innerReverseAForward=actions.AddAction.prototype.innerForward,_.innerForward=function(){this.innerForwardAReverse();for(var i=0,ii=this.ss.length;ii>i;i++)this.sketcher.removeShape(this.ss[i])},_.innerReverse=function(){this.innerReverseAForward(),this.ss.length>0&&(this.sketcher.shapes=this.sketcher.shapes.concat(this.ss))}}(ChemDoodle.uis.actions),function(informatics,actions){"use strict";actions.DeleteContentAction=function(sketcher,as,ss){this.sketcher=sketcher,this.as=as,this.ss=ss,this.bs=[];for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.bonds.length;jj>j;j++){var b=mol.bonds[j];b.a1.isLassoed&&b.a2.isLassoed&&this.bs.push(b)}};var _=actions.DeleteContentAction.prototype=new actions._Action;_.innerForward=function(){for(var i=0,ii=this.ss.length;ii>i;i++)this.sketcher.removeShape(this.ss[i]);for(var asKeep=[],bsKeep=[],i=0,ii=this.sketcher.molecules.length;ii>i;i++){for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];-1===this.as.indexOf(a)&&asKeep.push(a)}for(var j=0,jj=mol.bonds.length;jj>j;j++){var b=mol.bonds[j];-1===this.bs.indexOf(b)&&bsKeep.push(b)}}this.sketcher.molecules=(new informatics.Splitter).split({atoms:asKeep,bonds:bsKeep})},_.innerReverse=function(){this.sketcher.shapes=this.sketcher.shapes.concat(this.ss);for(var asKeep=[],bsKeep=[],i=0,ii=this.sketcher.molecules.length;ii>i;i++){var mol=this.sketcher.molecules[i];asKeep=asKeep.concat(mol.atoms),bsKeep=bsKeep.concat(mol.bonds)}this.sketcher.molecules=(new informatics.Splitter).split({atoms:asKeep.concat(this.as),bonds:bsKeep.concat(this.bs)})}}(ChemDoodle.informatics,ChemDoodle.uis.actions),function(actions){"use strict";actions.DeleteShapeAction=function(sketcher,s){this.sketcher=sketcher,this.s=s};var _=actions.DeleteShapeAction.prototype=new actions._Action;_.innerForward=actions.AddShapeAction.prototype.innerReverse,_.innerReverse=actions.AddShapeAction.prototype.innerForward}(ChemDoodle.uis.actions),function(actions){"use strict";actions.FlipBondAction=function(b){this.b=b};var _=actions.FlipBondAction.prototype=new actions._Action;_.innerForward=function(){var temp=this.b.a1;this.b.a1=this.b.a2,this.b.a2=temp},_.innerReverse=function(){this.innerForward()}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.MoveAction=function(ps,dif){this.ps=ps,this.dif=dif};var _=actions.MoveAction.prototype=new actions._Action;_.innerForward=function(){for(var i=0,ii=this.ps.length;ii>i;i++)this.ps[i].add(this.dif)},_.innerReverse=function(){for(var i=0,ii=this.ps.length;ii>i;i++)this.ps[i].sub(this.dif)}}(ChemDoodle.uis.actions),function(structures,actions){"use strict";actions.NewMoleculeAction=function(sketcher,as,bs){this.sketcher=sketcher,this.as=as,this.bs=bs};var _=actions.NewMoleculeAction.prototype=new actions._Action;_.innerForward=function(){var mol=new structures.Molecule;mol.atoms=mol.atoms.concat(this.as),mol.bonds=mol.bonds.concat(this.bs),mol.check(),this.sketcher.addMolecule(mol)},_.innerReverse=function(){this.sketcher.removeMolecule(this.sketcher.getMoleculeByAtom(this.as[0]))}}(ChemDoodle.structures,ChemDoodle.uis.actions),function(actions,m){"use strict";actions.RotateAction=function(ps,dif,center){this.ps=ps,this.dif=dif,this.center=center};var _=actions.RotateAction.prototype=new actions._Action;_.innerForward=function(){for(var i=0,ii=this.ps.length;ii>i;i++){var p=this.ps[i],dist=this.center.distance(p),angle=this.center.angle(p)+this.dif;p.x=this.center.x+dist*m.cos(angle),p.y=this.center.y-dist*m.sin(angle)}},_.innerReverse=function(){for(var i=0,ii=this.ps.length;ii>i;i++){var p=this.ps[i],dist=this.center.distance(p),angle=this.center.angle(p)-this.dif;p.x=this.center.x+dist*m.cos(angle),p.y=this.center.y-dist*m.sin(angle)}}}(ChemDoodle.uis.actions,Math),function(actions){"use strict";actions.SwitchContentAction=function(sketcher,mols,shapes){this.sketcher=sketcher,this.beforeMols=this.sketcher.molecules,this.beforeShapes=this.sketcher.shapes,this.molsA=mols,this.shapesA=shapes};var _=actions.SwitchContentAction.prototype=new actions._Action;_.innerForward=function(){this.sketcher.loadContent(this.molsA,this.shapesA)},_.innerReverse=function(){this.sketcher.molecules=this.beforeMols,this.sketcher.shapes=this.beforeShapes}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.SwitchMoleculeAction=function(sketcher,mol){this.sketcher=sketcher,this.beforeMols=this.sketcher.molecules,this.beforeShapes=this.sketcher.shapes,this.molA=mol};var _=actions.SwitchMoleculeAction.prototype=new actions._Action;_.innerForward=function(){this.sketcher.loadMolecule(this.molA)},_.innerReverse=function(){this.sketcher.molecules=this.beforeMols,this.sketcher.shapes=this.beforeShapes}}(ChemDoodle.uis.actions),function(actions){"use strict";actions.ToggleAnyAtomAction=function(a){this.a=a};var _=actions.ToggleAnyAtomAction.prototype=new actions._Action;_.innerForward=function(){this.a.any=!this.a.any},_.innerReverse=actions.ToggleAnyAtomAction.prototype.innerForward}(ChemDoodle.uis.actions),function(actions){"use strict";actions.HistoryManager=function(sketcher){this.sketcher=sketcher,this.undoStack=[],this.redoStack=[]};var _=actions.HistoryManager.prototype;_.undo=function(){if(0!==this.undoStack.length){this.sketcher.lasso&&this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty();var a=this.undoStack.pop();a.reverse(this.sketcher),this.redoStack.push(a),0===this.undoStack.length&&this.sketcher.toolbarManager.buttonUndo.disable(),this.sketcher.toolbarManager.buttonRedo.enable()}},_.redo=function(){if(0!==this.redoStack.length){this.sketcher.lasso&&this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty();var a=this.redoStack.pop();a.forward(this.sketcher),this.undoStack.push(a),this.sketcher.toolbarManager.buttonUndo.enable(),0===this.redoStack.length&&this.sketcher.toolbarManager.buttonRedo.disable()}},_.pushUndo=function(a){a.forward(this.sketcher),this.undoStack.push(a),0!==this.redoStack.length&&(this.redoStack=[]),this.sketcher.toolbarManager.buttonUndo.enable(),this.sketcher.toolbarManager.buttonRedo.disable()},_.clear=function(){0!==this.undoStack.length&&(this.undoStack=[],this.sketcher.toolbarManager.buttonUndo.disable()),0!==this.redoStack.length&&(this.redoStack=[],this.sketcher.toolbarManager.buttonRedo.disable())}}(ChemDoodle.uis.actions),function(math,monitor,actions,states,structures,SYMBOLS,m){"use strict";states._State=function(){};var _=states._State.prototype;_.setup=function(sketcher){this.sketcher=sketcher},_.clearHover=function(){this.sketcher.hovering&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!1,this.sketcher.hovering=void 0)},_.findHoveredObject=function(e,includeAtoms,includeBonds,includeShapes){this.clearHover();var hovering,min=1/0,hoverdist=this.sketcher.specs.bondLength_2D;if(this.sketcher.isMobile||(hoverdist/=this.sketcher.specs.scale),includeAtoms)for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.isHover=!1;var dist=e.p.distance(a);hoverdist>dist&&min>dist&&(min=dist,hovering=a)}if(includeBonds)for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.bonds.length;jj>j;j++){var b=mol.bonds[j];b.isHover=!1;var dist=e.p.distance(b.getCenter());hoverdist>dist&&min>dist&&(min=dist,hovering=b)}if(includeShapes){for(var i=0,ii=this.sketcher.shapes.length;ii>i;i++){var s=this.sketcher.shapes[i];s.isHover=!1,s.hoverPoint=void 0;for(var sps=s.getPoints(),j=0,jj=sps.length;jj>j;j++){var p=sps[j],dist=e.p.distance(p);hoverdist>dist&&min>dist&&(min=dist,hovering=s,s.hoverPoint=p)}}if(!hovering)for(var i=0,ii=this.sketcher.shapes.length;ii>i;i++){var s=this.sketcher.shapes[i];s.isOver(e.p,hoverdist)&&(hovering=s)}}hovering&&(hovering.isHover=!0,this.sketcher.hovering=hovering)},_.getOptimumAngle=function(a,order){var mol=this.sketcher.getMoleculeByAtom(a),angles=mol.getAngles(a),angle=0;if(0===angles.length)angle=m.PI/6;else if(1===angles.length){for(var b,j=0,jj=mol.bonds.length;jj>j;j++)mol.bonds[j].contains(this.sketcher.hovering)&&(b=mol.bonds[j]);if(b.bondOrder>=3||order>=3)angle=angles[0]+m.PI;else{var concerned=angles[0]%m.PI*2;angle=math.isBetween(concerned,0,m.PI/2)||math.isBetween(concerned,m.PI,3*m.PI/2)?angles[0]+2*m.PI/3:angles[0]-2*m.PI/3}}else{for(var modded,j=0,jj=mol.rings.length;jj>j;j++){var r=mol.rings[j];-1!==r.atoms.indexOf(a)&&(angles.push(a.angle(r.getCenter())),modded=!0)}modded&&angles.sort(),angle=math.angleBetweenLargest(angles).angle}return angle},_.removeStartAtom=function(){this.sketcher.startAtom&&(this.sketcher.startAtom.x=-10,this.sketcher.startAtom.y=-10,this.sketcher.repaint())},_.enter=function(){this.innerenter&&this.innerenter()},_.exit=function(){this.innerexit&&this.innerexit()},_.click=function(e){this.innerclick&&this.innerclick(e)},_.rightclick=function(e){this.innerrightclick&&this.innerrightclick(e)},_.dblclick=function(e){if(this.innerdblclick&&this.innerdblclick(e),!this.sketcher.hovering&&this.sketcher.oneMolecule){var dif=new structures.Point(this.sketcher.width/2,this.sketcher.height/2),bounds=this.sketcher.getContentBounds();dif.x-=(bounds.maxX+bounds.minX)/2,dif.y-=(bounds.maxY+bounds.minY)/2,this.sketcher.historyManager.pushUndo(new actions.MoveAction(this.sketcher.getAllPoints(),dif))}},_.mousedown=function(e){this.sketcher.lastPoint=e.p,this.sketcher.isHelp||this.sketcher.isMobile&&e.op.distance(new structures.Point(this.sketcher.width-20,20))<10?(this.sketcher.isHelp=!1,this.sketcher.lastPoint=void 0,this.sketcher.repaint(),window.open("http://web.chemdoodle.com/demos/sketcher")):this.innermousedown&&this.innermousedown(e)},_.rightmousedown=function(e){this.innerrightmousedown&&this.innerrightmousedown(e)},_.mousemove=function(e){this.innermousemove&&this.innermousemove(e),this.sketcher.repaint()},_.mouseout=function(e){this.innermouseout&&this.innermouseout(e),this.sketcher.isHelp&&(this.sketcher.isHelp=!1,this.sketcher.repaint()),this.sketcher.hovering&&monitor.CANVAS_DRAGGING!=this.sketcher&&(this.sketcher.hovering=void 0,this.sketcher.repaint())},_.mouseover=function(e){this.innermouseover&&this.innermouseover(e)},_.mouseup=function(e){this.parentAction=void 0,this.innermouseup&&this.innermouseup(e)},_.rightmouseup=function(e){this.innerrightmouseup&&this.innerrightmouseup(e)},_.mousewheel=function(e,delta){this.innermousewheel&&this.innermousewheel(e),this.sketcher.specs.scale+=delta/50,this.sketcher.checkScale(),this.sketcher.repaint()},_.drag=function(e){if(this.innerdrag&&this.innerdrag(e),!this.sketcher.hovering&&this!==this.sketcher.stateManager.STATE_LASSO&&this!==this.sketcher.stateManager.STATE_SHAPE&&this!==this.sketcher.stateManager.STATE_PUSHER){if(monitor.SHIFT)if(this.parentAction){var center=this.parentAction.center,oldAngle=center.angle(this.sketcher.lastPoint),newAngle=center.angle(e.p),rot=newAngle-oldAngle;this.parentAction.dif+=rot;for(var i=0,ii=this.parentAction.ps.length;ii>i;i++){var a=this.parentAction.ps[i],dist=center.distance(a),angle=center.angle(a)+rot;a.x=center.x+dist*m.cos(angle),a.y=center.y-dist*m.sin(angle)}for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check()}else{var center=new structures.Point(this.sketcher.width/2,this.sketcher.height/2),oldAngle=center.angle(this.sketcher.lastPoint),newAngle=center.angle(e.p),rot=newAngle-oldAngle;this.parentAction=new actions.RotateAction(this.sketcher.getAllPoints(),rot,center),this.sketcher.historyManager.pushUndo(this.parentAction)}else{if(!this.sketcher.lastPoint)return;var dif=new structures.Point(e.p.x,e.p.y);if(dif.sub(this.sketcher.lastPoint),this.parentAction){this.parentAction.dif.add(dif);for(var i=0,ii=this.parentAction.ps.length;ii>i;i++)this.parentAction.ps[i].add(dif);this.sketcher.lasso&&this.sketcher.lasso.isActive()&&(this.sketcher.lasso.bounds.minX+=dif.x,this.sketcher.lasso.bounds.maxX+=dif.x,this.sketcher.lasso.bounds.minY+=dif.y,this.sketcher.lasso.bounds.maxY+=dif.y);for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check()}else this.parentAction=new actions.MoveAction(this.sketcher.getAllPoints(),dif),this.sketcher.historyManager.pushUndo(this.parentAction)}this.sketcher.repaint()}this.sketcher.lastPoint=e.p},_.keydown=function(e){if(monitor.CANVAS_DRAGGING===this.sketcher)this.sketcher.lastPoint&&(e.p=this.sketcher.lastPoint,this.drag(e));else if(monitor.META)90===e.which?this.sketcher.historyManager.undo():89===e.which?this.sketcher.historyManager.redo():83===e.which?this.sketcher.toolbarManager.buttonSave.getElement().click():79===e.which?this.sketcher.toolbarManager.buttonOpen.getElement().click():78===e.which?this.sketcher.toolbarManager.buttonClear.getElement().click():187===e.which||61===e.which?this.sketcher.toolbarManager.buttonScalePlus.getElement().click():189===e.which||109===e.which?this.sketcher.toolbarManager.buttonScaleMinus.getElement().click():65===e.which&&(this.sketcher.oneMolecule||(this.sketcher.toolbarManager.buttonLasso.getElement().click(),this.sketcher.lasso.select(this.sketcher.getAllAtoms(),this.sketcher.shapes)));else if(9===e.which){if(!this.sketcher.oneMolecule)if(this.sketcher.lasso.block=!0,this.sketcher.toolbarManager.buttonLasso.getElement().click(),this.sketcher.lasso.block=!1,monitor.SHIFT){if(this.sketcher.shapes.length>0){var nextShapeIndex=this.sketcher.shapes.length-1;this.sketcher.lasso.shapes.length>0&&(nextShapeIndex=this.sketcher.shapes.indexOf(this.sketcher.lasso.shapes[0])+1),nextShapeIndex===this.sketcher.shapes.length&&(nextShapeIndex=0),this.sketcher.lasso.empty(),this.sketcher.lasso.select([],[this.sketcher.shapes[nextShapeIndex]])}}else if(this.sketcher.molecules.length>0){var nextMolIndex=this.sketcher.molecules.length-1;if(this.sketcher.lasso.atoms.length>0){var curMol=this.sketcher.getMoleculeByAtom(this.sketcher.lasso.atoms[0]);nextMolIndex=this.sketcher.molecules.indexOf(curMol)+1}nextMolIndex===this.sketcher.molecules.length&&(nextMolIndex=0),this.sketcher.lasso.select(this.sketcher.molecules[nextMolIndex].atoms,[])}}else if(32===e.which)this.sketcher.lasso&&this.sketcher.lasso.empty(),this.sketcher.toolbarManager.buttonSingle.getElement().click();else if(e.which>=37&&e.which<=40){var dif=new structures.Point;switch(e.which){case 37:dif.x=-10;break;case 38:dif.y=-10;break;case 39:dif.x=10;break;case 40:dif.y=10}this.sketcher.historyManager.pushUndo(new actions.MoveAction(this.sketcher.lasso&&this.sketcher.lasso.isActive()?this.sketcher.lasso.getAllPoints():this.sketcher.getAllPoints(),dif))}else if(187===e.which||189===e.which||61===e.which||109===e.which)this.sketcher.hovering&&this.sketcher.hovering instanceof structures.Atom&&this.sketcher.historyManager.pushUndo(new actions.ChangeChargeAction(this.sketcher.hovering,187===e.which||61===e.which?1:-1));else if(8===e.which||127===e.which)this.sketcher.stateManager.STATE_ERASE.handleDelete();else if(e.which>=48&&e.which<=57){if(this.sketcher.hovering){var molIdentifier,number=e.which-48,as=[],bs=[];if(this.sketcher.hovering instanceof structures.Atom)if(molIdentifier=this.sketcher.hovering,monitor.SHIFT){if(number>2&&9>number){var mol=this.sketcher.getMoleculeByAtom(this.sketcher.hovering),angles=mol.getAngles(this.sketcher.hovering),angle=3*m.PI/2;0!==angles.length&&(angle=math.angleBetweenLargest(angles).angle);var ring=this.sketcher.stateManager.STATE_NEW_RING.getRing(this.sketcher.hovering,number,this.sketcher.specs.bondLength_2D,angle,!1);-1===mol.atoms.indexOf(ring[0])&&as.push(ring[0]),this.sketcher.bondExists(this.sketcher.hovering,ring[0])||bs.push(new structures.Bond(this.sketcher.hovering,ring[0]));for(var i=1,ii=ring.length;ii>i;i++)-1===mol.atoms.indexOf(ring[i])&&as.push(ring[i]),this.sketcher.bondExists(ring[i-1],ring[i])||bs.push(new structures.Bond(ring[i-1],ring[i]));this.sketcher.bondExists(ring[ring.length-1],this.sketcher.hovering)||bs.push(new structures.Bond(ring[ring.length-1],this.sketcher.hovering))}}else{0===number&&(number=10);for(var p=new structures.Point(this.sketcher.hovering.x,this.sketcher.hovering.y),a=this.getOptimumAngle(this.sketcher.hovering),prev=this.sketcher.hovering,k=0;number>k;k++){var ause=a+(k%2===1?m.PI/3:0);p.x+=this.sketcher.specs.bondLength_2D*m.cos(ause),p.y-=this.sketcher.specs.bondLength_2D*m.sin(ause);for(var closest,use=new structures.Atom("C",p.x,p.y),minDist=1/0,i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var at=mol.atoms[j],dist=at.distance(use);minDist>dist&&(minDist=dist,closest=at)}5>minDist?use=closest:as.push(use),this.sketcher.bondExists(prev,use)||bs.push(new structures.Bond(prev,use)),prev=use}}else if(this.sketcher.hovering instanceof structures.Bond)if(molIdentifier=this.sketcher.hovering.a1,monitor.SHIFT){if(number>2&&9>number){var ring=this.sketcher.stateManager.STATE_NEW_RING.getOptimalRing(this.sketcher.hovering,number),start=this.sketcher.hovering.a2,end=this.sketcher.hovering.a1,mol=this.sketcher.getMoleculeByAtom(start);ring[0]===this.sketcher.hovering.a1&&(start=this.sketcher.hovering.a1,end=this.sketcher.hovering.a2),-1===mol.atoms.indexOf(ring[1])&&as.push(ring[1]),this.sketcher.bondExists(start,ring[1])||bs.push(new structures.Bond(start,ring[1]));for(var i=2,ii=ring.length;ii>i;i++)-1===mol.atoms.indexOf(ring[i])&&as.push(ring[i]),this.sketcher.bondExists(ring[i-1],ring[i])||bs.push(new structures.Bond(ring[i-1],ring[i]));this.sketcher.bondExists(ring[ring.length-1],end)||bs.push(new structures.Bond(ring[ring.length-1],end))}}else if(number>0&&4>number&&this.sketcher.hovering.bondOrder!==number)this.sketcher.historyManager.pushUndo(new actions.ChangeBondAction(this.sketcher.hovering,number,structures.Bond.STEREO_NONE));else if(7===number||8===number){var stereo=structures.Bond.STEREO_RECESSED;7===number&&(stereo=structures.Bond.STEREO_PROTRUDING),this.sketcher.historyManager.pushUndo(new actions.ChangeBondAction(this.sketcher.hovering,1,stereo))}(0!==as.length||0!==bs.length)&&this.sketcher.historyManager.pushUndo(new actions.AddAction(this.sketcher,molIdentifier,as,bs))}}else if(e.which>=65&&e.which<=90&&this.sketcher.hovering)if(this.sketcher.hovering instanceof structures.Atom){for(var firstMatch,firstAfterMatch,check=String.fromCharCode(e.which),found=!1,j=0,jj=SYMBOLS.length;jj>j;j++)if(this.sketcher.hovering.label.charAt(0)===check)SYMBOLS[j]===this.sketcher.hovering.label?found=!0:SYMBOLS[j].charAt(0)===check&&(found&&!firstAfterMatch?firstAfterMatch=SYMBOLS[j]:firstMatch||(firstMatch=SYMBOLS[j]));else if(SYMBOLS[j].charAt(0)===check){firstMatch=SYMBOLS[j];break}var use="C";firstAfterMatch?use=firstAfterMatch:firstMatch&&(use=firstMatch),use!==this.sketcher.hovering.label&&this.sketcher.historyManager.pushUndo(new actions.ChangeLabelAction(this.sketcher.hovering,use))}else this.sketcher.hovering instanceof structures.Bond&&70===e.which&&this.sketcher.historyManager.pushUndo(new actions.FlipBondAction(this.sketcher.hovering));this.innerkeydown&&this.innerkeydown(e)},_.keypress=function(e){this.innerkeypress&&this.innerkeypress(e)},_.keyup=function(e){monitor.CANVAS_DRAGGING===this.sketcher&&this.sketcher.lastPoint&&(e.p=this.sketcher.lastPoint,this.sketcher.drag(e)),this.innerkeyup&&this.innerkeyup(e)}}(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,ChemDoodle.SYMBOLS,Math),function(actions,states){"use strict";states.ChargeState=function(sketcher){this.setup(sketcher)};var _=states.ChargeState.prototype=new states._State;_.delta=1,_.innermouseup=function(e){this.sketcher.hovering&&this.sketcher.historyManager.pushUndo(new actions.ChangeChargeAction(this.sketcher.hovering,this.delta))},_.innermousemove=function(e){this.findHoveredObject(e,!0,!1)}}(ChemDoodle.uis.actions,ChemDoodle.uis.states),function(actions,states,structures,d2){"use strict";states.EraseState=function(sketcher){this.setup(sketcher)};var _=states.EraseState.prototype=new states._State;_.handleDelete=function(){if(this.sketcher.lasso&&this.sketcher.lasso.isActive())this.sketcher.historyManager.pushUndo(new actions.DeleteContentAction(this.sketcher,this.sketcher.lasso.atoms,this.sketcher.lasso.shapes)),this.sketcher.lasso.empty();else if(this.sketcher.hovering){if(this.sketcher.hovering instanceof structures.Atom)if(this.sketcher.oneMolecule){for(var mol=this.sketcher.molecules[0],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].visited=!1;var connectionsA=[],connectionsB=[];this.sketcher.hovering.visited=!0;for(var j=0,jj=mol.bonds.length;jj>j;j++){var bj=mol.bonds[j];if(bj.contains(this.sketcher.hovering)){var atoms=[],bonds=[],q=new structures.Queue;for(q.enqueue(bj.getNeighbor(this.sketcher.hovering));!q.isEmpty();){var a=q.dequeue();if(!a.visited){a.visited=!0,atoms.push(a);for(var k=0,kk=mol.bonds.length;kk>k;k++){var bk=mol.bonds[k];bk.contains(a)&&!bk.getNeighbor(a).visited&&(q.enqueue(bk.getNeighbor(a)),bonds.push(bk))}}}connectionsA.push(atoms),connectionsB.push(bonds)}}for(var largest=-1,index=-1,j=0,jj=connectionsA.length;jj>j;j++)connectionsA[j].length>largest&&(index=j,largest=connectionsA[j].length);if(index>-1){for(var hold,as=[],bs=[],i=0,ii=mol.atoms.length;ii>i;i++){var a=mol.atoms[i];-1===connectionsA[index].indexOf(a)?as.push(a):hold||(hold=a)}for(var i=0,ii=mol.bonds.length;ii>i;i++){var b=mol.bonds[i];-1===connectionsB[index].indexOf(b)&&bs.push(b)}this.sketcher.historyManager.pushUndo(new actions.DeleteAction(this.sketcher,hold,as,bs))}else this.sketcher.historyManager.pushUndo(new actions.ClearAction(this.sketcher))}else{var mol=this.sketcher.getMoleculeByAtom(this.sketcher.hovering);this.sketcher.historyManager.pushUndo(new actions.DeleteAction(this.sketcher,mol.atoms[0],[this.sketcher.hovering],mol.getBonds(this.sketcher.hovering)))}else this.sketcher.hovering instanceof structures.Bond?(!this.sketcher.oneMolecule||this.sketcher.hovering.ring)&&this.sketcher.historyManager.pushUndo(new actions.DeleteAction(this.sketcher,this.sketcher.hovering.a1,void 0,[this.sketcher.hovering])):this.sketcher.hovering instanceof d2._Shape&&this.sketcher.historyManager.pushUndo(new actions.DeleteShapeAction(this.sketcher,this.sketcher.hovering));this.sketcher.hovering=void 0,this.sketcher.repaint()}for(var i=this.sketcher.shapes.length-1;i>=0;i--){var s=this.sketcher.shapes[i];if(s instanceof d2.Pusher){for(var remains1=!1,remains2=!1,j=0,jj=this.sketcher.molecules.length;jj>j;j++){for(var mol=this.sketcher.molecules[j],k=0,kk=mol.atoms.length;kk>k;k++){var a=mol.atoms[k];a===s.o1?remains1=!0:a===s.o2&&(remains2=!0)}for(var k=0,kk=mol.bonds.length;kk>k;k++){var b=mol.bonds[k];b===s.o1?remains1=!0:b===s.o2&&(remains2=!0)}}remains1&&remains2||(this.sketcher.historyManager.undoStack[this.sketcher.historyManager.undoStack.length-1].ss.push(s),this.sketcher.removeShape(s))}}},_.innermouseup=function(e){this.handleDelete()},_.innermousemove=function(e){this.findHoveredObject(e,!0,!0,!0)}}(ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,ChemDoodle.structures.d2),function(monitor,structures,actions,states,m){"use strict";states.LabelState=function(sketcher){this.setup(sketcher)};var _=states.LabelState.prototype=new states._State;
_.label="C",_.innermousedown=function(e){this.newMolAllowed=!0,this.sketcher.hovering&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.sketcher.repaint())},_.innermouseup=function(e){if(this.sketcher.hovering)if(this.sketcher.hovering.isSelected=!1,this.sketcher.tempAtom){var b=new structures.Bond(this.sketcher.hovering,this.sketcher.tempAtom);this.sketcher.historyManager.pushUndo(new actions.AddAction(this.sketcher,b.a1,[b.a2],[b])),this.sketcher.tempAtom=void 0}else this.label!==this.sketcher.hovering.label&&this.sketcher.historyManager.pushUndo(new actions.ChangeLabelAction(this.sketcher.hovering,this.label));else!this.sketcher.oneMolecule&&this.newMolAllowed&&this.sketcher.historyManager.pushUndo(new actions.NewMoleculeAction(this.sketcher,[new structures.Atom(this.label,e.p.x,e.p.y)],[]));this.sketcher.isMobile||this.mousemove(e)},_.innermousemove=function(e){this.findHoveredObject(e,!0,!1)},_.innerdrag=function(e){if(this.newMolAllowed=!1,this.sketcher.hovering){var dist=this.sketcher.hovering.distance(e.p);if(9>dist)this.sketcher.tempAtom=void 0;else if(e.p.distance(this.sketcher.hovering)<15){var angle=this.getOptimumAngle(this.sketcher.hovering),x=this.sketcher.hovering.x+this.sketcher.specs.bondLength_2D*m.cos(angle),y=this.sketcher.hovering.y-this.sketcher.specs.bondLength_2D*m.sin(angle);this.sketcher.tempAtom=new structures.Atom(this.label,x,y,0)}else if(monitor.ALT&&monitor.SHIFT)this.sketcher.tempAtom=new structures.Atom(this.label,e.p.x,e.p.y,0);else{var angle=this.sketcher.hovering.angle(e.p),length=this.sketcher.hovering.distance(e.p);if(monitor.SHIFT||(length=this.sketcher.specs.bondLength_2D),!monitor.ALT){var increments=m.floor((angle+m.PI/12)/(m.PI/6));angle=increments*m.PI/6}this.sketcher.tempAtom=new structures.Atom(this.label,this.sketcher.hovering.x+length*m.cos(angle),this.sketcher.hovering.y-length*m.sin(angle),0)}this.sketcher.repaint()}}}(ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.uis.actions,ChemDoodle.uis.states,Math),function(math,monitor,structures,d2,actions,states,tools,m){"use strict";states.LassoState=function(sketcher){this.setup(sketcher)};var TRANSLATE=1,ROTATE=2,transformType=TRANSLATE,paintRotate=!1,_=states.LassoState.prototype=new states._State;_.innerdrag=function(e){if(this.inDrag=!0,this.sketcher.lasso.isActive()&&transformType){if(!this.sketcher.lastPoint)return;if(transformType===TRANSLATE){var dif=new structures.Point(e.p.x,e.p.y);if(dif.sub(this.sketcher.lastPoint),this.parentAction){this.parentAction.dif.add(dif);for(var i=0,ii=this.parentAction.ps.length;ii>i;i++)this.parentAction.ps[i].add(dif);for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check();this.sketcher.lasso.bounds.minX+=dif.x,this.sketcher.lasso.bounds.maxX+=dif.x,this.sketcher.lasso.bounds.minY+=dif.y,this.sketcher.lasso.bounds.maxY+=dif.y,this.sketcher.repaint()}else this.parentAction=new actions.MoveAction(this.sketcher.lasso.getAllPoints(),dif),this.sketcher.historyManager.pushUndo(this.parentAction)}else if(transformType===ROTATE)if(this.parentAction){var center=this.parentAction.center,oldAngle=center.angle(this.sketcher.lastPoint),newAngle=center.angle(e.p),rot=newAngle-oldAngle;this.parentAction.dif+=rot;for(var i=0,ii=this.parentAction.ps.length;ii>i;i++){var a=this.parentAction.ps[i],dist=center.distance(a),angle=center.angle(a)+rot;a.x=center.x+dist*m.cos(angle),a.y=center.y-dist*m.sin(angle)}for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check();this.sketcher.lasso.setBounds(),this.sketcher.repaint()}else{var center=new structures.Point((this.sketcher.lasso.bounds.minX+this.sketcher.lasso.bounds.maxX)/2,(this.sketcher.lasso.bounds.minY+this.sketcher.lasso.bounds.maxY)/2),oldAngle=center.angle(this.sketcher.lastPoint),newAngle=center.angle(e.p),rot=newAngle-oldAngle;this.parentAction=new actions.RotateAction(this.sketcher.lasso.getAllPoints(),rot,center),this.sketcher.historyManager.pushUndo(this.parentAction)}}else if(this.sketcher.hovering){if(!this.sketcher.lastPoint)return;var dif=new structures.Point(e.p.x,e.p.y);if(dif.sub(this.sketcher.lastPoint),this.parentAction){this.parentAction.dif.add(dif);for(var i=0,ii=this.parentAction.ps.length;ii>i;i++)this.parentAction.ps[i].add(dif);for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check();this.sketcher.repaint()}else{var ps;this.sketcher.hovering instanceof structures.Atom?ps=monitor.SHIFT?[this.sketcher.hovering]:this.sketcher.getMoleculeByAtom(this.sketcher.hovering).atoms:this.sketcher.hovering instanceof structures.Bond?ps=[this.sketcher.hovering.a1,this.sketcher.hovering.a2]:this.sketcher.hovering instanceof d2._Shape&&(ps=this.sketcher.hovering.hoverPoint?[this.sketcher.hovering.hoverPoint]:this.sketcher.hovering.getPoints()),this.parentAction=new actions.MoveAction(ps,dif),this.sketcher.historyManager.pushUndo(this.parentAction)}}else this.sketcher.lasso.addPoint(e.p),this.sketcher.repaint()},_.innermousedown=function(e){if(this.inDrag=!1,this.sketcher.lasso.isActive()&&!monitor.SHIFT){transformType=void 0;var rotateBuffer=25/this.sketcher.specs.scale;math.isBetween(e.p.x,this.sketcher.lasso.bounds.minX,this.sketcher.lasso.bounds.maxX)&&math.isBetween(e.p.y,this.sketcher.lasso.bounds.minY,this.sketcher.lasso.bounds.maxY)?transformType=TRANSLATE:math.isBetween(e.p.x,this.sketcher.lasso.bounds.minX-rotateBuffer,this.sketcher.lasso.bounds.maxX+rotateBuffer)&&math.isBetween(e.p.y,this.sketcher.lasso.bounds.minY-rotateBuffer,this.sketcher.lasso.bounds.maxY+rotateBuffer)&&(transformType=ROTATE)}else this.sketcher.hovering||(this.sketcher.lastPoint=void 0,this.sketcher.lasso.addPoint(e.p),this.sketcher.repaint())},_.innermouseup=function(e){transformType||this.sketcher.hovering||this.sketcher.lasso.select(),this.innermousemove(e)},_.innerclick=function(e){if(!transformType&&!this.inDrag)if(this.sketcher.hovering){var as=[],ss=[];this.sketcher.hovering instanceof structures.Atom?as.push(this.sketcher.hovering):this.sketcher.hovering instanceof structures.Bond?(as.push(this.sketcher.hovering.a1),as.push(this.sketcher.hovering.a2)):this.sketcher.hovering instanceof d2._Shape&&ss.push(this.sketcher.hovering),this.sketcher.lasso.select(as,ss)}else this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty();transformType=void 0},_.innermousemove=function(e){if(this.sketcher.lasso.isActive()){if(!monitor.SHIFT){var p=!1,rotateBuffer=25/this.sketcher.specs.scale;math.isBetween(e.p.x,this.sketcher.lasso.bounds.minX,this.sketcher.lasso.bounds.maxX)&&math.isBetween(e.p.y,this.sketcher.lasso.bounds.minY,this.sketcher.lasso.bounds.maxY)||!math.isBetween(e.p.x,this.sketcher.lasso.bounds.minX-rotateBuffer,this.sketcher.lasso.bounds.maxX+rotateBuffer)||!math.isBetween(e.p.y,this.sketcher.lasso.bounds.minY-rotateBuffer,this.sketcher.lasso.bounds.maxY+rotateBuffer)||(p=!0),p!=paintRotate&&(paintRotate=p,this.sketcher.repaint())}}else{var includeMol=this.sketcher.lasso.mode!==tools.Lasso.MODE_LASSO_SHAPES;this.findHoveredObject(e,includeMol,includeMol,!0)}},_.innerdblclick=function(e){this.sketcher.lasso.isActive()&&this.sketcher.lasso.empty()},_.draw=function(ctx){if(paintRotate&&this.sketcher.lasso.bounds){ctx.fillStyle="rgba(0,0,255,.1)";var rotateBuffer=25/this.sketcher.specs.scale,b=this.sketcher.lasso.bounds;ctx.beginPath(),ctx.rect(b.minX-rotateBuffer,b.minY-rotateBuffer,b.maxX-b.minX+2*rotateBuffer,rotateBuffer),ctx.rect(b.minX-rotateBuffer,b.maxY,b.maxX-b.minX+2*rotateBuffer,rotateBuffer),ctx.rect(b.minX-rotateBuffer,b.minY,rotateBuffer,b.maxY-b.minY),ctx.rect(b.maxX,b.minY,rotateBuffer,b.maxY-b.minY),ctx.fill()}}}(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.uis.tools,Math),function(actions,states){"use strict";states.LonePairState=function(sketcher){this.setup(sketcher)};var _=states.LonePairState.prototype=new states._State;_.delta=1,_.innermouseup=function(e){this.delta<0&&this.sketcher.hovering.numLonePair<1||this.sketcher.hovering&&this.sketcher.historyManager.pushUndo(new actions.ChangeLonePairAction(this.sketcher.hovering,this.delta))},_.innermousemove=function(e){this.findHoveredObject(e,!0,!1)}}(ChemDoodle.uis.actions,ChemDoodle.uis.states),function(actions,states,structures){"use strict";states.MoveState=function(sketcher){this.setup(sketcher)};var _=states.MoveState.prototype=new states._State;_.action=void 0,_.innerdrag=function(e){if(this.sketcher.hovering)if(this.action){var dif=new structures.Point(e.p.x,e.p.y);dif.sub(this.sketcher.lastPoint),this.action.dif.add(dif);for(var i=0,ii=this.action.ps.length;ii>i;i++)this.action.ps[i].add(dif);for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check();this.sketcher.repaint()}else{var ps=[],dif=new structures.Point(e.p.x,e.p.y);this.sketcher.hovering instanceof structures.Atom?(dif.sub(this.sketcher.hovering),ps[0]=this.sketcher.hovering):this.sketcher.hovering instanceof structures.Bond&&(dif.sub(this.sketcher.lastPoint),ps[0]=this.sketcher.hovering.a1,ps[1]=this.sketcher.hovering.a2),this.action=new actions.MoveAction(ps,dif),this.sketcher.historyManager.pushUndo(this.action)}},_.innermousemove=function(e){this.findHoveredObject(e,!0,!0)},_.innermouseup=function(e){this.action=void 0}}(ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures),function(monitor,actions,states,structures,m){"use strict";states.NewBondState=function(sketcher){this.setup(sketcher)};var _=states.NewBondState.prototype=new states._State;_.bondOrder=1,_.stereo=structures.Bond.STEREO_NONE,_.incrementBondOrder=function(b){this.newMolAllowed=!1,1===this.bondOrder&&this.stereo===structures.Bond.STEREO_NONE?this.sketcher.historyManager.pushUndo(new actions.ChangeBondAction(b)):b.bondOrder===this.bondOrder&&b.stereo===this.stereo?(1===b.bondOrder&&b.stereo!==structures.Bond.STEREO_NONE||2===b.bondOrder&&b.stereo===structures.Bond.STEREO_NONE)&&this.sketcher.historyManager.pushUndo(new actions.FlipBondAction(b)):this.sketcher.historyManager.pushUndo(new actions.ChangeBondAction(b,this.bondOrder,this.stereo))},_.innerexit=function(){this.removeStartAtom()},_.innerdrag=function(e){if(this.newMolAllowed=!1,this.removeStartAtom(),this.sketcher.hovering instanceof structures.Atom){if(e.p.distance(this.sketcher.hovering)<15){var angle=this.getOptimumAngle(this.sketcher.hovering,this.bondOrder),x=this.sketcher.hovering.x+this.sketcher.specs.bondLength_2D*m.cos(angle),y=this.sketcher.hovering.y-this.sketcher.specs.bondLength_2D*m.sin(angle);this.sketcher.tempAtom=new structures.Atom("C",x,y,0)}else{for(var closest,distMin=1e3,i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j],dist=a.distance(e.p);5>dist&&(!closest||distMin>dist)&&(closest=a,distMin=dist)}if(closest)this.sketcher.tempAtom=new structures.Atom("C",closest.x,closest.y,0);else if(monitor.ALT&&monitor.SHIFT)this.sketcher.tempAtom=new structures.Atom("C",e.p.x,e.p.y,0);else{var angle=this.sketcher.hovering.angle(e.p),length=this.sketcher.hovering.distance(e.p);if(monitor.SHIFT||(length=this.sketcher.specs.bondLength_2D),!monitor.ALT){var increments=m.floor((angle+m.PI/12)/(m.PI/6));angle=increments*m.PI/6}this.sketcher.tempAtom=new structures.Atom("C",this.sketcher.hovering.x+length*m.cos(angle),this.sketcher.hovering.y-length*m.sin(angle),0)}}for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.distance(this.sketcher.tempAtom)<5&&(this.sketcher.tempAtom.x=a.x,this.sketcher.tempAtom.y=a.y,this.sketcher.tempAtom.isOverlap=!0)}this.sketcher.repaint()}},_.innerclick=function(e){this.sketcher.hovering||this.sketcher.oneMolecule||!this.newMolAllowed||(this.sketcher.historyManager.pushUndo(new actions.NewMoleculeAction(this.sketcher,[new structures.Atom("C",e.p.x,e.p.y)],[])),this.sketcher.isMobile||this.mousemove(e),this.newMolAllowed=!1)},_.innermousedown=function(e){if(this.newMolAllowed=!0,this.sketcher.hovering instanceof structures.Atom)this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.drag(e);else if(this.sketcher.hovering instanceof structures.Bond){this.sketcher.hovering.isHover=!1,this.incrementBondOrder(this.sketcher.hovering);for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)this.sketcher.molecules[i].check();this.sketcher.repaint()}},_.innermouseup=function(e){if(this.sketcher.tempAtom&&this.sketcher.hovering){var as=[],bs=[],makeBond=!0;if(this.sketcher.tempAtom.isOverlap){for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];a.distance(this.sketcher.tempAtom)<5&&(this.sketcher.tempAtom=a)}var bond=this.sketcher.getBond(this.sketcher.hovering,this.sketcher.tempAtom);bond&&(this.incrementBondOrder(bond),makeBond=!1)}else as.push(this.sketcher.tempAtom);makeBond&&(bs[0]=new structures.Bond(this.sketcher.hovering,this.sketcher.tempAtom,this.bondOrder),bs[0].stereo=this.stereo,this.sketcher.historyManager.pushUndo(new actions.AddAction(this.sketcher,bs[0].a1,as,bs)))}this.sketcher.tempAtom=void 0,this.sketcher.isMobile||this.mousemove(e)},_.innermousemove=function(e){this.sketcher.tempAtom||(this.findHoveredObject(e,!0,!0),this.sketcher.startAtom&&(this.sketcher.hovering?(this.sketcher.startAtom.x=-10,this.sketcher.startAtom.y=-10):(this.sketcher.startAtom.x=e.p.x,this.sketcher.startAtom.y=e.p.y)))},_.innermouseout=function(e){this.removeStartAtom()}}(ChemDoodle.monitor,ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,Math),function(math,monitor,actions,states,structures,m){"use strict";states.NewRingState=function(sketcher){this.setup(sketcher)};var _=states.NewRingState.prototype=new states._State;_.numSides=6,_.unsaturated=!1,_.getRing=function(a,numSides,bondLength,angle,setOverlaps){var innerAngle=m.PI-2*m.PI/numSides;angle+=innerAngle/2;for(var ring=[],i=0;numSides-1>i;i++){var p=0===i?new structures.Atom("C",a.x,a.y):new structures.Atom("C",ring[ring.length-1].x,ring[ring.length-1].y);p.x+=bondLength*m.cos(angle),p.y-=bondLength*m.sin(angle),ring.push(p),angle+=m.PI+innerAngle}for(var i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++)mol.atoms[j].isOverlap=!1;for(var i=0,ii=ring.length;ii>i;i++){for(var closest,minDist=1/0,k=0,kk=this.sketcher.molecules.length;kk>k;k++)for(var mol=this.sketcher.molecules[k],j=0,jj=mol.atoms.length;jj>j;j++){var dist=mol.atoms[j].distance(ring[i]);minDist>dist&&(minDist=dist,closest=mol.atoms[j])}5>minDist&&(ring[i]=closest,setOverlaps&&(closest.isOverlap=!0))}return ring},_.getOptimalRing=function(b,numSides){for(var innerAngle=m.PI/2-m.PI/numSides,bondLength=b.a1.distance(b.a2),ring1=this.getRing(b.a1,numSides,bondLength,b.a1.angle(b.a2)-innerAngle,!1),ring2=this.getRing(b.a2,numSides,bondLength,b.a2.angle(b.a1)-innerAngle,!1),dist1=0,dist2=0,i=1,ii=ring1.length;ii>i;i++)for(var k=0,kk=this.sketcher.molecules.length;kk>k;k++)for(var mol=this.sketcher.molecules[k],j=0,jj=mol.atoms.length;jj>j;j++){var d1=mol.atoms[j].distance(ring1[i]),d2=mol.atoms[j].distance(ring2[i]);dist1+=m.min(1e8,1/(d1*d1)),dist2+=m.min(1e8,1/(d2*d2))}return dist2>dist1?ring1:ring2},_.innerexit=function(){this.removeStartAtom()},_.innerdrag=function(e){if(this.newMolAllowed=!1,this.removeStartAtom(),this.sketcher.hovering instanceof structures.Atom){var a=0,l=0;if(e.p.distance(this.sketcher.hovering)<15){var angles=this.sketcher.getMoleculeByAtom(this.sketcher.hovering).getAngles(this.sketcher.hovering);a=0===angles.length?3*m.PI/2:math.angleBetweenLargest(angles).angle,l=this.sketcher.specs.bondLength_2D}else if(a=this.sketcher.hovering.angle(e.p),l=this.sketcher.hovering.distance(e.p),!(monitor.ALT&&monitor.SHIFT||(monitor.SHIFT||(l=this.sketcher.specs.bondLength_2D),monitor.ALT))){var increments=m.floor((a+m.PI/12)/(m.PI/6));a=increments*m.PI/6}this.sketcher.tempRing=this.getRing(this.sketcher.hovering,this.numSides,l,a,!0),this.sketcher.repaint()}else if(this.sketcher.hovering instanceof structures.Bond){var ringUse,dist=math.distanceFromPointToLineInclusive(e.p,this.sketcher.hovering.a1,this.sketcher.hovering.a2);if(-1!==dist&&7>=dist)ringUse=this.getOptimalRing(this.sketcher.hovering,this.numSides);else{for(var innerAngle=m.PI/2-m.PI/this.numSides,bondLength=this.sketcher.hovering.a1.distance(this.sketcher.hovering.a2),ring1=this.getRing(this.sketcher.hovering.a1,this.numSides,bondLength,this.sketcher.hovering.a1.angle(this.sketcher.hovering.a2)-innerAngle,!1),ring2=this.getRing(this.sketcher.hovering.a2,this.numSides,bondLength,this.sketcher.hovering.a2.angle(this.sketcher.hovering.a1)-innerAngle,!1),center1=new structures.Point,center2=new structures.Point,i=1,ii=ring1.length;ii>i;i++)center1.add(ring1[i]),center2.add(ring2[i]);center1.x/=ring1.length-1,center1.y/=ring1.length-1,center2.x/=ring2.length-1,center2.y/=ring2.length-1;var dist1=center1.distance(e.p),dist2=center2.distance(e.p);ringUse=ring2,dist2>dist1&&(ringUse=ring1)}for(var j=1,jj=ringUse.length;jj>j;j++)-1!==this.sketcher.getAllAtoms().indexOf(ringUse[j])&&(ringUse[j].isOverlap=!0);this.sketcher.tempRing=ringUse,this.sketcher.repaint()}},_.innerclick=function(e){this.sketcher.hovering||this.sketcher.oneMolecule||!this.newMolAllowed||(this.sketcher.historyManager.pushUndo(new actions.NewMoleculeAction(this.sketcher,[new structures.Atom("C",e.p.x,e.p.y)],[])),this.sketcher.isMobile||this.mousemove(e),this.newMolAllowed=!1)},_.innermousedown=function(e){this.newMolAllowed=!0,this.sketcher.hovering&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.drag(e))},_.innermouseup=function(e){if(this.sketcher.tempRing&&this.sketcher.hovering){var as=[],bs=[],allAs=this.sketcher.getAllAtoms();if(this.sketcher.hovering instanceof structures.Atom){-1===allAs.indexOf(this.sketcher.tempRing[0])&&as.push(this.sketcher.tempRing[0]),this.sketcher.bondExists(this.sketcher.hovering,this.sketcher.tempRing[0])||bs.push(new structures.Bond(this.sketcher.hovering,this.sketcher.tempRing[0]));for(var i=1,ii=this.sketcher.tempRing.length;ii>i;i++)-1===allAs.indexOf(this.sketcher.tempRing[i])&&as.push(this.sketcher.tempRing[i]),this.sketcher.bondExists(this.sketcher.tempRing[i-1],this.sketcher.tempRing[i])||bs.push(new structures.Bond(this.sketcher.tempRing[i-1],this.sketcher.tempRing[i],i%2===1&&this.unsaturated?2:1));this.sketcher.bondExists(this.sketcher.tempRing[this.sketcher.tempRing.length-1],this.sketcher.hovering)||bs.push(new structures.Bond(this.sketcher.tempRing[this.sketcher.tempRing.length-1],this.sketcher.hovering,this.unsaturated?2:1))}else if(this.sketcher.hovering instanceof structures.Bond){var start=this.sketcher.hovering.a2,end=this.sketcher.hovering.a1;this.sketcher.tempRing[0]===this.sketcher.hovering.a1&&(start=this.sketcher.hovering.a1,end=this.sketcher.hovering.a2),-1===allAs.indexOf(this.sketcher.tempRing[1])&&as.push(this.sketcher.tempRing[1]),this.sketcher.bondExists(start,this.sketcher.tempRing[1])||bs.push(new structures.Bond(start,this.sketcher.tempRing[1]));for(var i=2,ii=this.sketcher.tempRing.length;ii>i;i++)-1===allAs.indexOf(this.sketcher.tempRing[i])&&as.push(this.sketcher.tempRing[i]),this.sketcher.bondExists(this.sketcher.tempRing[i-1],this.sketcher.tempRing[i])||bs.push(new structures.Bond(this.sketcher.tempRing[i-1],this.sketcher.tempRing[i],i%2===0&&this.unsaturated?2:1));this.sketcher.bondExists(this.sketcher.tempRing[this.sketcher.tempRing.length-1],end)||bs.push(new structures.Bond(this.sketcher.tempRing[this.sketcher.tempRing.length-1],end))}(0!==as.length||0!==bs.length)&&this.sketcher.historyManager.pushUndo(new actions.AddAction(this.sketcher,bs[0].a1,as,bs));for(var j=0,jj=allAs.length;jj>j;j++)allAs[j].isOverlap=!1}this.sketcher.tempRing=void 0,this.sketcher.isMobile||this.mousemove(e)},_.innermousemove=function(e){this.sketcher.tempAtom||(this.findHoveredObject(e,!0,!0),this.sketcher.startAtom&&(this.sketcher.hovering?(this.sketcher.startAtom.x=-10,this.sketcher.startAtom.y=-10):(this.sketcher.startAtom.x=e.p.x,this.sketcher.startAtom.y=e.p.y)))},_.innermouseout=function(e){this.removeStartAtom()}}(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,Math),function(extensions,structures,d2,actions,states){"use strict";states.PusherState=function(sketcher){this.setup(sketcher)};var _=states.PusherState.prototype=new states._State;_.numElectron=1,_.innermousedown=function(e){this.sketcher.hovering&&(this.start=this.sketcher.hovering)},_.innerdrag=function(e){this.start&&(this.end=new structures.Point(e.p.x,e.p.y),this.findHoveredObject(e,!0,!0),this.sketcher.repaint())},_.innermouseup=function(e){if(this.start&&this.sketcher.hovering&&this.sketcher.hovering!==this.start){for(var dup,remove=!1,i=0,ii=this.sketcher.shapes.length;ii>i;i++){var s=this.sketcher.shapes[i];s instanceof d2.Pusher&&(s.o1===this.start&&s.o2===this.sketcher.hovering?dup=s:s.o2===this.start&&s.o1===this.sketcher.hovering&&(dup=s,remove=!0))}if(dup)remove&&this.sketcher.historyManager.pushUndo(new actions.DeleteShapeAction(this.sketcher,dup)),this.start=void 0,this.end=void 0,this.sketcher.repaint();else{var shape=new d2.Pusher(this.start,this.sketcher.hovering,this.numElectron);this.start=void 0,this.end=void 0,this.sketcher.historyManager.pushUndo(new actions.AddShapeAction(this.sketcher,shape))}}else this.start=void 0,this.end=void 0,this.sketcher.repaint()},_.innermousemove=function(e){this.findHoveredObject(e,!0,!0),this.sketcher.repaint()},_.draw=function(ctx){if(this.start&&this.end){ctx.strokeStyle="#00FF00",ctx.fillStyle="#00FF00",ctx.lineWidth=1;var p1=this.start instanceof structures.Atom?this.start:this.start.getCenter(),p2=this.end;this.sketcher.hovering&&this.sketcher.hovering!==this.start&&(p2=this.sketcher.hovering instanceof structures.Atom?this.sketcher.hovering:this.sketcher.hovering.getCenter()),ctx.beginPath(),ctx.moveTo(p1.x,p1.y),extensions.contextHashTo(ctx,p1.x,p1.y,p2.x,p2.y,2,2),ctx.stroke()}}}(ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.uis.actions,ChemDoodle.uis.states),function(actions,states,structures,d2){"use strict";states.QueryState=function(sketcher){this.setup(sketcher)};var _=states.QueryState.prototype=new states._State;_.innermouseup=function(e){this.sketcher.hovering&&(this.sketcher.hovering instanceof structures.Atom?(this.sketcher.dialogManager.atomQueryDialog.setAtom(this.sketcher.hovering),this.sketcher.dialogManager.atomQueryDialog.getElement().dialog("open")):this.sketcher.hovering instanceof structures.Bond&&(this.sketcher.dialogManager.bondQueryDialog.setBond(this.sketcher.hovering),this.sketcher.dialogManager.bondQueryDialog.getElement().dialog("open")))},_.innermousemove=function(e){this.findHoveredObject(e,!0,!0,!1)}}(ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,ChemDoodle.structures.d2),function(actions,states){"use strict";states.RadicalState=function(sketcher){this.setup(sketcher)};var _=states.RadicalState.prototype=new states._State;_.delta=1,_.innermouseup=function(e){this.delta<0&&this.sketcher.hovering.numRadical<1||this.sketcher.hovering&&this.sketcher.historyManager.pushUndo(new actions.ChangeRadicalAction(this.sketcher.hovering,this.delta))},_.innermousemove=function(e){this.findHoveredObject(e,!0,!1)}}(ChemDoodle.uis.actions,ChemDoodle.uis.states),function(extensions,math,monitor,structures,d2,actions,states,m){"use strict";function drawBracketControl(ctx,x,y,control,type){var size=6;control&&m.abs(control.t)===type&&(ctx.fillStyle="#885110",ctx.beginPath(),control.t>0?(ctx.moveTo(x,y),ctx.lineTo(x+size,y-size),ctx.lineTo(x+2*size,y)):(ctx.moveTo(x,y+size),ctx.lineTo(x+size,y+2*size),ctx.lineTo(x+2*size,y+size)),ctx.closePath(),ctx.fill()),ctx.strokeStyle="blue",ctx.beginPath(),ctx.moveTo(x,y),ctx.lineTo(x+size,y-size),ctx.lineTo(x+2*size,y),ctx.moveTo(x,y+size),ctx.lineTo(x+size,y+2*size),ctx.lineTo(x+2*size,y+size),ctx.stroke()}states.ShapeState=function(sketcher){this.setup(sketcher)};var _=states.ShapeState.prototype=new states._State;_.shapeType=states.ShapeState.LINE,_.superDoubleClick=_.dblclick,_.dblclick=function(e){this.control||this.superDoubleClick(e)},_.innerexit=function(e){this.shapeType=states.ShapeState.LINE,this.sketcher.repaint()},_.innermousemove=function(e){if(this.control=void 0,this.shapeType===states.ShapeState.BRACKET){for(var size=6,i=0,ii=this.sketcher.shapes.length;ii>i;i++){var s=this.sketcher.shapes[i];if(s instanceof d2.Bracket){var minX=m.min(s.p1.x,s.p2.x),maxX=m.max(s.p1.x,s.p2.x),minY=m.min(s.p1.y,s.p2.y),maxY=m.max(s.p1.y,s.p2.y),hits=[];hits.push({x:maxX+5,y:minY+15,v:1}),hits.push({x:maxX+5,y:maxY+15,v:2}),hits.push({x:minX-17,y:(minY+maxY)/2+15,v:3});for(var j=0,jj=hits.length;jj>j;j++){var h=hits[j];if(math.isBetween(e.p.x,h.x,h.x+2*size)&&math.isBetween(e.p.y,h.y-size,h.y)){this.control={s:s,t:h.v};break}if(math.isBetween(e.p.x,h.x,h.x+2*size)&&math.isBetween(e.p.y,h.y+size,h.y+2*size)){this.control={s:s,t:-1*h.v};break}}if(this.control)break}}this.sketcher.repaint()}},_.innermousedown=function(e){this.control?(this.sketcher.historyManager.pushUndo(new actions.ChangeBracketAttributeAction(this.control.s,this.control.t)),this.sketcher.repaint()):(this.start=new structures.Point(e.p.x,e.p.y),this.end=this.start)},_.innerdrag=function(e){if(this.end=new structures.Point(e.p.x,e.p.y),this.shapeType===states.ShapeState.BRACKET){if(monitor.SHIFT){var difx=this.end.x-this.start.x,dify=this.end.y-this.start.y;0>difx&&dify>0?dify*=-1:difx>0&&0>dify&&(difx*=-1);var difuse=dify;m.abs(difx)<m.abs(dify)&&(difuse=difx),this.end.x=this.start.x+difuse,this.end.y=this.start.y+difuse}}else if(!monitor.ALT){var angle=this.start.angle(this.end),length=this.start.distance(this.end);if(!monitor.ALT){var increments=m.floor((angle+m.PI/12)/(m.PI/6));angle=increments*m.PI/6}this.end.x=this.start.x+length*m.cos(angle),this.end.y=this.start.y-length*m.sin(angle)}this.sketcher.repaint()},_.innermouseup=function(e){if(this.start&&this.end){var shape;this.start.distance(this.end)>5&&(this.shapeType>=states.ShapeState.LINE&&this.shapeType<=states.ShapeState.ARROW_EQUILIBRIUM?(shape=new d2.Line(this.start,this.end),this.shapeType===states.ShapeState.ARROW_SYNTHETIC?shape.arrowType=d2.Line.ARROW_SYNTHETIC:this.shapeType===states.ShapeState.ARROW_RETROSYNTHETIC?shape.arrowType=d2.Line.ARROW_RETROSYNTHETIC:this.shapeType===states.ShapeState.ARROW_RESONANCE?shape.arrowType=d2.Line.ARROW_RESONANCE:this.shapeType===states.ShapeState.ARROW_EQUILIBRIUM&&(shape.arrowType=d2.Line.ARROW_EQUILIBRIUM)):this.shapeType===states.ShapeState.BRACKET&&(shape=new d2.Bracket(this.start,this.end))),this.start=void 0,this.end=void 0,shape&&this.sketcher.historyManager.pushUndo(new actions.AddShapeAction(this.sketcher,shape))}},_.draw=function(ctx){if(this.start&&this.end)ctx.strokeStyle="#00FF00",ctx.fillStyle="#00FF00",ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(this.start.x,this.start.y),this.shapeType===states.ShapeState.BRACKET?(extensions.contextHashTo(ctx,this.start.x,this.start.y,this.end.x,this.start.y,2,2),extensions.contextHashTo(ctx,this.end.x,this.start.y,this.end.x,this.end.y,2,2),extensions.contextHashTo(ctx,this.end.x,this.end.y,this.start.x,this.end.y,2,2),extensions.contextHashTo(ctx,this.start.x,this.end.y,this.start.x,this.start.y,2,2)):extensions.contextHashTo(ctx,this.start.x,this.start.y,this.end.x,this.end.y,2,2),ctx.stroke();else if(this.shapeType===states.ShapeState.BRACKET){ctx.lineWidth=2,ctx.lineJoin="miter",ctx.lineCap="butt";for(var i=0,ii=this.sketcher.shapes.length;ii>i;i++){var s=this.sketcher.shapes[i];if(s instanceof d2.Bracket){var minX=m.min(s.p1.x,s.p2.x),maxX=m.max(s.p1.x,s.p2.x),minY=m.min(s.p1.y,s.p2.y),maxY=m.max(s.p1.y,s.p2.y),c=this.control&&this.control.s===s?this.control:void 0;drawBracketControl(ctx,maxX+5,minY+15,c,1),drawBracketControl(ctx,maxX+5,maxY+15,c,2),drawBracketControl(ctx,minX-17,(minY+maxY)/2+15,c,3)}}}},states.ShapeState.LINE=1,states.ShapeState.ARROW_SYNTHETIC=2,states.ShapeState.ARROW_RETROSYNTHETIC=3,states.ShapeState.ARROW_RESONANCE=4,states.ShapeState.ARROW_EQUILIBRIUM=5,states.ShapeState.BRACKET=10}(ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.uis.actions,ChemDoodle.uis.states,Math),function(states){"use strict";states.StateManager=function(sketcher){this.STATE_NEW_BOND=new states.NewBondState(sketcher),this.STATE_NEW_RING=new states.NewRingState(sketcher),this.STATE_CHARGE=new states.ChargeState(sketcher),this.STATE_LONE_PAIR=new states.LonePairState(sketcher),this.STATE_RADICAL=new states.RadicalState(sketcher),this.STATE_MOVE=new states.MoveState(sketcher),this.STATE_ERASE=new states.EraseState(sketcher),this.STATE_LABEL=new states.LabelState(sketcher),this.STATE_LASSO=new states.LassoState(sketcher),this.STATE_SHAPE=new states.ShapeState(sketcher),this.STATE_PUSHER=new states.PusherState(sketcher),this.STATE_QUERY=new states.QueryState(sketcher);var currentState=this.STATE_NEW_BOND;this.setState=function(nextState){nextState!==currentState&&(currentState.exit(),currentState=nextState,currentState.enter())},this.getCurrentState=function(){return currentState}}}(ChemDoodle.uis.states),ChemDoodle.uis.gui.imageDepot=function(){"use strict";var d={};return d.getURI=function(s){return"data:image/png;base64,"+s},d.ADD_LONE_PAIR="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAANElEQVR42mNgGAWjYHACGyB+DMTPgdiFDHkMAFL8H4qfkyFPewNtoApB2IMM+VEwCgYcAADjvBhZpYZJbQAAAABJRU5ErkJggg==",d.ADD_RADICAL="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAL0lEQVR42mNgGAWjYGgAGyB+DMTPgdiFGgaCDPsPxc8HpYE2UINA2GM0BYyCoQAAdQgMLdlWmzIAAAAASUVORK5CYII=",d.ANGLE="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",
d.ANIMATION="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",d.ARROW_DOWN="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",d.ARROW_EQUILIBRIUM="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAV0lEQVR42mNgGAXDArBQ28AKIL4GxAFAzEMtF/6H4s9AfBKIq4DYBFnRfyrhx0Mj1h5T0ctwYADERUB8FYh/APEvqAKqxCIHEHsA8Xkgbhj0iXgUDAAAAG9tMdQezXJsAAAAAElFTkSuQmCC",d.ARROW_RESONANCE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAWUlEQVR42mNgGAWjYPACFiBWwSOvAcQc+AzgAWIXIJ4BxP+h2AOPehMkdduAuAiIbaDmMNQgSVIDo7hwERkuPADEFUDsAHMhriBwgIYlNgDynshoUhsFVAIA/dMiIBsQRGUAAAAASUVORK5CYII=",d.ARROW_RETROSYNTHETIC="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAYElEQVR42mNgGI5AhZqGKQDxbSA2oaahBrQ01ILahr4HYhtskv8pwF9xGUouAHn7MRA7UNNQG6hrPahtoA+1vPwc3XWURooPtZLNc2qFG8iw+9Q2zIFahQPV05zG0C59AY3IMME0CTYYAAAAAElFTkSuQmCC",d.ARROW_SYNTHETIC="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAUklEQVR42mNgGAWjgC5ABoh5qGmgAhD/B+I7QJwAxALUMPQg1NAHQPwdiPegG/6fipgssA+q+REQ/wDivUCcAsQi5EYKLAzJNgQ9UmRGE/tIBgDIaCG7b3KulAAAAABJRU5ErkJggg==",d.BENZENE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA5klEQVR42s2VPwrCMBSH06k0o1MX6R2c7A08hDfRRdDVgp5BR71GvUKdtHNvIMRf4FcoIdgkzeCDD0r+fLyQl1ch3GMmIkUOzuADDkBOEVWgA0ewABfQgjVIQkU5x/vMlqAGD1CGiFKwBS+QcSxhli2znpsyvVAZIh0r8AQ3UFiS0FnvuDczJ9XgW2++g4bSsVC/BiWPt+FxXSRqbEHmmZVyTvtvhTKmUMvesS+lYO0Fl01f2JWlsJvQws75UjpDnPL4Xk/PRdzLSjaGmo3Cq30Nxbp9XXlhXu3LJj6xwe6nNNigX8AXVupH9hGtsNcAAAAASUVORK5CYII=",d.BOND_ANY="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA3UlEQVR42mNgGMRAgJqGeQDxc2oZ6gLE76GGUs0wH2oYZkNNw0Auew3EEQMS/fOB2AGJbwQVg4FsIFYA4glArAkVEwfiemyGqUOjfw2SGMjwv0AcB+V3Qg0CheFaqNhUqF4M0A3E/kB8H4hFkQyciiTWieSyDUCcAhXDAGxAfB6I+YG4C4hLkAwsAuIkIF6GZiCIfgPEfNgMDAPi9UDcCMTNQHwJzUAGqPx5JANB4AKuyNgMxMJI/FVAbI1moAg0jLWIMZCmifY9tRItVfOmBzUNE4AGtgc1sxxVCkcAqLktfrI9I0gAAAAASUVORK5CYII=",d.BOND_DOUBLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAQUlEQVR42mNgoA7gZqAicADi+0DMRS3DXgGxPTVcim4YzKVUMwyZP2rYqGGjhg0Dw7ihpQRVDIMBLmoahsulZAEA2GgvCVlTJIIAAAAASUVORK5CYII=",d.BOND_DOUBLE_AMBIGUOUS="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAwElEQVR42q2UsQ2DQBAE38EnBDQAJUBGA6YM04UD3n1AYhdhMkqAHpw4owgkJNbSfuLw904aIZLV3t/tOWdTmTOsGnytRHPwATcLpxcwgYH/HZ0mVwALXY10WqWKtWADDVjBm+0nVUmxO79BadPT0UyxqzrVF4V+b1eoYg+wgyedymIH6FUhzzZ3C7GSA9jYplRxz2YOwCtxCn97VihBn+ioUfesZhYHZnNVEpDxSsQTNDKbJhe3o9PcGVR0WikiJ/j5KxJqecPNAAAAAElFTkSuQmCC",d.BOND_HALF="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAYklEQVR42mNgGAVkAA8g3k4tw0yA+DXUUIqBC9SwGGq57jYQ+1Az7FioYYgCtQwCAQMgvg/EKtQy7DG1YtMB6jKqRUAFtVxGVeBATVeBIuA5tcIMFptUMUyH2rHJAXXh4AIAvQ0O0wCO68MAAAAASUVORK5CYII=",d.BOND_PROTRUDING="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAl0lEQVR42mNgoAwEAHEDA5WAChC/B+L/1DCUBYivQw37Tw1Dl6MZRpGhBTgM+w3EFaQaZgPEn7EY9hiIPUg1TAaI72Mx7DAQK5ATCbuxGNYPxDzkhFs3lvCKoCTxIht2G4g1qJF4QXg9uV5ET7xkJQlciZesJIEr8ZKVJHAl3n5Kwgs58d6mJEmgR8J0SpIENq/yMAx7AADDzz/MOB6JagAAAABJRU5ErkJggg==",d.BOND_QUADRUPLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAYElEQVR42mNgIA9wM1AROADxfSDmopZhr4DYnhouRTeMIpdiM4xslxIyjCSXEmMY0S4l1TCYS6lmGDJ/1DAKDeOGxg5VDIMBLmoaRq5LiQJc1DSMWJeSBbioaRgulxIFAGBAR5Vp19YFAAAAAElFTkSuQmCC",d.BOND_QUINTUPLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAcElEQVR42q3UsQ2AMAxEUdfJUGb/JdwzBRYChKIkzsV3kguap98QEWxViDv8zK+wsNNPGaUtlirtYdulEQaVrmDLpSg2Ld3BhqVZ7C2lYd93fWQl4fcKE/v/+MbCsqXhE2UsDC2FH1NjYVFpam3pdBfQk0tlqZTZlgAAAABJRU5ErkJggg==",d.BOND_RECESSED="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAQUlEQVR42mNgGGQghJqGBQDxbyBOoaahCYPSUGyaYYYOI28y4PDm4IxNBmp6k2JAE28OPvAdiBuoaaALwyggBQAA+tATdpIiCMcAAAAASUVORK5CYII=",d.BOND_RESONANCE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAfUlEQVR42mNgoA7gZqAicADi+0DMRS3DXgGx/aA3zAOIt1PLMBMgfg01lGLDXKCGxVArzG4DsQ81I4CFGoYpkGsQNsMMoIlYhVqGPaZWbMKyF9UioIJaLqNqdnIg11W4IuA5uWHGDQ1w9Nj0ocS7sMJRh5LYxAY4oC4kGwAAJbAmYdoaIPoAAAAASUVORK5CYII=",d.BOND_SEXTUPLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAZElEQVR42s3OMQ6AMAxDUc/uocr9L8HOKZqBCaXgBiNhKevPA7Q1GLfF7XF0xY647pBeY6+kWawsfYotSZWYLF2N3Uorsam0nZ+6U8o/S/GFFE5pOjpjVak0OmOqtDQ6YzNpugFelEmRwpAbowAAAABJRU5ErkJggg==",d.BOND_SINGLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAMklEQVR42mNgGMSAm5qGOQDxfSDmopZhr4DYftSwUcNGDRs1jP6GcUPLM6oYBgNUKRwBiE8XjxDJvZUAAAAASUVORK5CYII=",d.BOND_TRIPLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAUUlEQVR42mNgoAxwM1AROADxfSDmopZhr4DYnhouRTeMIpdiM4xslxIyDOZSqhmGzB81bNSwATeMG5rCqWIYDHBR0zBiXUoW4KKmYbhcShIAAA2MPiFy45L3AAAAAElFTkSuQmCC",d.BOND_ZERO="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAH0lEQVR42mNgGAVkgPtQPHgNHA2z0TAbDbPRMBsAAADVkQ3x7nq43wAAAABJRU5ErkJggg==",d.BROMINE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA3UlEQVR42mNgGAVUB8s0NDYu09T8D8LLNTVvA+lZKzQ1dSg18MRSTU2X5RoarUD2dyC+SKmBu+B8Tc0FQPx3prExK1UMXK6lNRPo2rNIFnQB1UwCikUs09K6DuQXEGXgQg0NYaCGGCD7xVItLX8kA5cD8R1QsADDOBZosCoxBv6F4v9AQxNR5CEGPl2kpydGkpdXqalJA+ksIH4AxLNRDASqITsMgV6yA7kUlnQoNhCYdBRABgINzqTEwINAA+SXq6ubANnrgfgfiE2Jgf+h+C0QrwSKBZMdhqNg4AEAUSSF6Clvq/4AAAAASUVORK5CYII=",d.CALCULATE="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",d.CARBON="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA2klEQVR42mNgGAXYwMyZM1knTZqk1dvbK9vQ0MBEtkETJ06UmzBhwi4g/gXEn4D4L5R9jGTDQK4BanwPxNeArtP///8/4/z58zmAfFcg7iHZQKCmaUD8derUqRIUh9mqVauYgYb9ABlKlUiYPHmyItCw//39/QlUMRBokAPIQFB4UcXAvr4+XaiB4VQxsLu7mxtqYDPVEjM0/b0BJhk+qhgINMgQaOBvID4LS4fAXMIC5JsDw3gCuZFjBDTgPNT7n4H4O1DsApDuoMi1HR0d/MBsaAyiR0s22gMANJ6AxDvp00kAAAAASUVORK5CYII=",d.CHARGE_BRACKET="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAYUlEQVR42mNgGAnACYhF0AX/Q3EDDk0NSGrQwUogNsZmIDEApk4MiOWheAsQ+yLxyTJwIhBfgOIPQHwLiU+WgVT3Mk0NlAZiDkoNXAjEz3Bgil1IkcJRA4e6geSWNkMMAAAxJTQf078zGQAAAABJRU5ErkJggg==",d.CHLORINE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA9klEQVR42mNgGAXIwPi/MavcZzkt5bfKsgz/GZiQ5RTeKyTIfZBLI8ogpXdKcgofFHbJf5D/BcSfgPgvlH0MpgbIXq7wUWEjQcNArgEqfg/E1xTfK+oDXcao8F+BA+gaV6BYD8kGAhVOA+KvCl8UJAioI8LA/wzMQIU/QIYSYTFhA4GKFIH4PyjAqWIg0CAHkIGg8KKKgTLvZHTBLvygEE4VA8VfiHODDATGcTNVDAR7G5L+3qi8VeGjioFA1xkCFf8G4rOwdAjELEDN5kA8gWQDoYqNgPg82Psf5D8D8XcgvgB0fQdZBiJlQX5gjBuD6NGSjX4AAER4jBfAQ3QdAAAAAElFTkSuQmCC",d.CLEAR="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAKQ2lDQ1BJQ0MgUHJvZmlsZQAAeAGdlndUU1kTwO97L73QEkKREnoNTUoAkRJ6kV5FJSQBQgkYErBXRAVXFBVpiiKLIi64uhRZK6JYWBQUsC/IIqCsi6uIimVf9Bxl/9j9vrPzx5zfmztz79yZuec8ACi+gUJRJqwAQIZIIg7z8WDGxMYx8d0ABkSAA9YAcHnZWUHh3hEAFT8vDjMbdZKxTKDP+nX/F7jF8g1hMj+b/n+lyMsSS9CdQtCQuXxBNg/lPJTTcyVZMvskyvTENBnDGBmL0QRRVpVx8hc2/+zzhd1kzM8Q8VEfWc5Z/Ay+jDtQ3pIjFaCMBKKcnyMU5KJ8G2X9dGmGEOU3KNMzBNxsADAUmV0i4KWgbIUyRRwRxkF5HgAESvIsTpzFEsEyNE8AOJlZy8XC5BQJ05hnwrR2dGQzfQW56QKJhBXC5aVxxXwmJzMjiytaDsCXO8uigJKstky0yPbWjvb2LBsLtPxf5V8Xv3r9O8h6+8XjZejnnkGMrm+2b7HfbJnVALCn0Nrs+GZLLAOgZRMAqve+2fQPACCfB0DzjVn3YcjmJUUiyXKytMzNzbUQCngWsoJ+lf/p8NXzn2HWeRay877WjukpSOJK0yVMWVF5memZUjEzO4vLEzBZfxtidOv/HDgrrVl5mIcJkgRigQg9KgqdMqEoGW23iC+UCDNFTKHonzr8H8Nm5SDDL3ONAq3mI6AvsQAKN+gA+b0LYGhkgMTvR1egr30LJEYB2cuL1h79Mvcoo+uf9d8UXIR+wtnCZKbMzAmLYPKk4hwZo29CprCABOQBHagBLaAHjAEL2AAH4AzcgBfwB8EgAsSCxYAHUkAGEINcsAqsB/mgEOwAe0A5qAI1oA40gBOgBZwGF8BlcB3cBH3gPhgEI+AZmASvwQwEQXiICtEgNUgbMoDMIBuIDc2HvKBAKAyKhRKgZEgESaFV0EaoECqGyqGDUB30I3QKugBdhXqgu9AQNA79Cb2DEZgC02FN2BC2hNmwOxwAR8CL4GR4KbwCzoO3w6VwNXwMboYvwNfhPngQfgZPIQAhIwxEB2EhbISDBCNxSBIiRtYgBUgJUo00IG1IJ3ILGUQmkLcYHIaGYWJYGGeMLyYSw8MsxazBbMOUY45gmjEdmFuYIcwk5iOWitXAmmGdsH7YGGwyNhebjy3B1mKbsJewfdgR7GscDsfAGeEccL64WFwqbiVuG24frhF3HteDG8ZN4fF4NbwZ3gUfjOfiJfh8fBn+GP4cvhc/gn9DIBO0CTYEb0IcQUTYQCghHCWcJfQSRgkzRAWiAdGJGEzkE5cTi4g1xDbiDeIIcYakSDIiuZAiSKmk9aRSUgPpEukB6SWZTNYlO5JDyULyOnIp+Tj5CnmI/JaiRDGlcCjxFCllO+Uw5TzlLuUllUo1pLpR46gS6nZqHfUi9RH1jRxNzkLOT44vt1auQq5ZrlfuuTxR3kDeXX6x/Ar5EvmT8jfkJxSICoYKHAWuwhqFCoVTCgMKU4o0RWvFYMUMxW2KRxWvKo4p4ZUMlbyU+Ep5SoeULioN0xCaHo1D49E20mpol2gjdBzdiO5HT6UX0n+gd9MnlZWUbZWjlJcpVyifUR5kIAxDhh8jnVHEOMHoZ7xT0VRxVxGobFVpUOlVmVado+qmKlAtUG1U7VN9p8ZU81JLU9up1qL2UB2jbqoeqp6rvl/9kvrEHPoc5zm8OQVzTsy5pwFrmGqEaazUOKTRpTGlqaXpo5mlWaZ5UXNCi6HlppWqtVvrrNa4Nk17vrZQe7f2Oe2nTGWmOzOdWcrsYE7qaOj46kh1Dup068zoGulG6m7QbdR9qEfSY+sl6e3Wa9eb1NfWD9JfpV+vf8+AaMA2SDHYa9BpMG1oZBhtuNmwxXDMSNXIz2iFUb3RA2OqsavxUuNq49smOBO2SZrJPpObprCpnWmKaYXpDTPYzN5MaLbPrMcca+5oLjKvNh9gUVjurBxWPWvIgmERaLHBosXiuaW+ZZzlTstOy49WdlbpVjVW962VrP2tN1i3Wf9pY2rDs6mwuT2XOtd77tq5rXNf2JrZCmz3296xo9kF2W22a7f7YO9gL7ZvsB930HdIcKh0GGDT2SHsbewrjlhHD8e1jqcd3zrZO0mcTjj94cxyTnM+6jw2z2ieYF7NvGEXXReuy0GXwfnM+QnzD8wfdNVx5bpWuz5203Pju9W6jbqbuKe6H3N/7mHlIfZo8pjmOHFWc857Ip4+ngWe3V5KXpFe5V6PvHW9k73rvSd97HxW+pz3xfoG+O70HfDT9OP51flN+jv4r/bvCKAEhAeUBzwONA0UB7YFwUH+QbuCHiwwWCBa0BIMgv2CdwU/DDEKWRrycyguNCS0IvRJmHXYqrDOcFr4kvCj4a8jPCKKIu5HGkdKI9uj5KPio+qipqM9o4ujB2MsY1bHXI9VjxXGtsbh46LiauOmFnot3LNwJN4uPj++f5HRomWLri5WX5y++MwS+SXcJScTsAnRCUcT3nODudXcqUS/xMrESR6Ht5f3jO/G380fF7gIigWjSS5JxUljyS7Ju5LHU1xTSlImhBxhufBFqm9qVep0WnDa4bRP6dHpjRmEjISMUyIlUZqoI1Mrc1lmT5ZZVn7W4FKnpXuWTooDxLXZUPai7FYJHf2Z6pIaSzdJh3Lm51TkvMmNyj25THGZaFnXctPlW5ePrvBe8f1KzEreyvZVOqvWrxpa7b764BpoTeKa9rV6a/PWjqzzWXdkPWl92vpfNlhtKN7wamP0xrY8zbx1ecObfDbV58vli/MHNjtvrtqC2SLc0r117tayrR8L+AXXCq0KSwrfb+Ntu/ad9Xel333anrS9u8i+aP8O3A7Rjv6drjuPFCsWryge3hW0q3k3c3fB7ld7luy5WmJbUrWXtFe6d7A0sLS1TL9sR9n78pTyvgqPisZKjcqtldP7+Pt697vtb6jSrCqsendAeODOQZ+DzdWG1SWHcIdyDj2piarp/J79fV2tem1h7YfDosODR8KOdNQ51NUd1ThaVA/XS+vHj8Ufu/mD5w+tDayGg42MxsLj4Lj0+NMfE37sPxFwov0k+2TDTwY/VTbRmgqaoeblzZMtKS2DrbGtPaf8T7W3Obc1/Wzx8+HTOqcrziifKTpLOpt39tO5Feemzmedn7iQfGG4fUn7/YsxF293hHZ0Xwq4dOWy9+WLne6d5664XDl91enqqWvsay3X7a83d9l1Nf1i90tTt3138w2HG603HW+29czrOdvr2nvhluety7f9bl/vW9DX0x/Zf2cgfmDwDv/O2N30uy/u5dybub/uAfZBwUOFhyWPNB5V/2rya+Og/eCZIc+hrsfhj+8P84af/Zb92/uRvCfUJyWj2qN1YzZjp8e9x28+Xfh05FnWs5mJ/N8Vf698bvz8pz/c/uiajJkceSF+8enPbS/VXh5+ZfuqfSpk6tHrjNcz0wVv1N4cect+2/ku+t3oTO57/PvSDyYf2j4GfHzwKePTp78AA5vz/OzO54oAAAAJcEhZcwAACxMAAAsTAQCanBgAAAKZSURBVDgRlZTLTxNRFId/La2VkNCh0hQVZayatJGFxhAiqBnYyIaEjWt15QpS/gIhbBoXxrglaV36iAGf2+Kim66awIJUA0QXxr5mOtNpp9N26rmVaZgK03iTM/fc8/jmzJl7r6PVasFurK2t8bIsx0VRFPb29pBMJh/VarWXJ+Yw4EmyuLgYCYfDIiXvkzwk2SBJnBTP7MfClpaW+NnZ2QQlM9gKCdcO/qv/H3B+fj7icrkYKG6CzIoikcjKxMSELdBFSZ0xNDS0IUkSR4YbBDkwHdFoNE4V816vlw8Gg5wgCIl8Po9MJrOq6/qWGcdmC5BgqwRKHw1guqZpC/QyLpVKoVgsgn6SsLu7y9r1ntxbLMYcDjKa+rFzLBYTCoVCPDh2gee8g2hSeK1SxtNnL1AUxedut3s1nU5LZrItcH19XRj2+RLXQlcxejaAlrMPLYcT1bKMQi6L12/e4e2Hz1s7OzszJtBpKsfN1KcHl8dGcT7gh2EYlpCB/tOYuT0JzymXcNRh6eFRB9NzuRy/+fEL9a2AO9O3MDd3rxPCWiUrCup6vWNjii2wWq1CmJqE38fBHxixJLJFk6rurtwWyIK9I6MYvngJdTixrxhokE0tkyh0fOQ+1A2H5UW2QBaZ+ilCzdLW8XDQSSRVR4lEUh3IZtxQdCvQ9qcwoPTrB7Lft1Ep/mbLnqNnhfzNaZw7E0Re0dqV9SL2rLAXoNvfs8L0p1fIigq849MYHL/bnf/P2hao0D6buv8YocAVFOiT5crhnqM9aDR0NDUVRrNpgdoC6TaBJ/kVHv8+lIqGSq2JstaAWqV+iiVI37ahlTvHuA22PcuhUOg63SxPVFVdcPUPHF7GdClTaotV1qgdkLpZKpWW2zR6/AFFS6MWxt319AAAAABJRU5ErkJggg==",d.CYCLOBUTANE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAiklEQVR42q3UwQ2AIAwF0E7hOv4bTCN7uwIXG0MTYgRa2iYNF3lB+ECkr4MCK3NX7hSBgfvmvtp4RmCCnB4Ug8lbKBaTTCiUH6tQGH9nimJzw3/R7IyEoEluQG0581RpzlvJuUL0KyRnaKd7b0VVB6lFTalYoVsRG6HwHOAXRcQTJmiJwPqcql7sB1sQMyMuYZLDAAAAAElFTkSuQmCC",d.CYCLOHEPTANE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA+UlEQVR42mNgIB4IMFABMAOxJxCvAeK/QLwAiA3IMUgTiDuB+CkQnwDiDCBWAuIKIH4ExIeAOASIWfAZIgzEmUB8EmpQBxBr4HA1yLCDUMMrgVgcXREPEP8D4pVA7AHVRAzQB+J5UL08yBKKQPyQgrAGuVQBWcARiA9QYCDI+w7IAonQGCQXLATiBGSBRiBuoMBADP0YNpAIMHyIEQYkAow4wIglEgFKKuGFpiMTCgw0gZrBCxMIgdogQYZhElC9IegS1dB8y0GCYRzQrFqNS8FSKCYWLCOkngPqymoiDKsh1kewMAnCoyaY1DA3BOL/BLAhqbHHRY4cAH9nN15emqC1AAAAAElFTkSuQmCC",d.CYCLOHEXANE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAoElEQVR42mNgIB4IMVAJSADxZCD+A8StQMxFiUH9QPwWiPuA2AiIlwLxYyCOAWJGcg2SQJO3AOITQHwSiC0pMQgZMEJd+Rjqall0BZxA/J8Ig9ABKDwboXo50SX/UxBx/4kWHDVw1EDcemEJu5+aCVsCmlPeEmEwwaxHisGW0ILhBLSgIKn4QjYYVHwtA+JHpBZf2AyeBC1gWygpYMmqAgB+TzRkG9cEtwAAAABJRU5ErkJggg==",d.CYCLOOCTANE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABBElEQVR42q2UvQ6CMBSFSXS1g4PRzVUXeRGdHH0KWfQlINGB1VcgzJLokxB2B3dIPDWnSYO1QutJvkB/ONxL7yUIumsU/EFLEIECNCAHOyC6GozBBqSgJPJ+DaY0y8CTVzme2MxkFFewBwvLiwXNcj4zM23a0KyvLuBgWkgZWV+FoAKD9kL5I02b7mDbPs3Soxqk2U2fiJiyq4ZMe6UmCpaGj448oHcHNKwz3yao1UB1gI8ScFID1QGuktk99CwF20l4RBe3JzPHtD+i09POHQzPpugC/jUaHn3YMbIzT3b+bdOMjV5p7TQ0GCVMM7aZ6Rpo7VSxaJctI+e6XfEz1Kwzq9ELFZA4hr9lYwQAAAAASUVORK5CYII=",d.CYCLOPENTANE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA0klEQVR42mNgIB6IMFAJMAFxKRD/BuI0Sg1TAeJDUOwOxFeBeAEQc5Hjqnwgfg3EeUDMCBUHGTQfarAWOa5SxqEmHohfAXECOa7CBbTwBYEWEa7CBpCDwAAmKAjEf6ExyUhm5KUD8R8gFoAJ7AHiIApSA0jvbmSBHKjTyQUgvdnIAvJA/BIaMeQksZdQM1DAJSC2IMNAS6heDNAKxaQCnPpw2kQA4PQZzrDAAwiGPUZsEQCg1DGPUHraQYKBOwmlXx4g/k8i5iFkKxsJLmRjoDUAAID6NQMa+if+AAAAAElFTkSuQmCC",d.CYCLOPROPANE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAjElEQVR42mNgGE5AgZqGiQDxfyCWoJaBk4H4ORBPp4ZhGkB8G4h5gPg6EBtQauB2IA6Asj2AeD8Qs5BrGDYDkC0gCbDg8CIsCDhINbAATySAIqmC1GRyH08yISRPlgsKiE1GxIYRC7HJiJRYJJiMyElnOB3AQmZOwBlEBRTkVYxIlICWJpRimcFfCgMA4CwtbAP2SjIAAAAASUVORK5CYII=",d.DECREASE_CHARGE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAs0lEQVR42mNgGAU4gAAQK0BpsgELEGcA8WUg/g3E/6H4NhCXQOVJMmw/EL8G4gYgdoC60AKIK4D4ORAfB2IeYg07DMT3gVgFhxoZID4PNZSDkIE5UJepEFAnA3VpCSEDL0O9SQyogIYp3tj8DQ0zUPhI4sE80DD9jy/2FaAKFKCu/I8H16Opp48LqR6GNIllWDq8jidsZKBqiEqHyIZSJacgG5oDdSly7N6HepNjwEubwQEAQdI454gPA8EAAAAASUVORK5CYII=",d.DISTANCE="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",d.ERASE="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",
d.FLUORINE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAUElEQVR42mNgGAU0AxPuB26c8CDgPxr+SqmBpyc+DDCG4UkP/AwpNXAvtb08+A38A8SfYbj/ob8LpQae6Hvoqw3DU1+F8oxGygAaOAoGDgAAN7dbSHln+I0AAAAASUVORK5CYII=",d.HYDROGEN="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAANElEQVR42mNgGAW0BBuBeC8W8SIg/jtqINEGngBiTTTcSYmB/4D4Jxr+Mxopw8jAUTBAAADIhCT11Q14ZwAAAABJRU5ErkJggg==",d.INCREASE_CHARGE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAyklEQVR42mNgGAU4gAAQK0BpsgELEGcA8WUg/g3E/6H4NhCXQOVJMmw/EL8G4gYgdoC60AKIK4D4ORAfB2IeYg07DMT3gVgFKsYDNRhmgAwQn4caykHIwByoy1SQxCSh3pVEEpOBurSEkIGXoa5hIGAgA9T7twnF5m9omPFADQBhA6iBBkhiPNAw/Y8v9hWgChSgrvyPB9ejqaePC6kehjSJZVg6vI4UNjzQMENOh4eJTYfIhlIlpyAbmgN1KXLs3od6k2PAS5vBAQCFSEECjKrjagAAAABJRU5ErkJggg==",d.IODINE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAI0lEQVR42mNgGAV0AVMYpmyeyjB196iBowaOGkhXA0cBfQEADcspQU08dAAAAAAASUVORK5CYII=",d.LASSO="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",d.LASSO_SHAPES="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",d.MARQUEE="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",d.MOVE="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",d.NITROGEN="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAoElEQVR42mNgGAU0AwaBPzYaBPx4Z+z7SQRZXN/vlyFQ/L9l6H9Ocgz8b+D/YxY1DfwJxH8N/X6ZUMdAoOuAml8ZBPw8wcDwn5EaLuw09P8eBzJA3/97IlUMBLMDfuwH4pfGof/5qWKgUeBPTWh4TqCKgRD+91Yg/zcsCCg2EGQAkH8PiJ9SxUAQMAz44QlOm9QyEBzLAT/WkGXgKBg4AABF1poQYk+4pAAAAABJRU5ErkJggg==",d.OPEN="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",d.OPTIMIZE="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",d.OXYGEN="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABCklEQVR42mNgGAXYwH8pKa7/PDxa/xkY2CgzSFBQ7j8v7wEg/gPEn4H4JxBvAGJh0g3j4pICanwDxCf+8/MrgcW4uXWB/FtAfA/katIM5OGZCNT44b+AgACKOD+/MtTFxcQbxsDADNTwDWQoVnle3nVAfJt4A/n5FYEa/v/n44vF4fpqoPxfoiMJqMEBbCA3twsOFyaC5aFhS4yBOmANPDwhOAwsAssLCfERG4acQA3/gLgKqzwf33Sg3CvSYpmXdy0Q3wEazoQiLirKAxR/jyvC8BmoAY3pZTCvAcNUHCi2F5w+eXhESU/ckLC8CE13T8Axy8u7D5SDKMuCvLwiwBg1Bnl3tGSjPQAAoX15+BfxFYQAAAAASUVORK5CYII=",d.PERIODIC_TABLE="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",
d.PERSPECTIVE="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",d.PHOSPHORUS="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAeElEQVR42mNgGAU0A/8bGDYC8X8o/gLEV/43MqRSZmA9wwkgtgAalA/kXwSy//1vYtCnxIW74PxGBnewa+sZMqhjYD2DCtTAHOoY2MDQAjXQjBIDrwANKALS+4H4D5A9g9JY/gA1bC4Q+1Ej2eyidjocSQaOgoEDAIsaZcCSspZYAAAAAElFTkSuQmCC",d.PUSHER_BOND_FORMING="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABAUlEQVR42mNgQAAdIH4PxJeBOIaBOBABxNeB+DkQm6BLdgNxPxBbAPFjIGYhwsD7QOwAxM1APBld8jRUkgHqSg0ChilAXccA1XceXQHI2TJQ9mwgziFgYAoQL4ayJYD4NbqC/0jeLADi6QQMBHmxBE0/hoHIgb2agIGr0SLvPz7FFtAwxQdOQ9XhjK37aAF+n4gYVsBlBrqBEtBIwgeeQ9XhMoMBW5iCwugaUviA6IdAnEAozHAZ+ARKb4aKrUcylCwDvwLxDyBWgYqB6F9QObIMPAnE89HElwDxH3IN/I7kOgYkV5Jt4HwcchvJNVAFh5wKOQYOLtCAlBQowfVUNxAAeY1sopoKHG8AAAAASUVORK5CYII=",d.PUSHER_DOUBLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA8klEQVR42mNgGACgA8QxQBwAxCKUGOQAxKeB+DwQzwfiw0D8HohzyDEM5JrXQBwBxCxI4hpQC7pJ9eJjIDbBIS8BxLeBOIFYA/cDcQUBNSZQS3mICbfbaN7EBZYDcQEhRYuJcB0MeEDDE6flPNBYVCDSQBYCYQ327mUSUwPI2ym4JEuAeDaRBskAsQpUz3SoK1WwhV8JkQaCguc/NOHfg7IxYhyUE1xI8O5zqEEwjAFuY3M2HpAJxP+ghu3FpgAUwwIkGAhS+xdqYC82Bf/JyPM3ofpiqGVgGVSfCbXKSgFsMXwfinHxCYF+dAFKDZRB5gAAj/I5E2fZy9MAAAAASUVORK5CYII=",d.PUSHER_SINGLE="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA6ElEQVR42mNgGACgA8QxQBwAxCKUGOQAxKeB+DwQzwfiw0D8HohzyDEM5JrXQBwBxCxI4hpQC7pJ9eJjIDbBIS8BxLeBOIFYA/cDcQUBNSZQS3mICbfbaN7EBZYDcQEhRYuJcB0MeEDDE6flPNBYVCDSQBYCYQ327mUSUwPI2ym4JEuAeDaJBoL0TIeyZdB9txiqgBTgAU38O4H4P9RQOADlBBcSDVSAGvQPiO+gS4KSiwqJBgpADbyKLSzfQxWQCkAGfsFWcPwnsxAB6duOS4JcA1OoWV7+x1VO3odiUsFxXBLkGoiSdgEanzHP7ILArQAAAABJRU5ErkJggg==",d.QUERY="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",d.REDO="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",d.REMOVE_LONE_PAIR="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAN0lEQVR42mNgGAWjYHACBSDeD8T/gfg4lE+KPAYAKTaBsg2gmkiRxwD/KeTT3oVUD8NRMAoIAAADoBa5tWLP/wAAAABJRU5ErkJggg==",d.REMOVE_RADICAL="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAM0lEQVR42mNgGAWjYGgABSDeD8T/gfg4lE8RABlmAmUbQA2lCPwnwB94F1I9DEfBKEADAAT6C11yCuPwAAAAAElFTkSuQmCC",d.SAVE="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",d.SEARCH="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",d.SETTINGS="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",d.SULFUR="iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAwUlEQVR42mNgGAXo4P9/Y7n///Wl//9nYKTQIAP///8NzwIN+w5k/wHir0BsQK6ruICa3wHxEiCbH8I3jPv/X1eJTAP1jICG/Qe6zoxK4WYmDDTwNxDXUzEyDOZBXGkw+/9/cz4qGMjACHIhEP8D4gdkRwgWl1oD8UNoLFtTKy2KAA17DcTzqRimhjuABh4jU7O+IdCAiP//VdihhpkADfsJpJvJdY0z0ICP0KTzDBoxi2EWUJiPDUxBYThaqtEPAAAQY5TwZ4cDHAAAAABJRU5ErkJggg==",
d.TORSION="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",d.UNDO="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",d.ZOOM_IN="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",d.ZOOM_OUT="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",d}(),function(desktop,imageDepot,q){"use strict";desktop.Button=function(id,icon,tooltip,func){this.id=id,this.icon=icon,this.toggle=!1,this.tooltip=tooltip?tooltip:"",this.func=func?func:void 0};var _=desktop.Button.prototype;_.getElement=function(){return q("#"+this.id)},_.getSource=function(buttonGroup){var sb=[];return this.toggle?(sb.push('<input type="radio" name="'),sb.push(buttonGroup),sb.push('" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.tooltip),sb.push('" /><label for="'),sb.push(this.id),sb.push('"><img id="'),sb.push(this.id),sb.push('_icon" title="'),sb.push(this.tooltip),sb.push('" width="20" height="20" src="'),sb.push(imageDepot.getURI(this.icon)),sb.push('"></label>')):(sb.push('<button id="'),sb.push(this.id),sb.push('" onclick="return false;" title="'),sb.push(this.tooltip),sb.push('"><img title="'),sb.push(this.tooltip),sb.push('" width="20" height="20" src="'),sb.push(imageDepot.getURI(this.icon)),sb.push('"></button>')),sb.join("")},_.setup=function(lone){var element=this.getElement();(!this.toggle||lone)&&element.button(),element.click(this.func)},_.disable=function(){var element=this.getElement();element.mouseout(),element.button("disable")},_.enable=function(){this.getElement().button("enable")},_.select=function(){var element=this.getElement();element.attr("checked",!0),element.button("refresh")}}(ChemDoodle.uis.gui.desktop,ChemDoodle.uis.gui.imageDepot,ChemDoodle.lib.jQuery),function(desktop,q){"use strict";desktop.ButtonSet=function(id){this.id=id,this.buttons=[],this.toggle=!0};var _=desktop.ButtonSet.prototype;_.getElement=function(){return q("#"+this.id)},_.getSource=function(buttonGroup){var sb=[];sb.push('<span id="'),sb.push(this.id),sb.push('">');for(var i=0,ii=this.buttons.length;ii>i;i++)this.toggle&&(this.buttons[i].toggle=!0),sb.push(this.buttons[i].getSource(buttonGroup));return this.dropDown&&sb.push(this.dropDown.getButtonSource()),sb.push("</span>"),this.dropDown&&sb.push(this.dropDown.getHiddenSource()),sb.join("")},_.setup=function(){this.getElement().buttonset();for(var i=0,ii=this.buttons.length;ii>i;i++)this.buttons[i].setup(!1);this.dropDown&&this.dropDown.setup()},_.addDropDown=function(tooltip){this.dropDown=new desktop.DropDown(this.id+"_dd",tooltip,this.buttons[this.buttons.length-1])},_.disable=function(){for(var i=0,ii=this.buttons.length;ii>i;i++)this.buttons[i].disable()},_.enable=function(){for(var i=0,ii=this.buttons.length;ii>i;i++)this.buttons[i].enable()}}(ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery),function(desktop,q){"use strict";desktop.CheckBox=function(id,tooltip,func,checked){this.id=id,this.checked=checked?checked:!1,this.tooltip=tooltip?tooltip:"",this.func=func?func:void 0};var _=desktop.CheckBox.prototype=new desktop.Button;_.getSource=function(){var sb=[];return sb.push('<input type="checkbox" id="'),sb.push(this.id),sb.push('" '),this.checked&&sb.push('checked="" '),sb.push('><label for="'),sb.push(this.id),sb.push('">'),sb.push(this.tooltip),sb.push("</label>"),sb.join("")},_.setup=function(){this.getElement().click(this.func)},_.check=function(){this.checked=!0,this.getElement().prop("checked",!0)},_.uncheck=function(){this.checked=!1,this.getElement().removeAttr("checked")}}(ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery),function(desktop,q){"use strict";desktop.ColorPicker=function(id,tooltip,func){this.id=id,this.tooltip=tooltip?tooltip:"",this.func=func?func:void 0};var _=desktop.ColorPicker.prototype;_.getElement=function(){return q("#"+this.id)},_.getSource=function(){var sb=[];return sb.push('<table style="font-size:12px;text-align:left;border-spacing:0px"><tr><td><p>'),sb.push(this.tooltip),sb.push('</p></td><td><input id="'),sb.push(this.id),sb.push('" class="simple_color" value="#000000" /></td></tr></table>'),sb.join("")},_.setup=function(){this.getElement().simpleColor({boxWidth:20,livePreview:!0,chooserCSS:{"z-index":"900"},onSelect:this.func})},_.setColor=function(color){this.getElement().setColor(color)}}(ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery),function(desktop,q,document){"use strict";desktop.Dialog=function(sketcherid,subid,title){this.sketcherid=sketcherid,this.id=sketcherid+subid,this.title=title?title:"Information"};var _=desktop.Dialog.prototype;_.buttons=void 0,_.message=void 0,_.afterMessage=void 0,_.includeTextArea=!1,_.includeTextField=!1,_.getElement=function(){return q("#"+this.id)},_.getTextArea=function(){return q("#"+this.id+"_ta")},_.getTextField=function(){return q("#"+this.id+"_tf")},_.setup=function(){var sb=[];if(sb.push('<div style="font-size:12px;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),this.message&&(sb.push("<p>"),sb.push(this.message),sb.push("</p>")),this.includeTextField&&(sb.push('<input type="text" style="font-family:\'Courier New\';" id="'),sb.push(this.id),sb.push('_tf" autofocus></input>')),this.includeTextArea&&(sb.push('<textarea style="font-family:\'Courier New\';" id="'),sb.push(this.id),sb.push('_ta" cols="55" rows="10"></textarea>')),this.afterMessage&&(sb.push("<p>"),sb.push(this.afterMessage),sb.push("</p>")),sb.push("</div>"),document.getElementById(this.sketcherid)){var canvas=q("#"+this.sketcherid);canvas.before(sb.join(""))}else document.writeln(sb.join(""));var self=this;this.getElement().dialog({autoOpen:!1,width:435,buttons:self.buttons})}}(ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery,document),function(c,structures,actions,desktop,q,document){"use strict";var makeRow=function(id,name,tag,description,component){var sb=["<tr>"];return sb.push("<td>"),-1===id.indexOf("_elements")&&(sb.push('<input type="checkbox" id="'),sb.push(id),sb.push('_include">')),sb.push("</td>"),sb.push("<td>"),sb.push(name),tag&&(sb.push("<br>(<strong>"),sb.push(tag),sb.push("</strong>)")),sb.push("</td>"),sb.push('<td style="padding-left:20px;padding-right:20px;">'),sb.push(description),component&&(1===component?(sb.push("<br>"),sb.push('<input type="text" id="'),sb.push(id),sb.push('_value">')):sb.push(component)),sb.push("</td>"),sb.push('<td><input type="checkbox" id="'),sb.push(id),sb.push('_not"><br><strong>NOT</strong>'),sb.push("</td>"),sb.push("</tr>"),sb.join("")};desktop.AtomQueryDialog=function(sketcher,subid){this.sketcher=sketcher,this.id=sketcher.id+subid};var _=desktop.AtomQueryDialog.prototype=new desktop.Dialog;_.title="Atom Query",_.setAtom=function(a){this.a=a;var use=a.query;use||(use=new structures.Query(structures.Query.TYPE_ATOM),use.elements.v.push(a.label));for(var i=0,ii=this.periodicTable.cells.length;ii>i;i++)this.periodicTable.cells[i].selected=-1!==use.elements.v.indexOf(this.periodicTable.cells[i].element.symbol);this.periodicTable.repaint(),q("#"+this.id+"_el_any").prop("checked",-1!==use.elements.v.indexOf("a")),q("#"+this.id+"_el_noth").prop("checked",-1!==use.elements.v.indexOf("r")),q("#"+this.id+"_el_het").prop("checked",-1!==use.elements.v.indexOf("q")),q("#"+this.id+"_el_hal").prop("checked",-1!==use.elements.v.indexOf("x")),q("#"+this.id+"_el_met").prop("checked",-1!==use.elements.v.indexOf("m")),q("#"+this.id+"_elements_not").prop("checked",use.elements.not),q("#"+this.id+"_aromatic_include").prop("checked",void 0!==use.aromatic),q("#"+this.id+"_aromatic_not").prop("checked",void 0!==use.aromatic&&use.aromatic.not),q("#"+this.id+"_charge_include").prop("checked",void 0!==use.charge),q("#"+this.id+"_charge_value").val(use.charge?use.outputRange(use.charge.v):""),q("#"+this.id+"_charge_not").prop("checked",void 0!==use.charge&&use.charge.not),q("#"+this.id+"_hydrogens_include").prop("checked",void 0!==use.hydrogens),q("#"+this.id+"_hydrogens_value").val(use.hydrogens?use.outputRange(use.hydrogens.v):""),q("#"+this.id+"_hydrogens_not").prop("checked",void 0!==use.charge&&use.charge.not),q("#"+this.id+"_ringCount_include").prop("checked",void 0!==use.ringCount),q("#"+this.id+"_ringCount_value").val(use.ringCount?use.outputRange(use.ringCount.v):""),q("#"+this.id+"_ringCount_not").prop("checked",void 0!==use.ringCount&&use.ringCount.not),q("#"+this.id+"_saturation_include").prop("checked",void 0!==use.saturation),q("#"+this.id+"_saturation_not").prop("checked",void 0!==use.saturation&&use.saturation.not),q("#"+this.id+"_connectivity_include").prop("checked",void 0!==use.connectivity),q("#"+this.id+"_connectivity_value").val(use.connectivity?use.outputRange(use.connectivity.v):""),q("#"+this.id+"_connectivity_not").prop("checked",void 0!==use.connectivity&&use.connectivity.not),q("#"+this.id+"_connectivityNoH_include").prop("checked",void 0!==use.connectivityNoH),q("#"+this.id+"_connectivityNoH_value").val(use.connectivityNoH?use.outputRange(use.connectivityNoH.v):""),q("#"+this.id+"_connectivityNoH_not").prop("checked",void 0!==use.connectivityNoH&&use.connectivityNoH.not),q("#"+this.id+"_chirality_include").prop("checked",void 0!==use.chirality),use.chirality&&"R"!==use.chirality.v?use.chirality&&"S"!==use.chirality.v?use.chirality&&"A"!==use.chirality.v||q("#"+this.id+"_chiral_a").prop("checked",!0).button("refresh"):q("#"+this.id+"_chiral_s").prop("checked",!0).button("refresh"):q("#"+this.id+"_chiral_r").prop("checked",!0).button("refresh"),q("#"+this.id+"_chirality_not").prop("checked",void 0!==use.chirality&&use.chirality.not)},_.setup=function(){function setNewQuery(){var query=new structures.Query(structures.Query.TYPE_ATOM);q("#"+self.id+"_el_any").is(":checked")&&query.elements.v.push("a"),q("#"+self.id+"_el_noth").is(":checked")&&query.elements.v.push("r"),q("#"+self.id+"_el_het").is(":checked")&&query.elements.v.push("q"),q("#"+self.id+"_el_hal").is(":checked")&&query.elements.v.push("x"),q("#"+self.id+"_el_met").is(":checked")&&query.elements.v.push("m");for(var i=0,ii=self.periodicTable.cells.length;ii>i;i++)self.periodicTable.cells[i].selected&&query.elements.v.push(self.periodicTable.cells[i].element.symbol);if(q("#"+self.id+"_elements_not").is(":checked")&&(query.elements.not=!0),q("#"+self.id+"_aromatic_include").is(":checked")&&(query.aromatic={v:!0,not:q("#"+self.id+"_aromatic_not").is(":checked")}),q("#"+self.id+"_charge_include").is(":checked")&&(query.charge={v:query.parseRange(q("#"+self.id+"_charge_value").val()),not:q("#"+self.id+"_charge_not").is(":checked")}),q("#"+self.id+"_hydrogens_include").is(":checked")&&(query.hydrogens={v:query.parseRange(q("#"+self.id+"_hydrogens_value").val()),not:q("#"+self.id+"_hydrogens_not").is(":checked")}),q("#"+self.id+"_ringCount_include").is(":checked")&&(query.ringCount={v:query.parseRange(q("#"+self.id+"_ringCount_value").val()),not:q("#"+self.id+"_ringCount_not").is(":checked")}),q("#"+self.id+"_saturation_include").is(":checked")&&(query.saturation={v:!0,not:q("#"+self.id+"_saturation_not").is(":checked")}),q("#"+self.id+"_connectivity_include").is(":checked")&&(query.connectivity={v:query.parseRange(q("#"+self.id+"_connectivity_value").val()),not:q("#"+self.id+"_connectivity_not").is(":checked")}),q("#"+self.id+"_connectivityNoH_include").is(":checked")&&(query.connectivityNoH={v:query.parseRange(q("#"+self.id+"_connectivityNoH_value").val()),not:q("#"+self.id+"_connectivityNoH_not").is(":checked")}),q("#"+self.id+"_chirality_include").is(":checked")){var val="R";q("#"+self.id+"_chiral_a").is(":checked")?val="A":q("#"+self.id+"_chiral_s").is(":checked")&&(val="S"),query.chirality={v:val,not:q("#"+self.id+"_chirity_not").is(":checked")}}self.sketcher.historyManager.pushUndo(new actions.ChangeQueryAction(self.a,query)),q(this).dialog("close")}var sb=[];if(sb.push('<div style="font-size:12px;text-align:center;height:300px;overflow-y:scroll;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),sb.push("<p>Set the following form to define the atom query.</p>"),sb.push("<table>"),sb.push(makeRow(this.id+"_elements","Identity",void 0,"Select any number of elements and/or wildcards.",'<canvas class="ChemDoodleWebComponent" id="'+this.id+'_pt"></canvas><br><input type="checkbox" id="'+this.id+'_el_any">Any (a)<input type="checkbox" id="'+this.id+'_el_noth">!Hydrogen (r)<input type="checkbox" id="'+this.id+'_el_het">Heteroatom (q)<br><input type="checkbox" id="'+this.id+'_el_hal">Halide (x)<input type="checkbox" id="'+this.id+'_el_met">Metal (m)')),sb.push('<tr><td colspan="4"><hr style="width:100%"></td></tr>'),sb.push(makeRow(this.id+"_aromatic","Aromatic","A","Specifies that the matched atom should be aromatic. Use the NOT modifier to specify not aromatic or anti-aromatic.")),
sb.push(makeRow(this.id+"_charge","Charge","C","Defines the allowed charge for the matched atom.",1)),sb.push(makeRow(this.id+"_hydrogens","Hydrogens","H","Defines the total number of hydrogens attached to the atom, implicit and explicit.",1)),sb.push(makeRow(this.id+"_ringCount","Ring Count","R","Defines the total number of rings this atom is a member of. (SSSR)",1)),sb.push(makeRow(this.id+"_saturation","Saturation","S","Specifies that the matched atom should be saturated. Use the NOT modifier to specify unsaturation.")),sb.push(makeRow(this.id+"_connectivity","Connectivity","X","Defines the total number of bonds connected to the atom, including all hydrogens.",1)),sb.push(makeRow(this.id+"_connectivityNoH","Connectivity (No H)","x","Defines the total number of bonds connected to the atom, excluding all hydrogens.",1)),sb.push(makeRow(this.id+"_chirality","Chirality","@","Defines the stereochemical configuration of the atom.",'<div id="'+this.id+'_radio"><input type="radio" id="'+this.id+'_chiral_a" name="radio"><label for="'+this.id+'_chiral_a">Any (A)</label><input type="radio" id="'+this.id+'_chiral_r" name="radio"><label for="'+this.id+'_chiral_r">Rectus (R)</label><input type="radio" id="'+this.id+'_chiral_s" name="radio"><label for="'+this.id+'_chiral_s">Sinestra (S)</label></div>')),sb.push("</table>"),sb.push("</div>"),document.getElementById(this.id)){var canvas=q("#"+this.id);canvas.before(sb.join(""))}else document.writeln(sb.join(""));this.periodicTable=new c.PeriodicTableCanvas(this.id+"_pt",16),this.periodicTable.allowMultipleSelections=!0,this.periodicTable.drawCell=function(ctx,specs,cell){this.hovered===cell?(ctx.fillStyle="blue",ctx.fillRect(cell.x,cell.y,cell.dimension,cell.dimension)):cell.selected&&(ctx.fillStyle="#c10000",ctx.fillRect(cell.x,cell.y,cell.dimension,cell.dimension)),ctx.strokeStyle="black",ctx.strokeRect(cell.x,cell.y,cell.dimension,cell.dimension),ctx.font="10px Sans-serif",ctx.fillStyle="black",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(cell.element.symbol,cell.x+cell.dimension/2,cell.y+cell.dimension/2)},this.periodicTable.repaint();var self=this;q("#"+this.id+"_radio").buttonset();var self=this;this.getElement().dialog({autoOpen:!1,width:500,height:300,buttons:{Cancel:function(){q(this).dialog("close")},Remove:function(){self.sketcher.historyManager.pushUndo(new actions.ChangeQueryAction(self.a)),q(this).dialog("close")},Set:setNewQuery},open:function(event,ui){q("#"+self.id).animate({scrollTop:0},"fast")}})}}(ChemDoodle,ChemDoodle.structures,ChemDoodle.uis.actions,ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery,document),function(c,structures,actions,desktop,imageDepot,q,document){"use strict";var makeRow=function(id,name,tag,description,component){var sb=["<tr>"];return sb.push("<td>"),-1===id.indexOf("_orders")&&(sb.push('<input type="checkbox" id="'),sb.push(id),sb.push('_include">')),sb.push("</td>"),sb.push("<td>"),sb.push(name),tag&&(sb.push("<br>(<strong>"),sb.push(tag),sb.push("</strong>)")),sb.push("</td>"),sb.push('<td style="padding-left:20px;padding-right:20px;">'),sb.push(description),component&&(1===component?(sb.push("<br>"),sb.push('<input type="text" id="'),sb.push(id),sb.push('_value">')):sb.push(component)),sb.push("</td>"),sb.push('<td><input type="checkbox" id="'),sb.push(id),sb.push('_not"><br><strong>NOT</strong>'),sb.push("</td>"),sb.push("</tr>"),sb.join("")};desktop.BondQueryDialog=function(sketcher,subid){this.sketcher=sketcher,this.id=sketcher.id+subid};var _=desktop.BondQueryDialog.prototype=new desktop.Dialog;_.title="Bond Query",_.setBond=function(b){this.b=b;var use=b.query;if(!use)switch(use=new structures.Query(structures.Query.TYPE_BOND),b.bondOrder){case 0:use.orders.v.push("0");break;case.5:use.orders.v.push("h");break;case 1:use.orders.v.push("1");break;case 1.5:use.orders.v.push("r");break;case 2:use.orders.v.push("2");break;case 3:use.orders.v.push("3")}q("#"+this.id+"_type_0").prop("checked",-1!==use.orders.v.indexOf("0")).button("refresh"),q("#"+this.id+"_type_1").prop("checked",-1!==use.orders.v.indexOf("1")).button("refresh"),q("#"+this.id+"_type_2").prop("checked",-1!==use.orders.v.indexOf("2")).button("refresh"),q("#"+this.id+"_type_3").prop("checked",-1!==use.orders.v.indexOf("3")).button("refresh"),q("#"+this.id+"_type_4").prop("checked",-1!==use.orders.v.indexOf("4")).button("refresh"),q("#"+this.id+"_type_5").prop("checked",-1!==use.orders.v.indexOf("5")).button("refresh"),q("#"+this.id+"_type_6").prop("checked",-1!==use.orders.v.indexOf("6")).button("refresh"),q("#"+this.id+"_type_h").prop("checked",-1!==use.orders.v.indexOf("h")).button("refresh"),q("#"+this.id+"_type_r").prop("checked",-1!==use.orders.v.indexOf("r")).button("refresh"),q("#"+this.id+"_type_a").prop("checked",-1!==use.orders.v.indexOf("a")).button("refresh"),q("#"+this.id+"_orders_not").prop("checked",use.orders.not),q("#"+this.id+"_aromatic_include").prop("checked",void 0!==use.aromatic),q("#"+this.id+"_aromatic_not").prop("checked",void 0!==use.aromatic&&use.aromatic.not),q("#"+this.id+"_ringCount_include").prop("checked",void 0!==use.ringCount),q("#"+this.id+"_ringCount_value").val(use.ringCount?use.outputRange(use.ringCount.v):""),q("#"+this.id+"_ringCount_not").prop("checked",void 0!==use.ringCount&&use.ringCount.not),q("#"+this.id+"_stereo_include").prop("checked",void 0!==use.stereo),use.stereo&&"E"!==use.stereo.v?use.stereo&&"Z"!==use.stereo.v?use.stereo&&"A"!==use.stereo.v||q("#"+this.id+"_stereo_a").prop("checked",!0).button("refresh"):q("#"+this.id+"_stereo_z").prop("checked",!0).button("refresh"):q("#"+this.id+"_stereo_e").prop("checked",!0).button("refresh"),q("#"+this.id+"_stereo_not").prop("checked",void 0!==use.stereo&&use.stereo.not)},_.setup=function(){function setNewQuery(){var query=new structures.Query(structures.Query.TYPE_BOND);if(q("#"+self.id+"_type_0").is(":checked")&&query.orders.v.push("0"),q("#"+self.id+"_type_1").is(":checked")&&query.orders.v.push("1"),q("#"+self.id+"_type_2").is(":checked")&&query.orders.v.push("2"),q("#"+self.id+"_type_3").is(":checked")&&query.orders.v.push("3"),q("#"+self.id+"_type_4").is(":checked")&&query.orders.v.push("4"),q("#"+self.id+"_type_5").is(":checked")&&query.orders.v.push("5"),q("#"+self.id+"_type_6").is(":checked")&&query.orders.v.push("6"),q("#"+self.id+"_type_h").is(":checked")&&query.orders.v.push("h"),q("#"+self.id+"_type_r").is(":checked")&&query.orders.v.push("r"),q("#"+self.id+"_type_a").is(":checked")&&query.orders.v.push("a"),q("#"+self.id+"_orders_not").is(":checked")&&(query.orders.not=!0),q("#"+self.id+"_aromatic_include").is(":checked")&&(query.aromatic={v:!0,not:q("#"+self.id+"_aromatic_not").is(":checked")}),q("#"+self.id+"_ringCount_include").is(":checked")&&(query.ringCount={v:query.parseRange(q("#"+self.id+"_ringCount_value").val()),not:q("#"+self.id+"_ringCount_not").is(":checked")}),q("#"+self.id+"_stereo_include").is(":checked")){var val="E";q("#"+self.id+"_stereo_a").is(":checked")?val="A":q("#"+self.id+"_stereo_z").is(":checked")&&(val="Z"),query.stereo={v:val,not:q("#"+self.id+"_stereo_not").is(":checked")}}self.sketcher.historyManager.pushUndo(new actions.ChangeQueryAction(self.b,query)),q(this).dialog("close")}var sb=[];if(sb.push('<div style="font-size:12px;text-align:center;height:300px;overflow-y:scroll;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),sb.push("<p>Set the following form to define the bond query.</p>"),sb.push("<table>"),sb.push(makeRow(this.id+"_orders","Identity",void 0,"Select any number of bond types.",'<div id="'+this.id+'_radioTypes"><input type="checkbox" id="'+this.id+'_type_0"><label for="'+this.id+'_type_0"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_ZERO)+'" /></label><input type="checkbox" id="'+this.id+'_type_1"><label for="'+this.id+'_type_1"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_SINGLE)+'" /></label><input type="checkbox" id="'+this.id+'_type_2"><label for="'+this.id+'_type_2"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_DOUBLE)+'" /></label><input type="checkbox" id="'+this.id+'_type_3"><label for="'+this.id+'_type_3"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_TRIPLE)+'" /></label><input type="checkbox" id="'+this.id+'_type_4"><label for="'+this.id+'_type_4"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_QUADRUPLE)+'" /></label><input type="checkbox" id="'+this.id+'_type_5"><label for="'+this.id+'_type_5"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_QUINTUPLE)+'" /></label><input type="checkbox" id="'+this.id+'_type_6"><label for="'+this.id+'_type_6"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_SEXTUPLE)+'" /></label><input type="checkbox" id="'+this.id+'_type_h"><label for="'+this.id+'_type_h"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_HALF)+'" /></label><input type="checkbox" id="'+this.id+'_type_r"><label for="'+this.id+'_type_r"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_RESONANCE)+'" /></label><input type="checkbox" id="'+this.id+'_type_a"><label for="'+this.id+'_type_a"><img width="20" height="20" src="'+imageDepot.getURI(imageDepot.BOND_ANY)+'" /></label></div>')),sb.push('<tr><td colspan="4"><hr style="width:100%"></td></tr>'),sb.push(makeRow(this.id+"_aromatic","Aromatic","A","Specifies that the matched bond should be aromatic. Use the NOT modifier to specify not aromatic or anti-aromatic.")),sb.push(makeRow(this.id+"_ringCount","Ring Count","R","Defines the total number of rings this bond is a member of. (SSSR)",1)),sb.push(makeRow(this.id+"_stereo","Stereochemistry","@","Defines the stereochemical configuration of the bond.",'<div id="'+this.id+'_radio"><input type="radio" id="'+this.id+'_stereo_a" name="radio"><label for="'+this.id+'_stereo_a">Any (A)</label><input type="radio" id="'+this.id+'_stereo_e" name="radio"><label for="'+this.id+'_stereo_e">Entgegen (E)</label><input type="radio" id="'+this.id+'_stereo_z" name="radio"><label for="'+this.id+'_stereo_z">Zusammen (Z)</label></div>')),sb.push("</table>"),sb.push("</div>"),document.getElementById(this.id)){var canvas=q("#"+this.id);canvas.before(sb.join(""))}else document.writeln(sb.join(""));var self=this;q("#"+this.id+"_radioTypes").buttonset(),q("#"+this.id+"_radio").buttonset(),this.getElement().dialog({autoOpen:!1,width:520,height:300,buttons:{Cancel:function(){q(this).dialog("close")},Remove:function(){self.sketcher.historyManager.pushUndo(new actions.ChangeQueryAction(self.b)),q(this).dialog("close")},Set:setNewQuery},open:function(event,ui){q("#"+self.id).animate({scrollTop:0},"fast")}})}}(ChemDoodle,ChemDoodle.structures,ChemDoodle.uis.actions,ChemDoodle.uis.gui.desktop,ChemDoodle.uis.gui.imageDepot,ChemDoodle.lib.jQuery,document),function(c,desktop,q,document){"use strict";desktop.MolGrabberDialog=function(sketcherid,subid){this.sketcherid=sketcherid,this.id=sketcherid+subid};var _=desktop.MolGrabberDialog.prototype=new desktop.Dialog;_.title="MolGrabber",_.setup=function(){var sb=[];if(sb.push('<div style="font-size:12px;text-align:center;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),this.message&&(sb.push("<p>"),sb.push(this.message),sb.push("</p>")),sb.push('<canvas class="ChemDoodleWebComponent" id="'),sb.push(this.id),sb.push('_mg"></canvas>'),this.afterMessage&&(sb.push("<p>"),sb.push(this.afterMessage),sb.push("</p>")),sb.push("</div>"),document.getElementById(this.sketcherid)){var canvas=q("#"+this.sketcherid);canvas.before(sb.join(""))}else document.writeln(sb.join(""));this.canvas=new c.MolGrabberCanvas(this.id+"_mg",200,200),this.canvas.specs.backgroundColor="#fff",this.canvas.repaint();var self=this;this.getElement().dialog({autoOpen:!1,width:250,buttons:self.buttons})}}(ChemDoodle,ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery,document),function(c,desktop,q,document){"use strict";desktop.PeriodicTableDialog=function(sketcherid,subid){this.sketcherid=sketcherid,this.id=sketcherid+subid};var _=desktop.PeriodicTableDialog.prototype=new desktop.Dialog;_.title="Periodic Table",_.setup=function(){var sb=[];if(sb.push('<div style="text-align:center;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),sb.push('<canvas class="ChemDoodleWebComponents" id="'),sb.push(this.id),sb.push('_pt"></canvas></div>'),document.getElementById(this.sketcherid)){var canvas=q("#"+this.sketcherid);canvas.before(sb.join(""))}else document.writeln(sb.join(""));this.canvas=new ChemDoodle.PeriodicTableCanvas(this.id+"_pt",20);var self=this;this.getElement().dialog({autoOpen:!1,width:400,buttons:self.buttons})}}(ChemDoodle,ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery,document),function(c,desktop,q,document){"use strict";desktop.SaveFileDialog=function(id,sketcher){this.id=id,this.sketcher=sketcher};var _=desktop.SaveFileDialog.prototype=new desktop.Dialog;_.title="Save File",_.clear=function(){q("#"+this.id+"_link").html("The file link will appear here.")},_.setup=function(){var sb=[];if(sb.push('<div style="font-size:12px;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),sb.push("<p>Select the file format to save your structure to and click on the <strong>Generate File</strong> button.</p>"),sb.push('<select id="'),sb.push(this.id),sb.push('_select">'),sb.push('<option value="sk2">ACD/ChemSketch Document {sk2}'),sb.push('<option value="ros">Beilstein ROSDAL {ros}'),sb.push('<option value="cdx">Cambridgesoft ChemDraw Exchange {cdx}'),sb.push('<option value="cdxml">Cambridgesoft ChemDraw XML {cdxml}'),sb.push('<option value="mrv">ChemAxon Marvin Document {mrv}'),sb.push('<option value="cml">Chemical Markup Language {cml}'),sb.push('<option value="smiles">Daylight SMILES {smiles}'),sb.push('<option value="icl" selected>iChemLabs ChemDoodle Document {icl}'),sb.push('<option value="inchi">IUPAC InChI {inchi}'),sb.push('<option value="jdx">IUPAC JCAMP-DX {jdx}'),sb.push('<option value="skc">MDL ISIS Sketch {skc}'),sb.push('<option value="tgf">MDL ISIS Sketch Transportable Graphics File {tgf}'),sb.push('<option value="mol">MDL MOLFile {mol}'),sb.push('<option value="sdf">MDL SDFile {sdf}'),sb.push('<option value="jme">Molinspiration JME String {jme}'),sb.push('<option value="pdb">RCSB Protein Data Bank {pdb}'),sb.push('<option value="mmd">Schr&ouml;dinger Macromodel {mmd}'),sb.push('<option value="mae">Schr&ouml;dinger Maestro {mae}'),sb.push('<option value="smd">Standard Molecular Data {smd}'),sb.push('<option value="mol2">Tripos Mol2 {mol2}'),sb.push('<option value="sln">Tripos SYBYL SLN {sln}'),sb.push('<option value="xyz">XYZ {xyz}'),sb.push("</select>"),sb.push('<button id="'),sb.push(this.id),sb.push('_button">'),sb.push("Generate File</button>"),sb.push("<p>When the file is written, a link will appear in the red-bordered box below, right-click on the link and choose the browser's <strong>Save As...</strong> function to save the file to your computer.</p>"),sb.push('<div style="width:100%;height:30px;border:1px solid #c10000;text-align:center;" id="'),sb.push(this.id),sb.push('_link">The file link will appear here.</div>'),sb.push('<p><a href="http://www.chemdoodle.com" target="_blank">How do I use these files?</a></p>'),sb.push("</div>"),document.getElementById(this.sketcher.id)){var canvas=q("#"+this.sketcher.id);canvas.before(sb.join(""))}else document.writeln(sb.join(""));var self=this;q("#"+this.id+"_button").click(function(){q("#"+self.id+"_link").html("Generating file, please wait..."),ChemDoodle.iChemLabs.saveFile(self.sketcher.oneMolecule?self.sketcher.molecules[0]:self.sketcher.lasso.getFirstMolecule(),{ext:q("#"+self.id+"_select").val()},function(link){q("#"+self.id+"_link").html('<a href="'+link+'"><span style="text-decoration:underline;">File is generated. Right-click on this link and Save As...</span></a>')})}),this.getElement().dialog({autoOpen:!1,width:435,buttons:self.buttons})}}(ChemDoodle,ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery,document),function(c,actions,gui,desktop,q){"use strict";gui.DialogManager=function(sketcher){sketcher.useServices?this.saveDialog=new desktop.SaveFileDialog(sketcher.id+"_save_dialog",sketcher):(this.saveDialog=new desktop.Dialog(sketcher.id,"_save_dialog","Save Molecule"),this.saveDialog.message="Copy and paste the content of the textarea into a file and save it with the extension <strong>.mol</strong>.",this.saveDialog.includeTextArea=!0,this.saveDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">How do I use MOLFiles?</a>'),this.saveDialog.setup(),this.loadDialog=new desktop.Dialog(sketcher.id,"_load_dialog","Load Molecule");var sb=["Copy and paste the contents of a MOLFile (<strong>.mol</strong>)"];sb.push(" or ChemDoodle JSON in the textarea below and then press the <strong>Load</strong> button."),this.loadDialog.message=sb.join(""),this.loadDialog.includeTextArea=!0,this.loadDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">Where do I get MOLFiles or ChemDoodle JSON?</a>';var self=this;this.loadDialog.buttons={Load:function(){q(this).dialog("close");var newContent,s=self.loadDialog.getTextArea().val();-1!==s.indexOf("v2000")||-1!==s.indexOf("V2000")?newContent={molecules:[c.readMOL(s)],shapes:[]}:"{"==s.charAt(0)&&(newContent=new c.readJSON(s)),sketcher.oneMolecule&&newContent&&newContent.molecules.length>0&&newContent.molecules[0].atoms.length>0?sketcher.historyManager.pushUndo(new actions.SwitchMoleculeAction(sketcher,newContent.molecules[0])):!sketcher.oneMolecule&&newContent&&(newContent.molecules.length>0||newContent.shapes.length>0)?sketcher.historyManager.pushUndo(new actions.SwitchContentAction(sketcher,newContent.molecules,newContent.shapes)):alert("No chemical content was recognized.")}},this.loadDialog.setup(),this.atomQueryDialog=new desktop.AtomQueryDialog(sketcher,"_atom_query_dialog"),this.atomQueryDialog.setup(),this.bondQueryDialog=new desktop.BondQueryDialog(sketcher,"_bond_query_dialog"),this.bondQueryDialog.setup(),this.searchDialog=new desktop.MolGrabberDialog(sketcher.id,"_search_dialog"),this.searchDialog.buttons={Load:function(){q(this).dialog("close");var newMol=self.searchDialog.canvas.molecules[0];newMol&&newMol.atoms.length>0&&(sketcher.oneMolecule?newMol!==sketcher.molecule&&sketcher.historyManager.pushUndo(new actions.SwitchMoleculeAction(sketcher,newMol)):(sketcher.historyManager.pushUndo(new actions.NewMoleculeAction(sketcher,newMol.atoms,newMol.bonds)),sketcher.toolbarManager.buttonLasso.getElement().click(),sketcher.lasso.select(newMol.atoms,[])))}},this.searchDialog.setup(),sketcher.setupScene&&(this.specsDialog=new desktop.SpecsDialog(sketcher,"_specs_dialog"),this.specsDialog.buttons={Done:function(){q(this).dialog("close")}},this.specsDialog.setup(this.specsDialog,sketcher)),this.periodicTableDialog=new desktop.PeriodicTableDialog(sketcher.id,"_periodicTable_dialog"),this.periodicTableDialog.buttons={Close:function(){q(this).dialog("close")}},this.periodicTableDialog.setup(),this.periodicTableDialog.canvas.click=function(evt){if(this.hovered){this.selected=this.hovered;var e=this.getHoveredElement();sketcher.stateManager.setState(sketcher.stateManager.STATE_LABEL),sketcher.stateManager.STATE_LABEL.label=e.symbol,sketcher.toolbarManager.buttonLabel.select(),this.repaint()}},this.calculateDialog=new desktop.Dialog(sketcher.id,"_calculate_dialog","Calculations"),this.calculateDialog.includeTextArea=!0,this.calculateDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">Want more calculations?</a>',this.calculateDialog.setup(),this.inputDialog=new desktop.Dialog(sketcher.id,"_input_dialog","Input"),this.inputDialog.message='Please input the rgroup number (must be a positive integer). Input "-1" to remove the rgroup.',this.inputDialog.includeTextField=!0,this.inputDialog.buttons={Done:function(){q(this).dialog("close"),self.inputDialog.doneFunction&&self.inputDialog.doneFunction(self.inputDialog.getTextField().val())}},this.inputDialog.setup()}}(ChemDoodle,ChemDoodle.uis.actions,ChemDoodle.uis.gui,ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery),function(desktop,imageDepot,q,document){"use strict";desktop.DropDown=function(id,tooltip,dummy){this.id=id,this.tooltip=tooltip,this.dummy=dummy,this.buttonSet=new desktop.ButtonSet(id+"_set"),this.buttonSet.buttonGroup=tooltip,this.defaultButton=void 0};var _=desktop.DropDown.prototype;_.getButtonSource=function(){var sb=[];return sb.push('<button id="'),sb.push(this.id),sb.push('" onclick="return false;" title="'),sb.push(this.tooltip),sb.push('"><img title="'),sb.push(this.tooltip),sb.push('" width="9" height="20" src="'),sb.push(imageDepot.getURI(imageDepot.ARROW_DOWN)),sb.push('"></button>'),sb.join("")},_.getHiddenSource=function(){var sb=[];return sb.push('<div style="display:none;position:absolute;z-index:10;border:1px #C1C1C1 solid;background:#F5F5F5;padding:5px;border-bottom-left-radius:5px;-moz-border-radius-bottomleft:5px;border-bottom-right-radius:5px;-moz-border-radius-bottomright:5px;" id="'),sb.push(this.id),sb.push('_hidden">'),sb.push(this.buttonSet.getSource(this.id+"_popup_set")),sb.push("</div>"),sb.join("")},_.setup=function(){this.defaultButton||(this.defaultButton=this.buttonSet.buttons[0]);var tag="#"+this.id;q(tag).button(),q(tag+"_hidden").hide(),q(tag).click(function(){q(document).trigger("click");var component=q(tag+"_hidden");return component.show().position({my:"center top",at:"center bottom",of:this,collision:"fit"}),q(document).one("click",function(){component.hide()}),!1}),this.buttonSet.setup();var self=this;q.each(this.buttonSet.buttons,function(index,value){self.buttonSet.buttons[index].getElement().click(function(){self.dummy.absorb(self.buttonSet.buttons[index]),self.dummy.select(),self.dummy.func()})}),self.dummy.absorb(this.defaultButton),this.defaultButton.select()}}(ChemDoodle.uis.gui.desktop,ChemDoodle.uis.gui.imageDepot,ChemDoodle.lib.jQuery,document),function(desktop,imageDepot,q){"use strict";desktop.DummyButton=function(id,icon,tooltip){this.id=id,this.icon=icon,this.toggle=!1,this.tooltip=tooltip?tooltip:"",this.func=void 0};var _=desktop.DummyButton.prototype=new desktop.Button;_.setup=function(){var self=this;this.getElement().click(function(){self.func()})},_.absorb=function(button){q("#"+this.id+"_icon").attr("src",imageDepot.getURI(button.icon)),this.func=button.func}}(ChemDoodle.uis.gui.desktop,ChemDoodle.uis.gui.imageDepot,ChemDoodle.lib.jQuery),function(desktop,q){"use strict";desktop.TextButton=function(id,tooltip,func){this.id=id,this.toggle=!1,this.tooltip=tooltip?tooltip:"",this.func=func?func:void 0};var _=desktop.TextButton.prototype=new desktop.Button;_.getSource=function(buttonGroup){var sb=[];return this.toggle?(sb.push('<input type="radio" name="'),sb.push(buttonGroup),sb.push('" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.tooltip),sb.push('" /><label for="'),sb.push(this.id),sb.push('">'),sb.push(this.tooltip),sb.push("</label>")):(sb.push('<button id="'),sb.push(this.id),sb.push('" onclick="return false;" title="'),sb.push(this.tooltip),sb.push('"><label for="'),sb.push(this.id),sb.push('">'),sb.push(this.tooltip),sb.push("</label></button>")),sb.join("")},_.check=function(){var element=this.getElement();element.prop("checked",!0),element.button("refresh")},_.uncheck=function(){var element=this.getElement();element.removeAttr("checked"),element.button("refresh")}}(ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery),function(c,iChemLabs,io,structures,actions,gui,imageDepot,desktop,tools,states,q,document){"use strict";gui.ToolbarManager=function(sketcher){this.sketcher=sketcher,this.buttonOpen=new desktop.Button(sketcher.id+"_button_open",imageDepot.OPEN,"Open",function(){sketcher.dialogManager.loadDialog.getTextArea().val(""),sketcher.dialogManager.loadDialog.getElement().dialog("open")}),this.buttonSave=new desktop.Button(sketcher.id+"_button_save",imageDepot.SAVE,"Save",function(){var query=getQueryParams(document.location.search),item=query.id,page=location.pathname.substring(1),type="experiments";"database.php"===page&&(type="items"),item%1===0?$.post("app/controllers/EntityController.php",{addFromString:!0,fileType:"mol",type:type,id:item,string:c.writeMOL(sketcher.molecules[0])}).done(function(){$("#filesdiv").load(page+"?mode=edit&id="+item+" #filesdiv")}):sketcher.useServices?sketcher.dialogManager.saveDialog.clear():sketcher.oneMolecule?(sketcher.dialogManager.saveDialog.getTextArea().val(c.writeMOL(sketcher.molecules[0])),sketcher.dialogManager.saveDialog.getElement().dialog("open")):sketcher.lasso.isActive()&&(sketcher.dialogManager.saveDialog.getTextArea().val(c.writeMOL(sketcher.lasso.getFirstMolecule())),sketcher.dialogManager.saveDialog.getElement().dialog("open"))}),this.buttonSearch=new desktop.Button(sketcher.id+"_button_search",imageDepot.SEARCH,"Search",function(){sketcher.dialogManager.searchDialog.getElement().dialog("open")}),this.buttonCalculate=new desktop.Button(sketcher.id+"_button_calculate",imageDepot.CALCULATE,"Calculate",function(){var mol=sketcher.oneMolecule?sketcher.molecules[0]:sketcher.lasso.getFirstMolecule();mol&&iChemLabs.calculate(mol,{descriptors:["mf","ef","mw","miw","deg_unsat","hba","hbd","rot","electron","pol_miller","cmr","tpsa","vabc","xlogp2","bertz"]},function(content){function addDatum(title,value,unit){sb.push(title),sb.push(": ");for(var i=title.length+2;30>i;i++)sb.push(" ");sb.push(value),sb.push(" "),sb.push(unit),sb.push("\n")}var sb=[];addDatum("Molecular Formula",content.mf,""),addDatum("Empirical Formula",content.ef,""),addDatum("Molecular Mass",content.mw,"amu"),addDatum("Monoisotopic Mass",content.miw,"amu"),addDatum("Degree of Unsaturation",content.deg_unsat,""),addDatum("Hydrogen Bond Acceptors",content.hba,""),addDatum("Hydrogen Bond Donors",content.hbd,""),addDatum("Rotatable Bonds",content.rot,""),addDatum("Total Electrons",content.rot,""),addDatum("Molecular Polarizability",content.pol_miller,"A^3"),addDatum("Molar Refractivity",content.cmr,"cm^3/mol"),addDatum("Polar Surface Area",content.tpsa,"A^2"),addDatum("vdW Volume",content.vabc,"A^3"),addDatum("logP",content.xlogp2,""),addDatum("Complexity",content.bertz,""),sketcher.dialogManager.calculateDialog.getTextArea().val(sb.join("")),sketcher.dialogManager.calculateDialog.getElement().dialog("open")})}),this.buttonMove=new desktop.Button(sketcher.id+"_button_move",imageDepot.MOVE,"Move",function(){sketcher.stateManager.setState(sketcher.stateManager.STATE_MOVE)}),this.buttonMove.toggle=!0,this.buttonErase=new desktop.Button(sketcher.id+"_button_erase",imageDepot.ERASE,"Erase",function(){sketcher.stateManager.setState(sketcher.stateManager.STATE_ERASE)}),this.buttonErase.toggle=!0,this.buttonClear=new desktop.Button(sketcher.id+"_button_clear",imageDepot.CLEAR,"Clear",function(){var clear=!0;if(sketcher.oneMolecule){if(1===sketcher.molecules[0].atoms.length){var a=sketcher.molecules[0].atoms[0];"C"===a.label&&0===a.charge&&-1===a.mass&&(clear=!1)}}else 0===sketcher.molecules.length&&0===sketcher.shapes.length&&(clear=!1);clear&&(sketcher.stateManager.getCurrentState().clearHover(),sketcher.lasso&&sketcher.lasso.isActive()&&sketcher.lasso.empty(),sketcher.historyManager.pushUndo(new actions.ClearAction(sketcher)))}),this.buttonClean=new desktop.Button(sketcher.id+"_button_clean",imageDepot.OPTIMIZE,"Clean",function(){var mol=sketcher.oneMolecule?sketcher.molecules[0]:sketcher.lasso.getFirstMolecule();if(mol){var json=new io.JSONInterpreter;iChemLabs._contactServer("optimize",{mol:json.molTo(mol)},{dimension:2},function(content){var optimized=json.molFrom(content.mol),optCenter=optimized.getCenter(),dif=sketcher.oneMolecule?new structures.Point(sketcher.width/2,sketcher.height/2):mol.getCenter();dif.sub(optCenter);for(var i=0,ii=optimized.atoms.length;ii>i;i++)optimized.atoms[i].add(dif);sketcher.historyManager.pushUndo(new actions.ChangeCoordinatesAction(mol.atoms,optimized.atoms))})}}),this.makeLassoSet(this),this.makeScaleSet(this),this.makeHistorySet(this),this.makeLabelSet(this),this.buttonQuery=new desktop.Button(sketcher.id+"_button_query",imageDepot.QUERY,"Set Query to Atom or Bond",function(){sketcher.stateManager.setState(sketcher.stateManager.STATE_QUERY)}),this.buttonQuery.toggle=!0,this.makeBondSet(this),this.makeRingSet(this),this.makeAttributeSet(this),this.makeShapeSet(this)};var _=gui.ToolbarManager.prototype;_.write=function(){var sb=['<div style="font-size:10px;">'],bg=this.sketcher.id+"_main_group";if(this.sketcher.oneMolecule?sb.push(this.buttonMove.getSource(bg)):sb.push(this.lassoSet.getSource(bg)),sb.push(this.buttonClear.getSource()),sb.push(this.buttonErase.getSource(bg)),this.sketcher.useServices&&sb.push(this.buttonClean.getSource()),sb.push(this.historySet.getSource()),sb.push(this.scaleSet.getSource()),sb.push(this.buttonOpen.getSource()),sb.push(this.buttonSave.getSource()),this.sketcher.useServices&&(sb.push(this.buttonSearch.getSource()),sb.push(this.buttonCalculate.getSource())),sb.push("<br>"),sb.push(this.labelSet.getSource(bg)),this.sketcher.includeQuery&&sb.push(this.buttonQuery.getSource(bg)),sb.push(this.attributeSet.getSource(bg)),sb.push(this.bondSet.getSource(bg)),sb.push(this.ringSet.getSource(bg)),this.sketcher.oneMolecule||sb.push(this.shapeSet.getSource(bg)),sb.push("</div>"),document.getElementById(this.sketcher.id)){var canvas=q("#"+this.sketcher.id);canvas.before(sb.join(""))}else document.write(sb.join(""))},_.setup=function(){this.sketcher.oneMolecule?this.buttonMove.setup(!0):this.lassoSet.setup(),this.buttonClear.setup(),this.buttonErase.setup(!0),this.sketcher.useServices&&this.buttonClean.setup(),this.historySet.setup(),this.scaleSet.setup(),this.buttonOpen.setup(),this.buttonSave.setup(),this.sketcher.useServices&&(this.buttonSearch.setup(),this.buttonCalculate.setup()),this.labelSet.setup(),this.sketcher.includeQuery&&this.buttonQuery.setup(!0),this.attributeSet.setup(),this.bondSet.setup(),this.ringSet.setup(),this.sketcher.oneMolecule||this.shapeSet.setup(),this.buttonSingle.select(),this.buttonUndo.disable(),this.buttonRedo.disable(),this.sketcher.oneMolecule||this.sketcher.useServices&&(this.buttonClean.disable(),this.buttonCalculate.disable(),this.buttonSave.disable())},_.makeScaleSet=function(self){this.scaleSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_scale"),this.scaleSet.toggle=!1,this.buttonScalePlus=new desktop.Button(self.sketcher.id+"_button_scale_plus",imageDepot.ZOOM_IN,"Increase Scale",function(){self.sketcher.specs.scale*=1.5,self.sketcher.checkScale(),self.sketcher.repaint()}),this.scaleSet.buttons.push(this.buttonScalePlus),this.buttonScaleMinus=new desktop.Button(self.sketcher.id+"_button_scale_minus",imageDepot.ZOOM_OUT,"Decrease Scale",function(){self.sketcher.specs.scale/=1.5,self.sketcher.checkScale(),self.sketcher.repaint()}),this.scaleSet.buttons.push(this.buttonScaleMinus)},_.makeLassoSet=function(self){this.lassoSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_lasso"),this.buttonLasso=new desktop.DummyButton(self.sketcher.id+"_button_lasso",imageDepot.LASSO,"Selection Tool"),this.lassoSet.buttons.push(this.buttonLasso),this.lassoSet.addDropDown("More Selection Tools"),this.lassoSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_lasso_lasso",imageDepot.LASSO,"Lasso Tool",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LASSO),self.sketcher.lasso.mode=tools.Lasso.MODE_LASSO,self.sketcher.molecules.length>0&&!self.sketcher.lasso.isActive()&&self.sketcher.lasso.select(self.sketcher.molecules[self.sketcher.molecules.length-1].atoms,[])})),this.lassoSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_lasso_shapes",imageDepot.LASSO_SHAPES,"Lasso Tool (shapes only)",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LASSO),self.sketcher.lasso.mode=tools.Lasso.MODE_LASSO_SHAPES,
self.sketcher.shapes.length>0&&!self.sketcher.lasso.isActive()&&self.sketcher.lasso.select([],[self.sketcher.shapes[self.sketcher.shapes.length-1]])})),this.lassoSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_lasso_marquee",imageDepot.MARQUEE,"Marquee Tool",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LASSO),self.sketcher.lasso.mode=tools.Lasso.MODE_RECTANGLE_MARQUEE,self.sketcher.molecules.length>0&&!self.sketcher.lasso.isActive()&&self.sketcher.lasso.select(self.sketcher.molecules[self.sketcher.molecules.length-1].atoms,[])}))},_.makeHistorySet=function(self){this.historySet=new desktop.ButtonSet(self.sketcher.id+"_buttons_history"),this.historySet.toggle=!1,this.buttonUndo=new desktop.Button(self.sketcher.id+"_button_undo",imageDepot.UNDO,"Undo",function(){self.sketcher.historyManager.undo()}),this.historySet.buttons.push(this.buttonUndo),this.buttonRedo=new desktop.Button(self.sketcher.id+"_button_redo",imageDepot.REDO,"Redo",function(){self.sketcher.historyManager.redo()}),this.historySet.buttons.push(this.buttonRedo)},_.makeLabelSet=function(self){this.labelSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_label"),this.buttonLabel=new desktop.DummyButton(self.sketcher.id+"_button_label",imageDepot.CARBON,"Set Label"),this.labelSet.buttons.push(this.buttonLabel),this.labelSet.addDropDown("More Labels"),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_h",imageDepot.HYDROGEN,"Hydrogen",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="H"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_c",imageDepot.CARBON,"Carbon",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="C"})),this.labelSet.dropDown.defaultButton=this.labelSet.dropDown.buttonSet.buttons[this.labelSet.dropDown.buttonSet.buttons.length-1],this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_n",imageDepot.NITROGEN,"Nitrogen",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="N"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_o",imageDepot.OXYGEN,"Oxygen",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="O"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_f",imageDepot.FLUORINE,"Fluorine",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="F"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_cl",imageDepot.CHLORINE,"Chlorine",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="Cl"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_br",imageDepot.BROMINE,"Bromine",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="Br"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_i",imageDepot.IODINE,"Iodine",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="I"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_p",imageDepot.PHOSPHORUS,"Phosphorus",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="P"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_s",imageDepot.SULFUR,"Sulfur",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LABEL),self.sketcher.stateManager.STATE_LABEL.label="S"})),this.labelSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_label_pt",imageDepot.PERIODIC_TABLE,"Choose Symbol",function(){for(var i=0,ii=self.sketcher.dialogManager.periodicTableDialog.canvas.cells.length;ii>i;i++){var cell=self.sketcher.dialogManager.periodicTableDialog.canvas.cells[i];if(cell.element.symbol===self.sketcher.stateManager.STATE_LABEL.label){self.sketcher.dialogManager.periodicTableDialog.canvas.selected=cell,self.sketcher.dialogManager.periodicTableDialog.canvas.repaint();break}}self.sketcher.dialogManager.periodicTableDialog.getElement().dialog("open")}))},_.makeBondSet=function(self){this.bondSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_bond"),this.buttonSingle=new desktop.Button(self.sketcher.id+"_button_bond_single",imageDepot.BOND_SINGLE,"Single Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_NONE}),this.bondSet.buttons.push(this.buttonSingle),this.buttonRecessed=new desktop.Button(self.sketcher.id+"_button_bond_recessed",imageDepot.BOND_RECESSED,"Recessed Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_RECESSED}),this.bondSet.buttons.push(this.buttonRecessed),this.buttonProtruding=new desktop.Button(self.sketcher.id+"_button_bond_protruding",imageDepot.BOND_PROTRUDING,"Protruding Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_PROTRUDING}),this.bondSet.buttons.push(this.buttonProtruding),this.buttonDouble=new desktop.Button(self.sketcher.id+"_button_bond_double",imageDepot.BOND_DOUBLE,"Double Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=2,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_NONE}),this.bondSet.buttons.push(this.buttonDouble),this.buttonBond=new desktop.DummyButton(self.sketcher.id+"_button_bond",imageDepot.BOND_TRIPLE,"Other Bond"),this.bondSet.buttons.push(this.buttonBond),this.bondSet.addDropDown("More Bonds"),this.bondSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_bond_zero",imageDepot.BOND_ZERO,"Zero Bond (Ionic/Hydrogen)",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=0,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_NONE})),this.bondSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_bond_half",imageDepot.BOND_HALF,"Half Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=.5,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_NONE})),this.bondSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_bond_resonance",imageDepot.BOND_RESONANCE,"Resonance Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1.5,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_NONE})),this.bondSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_bond_ambiguous_double",imageDepot.BOND_DOUBLE_AMBIGUOUS,"Ambiguous Double Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=2,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_AMBIGUOUS})),this.bondSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_bond_triple",imageDepot.BOND_TRIPLE,"Triple Bond",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_BOND),self.sketcher.stateManager.STATE_NEW_BOND.bondOrder=3,self.sketcher.stateManager.STATE_NEW_BOND.stereo=structures.Bond.STEREO_NONE})),this.bondSet.dropDown.defaultButton=this.bondSet.dropDown.buttonSet.buttons[this.bondSet.dropDown.buttonSet.buttons.length-1]},_.makeRingSet=function(self){this.ringSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_ring"),this.buttonCyclohexane=new desktop.Button(self.sketcher.id+"_button_ring_cyclohexane",imageDepot.CYCLOHEXANE,"Cyclohexane Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=6,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}),this.ringSet.buttons.push(this.buttonCyclohexane),this.buttonBenzene=new desktop.Button(self.sketcher.id+"_button_ring_benzene",imageDepot.BENZENE,"Benzene Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=6,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!0}),this.ringSet.buttons.push(this.buttonBenzene),this.buttonRing=new desktop.DummyButton(self.sketcher.id+"_button_ring",imageDepot.CYCLOPENTANE,"Other Ring"),this.ringSet.buttons.push(this.buttonRing),this.ringSet.addDropDown("More Rings"),this.ringSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_ring_cyclopropane",imageDepot.CYCLOPROPANE,"Cyclopropane Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=3,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_ring_cyclobutane",imageDepot.CYCLOBUTANE,"Cyclobutane Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=4,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_ring_cyclopentane",imageDepot.CYCLOPENTANE,"Cyclopentane Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=5,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.defaultButton=this.ringSet.dropDown.buttonSet.buttons[this.ringSet.dropDown.buttonSet.buttons.length-1],this.ringSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_ring_cycloheptane",imageDepot.CYCLOHEPTANE,"Cycloheptane Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=7,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_ring_cyclooctane",imageDepot.CYCLOOCTANE,"Cyclooctane Ring",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_NEW_RING),self.sketcher.stateManager.STATE_NEW_RING.numSides=8,self.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}))},_.makeAttributeSet=function(self){this.attributeSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_attribute"),this.buttonAttribute=new desktop.DummyButton(self.sketcher.id+"_button_attribute",imageDepot.INCREASE_CHARGE,"Attributes"),this.attributeSet.buttons.push(this.buttonAttribute),this.attributeSet.addDropDown("More Attributes"),this.attributeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_attribute_charge_increment",imageDepot.INCREASE_CHARGE,"Increase Charge",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_CHARGE),self.sketcher.stateManager.STATE_CHARGE.delta=1})),this.attributeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_attribute_charge_decrement",imageDepot.DECREASE_CHARGE,"Decrease Charge",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_CHARGE),self.sketcher.stateManager.STATE_CHARGE.delta=-1})),this.attributeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_attribute_lonePair_increment",imageDepot.ADD_LONE_PAIR,"Add Lone Pair",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LONE_PAIR),self.sketcher.stateManager.STATE_LONE_PAIR.delta=1})),this.attributeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_attribute_lonePair_decrement",imageDepot.REMOVE_LONE_PAIR,"Remove Lone Pair",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_LONE_PAIR),self.sketcher.stateManager.STATE_LONE_PAIR.delta=-1})),this.attributeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_attribute_radical_increment",imageDepot.ADD_RADICAL,"Add Radical",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_RADICAL),self.sketcher.stateManager.STATE_RADICAL.delta=1})),this.attributeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_attribute_radical_decrement",imageDepot.REMOVE_RADICAL,"Remove Radical",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_RADICAL),self.sketcher.stateManager.STATE_RADICAL.delta=-1}))},_.makeShapeSet=function(self){this.shapeSet=new desktop.ButtonSet(self.sketcher.id+"_buttons_shape"),this.buttonShape=new desktop.DummyButton(self.sketcher.id+"_button_shape",imageDepot.ARROW_SYNTHETIC,"Add Shape"),this.shapeSet.buttons.push(this.buttonShape),this.shapeSet.addDropDown("More Shapes"),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_arrow_synthetic",imageDepot.ARROW_SYNTHETIC,"Synthetic Arrow",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_SHAPE),self.sketcher.stateManager.STATE_SHAPE.shapeType=states.ShapeState.ARROW_SYNTHETIC})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_arrow_retrosynthetic",imageDepot.ARROW_RETROSYNTHETIC,"Retrosynthetic Arrow",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_SHAPE),self.sketcher.stateManager.STATE_SHAPE.shapeType=states.ShapeState.ARROW_RETROSYNTHETIC})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_arrow_resonance",imageDepot.ARROW_RESONANCE,"Resonance Arrow",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_SHAPE),self.sketcher.stateManager.STATE_SHAPE.shapeType=states.ShapeState.ARROW_RESONANCE})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_arrow_equilibrium",imageDepot.ARROW_EQUILIBRIUM,"Equilibrium Arrow",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_SHAPE),self.sketcher.stateManager.STATE_SHAPE.shapeType=states.ShapeState.ARROW_EQUILIBRIUM})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_pusher_1",imageDepot.PUSHER_SINGLE,"Single Electron Pusher",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_PUSHER),self.sketcher.stateManager.STATE_PUSHER.numElectron=1})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_pusher_2",imageDepot.PUSHER_DOUBLE,"Electron Pair Pusher",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_PUSHER),self.sketcher.stateManager.STATE_PUSHER.numElectron=2})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_pusher_bond_forming",imageDepot.PUSHER_BOND_FORMING,"Bond Forming Pusher",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_PUSHER),self.sketcher.stateManager.STATE_PUSHER.numElectron=-1})),this.shapeSet.dropDown.buttonSet.buttons.push(new desktop.Button(self.sketcher.id+"_button_shape_charge_bracket",imageDepot.CHARGE_BRACKET,"Bracket",function(){self.sketcher.stateManager.setState(self.sketcher.stateManager.STATE_SHAPE),self.sketcher.stateManager.STATE_SHAPE.shapeType=states.ShapeState.BRACKET,self.sketcher.repaint()}))}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.uis.actions,ChemDoodle.uis.gui,ChemDoodle.uis.gui.imageDepot,ChemDoodle.uis.gui.desktop,ChemDoodle.uis.tools,ChemDoodle.uis.states,ChemDoodle.lib.jQuery,document),function(math,monitor,tools){"use strict";tools.Lasso=function(sketcher){this.sketcher=sketcher,this.atoms=[],this.shapes=[],this.bounds=void 0,this.mode=tools.Lasso.MODE_LASSO,this.points=[]},tools.Lasso.MODE_LASSO="lasso",tools.Lasso.MODE_LASSO_SHAPES="shapes",tools.Lasso.MODE_RECTANGLE_MARQUEE="rectangle";var _=tools.Lasso.prototype;_.select=function(atoms,shapes){if(!this.block){if(monitor.SHIFT||this.empty(),atoms)this.atoms=atoms.slice(0),this.shapes=shapes.slice(0);else{if(this.mode!==tools.Lasso.MODE_LASSO_SHAPES){for(var asAdd=[],i=0,ii=this.sketcher.molecules.length;ii>i;i++)for(var mol=this.sketcher.molecules[i],j=0,jj=mol.atoms.length;jj>j;j++){var a=mol.atoms[j];this.mode===tools.Lasso.MODE_RECTANGLE_MARQUEE?2===this.points.length&&math.isBetween(a.x,this.points[0].x,this.points[1].x)&&math.isBetween(a.y,this.points[0].y,this.points[1].y)&&asAdd.push(a):this.points.length>1&&math.isPointInPoly(this.points,a)&&asAdd.push(a)}if(0===this.atoms.length)this.atoms=asAdd;else{for(var asFinal=[],i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];-1===asAdd.indexOf(a)?asFinal.push(a):a.isLassoed=!1}for(var i=0,ii=asAdd.length;ii>i;i++)-1===this.atoms.indexOf(asAdd[i])&&asFinal.push(asAdd[i]);this.atoms=asFinal}}for(var ssAdd=[],i=0,ii=this.sketcher.shapes.length;ii>i;i++){for(var s=this.sketcher.shapes[i],sps=s.getPoints(),contained=sps.length>0,j=0,jj=sps.length;jj>j;j++){var p=sps[j];if(this.mode===tools.Lasso.MODE_RECTANGLE_MARQUEE){if(2!==this.points.length){contained=!1;break}if(!math.isBetween(p.x,this.points[0].x,this.points[1].x)||!math.isBetween(p.y,this.points[0].y,this.points[1].y)){contained=!1;break}}else{if(!(this.points.length>1)){contained=!1;break}if(!math.isPointInPoly(this.points,p)){contained=!1;break}}}contained&&ssAdd.push(s)}if(0===this.shapes.length)this.shapes=ssAdd;else{for(var ssFinal=[],i=0,ii=this.shapes.length;ii>i;i++){var s=this.shapes[i];-1===ssAdd.indexOf(s)?asFinal.push(s):s.isLassoed=!1}for(var i=0,ii=ssAdd.length;ii>i;i++)-1===this.shapes.indexOf(ssAdd[i])&&ssFinal.push(ssAdd[i]);this.shapes=ssFinal}}for(var i=0,ii=this.atoms.length;ii>i;i++)this.atoms[i].isLassoed=!0;for(var i=0,ii=this.shapes.length;ii>i;i++)this.shapes[i].isLassoed=!0;this.setBounds(),this.bounds&&this.bounds.minX===1/0&&this.empty(),this.points=[],this.sketcher.stateManager.getCurrentState().clearHover(),this.enableButtons(),this.sketcher.repaint()}},_.enableButtons=function(){this.sketcher.useServices&&(this.atoms.length>0?(this.sketcher.toolbarManager.buttonClean.enable(),this.sketcher.toolbarManager.buttonCalculate.enable(),this.sketcher.toolbarManager.buttonSave.enable()):(this.sketcher.toolbarManager.buttonClean.disable(),this.sketcher.toolbarManager.buttonCalculate.disable(),this.sketcher.toolbarManager.buttonSave.disable()))},_.setBounds=function(){if(this.isActive()){this.sketcher.repaint(),this.bounds=new math.Bounds;for(var i=0,ii=this.atoms.length;ii>i;i++){var a=this.atoms[i];this.bounds.expand(a.getBounds())}for(var i=0,ii=this.shapes.length;ii>i;i++)this.bounds.expand(this.shapes[i].getBounds());var buffer=5;this.bounds.minX-=buffer,this.bounds.minY-=buffer,this.bounds.maxX+=buffer,this.bounds.maxY+=buffer}else this.bounds=void 0},_.empty=function(){for(var i=0,ii=this.atoms.length;ii>i;i++)this.atoms[i].isLassoed=!1;for(var i=0,ii=this.shapes.length;ii>i;i++)this.shapes[i].isLassoed=!1;this.atoms=[],this.shapes=[],this.bounds=void 0,this.enableButtons(),this.sketcher.repaint()},_.draw=function(ctx,specs){if(ctx.strokeStyle="blue",ctx.lineWidth=.5/specs.scale,this.points.length>0)if(this.mode===tools.Lasso.MODE_RECTANGLE_MARQUEE){if(2===this.points.length){var p1=this.points[0],p2=this.points[1];ctx.beginPath(),ctx.rect(p1.x,p1.y,p2.x-p1.x,p2.y-p1.y),ctx.stroke()}}else if(this.points.length>1){ctx.beginPath(),ctx.moveTo(this.points[0].x,this.points[0].y);for(var i=1,ii=this.points.length;ii>i;i++)ctx.lineTo(this.points[i].x,this.points[i].y);ctx.closePath(),ctx.stroke()}this.bounds&&(ctx.beginPath(),ctx.rect(this.bounds.minX,this.bounds.minY,this.bounds.maxX-this.bounds.minX,this.bounds.maxY-this.bounds.minY),ctx.stroke())},_.isActive=function(){return this.atoms.length>0||this.shapes.length>0},_.getFirstMolecule=function(){return this.atoms.length>0?this.sketcher.getMoleculeByAtom(this.atoms[0]):void 0},_.getAllPoints=function(){for(var ps=this.atoms,i=0,ii=this.shapes.length;ii>i;i++)ps=ps.concat(this.shapes[i].getPoints());return ps},_.addPoint=function(p){if(this.mode===tools.Lasso.MODE_RECTANGLE_MARQUEE)if(this.points.length<2)this.points.push(p);else{var changing=this.points[1];changing.x=p.x,changing.y=p.y}else this.points.push(p)}}(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.uis.tools),function(c,extensions,featureDetection,sketcherPack,structures,tools,q,m,window){"use strict";c.SketcherCanvas=function(id,width,height,options){if(this.isMobile=void 0===options.isMobile?featureDetection.supports_touch():options.isMobile,this.useServices=void 0===options.useServices?!1:options.useServices,this.oneMolecule=void 0===options.oneMolecule?!1:options.oneMolecule,this.includeToolbar=void 0===options.includeToolbar?!0:options.includeToolbar,this.includeQuery=void 0===options.includeQuery?!1:options.includeQuery,this.id=id,this.toolbarManager=new sketcherPack.gui.ToolbarManager(this),this.includeToolbar){this.toolbarManager.write();var self=this;document.getElementById(this.id)?q("#"+id+"_button_attribute_lonePair_decrement_icon").load(function(){self.toolbarManager.setup()}):q(window).load(function(){self.toolbarManager.setup()}),this.dialogManager=new sketcherPack.gui.DialogManager(this)}if(this.stateManager=new sketcherPack.states.StateManager(this),this.historyManager=new sketcherPack.actions.HistoryManager(this),id&&this.create(id,width,height),this.specs.atoms_circleDiameter_2D=7,this.specs.atoms_circleBorderWidth_2D=0,this.isHelp=!1,this.lastPinchScale=1,this.lastGestureRotate=0,this.inGesture=!1,this.oneMolecule){var startMol=new structures.Molecule;startMol.atoms.push(new structures.Atom),this.loadMolecule(startMol)}else this.startAtom=new structures.Atom("C",-10,-10),this.startAtom.isLone=!0,this.lasso=new tools.Lasso(this)};var _=c.SketcherCanvas.prototype=new c._Canvas;_.drawSketcherDecorations=function(ctx){if(ctx.save(),ctx.translate(this.width/2,this.height/2),ctx.rotate(this.specs.rotateAngle),ctx.scale(this.specs.scale,this.specs.scale),ctx.translate(-this.width/2,-this.height/2),this.hovering&&this.hovering.drawDecorations(ctx,this.specs),this.startAtom&&-10!=this.startAtom.x&&!this.isMobile&&this.startAtom.draw(ctx,this.specs),this.tempAtom&&(ctx.strokeStyle="#00FF00",ctx.fillStyle="#00FF00",ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(this.hovering.x,this.hovering.y),extensions.contextHashTo(ctx,this.hovering.x,this.hovering.y,this.tempAtom.x,this.tempAtom.y,2,2),ctx.stroke(),"C"===this.tempAtom.label?(ctx.beginPath(),ctx.arc(this.tempAtom.x,this.tempAtom.y,3,0,2*m.PI,!1),ctx.fill()):(ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=extensions.getFontString(this.specs.atoms_font_size_2D,this.specs.atoms_font_families_2D,this.specs.atoms_font_bold_2D,this.specs.atoms_font_italic_2D),ctx.fillText(this.tempAtom.label,this.tempAtom.x,this.tempAtom.y)),this.tempAtom.isOverlap&&(ctx.strokeStyle="#C10000",ctx.lineWidth=1.2,ctx.beginPath(),ctx.arc(this.tempAtom.x,this.tempAtom.y,7,0,2*m.PI,!1),ctx.stroke())),this.tempRing){if(ctx.strokeStyle="#00FF00",ctx.fillStyle="#00FF00",ctx.lineWidth=1,ctx.beginPath(),this.hovering instanceof structures.Atom){ctx.moveTo(this.hovering.x,this.hovering.y),extensions.contextHashTo(ctx,this.hovering.x,this.hovering.y,this.tempRing[0].x,this.tempRing[0].y,2,2);for(var i=1,ii=this.tempRing.length;ii>i;i++)extensions.contextHashTo(ctx,this.tempRing[i-1].x,this.tempRing[i-1].y,this.tempRing[i].x,this.tempRing[i].y,2,2);extensions.contextHashTo(ctx,this.tempRing[this.tempRing.length-1].x,this.tempRing[this.tempRing.length-1].y,this.hovering.x,this.hovering.y,2,2)}else if(this.hovering instanceof structures.Bond){var start=this.hovering.a2,end=this.hovering.a1;this.tempRing[0]===this.hovering.a1&&(start=this.hovering.a1,end=this.hovering.a2),ctx.moveTo(start.x,start.y),extensions.contextHashTo(ctx,start.x,start.y,this.tempRing[1].x,this.tempRing[1].y,2,2);for(var i=2,ii=this.tempRing.length;ii>i;i++)extensions.contextHashTo(ctx,this.tempRing[i-1].x,this.tempRing[i-1].y,this.tempRing[i].x,this.tempRing[i].y,2,2);extensions.contextHashTo(ctx,this.tempRing[this.tempRing.length-1].x,this.tempRing[this.tempRing.length-1].y,end.x,end.y,2,2)}ctx.stroke(),ctx.strokeStyle="#C10000",ctx.lineWidth=1.2;for(var i=0,ii=this.tempRing.length;ii>i;i++)this.tempRing[i].isOverlap&&(ctx.beginPath(),ctx.arc(this.tempRing[i].x,this.tempRing[i].y,7,0,2*m.PI,!1),ctx.stroke())}this.lasso&&this.lasso.draw(ctx,this.specs),this.stateManager.getCurrentState().draw&&this.stateManager.getCurrentState().draw(ctx),ctx.restore()},_.drawChildExtras=function(ctx){if(this.drawSketcherDecorations(ctx),!this.hideHelp){var helpPos=new structures.Point(this.width-20,20),radgrad=ctx.createRadialGradient(helpPos.x,helpPos.y,10,helpPos.x,helpPos.y,2);radgrad.addColorStop(0,"#00680F"),radgrad.addColorStop(1,"#FFFFFF"),ctx.fillStyle=radgrad,ctx.beginPath(),ctx.arc(helpPos.x,helpPos.y,10,0,2*m.PI,!1),ctx.fill(),this.isHelp&&(ctx.lineWidth=2,ctx.strokeStyle="black",ctx.stroke()),ctx.fillStyle=this.isHelp?"red":"black",ctx.textAlign="center",ctx.textBaseline="middle",ctx.font="14px sans-serif",ctx.fillText("?",helpPos.x,helpPos.y)}if(!this.paidToHideTrademark){ctx.font="14px sans-serif";var x="ChemDoodle",width=ctx.measureText(x).width;ctx.textAlign="left",ctx.textBaseline="bottom",ctx.fillStyle="rgba(0, 60, 0, 0.5)",ctx.fillText(x,this.width-width-13,this.height-4),ctx.font="8px sans-serif",ctx.fillText("Â®",this.width-13,this.height-12)}},_.scaleEvent=function(e){e.op=new structures.Point(e.p.x,e.p.y),1!==this.specs.scale&&(e.p.x=this.width/2+(e.p.x-this.width/2)/this.specs.scale,e.p.y=this.height/2+(e.p.y-this.height/2)/this.specs.scale)},_.checkScale=function(){this.specs.scale<.5?this.specs.scale=.5:this.specs.scale>10&&(this.specs.scale=10)},_.click=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().click(e)},_.rightclick=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().rightclick(e)},_.dblclick=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().dblclick(e)},_.mousedown=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().mousedown(e)},_.rightmousedown=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().rightmousedown(e)},_.mousemove=function(e){this.isHelp=!1,e.p.distance(new structures.Point(this.width-20,20))<10&&(this.isHelp=!0),this.scaleEvent(e),this.stateManager.getCurrentState().mousemove(e)},_.mouseout=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().mouseout(e)},_.mouseover=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().mouseover(e)},_.mouseup=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().mouseup(e)},_.rightmouseup=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().rightmouseup(e)},_.mousewheel=function(e,delta){this.scaleEvent(e),this.stateManager.getCurrentState().mousewheel(e,delta)},_.drag=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().drag(e)},_.keydown=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().keydown(e)},_.keypress=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().keypress(e)},_.keyup=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().keyup(e)},_.touchstart=function(e){e.originalEvent.touches&&e.originalEvent.touches.length>1?((this.tempAtom||this.tempRing)&&(this.tempAtom=void 0,this.tempRing=void 0,this.hovering=void 0,this.repaint()),this.lastPoint=void 0):(this.scaleEvent(e),this.stateManager.getCurrentState().mousemove(e),this.stateManager.getCurrentState().mousedown(e))},_.touchmove=function(e){this.scaleEvent(e),this.inGesture||this.stateManager.getCurrentState().drag(e)},_.touchend=function(e){this.scaleEvent(e),this.stateManager.getCurrentState().mouseup(e),this.hovering&&(this.stateManager.getCurrentState().clearHover(),this.repaint())},_.gesturechange=function(e){if(this.inGesture=!0,e.originalEvent.scale-this.lastPinchScale!==1&&(this.lasso&&this.lasso.isActive()||(this.specs.scale*=e.originalEvent.scale/this.lastPinchScale,this.checkScale()),this.lastPinchScale=e.originalEvent.scale),this.lastGestureRotate-e.originalEvent.rotation!==0){var rot=(this.lastGestureRotate-e.originalEvent.rotation)/180*m.PI;if(this.parentAction){this.parentAction.dif+=rot;for(var i=0,ii=this.parentAction.ps.length;ii>i;i++){var p=this.parentAction.ps[i],dist=this.parentAction.center.distance(p),angle=this.parentAction.center.angle(p)+rot;p.x=this.parentAction.center.x+dist*m.cos(angle),p.y=this.parentAction.center.y-dist*m.sin(angle)}for(var i=0,ii=this.molecules.length;ii>i;i++)this.molecules[i].check();this.lasso&&this.lasso.isActive()&&this.lasso.setBounds()}else{var ps=this.lasso&&this.lasso.isActive()?this.lasso.getAllPoints():this.getAllPoints(),center=this.lasso&&this.lasso.isActive()?new structures.Point((this.lasso.bounds.minX+this.lasso.bounds.maxX)/2,(this.lasso.bounds.minY+this.lasso.bounds.maxY)/2):new structures.Point(this.width/2,this.height/2);this.parentAction=new sketcherPack.actions.RotateAction(ps,rot,center),this.historyManager.pushUndo(this.parentAction)}this.lastGestureRotate=e.originalEvent.rotation}this.repaint()},_.gestureend=function(e){this.inGesture=!1,this.lastPinchScale=1,this.lastGestureRotate=0,this.parentAction=void 0}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.featureDetection,ChemDoodle.uis,ChemDoodle.structures,ChemDoodle.uis.tools,ChemDoodle.lib.jQuery,Math,window),function(c,math,monitor,actions,states,structures,SYMBOLS,m,m4){"use strict";states._State3D=function(){};var _=states._State3D.prototype;_.setup=function(editor){this.editor=editor},_.enter=function(){this.innerenter&&this.innerenter()},_.exit=function(){this.innerexit&&this.innerexit()},_.click=function(e){this.innerclick&&this.innerclick(e)},_.rightclick=function(e){this.innerrightclick&&this.innerrightclick(e)},_.dblclick=function(e){this.innerdblclick&&this.innerdblclick(e)},_.mousedown=function(e){this.editor.defaultmousedown(e),this.editor.isHelp||this.editor.isMobile&&e.p.distance(new structures.Point(this.editor.width-20,20))<10?(this.editor.isHelp=!1,this.editor.lastPoint=void 0,this.editor.repaint(),window.open("http://web.chemdoodle.com/demos/3d-editor")):this.innermousedown&&this.innermousedown(e)},_.rightmousedown=function(e){this.innerrightmousedown&&this.innerrightmousedown(e),this.editor.defaultrightmousedown(e)},_.mousemove=function(e){this.innermousemove&&this.innermousemove(e),this.editor.repaint()},_.mouseout=function(e){this.innermouseout&&this.innermouseout(e)},_.mouseover=function(e){this.innermouseover&&this.innermouseover(e)},_.mouseup=function(e){this.innermouseup&&this.innermouseup(e),
this.editor.defaultmouseup(e)},_.rightmouseup=function(e){this.innerrightmouseup&&this.innerrightmouseup(e)},_.mousewheel=function(e,delta){this.innermousewheel?this.innermousewheel(e):this.editor.defaultmousewheel(e,delta)},_.drag=function(e){this.innerdrag?this.innerdrag(e):this.editor.defaultdrag(e)},_.keydown=function(e){monitor.META&&(90===e.which?this.editor.historyManager.undo():89===e.which?this.editor.historyManager.redo():83===e.which?this.editor.toolbarManager.buttonSave.getElement().click():79===e.which?this.editor.toolbarManager.buttonOpen.getElement().click():78===e.which?this.editor.toolbarManager.buttonClear.getElement().click():187===e.which||61===e.which?this.editor.toolbarManager.buttonScalePlus.getElement().click():(189===e.which||109===e.which)&&this.editor.toolbarManager.buttonScaleMinus.getElement().click()),this.innerkeydown&&this.innerkeydown(e)},_.keypress=function(e){this.innerkeypress&&this.innerkeypress(e)},_.keyup=function(e){this.innerkeyup&&this.innerkeyup(e)}}(ChemDoodle,ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,ChemDoodle.SYMBOLS,Math,ChemDoodle.lib.mat4),function(actions,states,structures,d3,q){"use strict";states.MeasureState3D=function(editor){this.setup(editor),this.selectedAtoms=[]};var _=states.MeasureState3D.prototype=new states._State3D;_.numToSelect=2,_.reset=function(){for(var i=0,ii=this.selectedAtoms.length;ii>i;i++)this.selectedAtoms[i].isSelected=!1;this.selectedAtoms=[],this.editor.repaint()},_.innerenter=function(e){this.reset()},_.innerexit=function(e){this.reset()},_.innermousemove=function(e){this.hoveredAtom&&(this.hoveredAtom.isHover=!1,this.hoveredAtom=void 0);var obj=this.editor.pick(e.p.x,e.p.y,!0,!1);obj&&obj instanceof structures.Atom&&(this.hoveredAtom=obj,obj.isHover=!0),this.editor.repaint()},_.innermousedown=function(e){if(this.editor.isMobile&&this.innermousemove(e),this.hoveredAtom){if(this.hoveredAtom.isHover=!1,this.hoveredAtom.isSelected){var a=this.hoveredAtom;this.selectedAtoms=q.grep(this.selectedAtoms,function(value){return value!==a})}else this.selectedAtoms.push(this.hoveredAtom);this.hoveredAtom.isSelected=!this.hoveredAtom.isSelected,this.hoveredAtom=void 0,this.editor.repaint()}if(this.selectedAtoms.length===this.numToSelect){var shape;switch(this.numToSelect){case 2:shape=new d3.Distance(this.selectedAtoms[0],this.selectedAtoms[1]);break;case 3:shape=new d3.Angle(this.selectedAtoms[0],this.selectedAtoms[1],this.selectedAtoms[2]);break;case 4:shape=new d3.Torsion(this.selectedAtoms[0],this.selectedAtoms[1],this.selectedAtoms[2],this.selectedAtoms[3])}this.reset(),shape&&this.editor.historyManager.pushUndo(new actions.AddShapeAction(this.editor,shape))}}}(ChemDoodle.uis.actions,ChemDoodle.uis.states,ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.lib.jQuery),function(states){"use strict";states.ViewState3D=function(editor){this.setup(editor)};states.ViewState3D.prototype=new states._State3D}(ChemDoodle.uis.states),function(states){"use strict";states.StateManager3D=function(editor){this.STATE_VIEW=new states.ViewState3D(editor),this.STATE_MEASURE=new states.MeasureState3D(editor);var currentState=this.STATE_VIEW;this.setState=function(nextState){nextState!==currentState&&(currentState.exit(),currentState=nextState,currentState.enter())},this.getCurrentState=function(){return currentState}}}(ChemDoodle.uis.states),function(c,iChemLabs,io,structures,actions,gui,imageDepot,desktop,tools,states,q,document){"use strict";gui.ToolbarManager3D=function(editor){this.editor=editor,this.buttonOpen=new desktop.Button(editor.id+"_button_open",imageDepot.OPEN,"Open",function(){editor.dialogManager.loadDialog.getTextArea().val(""),editor.dialogManager.loadDialog.getElement().dialog("open")}),this.buttonSave=new desktop.Button(editor.id+"_button_save",imageDepot.SAVE,"Save",function(){editor.useServices?editor.dialogManager.saveDialog.clear():editor.dialogManager.saveDialog.getTextArea().val(c.writeMOL(editor.molecules[0])),editor.dialogManager.saveDialog.getElement().dialog("open")}),this.buttonSearch=new desktop.Button(editor.id+"_button_search",imageDepot.SEARCH,"Search",function(){editor.dialogManager.searchDialog.getElement().dialog("open")}),this.buttonCalculate=new desktop.Button(editor.id+"_button_calculate",imageDepot.CALCULATE,"Calculate",function(){var mol=editor.molecules[0];mol&&iChemLabs.calculate(mol,{descriptors:["mf","ef","mw","miw","deg_unsat","hba","hbd","rot","electron","pol_miller","cmr","tpsa","vabc","xlogp2","bertz"]},function(content){function addDatum(title,value,unit){sb.push(title),sb.push(": ");for(var i=title.length+2;30>i;i++)sb.push(" ");sb.push(value),sb.push(" "),sb.push(unit),sb.push("\n")}var sb=[];addDatum("Molecular Formula",content.mf,""),addDatum("Empirical Formula",content.ef,""),addDatum("Molecular Mass",content.mw,"amu"),addDatum("Monoisotopic Mass",content.miw,"amu"),addDatum("Degree of Unsaturation",content.deg_unsat,""),addDatum("Hydrogen Bond Acceptors",content.hba,""),addDatum("Hydrogen Bond Donors",content.hbd,""),addDatum("Rotatable Bonds",content.rot,""),addDatum("Total Electrons",content.rot,""),addDatum("Molecular Polarizability",content.pol_miller,"A^3"),addDatum("Molar Refractivity",content.cmr,"cm^3/mol"),addDatum("Polar Surface Area",content.tpsa,"A^2"),addDatum("vdW Volume",content.vabc,"A^3"),addDatum("logP",content.xlogp2,""),addDatum("Complexity",content.bertz,""),editor.dialogManager.calculateDialog.getTextArea().val(sb.join("")),editor.dialogManager.calculateDialog.getElement().dialog("open")})}),this.buttonTransform=new desktop.Button(editor.id+"_button_transform",imageDepot.PERSPECTIVE,"Transform",function(){editor.stateManager.setState(editor.stateManager.STATE_VIEW)}),this.buttonTransform.toggle=!0,this.buttonSettings=new desktop.Button(editor.id+"_button_specifications",imageDepot.SETTINGS,"Visual Specifications",function(){editor.dialogManager.specsDialog.update(editor.specs),editor.dialogManager.specsDialog.getElement().dialog("open")}),this.buttonAnimation=new desktop.Button(editor.id+"_button_animation",imageDepot.ANIMATION,"Animations",function(){editor.stateManager.setState(editor.stateManager.STATE_MOVE)}),this.buttonClear=new desktop.Button(editor.id+"_button_clear",imageDepot.CLEAR,"Clear",function(){editor.historyManager.pushUndo(new actions.ClearAction(editor))}),this.buttonClean=new desktop.Button(editor.id+"_button_clean",imageDepot.OPTIMIZE,"Clean",function(){var mol=editor.molecules[0];mol&&iChemLabs.optimize(mol,{dimension:3},function(mol){editor.historyManager.pushUndo(new actions.SwitchMoleculeAction(editor,mol))})}),this.makeScaleSet(this),this.makeHistorySet(this),this.makeMeasurementsSet(this)};var _=gui.ToolbarManager3D.prototype;_.write=function(){var sb=['<div style="font-size:10px;">'],bg=this.editor.id+"_main_group";if(sb.push(this.historySet.getSource()),sb.push(this.scaleSet.getSource()),sb.push(this.buttonOpen.getSource()),sb.push(this.buttonSave.getSource()),this.editor.useServices&&(sb.push(this.buttonSearch.getSource()),sb.push(this.buttonCalculate.getSource())),sb.push("<br>"),sb.push(this.buttonTransform.getSource(bg)),sb.push(this.buttonSettings.getSource()),sb.push(this.measurementsSet.getSource(bg)),sb.push(this.buttonClear.getSource()),this.editor.useServices&&sb.push(this.buttonClean.getSource()),sb.push("</div>"),document.getElementById(this.editor.id)){var canvas=q("#"+this.editor.id);canvas.before(sb.join(""))}else document.write(sb.join(""))},_.setup=function(){this.buttonTransform.setup(!0),this.buttonSettings.setup(),this.measurementsSet.setup(),this.buttonClear.setup(),this.editor.useServices&&this.buttonClean.setup(),this.historySet.setup(),this.scaleSet.setup(),this.buttonOpen.setup(),this.buttonSave.setup(),this.editor.useServices&&(this.buttonSearch.setup(),this.buttonCalculate.setup()),this.buttonTransform.select(),this.buttonUndo.disable(),this.buttonRedo.disable()},_.makeScaleSet=function(self){this.scaleSet=new desktop.ButtonSet(self.editor.id+"_buttons_scale"),this.scaleSet.toggle=!1,this.buttonScalePlus=new desktop.Button(self.editor.id+"_button_scale_plus",imageDepot.ZOOM_IN,"Increase Scale",function(){self.editor.mousewheel(null,-10)}),this.scaleSet.buttons.push(this.buttonScalePlus),this.buttonScaleMinus=new desktop.Button(self.editor.id+"_button_scale_minus",imageDepot.ZOOM_OUT,"Decrease Scale",function(){self.editor.mousewheel(null,10)}),this.scaleSet.buttons.push(this.buttonScaleMinus)},_.makeHistorySet=function(self){this.historySet=new desktop.ButtonSet(self.editor.id+"_buttons_history"),this.historySet.toggle=!1,this.buttonUndo=new desktop.Button(self.editor.id+"_button_undo",imageDepot.UNDO,"Undo",function(){self.editor.historyManager.undo()}),this.historySet.buttons.push(this.buttonUndo),this.buttonRedo=new desktop.Button(self.editor.id+"_button_redo",imageDepot.REDO,"Redo",function(){self.editor.historyManager.redo()}),this.historySet.buttons.push(this.buttonRedo)},_.makeMeasurementsSet=function(self){this.measurementsSet=new desktop.ButtonSet(self.editor.id+"_buttons_measurements"),this.buttonDistance=new desktop.Button(self.editor.id+"_button_distance",imageDepot.DISTANCE,"Distance",function(){self.editor.stateManager.STATE_MEASURE.numToSelect=2,self.editor.stateManager.STATE_MEASURE.reset(),self.editor.stateManager.setState(self.editor.stateManager.STATE_MEASURE)}),this.measurementsSet.buttons.push(this.buttonDistance),this.buttonAngle=new desktop.Button(self.editor.id+"_button_angle",imageDepot.ANGLE,"Angle",function(){self.editor.stateManager.STATE_MEASURE.numToSelect=3,self.editor.stateManager.STATE_MEASURE.reset(),self.editor.stateManager.setState(self.editor.stateManager.STATE_MEASURE)}),this.measurementsSet.buttons.push(this.buttonAngle),this.buttonTorsion=new desktop.Button(self.editor.id+"_button_torsion",imageDepot.TORSION,"Torsion",function(){self.editor.stateManager.STATE_MEASURE.numToSelect=4,self.editor.stateManager.STATE_MEASURE.reset(),self.editor.stateManager.setState(self.editor.stateManager.STATE_MEASURE)}),this.measurementsSet.buttons.push(this.buttonTorsion)}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.uis.actions,ChemDoodle.uis.gui,ChemDoodle.uis.gui.imageDepot,ChemDoodle.uis.gui.desktop,ChemDoodle.uis.tools,ChemDoodle.uis.states,ChemDoodle.lib.jQuery,document),function(c,desktop,q,document){"use strict";desktop.SpecsDialog=function(editor,subid){this.editor=editor,this.id=this.editor.id+subid};var _=desktop.SpecsDialog.prototype=new desktop.Dialog;_.title="Visual Specifications",_.makeProjectionSet=function(self){this.projectionSet=new desktop.ButtonSet(self.id+"_projection_group"),this.buttonPerspective=new desktop.TextButton(self.id+"_button_Perspective","Perspective",function(){self.editor.specs.projectionPerspective_3D=!0,self.editor.updateScene(),self.update(editor.specs)}),this.projectionSet.buttons.push(this.buttonPerspective),this.buttonOrthographic=new desktop.TextButton(self.id+"_button_Orthographic","Orthographic",function(){self.editor.specs.projectionPerspective_3D=!1,self.editor.updateScene(self),self.update(editor.specs)}),this.projectionSet.buttons.push(this.buttonOrthographic)},_.makeAtomColorSet=function(self){this.atomColorSet=new desktop.ButtonSet(self.id+"_atom_color_group"),this.atomColorSet.toggle=!0,this.buttonJmolColors=new desktop.TextButton(self.id+"_button_Jmol_Colors","Jmol",function(){self.editor.specs.atoms_useJMOLColors=!0,self.editor.specs.atoms_usePYMOLColors=!1,self.editor.updateScene(),self.update(editor.specs)}),this.atomColorSet.buttons.push(this.buttonJmolColors),this.buttonPymolColors=new desktop.TextButton(self.id+"_button_PyMOL_Colors","PyMOL",function(){self.editor.specs.atoms_usePYMOLColors=!0,self.editor.specs.atoms_useJMOLColors=!1,self.editor.updateScene(),self.update(editor.specs)}),this.atomColorSet.buttons.push(this.buttonPymolColors)},_.makeBondColorSet=function(self){this.bondColorSet=new desktop.ButtonSet(self.id+"_bond_color_group"),this.bondColorSet.toggle=!0,this.buttonJmolBondColors=new desktop.TextButton(self.id+"_button_Jmol_Bond_Colors","Jmol",function(){self.editor.specs.bonds_useJMOLColors=!0,self.editor.specs.bonds_usePYMOLColors=!1,self.editor.updateScene(),self.update(editor.specs)}),this.bondColorSet.buttons.push(this.buttonJmolBondColors),this.buttonPymolBondColors=new desktop.TextButton(self.id+"_button_PyMOL_Bond_Colors","PyMOL",function(){self.editor.specs.bonds_usePYMOLColors=!0,self.editor.specs.bonds_useJMOLColors=!1,self.editor.updateScene(),self.update(editor.specs)}),this.bondColorSet.buttons.push(this.buttonPymolBondColors)},_.makeCompassPositionSet=function(self){this.compassPositionSet=new desktop.ButtonSet(self.id+"_compass_position_group"),this.buttonCompassCorner=new desktop.TextButton(self.id+"_button_compass_corner","Corner",function(){self.editor.specs.compass_type_3D=0,self.editor.specs.compass_size_3D=50,self.editor.setupScene(),self.editor.updateScene(),self.update(editor.specs)}),this.compassPositionSet.buttons.push(this.buttonCompassCorner),this.buttonCompassOrigin=new desktop.TextButton(self.id+"_button_compass_origin","Origin",function(){self.editor.specs.compass_type_3D=1,self.editor.specs.compass_size_3D=150,self.editor.setupScene(),self.editor.updateScene(),self.update(editor.specs)}),this.compassPositionSet.buttons.push(this.buttonCompassOrigin)},_.makeFogModeSet=function(self){this.fogModeSet=new desktop.ButtonSet(self.id+"_fog_mode_group"),this.buttonFogMode0=new desktop.TextButton(self.id+"_button_fog_mode_0","No Fogging",function(){self.editor.specs.fog_mode_3D=0,self.editor.updateScene(),self.update(editor.specs)}),this.fogModeSet.buttons.push(this.buttonFogMode0),this.buttonFogMode1=new desktop.TextButton(self.id+"_button_fog_mode_1","Linear",function(){self.editor.specs.fog_mode_3D=1,self.editor.updateScene(),self.update(editor.specs)}),this.fogModeSet.buttons.push(this.buttonFogMode1),this.buttonFogMode2=new desktop.TextButton(self.id+"_button_fog_mode_2","Exponential",function(){self.editor.specs.fog_mode_3D=2,self.editor.updateScene(),self.update(editor.specs)}),this.fogModeSet.buttons.push(this.buttonFogMode2),this.buttonFogMode3=new desktop.TextButton(self.id+"_button_fog_mode_3","Exponential&sup2;",function(){self.editor.specs.fog_mode_3D=3,self.editor.updateScene(),self.update(editor.specs)}),this.fogModeSet.buttons.push(this.buttonFogMode3)},_.setup=function(self,editor){this.makeProjectionSet(this),this.bgcolor=new desktop.ColorPicker(this.id+"_bgcolor","Background Color: ",function(hex){editor.specs.backgroundColor=hex,editor.setupScene(),editor.repaint(),self.update(editor.specs)}),this.makeFogModeSet(this),this.fogcolor=new desktop.ColorPicker(this.id+"_fogcolor","Fog Color: ",function(hex){editor.specs.fog_color_3D=hex,editor.setupScene(),editor.repaint(),self.update(editor.specs)}),this.atomsDisplayToggle=new desktop.CheckBox(this.id+"_atoms_display_toggle","Display atoms",function(){editor.specs.atoms_display=!editor.specs.atoms_display,editor.updateScene(),self.update(editor.specs)},!0),this.atomcolor=new desktop.ColorPicker(this.id+"_atomcolor","Atom Color: ",function(hex){editor.specs.atoms_color=hex,editor.setupScene(),editor.repaint(),self.update(editor.specs)}),this.makeAtomColorSet(this),this.atomColorSetToggle=new desktop.CheckBox(this.id+"_atom_color_group_toggle","Color Schemes",function(){self.buttonJmolColors.getElement().prop("disabled")?(self.atomColorSet.enable(),editor.specs.atoms_useJMOLColors=!0):(self.atomColorSet.disable(),editor.specs.atoms_useJMOLColors=!1,editor.specs.atoms_usePYMOLColors=!1,self.buttonJmolColors.uncheck(),self.buttonPymolColors.uncheck()),editor.updateScene(),self.update(editor.specs)},!1),this.vdwToggle=new desktop.CheckBox(this.id+"_vdw_toggle","Use VDW Diameters",function(){editor.specs.atoms_useVDWDiameters_3D=!editor.specs.atoms_useVDWDiameters_3D,editor.updateScene(),self.update(editor.specs)},!1),this.atomsNonBondedAsStarsToggle=new desktop.CheckBox(this.id+"_non_bonded_as_stars_toggle","Non-bonded as stars",function(){editor.specs.atoms_nonBondedAsStars_3D=!editor.specs.atoms_nonBondedAsStars_3D,editor.updateScene(),self.update(editor.specs)},!1),this.displayLabelsToggle=new desktop.CheckBox(this.id+"_display_labels_toggle","Atom labels",function(){editor.specs.atoms_displayLabels_3D=!editor.specs.atoms_displayLabels_3D,editor.updateScene(),self.update(editor.specs)},!1),this.bondsDisplayToggle=new desktop.CheckBox(this.id+"_bonds_display_toggle","Display bonds",function(){editor.specs.bonds_display=!editor.specs.bonds_display,editor.updateScene(),self.update(editor.specs)},!0),this.bondcolor=new desktop.ColorPicker(this.id+"_bondcolor","Bond Color: ",function(hex){editor.specs.bonds_color=hex,editor.setupScene(),editor.repaint(),self.update(editor.specs)}),this.makeBondColorSet(this),this.bondColorSetToggle=new desktop.CheckBox(this.id+"_bond_color_group_toggle","Color Schemes",function(){self.buttonJmolBondColors.getElement().prop("disabled")?(self.bondColorSet.enable(),editor.specs.bonds_useJMOLColors=!0):(self.bondColorSet.disable(),editor.specs.bonds_useJMOLColors=!1,editor.specs.bonds_usePYMOLColors=!1,self.buttonJmolBondColors.uncheck(),self.buttonPymolBondColors.uncheck()),editor.updateScene(),self.update(editor.specs)},!1),this.bondOrderToggle=new desktop.CheckBox(this.id+"_bond_order_toggle","Show order",function(){editor.specs.bonds_showBondOrders_3D=!editor.specs.bonds_showBondOrders_3D,editor.updateScene(),self.update(editor.specs)},!1),this.bondsRenderAsLinesToggle=new desktop.CheckBox(this.id+"_bonds_render_as_lines_toggle","Render as lines",function(){editor.specs.bonds_renderAsLines_3D=!editor.specs.bonds_renderAsLines_3D,editor.updateScene(),self.update(editor.specs)},!1),this.ribbonsToggle=new desktop.CheckBox(this.id+"_ribbons_toggle","Ribbons",function(){editor.specs.proteins_displayRibbon=!editor.specs.proteins_displayRibbon,editor.updateScene(),self.update(editor.specs)},!1),this.backboneToggle=new desktop.CheckBox(this.id+"_backbone_toggle","Backbone",function(){editor.specs.proteins_displayBackbone=!editor.specs.proteins_displayBackbone,editor.updateScene(),self.update(editor.specs)},!1),this.pipeplankToggle=new desktop.CheckBox(this.id+"_pipeplank_toggle","Pipe and Plank",function(){editor.specs.proteins_displayPipePlank=!editor.specs.proteins_displayPipePlank,editor.updateScene(),self.update(editor.specs)},!1),this.cartoonizeToggle=new desktop.CheckBox(this.id+"_cartoonize_toggle","Cartoonize",function(){editor.specs.proteins_ribbonCartoonize=!editor.specs.proteins_ribbonCartoonize,editor.updateScene(),self.update(editor.specs)},!1),this.colorByChainToggle=new desktop.CheckBox(this.id+"_color_by_chain_toggle","Color by Chain",function(){editor.specs.macro_colorByChain=!editor.specs.macro_colorByChain,editor.updateScene(),self.update(editor.specs)},!1),this.proteinColorToggle=new desktop.CheckBox(this.id+"_protein_color_toggle","Color by Segment",function(){self.proteinColorToggle.checked?(editor.specs.proteins_residueColor="none",self.proteinColorToggle.uncheck(),q("#proteinColors").prop("disabled",!0)):(self.proteinColorToggle.check(),q("#proteinColors").removeAttr("disabled"),editor.specs.proteins_residueColor=q("#proteinColors").val()),editor.updateScene(),self.update(editor.specs)},!1),this.nucleicAcidColorToggle=new desktop.CheckBox(this.id+"_nucleic_acid_color_toggle","Color by Segment",function(){self.nucleicAcidColorToggle.checked?(editor.specs.nucleics_residueColor="none",self.nucleicAcidColorToggle.uncheck(),q("#nucleicColors").prop("disabled",!0)):(self.nucleicAcidColorToggle.check(),q("#nucleicColors").removeAttr("disabled"),editor.specs.nucleics_residueColor=q("#nucleicColors").val()),editor.updateScene(),self.update(editor.specs)},!1),this.shapecolor=new desktop.ColorPicker(this.id+"_shapecolor","Shape Color: ",function(hex){editor.specs.shapes_color=hex,editor.setupScene(),editor.repaint(),self.update(editor.specs)}),this.displayCompassToggle=new desktop.CheckBox(this.id+"_display_compass_toggle","Display Compass",function(){self.displayCompassToggle.checked?(editor.specs.compass_display=!1,editor.setupScene(),editor.updateScene(),self.compassPositionSet.disable(),self.buttonCompassCorner.uncheck(),self.displayCompassToggle.uncheck(),self.update(editor.specs)):(editor.specs.compass_display=!0,editor.specs.compass_type_3D=0,editor.specs.compass_size_3D=50,self.compassPositionSet.enable(),self.displayCompassToggle.check(),self.buttonCompassCorner.check(),editor.setupScene(),editor.updateScene(),self.update(editor.specs))},!1),this.makeCompassPositionSet(this);var sb=[];sb.push('<div style="font-size:12px;text-align:left;overflow-y:scroll;height:300px;" id="'),sb.push(this.id),sb.push('" title="'),sb.push(this.title),sb.push('">'),this.message&&(sb.push("<p>"),sb.push(this.message),sb.push("</p>")),sb.push("<p><strong>Representation</strong>"),sb.push('<p><select id="reps"><option value="Ball and Stick">Ball and Stick</option><option value="van der Waals Spheres">vdW Spheres</option><option value="Stick">Stick</option><option value="Wireframe">Wireframe</option><option value="Line">Line</option></select></p>'),sb.push("<hr><strong>Canvas</strong>"),sb.push(this.bgcolor.getSource()),sb.push("<p>Projection: "),sb.push(this.projectionSet.getSource(this.id+"_projection_group")),sb.push("</p><p>Fog Mode: "),sb.push(this.fogModeSet.getSource(this.id+"_fog_mode_group")),sb.push(this.fogcolor.getSource()),sb.push('</p><p>Fog start: <input type="number" id="fogstart" min="0" max="100" value="0"> %</p>'),sb.push('</p><p>Fog end: <input type="number" id="fogend" min="0" max="100" value="100"> %</p>'),sb.push('</p><p>Fog density: <input type="number" id="fogdensity" min="0" max="100" value="100"> %</p>'),sb.push("<hr><strong>Atoms</strong><p>"),sb.push(this.atomsDisplayToggle.getSource()),sb.push("</p><p>"),sb.push(this.atomcolor.getSource()),sb.push('</p><p>Sphere diameter: <input type="number" id="spherediameter" min="0" max="40" value="0.8" step="0.01"> Angstroms</p>'),sb.push(this.vdwToggle.getSource()),sb.push('</p><p>VDW Multiplier: <input type="number" id="vdwMultiplier" min="0" max="100" value="100"> %</p>'),sb.push(this.atomsNonBondedAsStarsToggle.getSource()),sb.push("</p><p>"),sb.push(this.displayLabelsToggle.getSource()),sb.push("</p><p>"),sb.push(this.atomColorSetToggle.getSource()),sb.push(": "),sb.push(this.atomColorSet.getSource(this.id+"_atom_color_group")),sb.push("</p><hr><strong>Bonds</strong><p>"),sb.push(this.bondsDisplayToggle.getSource()),sb.push("</p><p>"),sb.push(this.bondcolor.getSource()),sb.push(this.bondColorSetToggle.getSource()),sb.push(": "),sb.push(this.bondColorSet.getSource(this.id+"_bond_color_group")),sb.push("</p><p>"),sb.push(this.bondOrderToggle.getSource()),sb.push('</p><p>Cylinder diameter: <input type="number" id="cylinderdiameter" min="0" max="40" value="0.3" step="0.01"> Angstroms</p>'),sb.push("</p><hr><strong>Proteins</strong>"),sb.push("<p>"),sb.push(this.ribbonsToggle.getSource()),sb.push("</p><p>"),sb.push(this.backboneToggle.getSource()),sb.push("</p><p>"),sb.push(this.pipeplankToggle.getSource()),sb.push("</p><p>"),sb.push(this.cartoonizeToggle.getSource()),sb.push("</p><p>"),sb.push(this.colorByChainToggle.getSource()),sb.push("</p><p>"),sb.push(this.proteinColorToggle.getSource()),sb.push('<select id="proteinColors" disabled><option value="amino">Amino</option><option value="shapely">Shapely</option><option value="polarity">Polarity</option><option value="rainbow">Rainbow</option><option value="acidity">Acidity</option></select></p>'),sb.push("<hr><strong>Nucleic Acids</strong><p>"),sb.push(this.nucleicAcidColorToggle.getSource()),sb.push(": "),sb.push('<select id="nucleicColors" disabled><option value="shapely">Shapely</option><option value="rainbow">Rainbow</option></select></p>'),sb.push("<hr><strong>Shapes</strong><p>"),sb.push(this.shapecolor.getSource()),sb.push("</p><hr><strong>Compass</strong>"),sb.push("<p>"),sb.push(this.displayCompassToggle.getSource()),sb.push(": "),sb.push(this.compassPositionSet.getSource(this.id+"_compass_position_group")),sb.push("</p>"),sb.push("</div>"),this.afterMessage&&(sb.push("<p>"),sb.push(this.afterMessage),sb.push("</p>")),document.writeln(sb.join("")),this.getElement().dialog({autoOpen:!1,position:{my:"center",at:"center",of:document},buttons:self.buttons,width:500,height:300,open:function(event,ui){q(this).height(300),q(this).width(478),q(this).dialog("option","position","center")}}),this.bgcolor.setup(),this.fogcolor.setup(),this.atomcolor.setup(),this.bondcolor.setup(),this.shapecolor.setup(),q("#reps").change(function(){var i=this.selectedIndex,ops=this.options;editor.specs.set3DRepresentation(ops[i].value),editor.updateScene(),self.update(editor.specs)}),q("#proteinColors").change(function(){var i=this.selectedIndex;switch(i){case 0:editor.specs.proteins_residueColor="amino";break;case 1:editor.specs.proteins_residueColor="shapely";break;case 2:editor.specs.proteins_residueColor="polarity";break;case 3:editor.specs.proteins_residueColor="rainbow";break;case 4:editor.specs.proteins_residueColor="acidity"}editor.updateScene(),self.update(editor.specs)}),q("#nucleicColors").change(function(){var i=this.selectedIndex;switch(i){case 0:editor.specs.nucleics_residueColor="shapely";break;case 1:editor.specs.nucleics_residueColor="rainbow"}editor.updateScene(),self.update(editor.specs)}),q("#fogstart").change(function(){editor.specs.fog_start_3D=parseInt(this.value)/100,editor.updateScene()}),q("#fogend").change(function(){editor.specs.fog_end_3D=parseInt(this.value)/100,editor.updateScene()}),q("#fogdensity").change(function(){editor.specs.fog_density_3D=parseInt(this.value)/100,editor.updateScene()}),q("#vdwMultiplier").change(function(){editor.specs.atoms_vdwMultiplier_3D=parseInt(this.value)/100,editor.updateScene()}),q("#spherediameter").change(function(){editor.specs.atoms_sphereDiameter_3D=parseFloat(this.value),editor.updateScene()}),q("#cylinderdiameter").change(function(){editor.specs.bonds_cylinderDiameter_3D=parseFloat(this.value),editor.updateScene()}),this.projectionSet.setup(),this.fogModeSet.setup(),this.atomsDisplayToggle.setup(),this.vdwToggle.setup(),this.atomsNonBondedAsStarsToggle.setup(),this.displayLabelsToggle.setup(),this.atomColorSet.setup(),this.atomColorSet.disable(),this.atomColorSetToggle.setup(),this.bondsDisplayToggle.setup(),this.bondColorSet.setup(),this.bondColorSet.disable(),this.bondColorSetToggle.setup(),this.bondOrderToggle.setup(),this.ribbonsToggle.setup(),this.backboneToggle.setup(),this.pipeplankToggle.setup(),this.cartoonizeToggle.setup(),this.colorByChainToggle.setup(),this.proteinColorToggle.setup(),this.nucleicAcidColorToggle.setup(),this.displayCompassToggle.setup(),this.compassPositionSet.setup(),this.compassPositionSet.disable()},_.update=function(specs){switch(this.bgcolor.setColor(specs.backgroundColor),this.fogcolor.setColor(specs.fog_color_3D),this.atomcolor.setColor(specs.atoms_color),this.bondcolor.setColor(specs.bonds_color),this.shapecolor.setColor(specs.shapes_color),specs.projectionPerspective_3D?this.buttonPerspective.select():this.buttonOrthographic.select(),specs.fog_mode_3D){case 1:this.buttonFogMode0.uncheck(),this.buttonFogMode1.check(),this.buttonFogMode2.uncheck(),this.buttonFogMode3.uncheck();break;case 2:this.buttonFogMode0.uncheck(),this.buttonFogMode1.uncheck(),this.buttonFogMode2.check(),this.buttonFogMode3.uncheck();break;case 3:this.buttonFogMode0.uncheck(),this.buttonFogMode1.uncheck(),this.buttonFogMode2.uncheck(),this.buttonFogMode3.check();break;default:this.buttonFogMode0.check(),this.buttonFogMode1.uncheck(),this.buttonFogMode2.uncheck(),this.buttonFogMode3.uncheck()}switch(q("#fogstart").val(100*specs.fog_start_3D),q("#fogend").val(100*specs.fog_end_3D),q("#fogdensity").val(100*specs.fog_density_3D),specs.atoms_display?this.atomsDisplayToggle.check():this.atomsDisplayToggle.uncheck(),specs.atoms_useVDWDiameters_3D?(this.vdwToggle.check(),q("#spherediameter").prop("disabled",!0),q("#vdwMultiplier").prop("disabled",!1),q("#vdwMultiplier").val(100*specs.atoms_vdwMultiplier_3D)):(this.vdwToggle.uncheck(),q("#spherediameter").prop("disabled",!1),q("#spherediameter").val(specs.atoms_sphereDiameter_3D),q("#vdwMultiplier").prop("disabled",!0)),specs.atoms_useJMOLColors||specs.atoms_usePYMOLColors?(this.atomColorSetToggle.check(),this.atomColorSet.enable(),specs.atoms_useJMOLColors?(this.buttonJmolColors.check(),this.buttonPymolColors.uncheck()):specs.atoms_usePYMOLColors&&(this.buttonJmolColors.uncheck(),this.buttonPymolColors.check())):(this.atomColorSetToggle.uncheck(),this.buttonPymolColors.uncheck(),this.buttonJmolColors.uncheck(),this.atomColorSet.disable()),specs.atoms_nonBondedAsStars_3D?this.atomsNonBondedAsStarsToggle.check():this.atomsNonBondedAsStarsToggle.uncheck(),specs.atoms_displayLabels_3D?this.displayLabelsToggle.check():this.displayLabelsToggle.uncheck(),specs.bonds_display?this.bondsDisplayToggle.check():this.bondsDisplayToggle.uncheck(),specs.bonds_useJMOLColors||specs.bonds_usePYMOLColors?(this.bondColorSetToggle.check(),this.bondColorSet.enable(),specs.bonds_useJMOLColors?(this.buttonJmolBondColors.check(),this.buttonPymolBondColors.uncheck()):specs.atoms_usePYMOLColors&&(this.buttonJmolBondColors.uncheck(),this.buttonPymolBondColors.check())):(this.bondColorSetToggle.uncheck(),this.buttonPymolBondColors.uncheck(),this.buttonJmolBondColors.uncheck(),this.bondColorSet.disable()),specs.bonds_showBondOrders_3D?this.bondOrderToggle.check():this.bondOrderToggle.uncheck(),q("#cylinderdiameter").val(specs.bonds_cylinderDiameter_3D),specs.proteins_displayRibbon?this.ribbonsToggle.check():this.ribbonsToggle.uncheck(),specs.proteins_displayBackbone?this.backboneToggle.check():this.backboneToggle.uncheck(),specs.proteins_displayPipePlank?this.pipeplankToggle.check():this.pipeplankToggle.uncheck(),specs.proteins_ribbonCartoonize?this.cartoonizeToggle.check():this.cartoonizeToggle.uncheck(),specs.macro_colorByChain?this.colorByChainToggle.check():this.colorByChainToggle.uncheck(),specs.proteins_residueColor){case"amino":this.proteinColorToggle.check(),q("#proteinColors").val("amino");break;case"shapely":this.proteinColorToggle.check(),q("#proteinColors").val("shapely");break;case"polarity":this.proteinColorToggle.check(),q("#proteinColors").val("polarity");break;case"rainbow":this.proteinColorToggle.check(),q("#proteinColors").val("rainbow");break;case"acidity":this.proteinColorToggle.check(),q("#proteinColors").val("acidity");break;case"none":default:this.proteinColorToggle.uncheck(),q("#proteinColors").prop("disabled",!0)}switch(specs.nucleics_residueColor){case"shapely":this.nucleicAcidColorToggle.check(),q("#nucleicColors").val("shapely");break;case"rainbow":this.nucleicAcidColorToggle.check(),q("#nucleicColors").val("rainbow");break;case"none":default:this.nucleicAcidColorToggle.uncheck(),q("#nucleicColors").prop("disabled",!0)}1==specs.compass_display?(this.compassPositionSet.enable(),0==specs.compass_type_3D?(this.buttonCompassCorner.check(),this.buttonCompassOrigin.uncheck()):(this.buttonCompassOrigin.check(),this.buttonCompassCorner.uncheck())):(this.compassPositionSet.disable(),this.buttonCompassCorner.uncheck(),this.buttonCompassOrigin.uncheck())}}(ChemDoodle,ChemDoodle.uis.gui.desktop,ChemDoodle.lib.jQuery,document),function(c,extensions,featureDetection,d3,sketcherPack,structures,tools,q,m,m4,window){"use strict";c.EditorCanvas3D=function(id,width,height,options){if(this.isMobile=void 0===options.isMobile?featureDetection.supports_touch():options.isMobile,this.useServices=void 0===options.useServices?!1:options.useServices,this.includeToolbar=void 0===options.includeToolbar?!0:options.includeToolbar,this.oneMolecule=!0,this.id=id,this.toolbarManager=new sketcherPack.gui.ToolbarManager3D(this),this.includeToolbar){this.toolbarManager.write();var self=this;document.getElementById(this.id)?q("#"+id+"_button_calculate").load(function(){
self.toolbarManager.setup()}):q(window).load(function(){self.toolbarManager.setup()}),this.dialogManager=new sketcherPack.gui.DialogManager(this)}this.stateManager=new sketcherPack.states.StateManager3D(this),this.historyManager=new sketcherPack.actions.HistoryManager(this),id&&this.create(id,width,height);var helpSpecs=new structures.VisualSpecifications;helpSpecs.atoms_useVDWDiameters_3D=!1,helpSpecs.atoms_sphereDiameter_3D=2,this.helpButton=new structures.Atom("C",0,0,0),this.helpButton.isHover=!0,this.helpButton.specs=helpSpecs,this.specs.backgroundColor="#000",this.specs.shapes_color="#fff",this.isHelp=!1,this.setupScene(),this.repaint()};var _=c.EditorCanvas3D.prototype=new c._Canvas3D;_.defaultmousedown=_.mousedown,_.defaultmouseup=_.mouseup,_.defaultrightmousedown=_.rightmousedown,_.defaultdrag=_.drag,_.defaultmousewheel=_.mousewheel,_.drawChildExtras=function(gl){var pUniform=gl.getUniformLocation(gl.program,"u_projection_matrix"),translationMatrix=m4.create(),textImage=new d3.TextImage;textImage.init(gl);var textMesh=new d3.TextMesh;textMesh.init(gl);var height=this.height/20,tanTheta=m.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*m.PI),depth=height/tanTheta,near=m.max(depth-height,.1),far=depth+height,aspec=this.width/this.height,nearRatio=depth/this.height*tanTheta,top=tanTheta*depth,bottom=-top,left=aspec*bottom,right=aspec*top,projectionMatrix=m4.ortho(left,right,bottom,top,near,far,[]);if(gl.uniformMatrix4fv(pUniform,!1,projectionMatrix),gl.fogging.setMode(0),!this.hideHelp){var posX=(this.width-40)*nearRatio,posY=(this.height-40)*nearRatio;m4.translate(m4.identity([]),[posX,posY,-depth],translationMatrix),gl.material.setTempColors(this.specs.bonds_materialAmbientColor_3D,void 0,this.specs.bonds_materialSpecularColor_3D,this.specs.bonds_materialShininess_3D),gl.material.setDiffuseColor("#00ff00"),gl.modelViewMatrix=m4.multiply(translationMatrix,gl.rotationMatrix,[]),gl.sphereBuffer.bindBuffers(this.gl),this.helpButton.render(gl,void 0,!0),this.isHelp&&(gl.sphereBuffer.bindBuffers(gl),gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.material.setTempColors("#000000",void 0,"#000000",0),gl.enable(gl.BLEND),gl.depthMask(!1),gl.material.setAlpha(.4),this.helpButton.renderHighlight(gl,void 0),gl.depthMask(!0),gl.disable(gl.BLEND),gl.blendFuncSeparate(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA,gl.ONE,gl.ONE_MINUS_SRC_ALPHA)),gl.enable(gl.BLEND),gl.depthMask(!1),textImage.updateFont(gl,14.1,["sans-serif"],!1,!1,!0),textImage.useTexture(gl);var vertexData={position:[],texCoord:[],translation:[]};textImage.pushVertexData("?",[0,0,0],0,vertexData),textMesh.storeData(gl,vertexData.position,vertexData.texCoord,vertexData.translation),gl.enableVertexAttribArray(gl.shader.vertexTexCoordAttribute);var modelMatrix=m4.multiply(translationMatrix,m4.identity([]),[]);gl.setMatrixUniforms(modelMatrix),textImage.useTexture(gl),textMesh.render(gl),gl.disableVertexAttribArray(gl.shader.vertexTexCoordAttribute),gl.disable(gl.BLEND),gl.depthMask(!0)}if(!this.paidToHideTrademark){var x="ChemDoodle";gl.enable(this.gl.BLEND),gl.enableVertexAttribArray(gl.shader.vertexTexCoordAttribute),textImage.updateFont(gl,14.1,["sans-serif"],!1,!1,!0),textImage.useTexture(gl);var width=textImage.textWidth(x),vertexData={position:[],texCoord:[],translation:[]};textImage.pushVertexData(x,[0,0,0],0,vertexData),textMesh.storeData(gl,vertexData.position,vertexData.texCoord,vertexData.translation);var posX=(this.width-width-30)*nearRatio,posY=(-this.height+24)*nearRatio;m4.translate(m4.identity([]),[posX,posY,-depth],translationMatrix);var modelMatrix=m4.multiply(translationMatrix,gl.rotationMatrix,[]);gl.setMatrixUniforms(modelMatrix),textMesh.render(gl),textImage.updateFont(gl,8,["sans-serif"],!1,!1,!0),textImage.useTexture(gl);var vertexData={position:[],texCoord:[],translation:[]};textImage.pushVertexData("Â®",[0,0,0],0,vertexData),textMesh.storeData(gl,vertexData.position,vertexData.texCoord,vertexData.translation);var posX=(this.width-24)*nearRatio,posY=(-this.height+30)*nearRatio;m4.translate(m4.identity([]),[posX,posY,-depth],translationMatrix);var modelMatrix=m4.multiply(translationMatrix,gl.rotationMatrix,[]);gl.setMatrixUniforms(modelMatrix),textMesh.render(gl),gl.disableVertexAttribArray(gl.shader.vertexTexCoordAttribute),gl.disable(gl.BLEND)}},_.click=function(e){this.stateManager.getCurrentState().click(e)},_.rightclick=function(e){this.stateManager.getCurrentState().rightclick(e)},_.dblclick=function(e){this.stateManager.getCurrentState().dblclick(e)},_.mousedown=function(e){this.stateManager.getCurrentState().mousedown(e)},_.rightmousedown=function(e){this.stateManager.getCurrentState().rightmousedown(e)},_.mousemove=function(e){this.isHelp=!1,e.p.distance(new structures.Point(this.width-20,20))<10&&(this.isHelp=!0),this.stateManager.getCurrentState().mousemove(e)},_.mouseout=function(e){this.stateManager.getCurrentState().mouseout(e)},_.mouseover=function(e){this.stateManager.getCurrentState().mouseover(e)},_.mouseup=function(e){this.stateManager.getCurrentState().mouseup(e)},_.rightmouseup=function(e){this.stateManager.getCurrentState().rightmouseup(e)},_.mousewheel=function(e,delta){this.stateManager.getCurrentState().mousewheel(e,delta)},_.drag=function(e){this.stateManager.getCurrentState().drag(e)},_.keydown=function(e){this.stateManager.getCurrentState().keydown(e)},_.keypress=function(e){this.stateManager.getCurrentState().keypress(e)},_.keyup=function(e){this.stateManager.getCurrentState().keyup(e)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.featureDetection,ChemDoodle.structures.d3,ChemDoodle.uis,ChemDoodle.structures,ChemDoodle.uis.tools,ChemDoodle.lib.jQuery,Math,ChemDoodle.lib.mat4,window);